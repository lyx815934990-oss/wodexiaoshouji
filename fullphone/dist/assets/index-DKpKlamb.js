(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))V(O);new MutationObserver(O=>{for(const y of O)if(y.type==="childList")for(const N of y.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&V(N)}).observe(document,{childList:!0,subtree:!0});function c(O){const y={};return O.integrity&&(y.integrity=O.integrity),O.referrerPolicy&&(y.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?y.credentials="include":O.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function V(O){if(O.ep)return;O.ep=!0;const y=c(O);fetch(O.href,y)}})();function ed(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Ya={exports:{}},oi={},Xa={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu;function Rm(){if(Nu)return Ze;Nu=1;var f=Symbol.for("react.element"),g=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),N=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),P=Symbol.iterator;function _(m){return m===null||typeof m!="object"?null:(m=P&&m[P]||m["@@iterator"],typeof m=="function"?m:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,H={};function se(m,$,k){this.props=m,this.context=$,this.refs=H,this.updater=k||X}se.prototype.isReactComponent={},se.prototype.setState=function(m,$){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,$,"setState")},se.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function fe(){}fe.prototype=se.prototype;function q(m,$,k){this.props=m,this.context=$,this.refs=H,this.updater=k||X}var Ae=q.prototype=new fe;Ae.constructor=q,I(Ae,se.prototype),Ae.isPureReactComponent=!0;var Le=Array.isArray,xe=Object.prototype.hasOwnProperty,u={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function ye(m,$,k){var _e,pe={},Xe=null,Ye=null;if($!=null)for(_e in $.ref!==void 0&&(Ye=$.ref),$.key!==void 0&&(Xe=""+$.key),$)xe.call($,_e)&&!ae.hasOwnProperty(_e)&&(pe[_e]=$[_e]);var qe=arguments.length-2;if(qe===1)pe.children=k;else if(1<qe){for(var v=Array(qe),ie=0;ie<qe;ie++)v[ie]=arguments[ie+2];pe.children=v}if(m&&m.defaultProps)for(_e in qe=m.defaultProps,qe)pe[_e]===void 0&&(pe[_e]=qe[_e]);return{$$typeof:f,type:m,key:Xe,ref:Ye,props:pe,_owner:u.current}}function nt(m,$){return{$$typeof:f,type:m.type,key:$,ref:m.ref,props:m.props,_owner:m._owner}}function Ge(m){return typeof m=="object"&&m!==null&&m.$$typeof===f}function at(m){var $={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(k){return $[k]})}var Ne=/\/+/g;function F(m,$){return typeof m=="object"&&m!==null&&m.key!=null?at(""+m.key):$.toString(36)}function K(m,$,k,_e,pe){var Xe=typeof m;(Xe==="undefined"||Xe==="boolean")&&(m=null);var Ye=!1;if(m===null)Ye=!0;else switch(Xe){case"string":case"number":Ye=!0;break;case"object":switch(m.$$typeof){case f:case g:Ye=!0}}if(Ye)return Ye=m,pe=pe(Ye),m=_e===""?"."+F(Ye,0):_e,Le(pe)?(k="",m!=null&&(k=m.replace(Ne,"$&/")+"/"),K(pe,$,k,"",function(ie){return ie})):pe!=null&&(Ge(pe)&&(pe=nt(pe,k+(!pe.key||Ye&&Ye.key===pe.key?"":(""+pe.key).replace(Ne,"$&/")+"/")+m)),$.push(pe)),1;if(Ye=0,_e=_e===""?".":_e+":",Le(m))for(var qe=0;qe<m.length;qe++){Xe=m[qe];var v=_e+F(Xe,qe);Ye+=K(Xe,$,k,v,pe)}else if(v=_(m),typeof v=="function")for(m=v.call(m),qe=0;!(Xe=m.next()).done;)Xe=Xe.value,v=_e+F(Xe,qe++),Ye+=K(Xe,$,k,v,pe);else if(Xe==="object")throw $=String(m),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ye}function re(m,$,k){if(m==null)return m;var _e=[],pe=0;return K(m,_e,"","",function(Xe){return $.call(k,Xe,pe++)}),_e}function T(m){if(m._status===-1){var $=m._result;$=$(),$.then(function(k){(m._status===0||m._status===-1)&&(m._status=1,m._result=k)},function(k){(m._status===0||m._status===-1)&&(m._status=2,m._result=k)}),m._status===-1&&(m._status=0,m._result=$)}if(m._status===1)return m._result.default;throw m._result}var R={current:null},j={transition:null},A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:j,ReactCurrentOwner:u};function B(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:re,forEach:function(m,$,k){re(m,function(){$.apply(this,arguments)},k)},count:function(m){var $=0;return re(m,function(){$++}),$},toArray:function(m){return re(m,function($){return $})||[]},only:function(m){if(!Ge(m))throw Error("React.Children.only expected to receive a single React element child.");return m}},Ze.Component=se,Ze.Fragment=c,Ze.Profiler=O,Ze.PureComponent=q,Ze.StrictMode=V,Ze.Suspense=L,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,Ze.act=B,Ze.cloneElement=function(m,$,k){if(m==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+m+".");var _e=I({},m.props),pe=m.key,Xe=m.ref,Ye=m._owner;if($!=null){if($.ref!==void 0&&(Xe=$.ref,Ye=u.current),$.key!==void 0&&(pe=""+$.key),m.type&&m.type.defaultProps)var qe=m.type.defaultProps;for(v in $)xe.call($,v)&&!ae.hasOwnProperty(v)&&(_e[v]=$[v]===void 0&&qe!==void 0?qe[v]:$[v])}var v=arguments.length-2;if(v===1)_e.children=k;else if(1<v){qe=Array(v);for(var ie=0;ie<v;ie++)qe[ie]=arguments[ie+2];_e.children=qe}return{$$typeof:f,type:m.type,key:pe,ref:Xe,props:_e,_owner:Ye}},Ze.createContext=function(m){return m={$$typeof:N,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},m.Provider={$$typeof:y,_context:m},m.Consumer=m},Ze.createElement=ye,Ze.createFactory=function(m){var $=ye.bind(null,m);return $.type=m,$},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(m){return{$$typeof:z,render:m}},Ze.isValidElement=Ge,Ze.lazy=function(m){return{$$typeof:W,_payload:{_status:-1,_result:m},_init:T}},Ze.memo=function(m,$){return{$$typeof:C,type:m,compare:$===void 0?null:$}},Ze.startTransition=function(m){var $=j.transition;j.transition={};try{m()}finally{j.transition=$}},Ze.unstable_act=B,Ze.useCallback=function(m,$){return R.current.useCallback(m,$)},Ze.useContext=function(m){return R.current.useContext(m)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(m){return R.current.useDeferredValue(m)},Ze.useEffect=function(m,$){return R.current.useEffect(m,$)},Ze.useId=function(){return R.current.useId()},Ze.useImperativeHandle=function(m,$,k){return R.current.useImperativeHandle(m,$,k)},Ze.useInsertionEffect=function(m,$){return R.current.useInsertionEffect(m,$)},Ze.useLayoutEffect=function(m,$){return R.current.useLayoutEffect(m,$)},Ze.useMemo=function(m,$){return R.current.useMemo(m,$)},Ze.useReducer=function(m,$,k){return R.current.useReducer(m,$,k)},Ze.useRef=function(m){return R.current.useRef(m)},Ze.useState=function(m){return R.current.useState(m)},Ze.useSyncExternalStore=function(m,$,k){return R.current.useSyncExternalStore(m,$,k)},Ze.useTransition=function(){return R.current.useTransition()},Ze.version="18.3.1",Ze}var Su;function oo(){return Su||(Su=1,Xa.exports=Rm()),Xa.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku;function Om(){if(ku)return oi;ku=1;var f=oo(),g=Symbol.for("react.element"),c=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,O=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function N(z,L,C){var W,P={},_=null,X=null;C!==void 0&&(_=""+C),L.key!==void 0&&(_=""+L.key),L.ref!==void 0&&(X=L.ref);for(W in L)V.call(L,W)&&!y.hasOwnProperty(W)&&(P[W]=L[W]);if(z&&z.defaultProps)for(W in L=z.defaultProps,L)P[W]===void 0&&(P[W]=L[W]);return{$$typeof:g,type:z,key:_,ref:X,props:P,_owner:O.current}}return oi.Fragment=c,oi.jsx=N,oi.jsxs=N,oi}var bu;function Am(){return bu||(bu=1,Ya.exports=Om()),Ya.exports}var s=Am(),w=oo();const Lm=ed(w);var fl={},Za={exports:{}},Xt={},qa={exports:{}},eo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu;function zm(){return Cu||(Cu=1,(function(f){function g(j,A){var B=j.length;j.push(A);e:for(;0<B;){var m=B-1>>>1,$=j[m];if(0<O($,A))j[m]=A,j[B]=$,B=m;else break e}}function c(j){return j.length===0?null:j[0]}function V(j){if(j.length===0)return null;var A=j[0],B=j.pop();if(B!==A){j[0]=B;e:for(var m=0,$=j.length,k=$>>>1;m<k;){var _e=2*(m+1)-1,pe=j[_e],Xe=_e+1,Ye=j[Xe];if(0>O(pe,B))Xe<$&&0>O(Ye,pe)?(j[m]=Ye,j[Xe]=B,m=Xe):(j[m]=pe,j[_e]=B,m=_e);else if(Xe<$&&0>O(Ye,B))j[m]=Ye,j[Xe]=B,m=Xe;else break e}}return A}function O(j,A){var B=j.sortIndex-A.sortIndex;return B!==0?B:j.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;f.unstable_now=function(){return y.now()}}else{var N=Date,z=N.now();f.unstable_now=function(){return N.now()-z}}var L=[],C=[],W=1,P=null,_=3,X=!1,I=!1,H=!1,se=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ae(j){for(var A=c(C);A!==null;){if(A.callback===null)V(C);else if(A.startTime<=j)V(C),A.sortIndex=A.expirationTime,g(L,A);else break;A=c(C)}}function Le(j){if(H=!1,Ae(j),!I)if(c(L)!==null)I=!0,T(xe);else{var A=c(C);A!==null&&R(Le,A.startTime-j)}}function xe(j,A){I=!1,H&&(H=!1,fe(ye),ye=-1),X=!0;var B=_;try{for(Ae(A),P=c(L);P!==null&&(!(P.expirationTime>A)||j&&!at());){var m=P.callback;if(typeof m=="function"){P.callback=null,_=P.priorityLevel;var $=m(P.expirationTime<=A);A=f.unstable_now(),typeof $=="function"?P.callback=$:P===c(L)&&V(L),Ae(A)}else V(L);P=c(L)}if(P!==null)var k=!0;else{var _e=c(C);_e!==null&&R(Le,_e.startTime-A),k=!1}return k}finally{P=null,_=B,X=!1}}var u=!1,ae=null,ye=-1,nt=5,Ge=-1;function at(){return!(f.unstable_now()-Ge<nt)}function Ne(){if(ae!==null){var j=f.unstable_now();Ge=j;var A=!0;try{A=ae(!0,j)}finally{A?F():(u=!1,ae=null)}}else u=!1}var F;if(typeof q=="function")F=function(){q(Ne)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,re=K.port2;K.port1.onmessage=Ne,F=function(){re.postMessage(null)}}else F=function(){se(Ne,0)};function T(j){ae=j,u||(u=!0,F())}function R(j,A){ye=se(function(){j(f.unstable_now())},A)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(j){j.callback=null},f.unstable_continueExecution=function(){I||X||(I=!0,T(xe))},f.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<j?Math.floor(1e3/j):5},f.unstable_getCurrentPriorityLevel=function(){return _},f.unstable_getFirstCallbackNode=function(){return c(L)},f.unstable_next=function(j){switch(_){case 1:case 2:case 3:var A=3;break;default:A=_}var B=_;_=A;try{return j()}finally{_=B}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(j,A){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=_;_=j;try{return A()}finally{_=B}},f.unstable_scheduleCallback=function(j,A,B){var m=f.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?m+B:m):B=m,j){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=B+$,j={id:W++,callback:A,priorityLevel:j,startTime:B,expirationTime:$,sortIndex:-1},B>m?(j.sortIndex=B,g(C,j),c(L)===null&&j===c(C)&&(H?(fe(ye),ye=-1):H=!0,R(Le,B-m))):(j.sortIndex=$,g(L,j),I||X||(I=!0,T(xe))),j},f.unstable_shouldYield=at,f.unstable_wrapCallback=function(j){var A=_;return function(){var B=_;_=A;try{return j.apply(this,arguments)}finally{_=B}}}})(eo)),eo}var Eu;function Dm(){return Eu||(Eu=1,qa.exports=zm()),qa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu;function Um(){if(Iu)return Xt;Iu=1;var f=oo(),g=Dm();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V=new Set,O={};function y(e,t){N(e,t),N(e+"Capture",t)}function N(e,t){for(O[e]=t,e=0;e<t.length;e++)V.add(t[e])}var z=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W={},P={};function _(e){return L.call(P,e)?!0:L.call(W,e)?!1:C.test(e)?P[e]=!0:(W[e]=!0,!1)}function X(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function I(e,t,n,r){if(t===null||typeof t>"u"||X(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function H(e,t,n,r,i,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){se[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];se[t]=new H(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){se[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){se[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){se[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){se[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){se[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){se[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){se[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fe,q);se[t]=new H(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fe,q);se[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fe,q);se[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){se[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),se.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){se[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ae(e,t,n,r){var i=se.hasOwnProperty(t)?se[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(I(t,n,i,r)&&(n=null),r||i===null?_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Le=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),u=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),Ge=Symbol.for("react.provider"),at=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),j=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var B=Object.assign,m;function $(e){if(m===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);m=t&&t[1]||""}return`
`+m+e}var k=!1;function _e(e,t){if(!e||k)return"";k=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var r=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){r=M}e.call(t.prototype)}else{try{throw Error()}catch(M){r=M}e()}}catch(M){if(M&&r&&typeof M.stack=="string"){for(var i=M.stack.split(`
`),l=r.stack.split(`
`),a=i.length-1,d=l.length-1;1<=a&&0<=d&&i[a]!==l[d];)d--;for(;1<=a&&0<=d;a--,d--)if(i[a]!==l[d]){if(a!==1||d!==1)do if(a--,d--,0>d||i[a]!==l[d]){var h=`
`+i[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=d);break}}}finally{k=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function pe(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=_e(e.type,!1),e;case 11:return e=_e(e.type.render,!1),e;case 1:return e=_e(e.type,!0),e;default:return""}}function Xe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ae:return"Fragment";case u:return"Portal";case nt:return"Profiler";case ye:return"StrictMode";case F:return"Suspense";case K:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case at:return(e.displayName||"Context")+".Consumer";case Ge:return(e._context.displayName||"Context")+".Provider";case Ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:Xe(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return Xe(e(t))}catch{}}return null}function Ye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xe(t);case 8:return t===ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function v(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ie(e){var t=v(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ke(e){e._valueTracker||(e._valueTracker=ie(e))}function ze(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=v(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Je(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function je(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vt(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qe(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bt(e,t){t=t.checked,t!=null&&Ae(e,"checked",t,!1)}function S(e,t){bt(e,t);var n=qe(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ue(e,t.type,n):t.hasOwnProperty("defaultValue")&&ue(e,t.type,qe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function me(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ue(e,t,n){(t!=="number"||Je(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var le=Array.isArray;function Qe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qe(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ut(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if(le(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qe(n)}}function xn(e,t){var n=qe(t.value),r=qe(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function vn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yn,wn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Un(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(e){Nn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jn[t]=jn[e]})});function jr(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jn.hasOwnProperty(e)&&jn[e]?(""+t).trim():t+"px"}function mi(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jr(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var jl=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Js(e,t){if(t){if(jl[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function dt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nr=null;function Vt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sr=null,es=null,Fn=null;function kr(e){if(e=Jr(e)){if(typeof Sr!="function")throw Error(c(280));var t=e.stateNode;t&&(t=Ti(t),Sr(e.stateNode,e.type,t))}}function Ss(e){es?Fn?Fn.push(e):Fn=[e]:es=e}function hi(){if(es){var e=es,t=Fn;if(Fn=es=null,kr(e),t)for(e=0;e<t.length;e++)kr(t[e])}}function Wn(e,t){return e(t)}function fi(){}var br=!1;function Cr(e,t,n){if(br)return e(t,n);br=!0;try{return Wn(e,t,n)}finally{br=!1,(es!==null||Fn!==null)&&(fi(),hi())}}function an(e,t){var n=e.stateNode;if(n===null)return null;var r=Ti(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Gs=!1;if(z)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{Gs=!1}function pi(e,t,n,r,i,l,a,d,h){var M=Array.prototype.slice.call(arguments,3);try{t.apply(n,M)}catch(Y){this.onError(Y)}}var wt=!1,qt=null,ns=!1,$n=null,gi={onError:function(e){wt=!0,qt=e}};function Hn(e,t,n,r,i,l,a,d,h){wt=!1,qt=null,pi.apply(gi,arguments)}function Nl(e,t,n,r,i,l,a,d,h){if(Hn.apply(this,arguments),wt){if(wt){var M=qt;wt=!1,qt=null}else throw Error(c(198));ns||(ns=!0,$n=M)}}function on(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Nt(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function en(e){if(on(e)!==e)throw Error(c(188))}function Sn(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return en(i),e;if(l===r)return en(i),t;l=l.sibling}throw Error(c(188))}if(n.return!==r.return)n=i,r=l;else{for(var a=!1,d=i.child;d;){if(d===n){a=!0,n=i,r=l;break}if(d===r){a=!0,r=i,n=l;break}d=d.sibling}if(!a){for(d=l.child;d;){if(d===n){a=!0,n=l,r=i;break}if(d===r){a=!0,r=l,n=i;break}d=d.sibling}if(!a)throw Error(c(189))}}if(n.alternate!==r)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function xi(e){return e=Sn(e),e!==null?vi(e):null}function vi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vi(e);if(t!==null)return t;e=e.sibling}return null}var yi=g.unstable_scheduleCallback,ss=g.unstable_cancelCallback,Qs=g.unstable_shouldYield,Er=g.unstable_requestPaint,rt=g.unstable_now,Bn=g.unstable_getCurrentPriorityLevel,Ir=g.unstable_ImmediatePriority,Tr=g.unstable_UserBlockingPriority,ks=g.unstable_NormalPriority,ft=g.unstable_LowPriority,bs=g.unstable_IdlePriority,kn=null,cn=null;function Cs(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(kn,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:bl,Sl=Math.log,kl=Math.LN2;function bl(e){return e>>>=0,e===0?32:31-(Sl(e)/kl|0)|0}var Es=64,Ys=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var d=a&~i;d!==0?r=Is(d):(l&=a,l!==0&&(r=Is(l)))}else a=n&~i,a!==0?r=Is(a):l!==0&&(r=Is(l));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tn(t),i=1<<n,r|=e[n],t&=~i;return r}function Pr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cl(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-tn(l),d=1<<a,h=i[a];h===-1?((d&n)===0||(d&r)!==0)&&(i[a]=Pr(d,t)):h<=t&&(e.expiredLanes|=d),l&=~d}}function _r(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wi(){var e=Es;return Es<<=1,(Es&4194240)===0&&(Es=64),e}function Mr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ts(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function El(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tn(n),l=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~l}}function Rn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var st=0;function $r(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Rr,Or,Ar,ji,Lr,Zs=!1,Ps=[],o=null,p=null,U=null,D=new Map,J=new Map,oe=[],Ce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oe(e,t){switch(e){case"focusin":case"focusout":o=null;break;case"dragenter":case"dragleave":p=null;break;case"mouseover":case"mouseout":U=null;break;case"pointerover":case"pointerout":D.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":J.delete(t.pointerId)}}function He(e,t,n,r,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[i]},t!==null&&(t=Jr(t),t!==null&&Or(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ee(e,t,n,r,i){switch(t){case"focusin":return o=He(o,e,t,n,r,i),!0;case"dragenter":return p=He(p,e,t,n,r,i),!0;case"mouseover":return U=He(U,e,t,n,r,i),!0;case"pointerover":var l=i.pointerId;return D.set(l,He(D.get(l)||null,e,t,n,r,i)),!0;case"gotpointercapture":return l=i.pointerId,J.set(l,He(J.get(l)||null,e,t,n,r,i)),!0}return!1}function Re(e){var t=$s(e.target);if(t!==null){var n=on(t);if(n!==null){if(t=n.tag,t===13){if(t=Nt(n),t!==null){e.blockedOn=t,Lr(e.priority,function(){Ar(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ce(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$e(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Nr=r,n.target.dispatchEvent(r),Nr=null}else return t=Jr(n),t!==null&&Or(t),e.blockedOn=n,!1;t.shift()}return!0}function ne(e,t,n){ce(e)&&n.delete(t)}function et(){Zs=!1,o!==null&&ce(o)&&(o=null),p!==null&&ce(p)&&(p=null),U!==null&&ce(U)&&(U=null),D.forEach(ne),J.forEach(ne)}function Fe(e,t){e.blockedOn===t&&(e.blockedOn=null,Zs||(Zs=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,et)))}function We(e){function t(i){return Fe(i,e)}if(0<Ps.length){Fe(Ps[0],e);for(var n=1;n<Ps.length;n++){var r=Ps[n];r.blockedOn===e&&(r.blockedOn=null)}}for(o!==null&&Fe(o,e),p!==null&&Fe(p,e),U!==null&&Fe(U,e),D.forEach(t),J.forEach(t),n=0;n<oe.length;n++)r=oe[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<oe.length&&(n=oe[0],n.blockedOn===null);)Re(n),n.blockedOn===null&&oe.shift()}var Pe=Le.ReactCurrentBatchConfig,te=!0;function Se(e,t,n,r){var i=st,l=Pe.transition;Pe.transition=null;try{st=1,tt(e,t,n,r)}finally{st=i,Pe.transition=l}}function Me(e,t,n,r){var i=st,l=Pe.transition;Pe.transition=null;try{st=4,tt(e,t,n,r)}finally{st=i,Pe.transition=l}}function tt(e,t,n,r){if(te){var i=$e(e,t,n,r);if(i===null)Ul(e,t,r,he,n),Oe(e,r);else if(Ee(i,e,t,n,r))r.stopPropagation();else if(Oe(e,r),t&4&&-1<Ce.indexOf(e)){for(;i!==null;){var l=Jr(i);if(l!==null&&Rr(l),l=$e(e,t,n,r),l===null&&Ul(e,t,r,he,n),l===i)break;i=l}i!==null&&r.stopPropagation()}else Ul(e,t,r,null,n)}}var he=null;function $e(e,t,n,r){if(he=null,e=Vt(r),e=$s(e),e!==null)if(t=on(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Nt(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return he=e,null}function Be(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bn()){case Ir:return 1;case Tr:return 4;case ks:case ft:return 16;case bs:return 536870912;default:return 16}default:return 16}}var de=null,G=null,ke=null;function ot(){if(ke)return ke;var e,t=G,n=t.length,r,i="value"in de?de.value:de.textContent,l=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[l-r];r++);return ke=i.slice(e,1<r?1-r:void 0)}function Rt(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function St(){return!0}function Ft(){return!1}function Ct(e){function t(n,r,i,l,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?St:Ft,this.isPropagationStopped=Ft,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=St)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=St)},persist:function(){},isPersistent:St}),t}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=Ct(bn),is=B({},bn,{view:0,detail:0}),ls=Ct(is),_s,un,Vn,Ms=B({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(_s=e.screenX-Vn.screenX,un=e.screenY-Vn.screenY):un=_s=0,Vn=e),_s)},movementY:function(e){return"movementY"in e?e.movementY:un}}),uo=Ct(Ms),od=B({},Ms,{dataTransfer:0}),cd=Ct(od),ud=B({},is,{relatedTarget:0}),Il=Ct(ud),dd=B({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),md=Ct(dd),hd=B({},bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fd=Ct(hd),pd=B({},bn,{data:0}),mo=Ct(pd),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vd[e])?!!t[e]:!1}function Tl(){return yd}var wd=B({},is,{key:function(e){if(e.key){var t=gd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(e){return e.type==="keypress"?Rt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jd=Ct(wd),Nd=B({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ho=Ct(Nd),Sd=B({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),kd=Ct(Sd),bd=B({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cd=Ct(bd),Ed=B({},Ms,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Id=Ct(Ed),Td=[9,13,27,32],Pl=z&&"CompositionEvent"in window,zr=null;z&&"documentMode"in document&&(zr=document.documentMode);var Pd=z&&"TextEvent"in window&&!zr,fo=z&&(!Pl||zr&&8<zr&&11>=zr),po=" ",go=!1;function xo(e,t){switch(e){case"keyup":return Td.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function _d(e,t){switch(e){case"compositionend":return vo(t);case"keypress":return t.which!==32?null:(go=!0,po);case"textInput":return e=t.data,e===po&&go?null:e;default:return null}}function Md(e,t){if(qs)return e==="compositionend"||!Pl&&xo(e,t)?(e=ot(),ke=G=de=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fo&&t.locale!=="ko"?null:t.data;default:return null}}var $d={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$d[e.type]:t==="textarea"}function wo(e,t,n,r){Ss(r),t=Ci(t,"onChange"),0<t.length&&(n=new rs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dr=null,Ur=null;function Rd(e){zo(e,0)}function Ni(e){var t=rr(e);if(ze(t))return e}function Od(e,t){if(e==="change")return t}var jo=!1;if(z){var _l;if(z){var Ml="oninput"in document;if(!Ml){var No=document.createElement("div");No.setAttribute("oninput","return;"),Ml=typeof No.oninput=="function"}_l=Ml}else _l=!1;jo=_l&&(!document.documentMode||9<document.documentMode)}function So(){Dr&&(Dr.detachEvent("onpropertychange",ko),Ur=Dr=null)}function ko(e){if(e.propertyName==="value"&&Ni(Ur)){var t=[];wo(t,Ur,e,Vt(e)),Cr(Rd,t)}}function Ad(e,t,n){e==="focusin"?(So(),Dr=t,Ur=n,Dr.attachEvent("onpropertychange",ko)):e==="focusout"&&So()}function Ld(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ni(Ur)}function zd(e,t){if(e==="click")return Ni(t)}function Dd(e,t){if(e==="input"||e==="change")return Ni(t)}function Ud(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:Ud;function Fr(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L.call(t,i)||!Cn(e[i],t[i]))return!1}return!0}function bo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Co(e,t){var n=bo(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bo(n)}}function Eo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Eo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Io(){for(var e=window,t=Je();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Je(e.document)}return t}function $l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fd(e){var t=Io(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Eo(n.ownerDocument.documentElement,n)){if(r!==null&&$l(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,l=Math.min(r.start,i);r=r.end===void 0?l:Math.min(r.end,i),!e.extend&&l>r&&(i=r,r=l,l=i),i=Co(n,l);var a=Co(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wd=z&&"documentMode"in document&&11>=document.documentMode,er=null,Rl=null,Wr=null,Ol=!1;function To(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ol||er==null||er!==Je(r)||(r=er,"selectionStart"in r&&$l(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wr&&Fr(Wr,r)||(Wr=r,r=Ci(Rl,"onSelect"),0<r.length&&(t=new rs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=er)))}function Si(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tr={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},Al={},Po={};z&&(Po=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function ki(e){if(Al[e])return Al[e];if(!tr[e])return e;var t=tr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Po)return Al[e]=t[n];return e}var _o=ki("animationend"),Mo=ki("animationiteration"),$o=ki("animationstart"),Ro=ki("transitionend"),Oo=new Map,Ao="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function as(e,t){Oo.set(e,t),y(t,[e])}for(var Ll=0;Ll<Ao.length;Ll++){var zl=Ao[Ll],Hd=zl.toLowerCase(),Bd=zl[0].toUpperCase()+zl.slice(1);as(Hd,"on"+Bd)}as(_o,"onAnimationEnd"),as(Mo,"onAnimationIteration"),as($o,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(Ro,"onTransitionEnd"),N("onMouseEnter",["mouseout","mouseover"]),N("onMouseLeave",["mouseout","mouseover"]),N("onPointerEnter",["pointerout","pointerover"]),N("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Lo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Nl(r,t,void 0,e),e.currentTarget=null}function zo(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var d=r[a],h=d.instance,M=d.currentTarget;if(d=d.listener,h!==l&&i.isPropagationStopped())break e;Lo(i,d,M),l=h}else for(a=0;a<r.length;a++){if(d=r[a],h=d.instance,M=d.currentTarget,d=d.listener,h!==l&&i.isPropagationStopped())break e;Lo(i,d,M),l=h}}}if(ns)throw e=$n,ns=!1,$n=null,e}function mt(e,t){var n=t[Kl];n===void 0&&(n=t[Kl]=new Set);var r=e+"__bubble";n.has(r)||(Do(t,e,2,!1),n.add(r))}function Dl(e,t,n){var r=0;t&&(r|=4),Do(n,e,r,t)}var bi="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[bi]){e[bi]=!0,V.forEach(function(n){n!=="selectionchange"&&(Vd.has(n)||Dl(n,!1,e),Dl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bi]||(t[bi]=!0,Dl("selectionchange",!1,t))}}function Do(e,t,n,r){switch(Be(t)){case 1:var i=Se;break;case 4:i=Me;break;default:i=tt}n=i.bind(null,t,n,e),i=void 0,!Gs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ul(e,t,n,r,i){var l=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;d!==null;){if(a=$s(d),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}d=d.parentNode}}r=r.return}Cr(function(){var M=l,Y=Vt(n),Z=[];e:{var Q=Oo.get(e);if(Q!==void 0){var ge=rs,we=e;switch(e){case"keypress":if(Rt(n)===0)break e;case"keydown":case"keyup":ge=jd;break;case"focusin":we="focus",ge=Il;break;case"focusout":we="blur",ge=Il;break;case"beforeblur":case"afterblur":ge=Il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=kd;break;case _o:case Mo:case $o:ge=md;break;case Ro:ge=Cd;break;case"scroll":ge=ls;break;case"wheel":ge=Id;break;case"copy":case"cut":case"paste":ge=fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=ho}var be=(t&4)!==0,kt=!be&&e==="scroll",b=be?Q!==null?Q+"Capture":null:Q;be=[];for(var x=M,E;x!==null;){E=x;var ee=E.stateNode;if(E.tag===5&&ee!==null&&(E=ee,b!==null&&(ee=an(x,b),ee!=null&&be.push(Vr(x,ee,E)))),kt)break;x=x.return}0<be.length&&(Q=new ge(Q,we,null,n,Y),Z.push({event:Q,listeners:be}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",Q&&n!==Nr&&(we=n.relatedTarget||n.fromElement)&&($s(we)||we[Kn]))break e;if((ge||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,ge?(we=n.relatedTarget||n.toElement,ge=M,we=we?$s(we):null,we!==null&&(kt=on(we),we!==kt||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=M),ge!==we)){if(be=uo,ee="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(be=ho,ee="onPointerLeave",b="onPointerEnter",x="pointer"),kt=ge==null?Q:rr(ge),E=we==null?Q:rr(we),Q=new be(ee,x+"leave",ge,n,Y),Q.target=kt,Q.relatedTarget=E,ee=null,$s(Y)===M&&(be=new be(b,x+"enter",we,n,Y),be.target=E,be.relatedTarget=kt,ee=be),kt=ee,ge&&we)t:{for(be=ge,b=we,x=0,E=be;E;E=nr(E))x++;for(E=0,ee=b;ee;ee=nr(ee))E++;for(;0<x-E;)be=nr(be),x--;for(;0<E-x;)b=nr(b),E--;for(;x--;){if(be===b||b!==null&&be===b.alternate)break t;be=nr(be),b=nr(b)}be=null}else be=null;ge!==null&&Uo(Z,Q,ge,be,!1),we!==null&&kt!==null&&Uo(Z,kt,we,be,!0)}}e:{if(Q=M?rr(M):window,ge=Q.nodeName&&Q.nodeName.toLowerCase(),ge==="select"||ge==="input"&&Q.type==="file")var Ie=Od;else if(yo(Q))if(jo)Ie=Dd;else{Ie=Ld;var De=Ad}else(ge=Q.nodeName)&&ge.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(Ie=zd);if(Ie&&(Ie=Ie(e,M))){wo(Z,Ie,n,Y);break e}De&&De(e,Q,M),e==="focusout"&&(De=Q._wrapperState)&&De.controlled&&Q.type==="number"&&ue(Q,"number",Q.value)}switch(De=M?rr(M):window,e){case"focusin":(yo(De)||De.contentEditable==="true")&&(er=De,Rl=M,Wr=null);break;case"focusout":Wr=Rl=er=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,To(Z,n,Y);break;case"selectionchange":if(Wd)break;case"keydown":case"keyup":To(Z,n,Y)}var Ue;if(Pl)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else qs?xo(e,n)&&(Ve="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ve="onCompositionStart");Ve&&(fo&&n.locale!=="ko"&&(qs||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&qs&&(Ue=ot()):(de=Y,G="value"in de?de.value:de.textContent,qs=!0)),De=Ci(M,Ve),0<De.length&&(Ve=new mo(Ve,e,null,n,Y),Z.push({event:Ve,listeners:De}),Ue?Ve.data=Ue:(Ue=vo(n),Ue!==null&&(Ve.data=Ue)))),(Ue=Pd?_d(e,n):Md(e,n))&&(M=Ci(M,"onBeforeInput"),0<M.length&&(Y=new mo("onBeforeInput","beforeinput",null,n,Y),Z.push({event:Y,listeners:M}),Y.data=Ue))}zo(Z,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ci(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=an(e,n),l!=null&&r.unshift(Vr(e,l,i)),l=an(e,t),l!=null&&r.push(Vr(e,l,i))),e=e.return}return r}function nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uo(e,t,n,r,i){for(var l=t._reactName,a=[];n!==null&&n!==r;){var d=n,h=d.alternate,M=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&M!==null&&(d=M,i?(h=an(n,l),h!=null&&a.unshift(Vr(n,h,d))):i||(h=an(n,l),h!=null&&a.push(Vr(n,h,d)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Kd=/\r\n?/g,Jd=/\u0000|\uFFFD/g;function Fo(e){return(typeof e=="string"?e:""+e).replace(Kd,`
`).replace(Jd,"")}function Ei(e,t,n){if(t=Fo(t),Fo(e)!==t&&n)throw Error(c(425))}function Ii(){}var Fl=null,Wl=null;function Hl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,Gd=typeof clearTimeout=="function"?clearTimeout:void 0,Wo=typeof Promise=="function"?Promise:void 0,Qd=typeof queueMicrotask=="function"?queueMicrotask:typeof Wo<"u"?function(e){return Wo.resolve(null).then(e).catch(Yd)}:Bl;function Yd(e){setTimeout(function(){throw e})}function Vl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),We(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);We(t)}function os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ho(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sr=Math.random().toString(36).slice(2),On="__reactFiber$"+sr,Kr="__reactProps$"+sr,Kn="__reactContainer$"+sr,Kl="__reactEvents$"+sr,Xd="__reactListeners$"+sr,Zd="__reactHandles$"+sr;function $s(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Kn]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ho(e);e!==null;){if(n=e[On])return n;e=Ho(e)}return t}e=n,n=e.parentNode}return null}function Jr(e){return e=e[On]||e[Kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function Ti(e){return e[Kr]||null}var Jl=[],ir=-1;function cs(e){return{current:e}}function ht(e){0>ir||(e.current=Jl[ir],Jl[ir]=null,ir--)}function ct(e,t){ir++,Jl[ir]=e.current,e.current=t}var us={},Lt=cs(us),Kt=cs(!1),Rs=us;function lr(e,t){var n=e.type.contextTypes;if(!n)return us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(e){return e=e.childContextTypes,e!=null}function Pi(){ht(Kt),ht(Lt)}function Bo(e,t,n){if(Lt.current!==us)throw Error(c(168));ct(Lt,t),ct(Kt,n)}function Vo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(c(108,Ye(e)||"Unknown",i));return B({},n,r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,Rs=Lt.current,ct(Lt,e),ct(Kt,Kt.current),!0}function Ko(e,t,n){var r=e.stateNode;if(!r)throw Error(c(169));n?(e=Vo(e,t,Rs),r.__reactInternalMemoizedMergedChildContext=e,ht(Kt),ht(Lt),ct(Lt,e)):ht(Kt),ct(Kt,n)}var Jn=null,Mi=!1,Gl=!1;function Jo(e){Jn===null?Jn=[e]:Jn.push(e)}function qd(e){Mi=!0,Jo(e)}function ds(){if(!Gl&&Jn!==null){Gl=!0;var e=0,t=st;try{var n=Jn;for(st=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jn=null,Mi=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(e+1)),yi(Ir,ds),i}finally{st=t,Gl=!1}}return null}var ar=[],or=0,$i=null,Ri=0,dn=[],mn=0,Os=null,Gn=1,Qn="";function As(e,t){ar[or++]=Ri,ar[or++]=$i,$i=e,Ri=t}function Go(e,t,n){dn[mn++]=Gn,dn[mn++]=Qn,dn[mn++]=Os,Os=e;var r=Gn;e=Qn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var l=32-tn(t)+i;if(30<l){var a=i-i%5;l=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gn=1<<32-tn(t)+i|n<<i|r,Qn=l+e}else Gn=1<<l|n<<i|r,Qn=e}function Ql(e){e.return!==null&&(As(e,1),Go(e,1,0))}function Yl(e){for(;e===$i;)$i=ar[--or],ar[or]=null,Ri=ar[--or],ar[or]=null;for(;e===Os;)Os=dn[--mn],dn[mn]=null,Qn=dn[--mn],dn[mn]=null,Gn=dn[--mn],dn[mn]=null}var nn=null,sn=null,pt=!1,En=null;function Qo(e,t){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yo(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,sn=os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Os!==null?{id:Gn,overflow:Qn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nn=e,sn=null,!0):!1;default:return!1}}function Xl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zl(e){if(pt){var t=sn;if(t){var n=t;if(!Yo(e,t)){if(Xl(e))throw Error(c(418));t=os(n.nextSibling);var r=nn;t&&Yo(e,t)?Qo(r,n):(e.flags=e.flags&-4097|2,pt=!1,nn=e)}}else{if(Xl(e))throw Error(c(418));e.flags=e.flags&-4097|2,pt=!1,nn=e}}}function Xo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function Oi(e){if(e!==nn)return!1;if(!pt)return Xo(e),pt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hl(e.type,e.memoizedProps)),t&&(t=sn)){if(Xl(e))throw Zo(),Error(c(418));for(;t;)Qo(e,t),t=os(t.nextSibling)}if(Xo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){sn=os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}sn=null}}else sn=nn?os(e.stateNode.nextSibling):null;return!0}function Zo(){for(var e=sn;e;)e=os(e.nextSibling)}function cr(){sn=nn=null,pt=!1}function ql(e){En===null?En=[e]:En.push(e)}var em=Le.ReactCurrentBatchConfig;function Gr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var r=n.stateNode}if(!r)throw Error(c(147,e));var i=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var d=i.refs;a===null?delete d[l]:d[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function Ai(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qo(e){var t=e._init;return t(e._payload)}function ec(e){function t(b,x){if(e){var E=b.deletions;E===null?(b.deletions=[x],b.flags|=16):E.push(x)}}function n(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=ys(b,x),b.index=0,b.sibling=null,b}function l(b,x,E){return b.index=E,e?(E=b.alternate,E!==null?(E=E.index,E<x?(b.flags|=2,x):E):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function d(b,x,E,ee){return x===null||x.tag!==6?(x=Ba(E,b.mode,ee),x.return=b,x):(x=i(x,E),x.return=b,x)}function h(b,x,E,ee){var Ie=E.type;return Ie===ae?Y(b,x,E.props.children,ee,E.key):x!==null&&(x.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===T&&qo(Ie)===x.type)?(ee=i(x,E.props),ee.ref=Gr(b,x,E),ee.return=b,ee):(ee=ll(E.type,E.key,E.props,null,b.mode,ee),ee.ref=Gr(b,x,E),ee.return=b,ee)}function M(b,x,E,ee){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=Va(E,b.mode,ee),x.return=b,x):(x=i(x,E.children||[]),x.return=b,x)}function Y(b,x,E,ee,Ie){return x===null||x.tag!==7?(x=Bs(E,b.mode,ee,Ie),x.return=b,x):(x=i(x,E),x.return=b,x)}function Z(b,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ba(""+x,b.mode,E),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xe:return E=ll(x.type,x.key,x.props,null,b.mode,E),E.ref=Gr(b,null,x),E.return=b,E;case u:return x=Va(x,b.mode,E),x.return=b,x;case T:var ee=x._init;return Z(b,ee(x._payload),E)}if(le(x)||A(x))return x=Bs(x,b.mode,E,null),x.return=b,x;Ai(b,x)}return null}function Q(b,x,E,ee){var Ie=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return Ie!==null?null:d(b,x,""+E,ee);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xe:return E.key===Ie?h(b,x,E,ee):null;case u:return E.key===Ie?M(b,x,E,ee):null;case T:return Ie=E._init,Q(b,x,Ie(E._payload),ee)}if(le(E)||A(E))return Ie!==null?null:Y(b,x,E,ee,null);Ai(b,E)}return null}function ge(b,x,E,ee,Ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return b=b.get(E)||null,d(x,b,""+ee,Ie);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case xe:return b=b.get(ee.key===null?E:ee.key)||null,h(x,b,ee,Ie);case u:return b=b.get(ee.key===null?E:ee.key)||null,M(x,b,ee,Ie);case T:var De=ee._init;return ge(b,x,E,De(ee._payload),Ie)}if(le(ee)||A(ee))return b=b.get(E)||null,Y(x,b,ee,Ie,null);Ai(x,ee)}return null}function we(b,x,E,ee){for(var Ie=null,De=null,Ue=x,Ve=x=0,$t=null;Ue!==null&&Ve<E.length;Ve++){Ue.index>Ve?($t=Ue,Ue=null):$t=Ue.sibling;var lt=Q(b,Ue,E[Ve],ee);if(lt===null){Ue===null&&(Ue=$t);break}e&&Ue&&lt.alternate===null&&t(b,Ue),x=l(lt,x,Ve),De===null?Ie=lt:De.sibling=lt,De=lt,Ue=$t}if(Ve===E.length)return n(b,Ue),pt&&As(b,Ve),Ie;if(Ue===null){for(;Ve<E.length;Ve++)Ue=Z(b,E[Ve],ee),Ue!==null&&(x=l(Ue,x,Ve),De===null?Ie=Ue:De.sibling=Ue,De=Ue);return pt&&As(b,Ve),Ie}for(Ue=r(b,Ue);Ve<E.length;Ve++)$t=ge(Ue,b,Ve,E[Ve],ee),$t!==null&&(e&&$t.alternate!==null&&Ue.delete($t.key===null?Ve:$t.key),x=l($t,x,Ve),De===null?Ie=$t:De.sibling=$t,De=$t);return e&&Ue.forEach(function(ws){return t(b,ws)}),pt&&As(b,Ve),Ie}function be(b,x,E,ee){var Ie=A(E);if(typeof Ie!="function")throw Error(c(150));if(E=Ie.call(E),E==null)throw Error(c(151));for(var De=Ie=null,Ue=x,Ve=x=0,$t=null,lt=E.next();Ue!==null&&!lt.done;Ve++,lt=E.next()){Ue.index>Ve?($t=Ue,Ue=null):$t=Ue.sibling;var ws=Q(b,Ue,lt.value,ee);if(ws===null){Ue===null&&(Ue=$t);break}e&&Ue&&ws.alternate===null&&t(b,Ue),x=l(ws,x,Ve),De===null?Ie=ws:De.sibling=ws,De=ws,Ue=$t}if(lt.done)return n(b,Ue),pt&&As(b,Ve),Ie;if(Ue===null){for(;!lt.done;Ve++,lt=E.next())lt=Z(b,lt.value,ee),lt!==null&&(x=l(lt,x,Ve),De===null?Ie=lt:De.sibling=lt,De=lt);return pt&&As(b,Ve),Ie}for(Ue=r(b,Ue);!lt.done;Ve++,lt=E.next())lt=ge(Ue,b,Ve,lt.value,ee),lt!==null&&(e&&lt.alternate!==null&&Ue.delete(lt.key===null?Ve:lt.key),x=l(lt,x,Ve),De===null?Ie=lt:De.sibling=lt,De=lt);return e&&Ue.forEach(function($m){return t(b,$m)}),pt&&As(b,Ve),Ie}function kt(b,x,E,ee){if(typeof E=="object"&&E!==null&&E.type===ae&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case xe:e:{for(var Ie=E.key,De=x;De!==null;){if(De.key===Ie){if(Ie=E.type,Ie===ae){if(De.tag===7){n(b,De.sibling),x=i(De,E.props.children),x.return=b,b=x;break e}}else if(De.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===T&&qo(Ie)===De.type){n(b,De.sibling),x=i(De,E.props),x.ref=Gr(b,De,E),x.return=b,b=x;break e}n(b,De);break}else t(b,De);De=De.sibling}E.type===ae?(x=Bs(E.props.children,b.mode,ee,E.key),x.return=b,b=x):(ee=ll(E.type,E.key,E.props,null,b.mode,ee),ee.ref=Gr(b,x,E),ee.return=b,b=ee)}return a(b);case u:e:{for(De=E.key;x!==null;){if(x.key===De)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(b,x.sibling),x=i(x,E.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else t(b,x);x=x.sibling}x=Va(E,b.mode,ee),x.return=b,b=x}return a(b);case T:return De=E._init,kt(b,x,De(E._payload),ee)}if(le(E))return we(b,x,E,ee);if(A(E))return be(b,x,E,ee);Ai(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,E),x.return=b,b=x):(n(b,x),x=Ba(E,b.mode,ee),x.return=b,b=x),a(b)):n(b,x)}return kt}var ur=ec(!0),tc=ec(!1),Li=cs(null),zi=null,dr=null,ea=null;function ta(){ea=dr=zi=null}function na(e){var t=Li.current;ht(Li),e._currentValue=t}function sa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mr(e,t){zi=e,ea=dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Gt=!0),e.firstContext=null)}function hn(e){var t=e._currentValue;if(ea!==e)if(e={context:e,memoizedValue:t,next:null},dr===null){if(zi===null)throw Error(c(308));dr=e,zi.dependencies={lanes:0,firstContext:e}}else dr=dr.next=e;return t}var Ls=null;function ra(e){Ls===null?Ls=[e]:Ls.push(e)}function nc(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ra(t)):(n.next=i.next,i.next=n),t.interleaved=n,Yn(e,r)}function Yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ms=!1;function ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(it&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yn(e,n)}return i=r.interleaved,i===null?(t.next=t,ra(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yn(e,n)}function Di(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rn(e,n)}}function rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?i=l=t:l=l.next=t}else i=l=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ui(e,t,n,r){var i=e.updateQueue;ms=!1;var l=i.firstBaseUpdate,a=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var h=d,M=h.next;h.next=null,a===null?l=M:a.next=M,a=h;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,d=Y.lastBaseUpdate,d!==a&&(d===null?Y.firstBaseUpdate=M:d.next=M,Y.lastBaseUpdate=h))}if(l!==null){var Z=i.baseState;a=0,Y=M=h=null,d=l;do{var Q=d.lane,ge=d.eventTime;if((r&Q)===Q){Y!==null&&(Y=Y.next={eventTime:ge,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var we=e,be=d;switch(Q=t,ge=n,be.tag){case 1:if(we=be.payload,typeof we=="function"){Z=we.call(ge,Z,Q);break e}Z=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,Q=typeof we=="function"?we.call(ge,Z,Q):we,Q==null)break e;Z=B({},Z,Q);break e;case 2:ms=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,Q=i.effects,Q===null?i.effects=[d]:Q.push(d))}else ge={eventTime:ge,lane:Q,tag:d.tag,payload:d.payload,callback:d.callback,next:null},Y===null?(M=Y=ge,h=Z):Y=Y.next=ge,a|=Q;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;Q=d,d=Q.next,Q.next=null,i.lastBaseUpdate=Q,i.shared.pending=null}}while(!0);if(Y===null&&(h=Z),i.baseState=h,i.firstBaseUpdate=M,i.lastBaseUpdate=Y,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Us|=a,e.lanes=a,e.memoizedState=Z}}function ic(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(c(191,i));i.call(r)}}}var Qr={},An=cs(Qr),Yr=cs(Qr),Xr=cs(Qr);function zs(e){if(e===Qr)throw Error(c(174));return e}function la(e,t){switch(ct(Xr,t),ct(Yr,e),ct(An,Qr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bt(t,e)}ht(An),ct(An,t)}function hr(){ht(An),ht(Yr),ht(Xr)}function lc(e){zs(Xr.current);var t=zs(An.current),n=Bt(t,e.type);t!==n&&(ct(Yr,e),ct(An,n))}function aa(e){Yr.current===e&&(ht(An),ht(Yr))}var gt=cs(0);function Fi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oa=[];function ca(){for(var e=0;e<oa.length;e++)oa[e]._workInProgressVersionPrimary=null;oa.length=0}var Wi=Le.ReactCurrentDispatcher,ua=Le.ReactCurrentBatchConfig,Ds=0,xt=null,Tt=null,_t=null,Hi=!1,Zr=!1,qr=0,tm=0;function zt(){throw Error(c(321))}function da(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cn(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,l){if(Ds=l,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wi.current=e===null||e.memoizedState===null?im:lm,e=n(r,i),Zr){l=0;do{if(Zr=!1,qr=0,25<=l)throw Error(c(301));l+=1,_t=Tt=null,t.updateQueue=null,Wi.current=am,e=n(r,i)}while(Zr)}if(Wi.current=Ki,t=Tt!==null&&Tt.next!==null,Ds=0,_t=Tt=xt=null,Hi=!1,t)throw Error(c(300));return e}function ha(){var e=qr!==0;return qr=0,e}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?xt.memoizedState=_t=e:_t=_t.next=e,_t}function fn(){if(Tt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=_t===null?xt.memoizedState:_t.next;if(t!==null)_t=t,Tt=e;else{if(e===null)throw Error(c(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},_t===null?xt.memoizedState=_t=e:_t=_t.next=e}return _t}function ei(e,t){return typeof t=="function"?t(e):t}function fa(e){var t=fn(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=Tt,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var a=i.next;i.next=l.next,l.next=a}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var d=a=null,h=null,M=l;do{var Y=M.lane;if((Ds&Y)===Y)h!==null&&(h=h.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),r=M.hasEagerState?M.eagerState:e(r,M.action);else{var Z={lane:Y,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};h===null?(d=h=Z,a=r):h=h.next=Z,xt.lanes|=Y,Us|=Y}M=M.next}while(M!==null&&M!==l);h===null?a=r:h.next=d,Cn(r,t.memoizedState)||(Gt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do l=i.lane,xt.lanes|=l,Us|=l,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function pa(e){var t=fn(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do l=e(l,a.action),a=a.next;while(a!==i);Cn(l,t.memoizedState)||(Gt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ac(){}function oc(e,t){var n=xt,r=fn(),i=t(),l=!Cn(r.memoizedState,i);if(l&&(r.memoizedState=i,Gt=!0),r=r.queue,ga(dc.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,ti(9,uc.bind(null,n,r,i,t),void 0,null),Mt===null)throw Error(c(349));(Ds&30)!==0||cc(n,t,i)}return i}function cc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uc(e,t,n,r){t.value=n,t.getSnapshot=r,mc(t)&&hc(e)}function dc(e,t,n){return n(function(){mc(t)&&hc(e)})}function mc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cn(e,n)}catch{return!0}}function hc(e){var t=Yn(e,1);t!==null&&_n(t,e,1,-1)}function fc(e){var t=Ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},t.queue=e,e=e.dispatch=rm.bind(null,xt,e),[t.memoizedState,e]}function ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pc(){return fn().memoizedState}function Bi(e,t,n,r){var i=Ln();xt.flags|=e,i.memoizedState=ti(1|t,n,void 0,r===void 0?null:r)}function Vi(e,t,n,r){var i=fn();r=r===void 0?null:r;var l=void 0;if(Tt!==null){var a=Tt.memoizedState;if(l=a.destroy,r!==null&&da(r,a.deps)){i.memoizedState=ti(t,n,l,r);return}}xt.flags|=e,i.memoizedState=ti(1|t,n,l,r)}function gc(e,t){return Bi(8390656,8,e,t)}function ga(e,t){return Vi(2048,8,e,t)}function xc(e,t){return Vi(4,2,e,t)}function vc(e,t){return Vi(4,4,e,t)}function yc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wc(e,t,n){return n=n!=null?n.concat([e]):null,Vi(4,4,yc.bind(null,t,e),n)}function xa(){}function jc(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nc(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sc(e,t,n){return(Ds&21)===0?(e.baseState&&(e.baseState=!1,Gt=!0),e.memoizedState=n):(Cn(n,t)||(n=wi(),xt.lanes|=n,Us|=n,e.baseState=!0),t)}function nm(e,t){var n=st;st=n!==0&&4>n?n:4,e(!0);var r=ua.transition;ua.transition={};try{e(!1),t()}finally{st=n,ua.transition=r}}function kc(){return fn().memoizedState}function sm(e,t,n){var r=xs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bc(e))Cc(t,n);else if(n=nc(e,t,n,r),n!==null){var i=Ht();_n(n,e,r,i),Ec(n,t,r)}}function rm(e,t,n){var r=xs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bc(e))Cc(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,d=l(a,n);if(i.hasEagerState=!0,i.eagerState=d,Cn(d,a)){var h=t.interleaved;h===null?(i.next=i,ra(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}n=nc(e,t,i,r),n!==null&&(i=Ht(),_n(n,e,r,i),Ec(n,t,r))}}function bc(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function Cc(e,t){Zr=Hi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ec(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rn(e,n)}}var Ki={readContext:hn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},im={readContext:hn,useCallback:function(e,t){return Ln().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:gc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Bi(4194308,4,yc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bi(4,2,e,t)},useMemo:function(e,t){var n=Ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sm.bind(null,xt,e),[r.memoizedState,e]},useRef:function(e){var t=Ln();return e={current:e},t.memoizedState=e},useState:fc,useDebugValue:xa,useDeferredValue:function(e){return Ln().memoizedState=e},useTransition:function(){var e=fc(!1),t=e[0];return e=nm.bind(null,e[1]),Ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xt,i=Ln();if(pt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Mt===null)throw Error(c(349));(Ds&30)!==0||cc(r,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,gc(dc.bind(null,r,l,e),[e]),r.flags|=2048,ti(9,uc.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Ln(),t=Mt.identifierPrefix;if(pt){var n=Qn,r=Gn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lm={readContext:hn,useCallback:jc,useContext:hn,useEffect:ga,useImperativeHandle:wc,useInsertionEffect:xc,useLayoutEffect:vc,useMemo:Nc,useReducer:fa,useRef:pc,useState:function(){return fa(ei)},useDebugValue:xa,useDeferredValue:function(e){var t=fn();return Sc(t,Tt.memoizedState,e)},useTransition:function(){var e=fa(ei)[0],t=fn().memoizedState;return[e,t]},useMutableSource:ac,useSyncExternalStore:oc,useId:kc,unstable_isNewReconciler:!1},am={readContext:hn,useCallback:jc,useContext:hn,useEffect:ga,useImperativeHandle:wc,useInsertionEffect:xc,useLayoutEffect:vc,useMemo:Nc,useReducer:pa,useRef:pc,useState:function(){return pa(ei)},useDebugValue:xa,useDeferredValue:function(e){var t=fn();return Tt===null?t.memoizedState=e:Sc(t,Tt.memoizedState,e)},useTransition:function(){var e=pa(ei)[0],t=fn().memoizedState;return[e,t]},useMutableSource:ac,useSyncExternalStore:oc,useId:kc,unstable_isNewReconciler:!1};function In(e,t){if(e&&e.defaultProps){t=B({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function va(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:B({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ji={isMounted:function(e){return(e=e._reactInternals)?on(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ht(),i=xs(e),l=Xn(r,i);l.payload=t,n!=null&&(l.callback=n),t=hs(e,l,i),t!==null&&(_n(t,e,i,r),Di(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ht(),i=xs(e),l=Xn(r,i);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=hs(e,l,i),t!==null&&(_n(t,e,i,r),Di(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ht(),r=xs(e),i=Xn(n,r);i.tag=2,t!=null&&(i.callback=t),t=hs(e,i,r),t!==null&&(_n(t,e,r,n),Di(t,e,r))}};function Ic(e,t,n,r,i,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Fr(n,r)||!Fr(i,l):!0}function Tc(e,t,n){var r=!1,i=us,l=t.contextType;return typeof l=="object"&&l!==null?l=hn(l):(i=Jt(t)?Rs:Lt.current,r=t.contextTypes,l=(r=r!=null)?lr(e,i):us),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ji,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ji.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ia(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=hn(l):(l=Jt(t)?Rs:Lt.current,i.context=lr(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(va(e,t,l,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ji.enqueueReplaceState(i,i.state,null),Ui(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fr(e,t){try{var n="",r=t;do n+=pe(r),r=r.return;while(r);var i=n}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function wa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ja(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var om=typeof WeakMap=="function"?WeakMap:Map;function _c(e,t,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){el||(el=!0,Aa=r),ja(e,t)},n}function Mc(e,t,n){n=Xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ja(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ja(e,t),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function $c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new om;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nm.bind(null,e,t,n),t.then(e,e))}function Rc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oc(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xn(-1,1),t.tag=2,hs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var cm=Le.ReactCurrentOwner,Gt=!1;function Wt(e,t,n,r){t.child=e===null?tc(t,null,n,r):ur(t,e.child,n,r)}function Ac(e,t,n,r,i){n=n.render;var l=t.ref;return mr(t,i),r=ma(e,t,n,r,l,i),n=ha(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(pt&&n&&Ql(t),t.flags|=1,Wt(e,t,r,i),t.child)}function Lc(e,t,n,r,i){if(e===null){var l=n.type;return typeof l=="function"&&!Ha(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,zc(e,t,l,r,i)):(e=ll(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&i)===0){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Fr,n(a,r)&&e.ref===t.ref)return Zn(e,t,i)}return t.flags|=1,e=ys(l,r),e.ref=t.ref,e.return=t,t.child=e}function zc(e,t,n,r,i){if(e!==null){var l=e.memoizedProps;if(Fr(l,r)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=r=l,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Gt=!0);else return t.lanes=e.lanes,Zn(e,t,i)}return Na(e,t,n,r,i)}function Dc(e,t,n){var r=t.pendingProps,i=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(gr,rn),rn|=n;else{if((n&1073741824)===0)return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ct(gr,rn),rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ct(gr,rn),rn|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ct(gr,rn),rn|=r;return Wt(e,t,i,n),t.child}function Uc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,i){var l=Jt(n)?Rs:Lt.current;return l=lr(t,l),mr(t,i),n=ma(e,t,n,r,l,i),r=ha(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(pt&&r&&Ql(t),t.flags|=1,Wt(e,t,n,i),t.child)}function Fc(e,t,n,r,i){if(Jt(n)){var l=!0;_i(t)}else l=!1;if(mr(t,i),t.stateNode===null)Qi(e,t),Tc(t,n,r),ya(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,d=t.memoizedProps;a.props=d;var h=a.context,M=n.contextType;typeof M=="object"&&M!==null?M=hn(M):(M=Jt(n)?Rs:Lt.current,M=lr(t,M));var Y=n.getDerivedStateFromProps,Z=typeof Y=="function"||typeof a.getSnapshotBeforeUpdate=="function";Z||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==r||h!==M)&&Pc(t,a,r,M),ms=!1;var Q=t.memoizedState;a.state=Q,Ui(t,r,a,i),h=t.memoizedState,d!==r||Q!==h||Kt.current||ms?(typeof Y=="function"&&(va(t,n,Y,r),h=t.memoizedState),(d=ms||Ic(t,n,d,r,Q,h,M))?(Z||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=M,r=d):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,sc(e,t),d=t.memoizedProps,M=t.type===t.elementType?d:In(t.type,d),a.props=M,Z=t.pendingProps,Q=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=hn(h):(h=Jt(n)?Rs:Lt.current,h=lr(t,h));var ge=n.getDerivedStateFromProps;(Y=typeof ge=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==Z||Q!==h)&&Pc(t,a,r,h),ms=!1,Q=t.memoizedState,a.state=Q,Ui(t,r,a,i);var we=t.memoizedState;d!==Z||Q!==we||Kt.current||ms?(typeof ge=="function"&&(va(t,n,ge,r),we=t.memoizedState),(M=ms||Ic(t,n,M,r,Q,we,h)||!1)?(Y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,we,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,we,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=we),a.props=r,a.state=we,a.context=h,r=M):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),r=!1)}return Sa(e,t,n,r,l,i)}function Sa(e,t,n,r,i,l){Uc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Ko(t,n,!1),Zn(e,t,l);r=t.stateNode,cm.current=t;var d=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ur(t,e.child,null,l),t.child=ur(t,null,d,l)):Wt(e,t,d,l),t.memoizedState=r.state,i&&Ko(t,n,!0),t.child}function Wc(e){var t=e.stateNode;t.pendingContext?Bo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bo(e,t.context,!1),la(e,t.containerInfo)}function Hc(e,t,n,r,i){return cr(),ql(i),t.flags|=256,Wt(e,t,n,r),t.child}var ka={dehydrated:null,treeContext:null,retryLane:0};function ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bc(e,t,n){var r=t.pendingProps,i=gt.current,l=!1,a=(t.flags&128)!==0,d;if((d=a)||(d=e!==null&&e.memoizedState===null?!1:(i&2)!==0),d?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ct(gt,i&1),e===null)return Zl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},(r&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=a):l=al(a,r,0,null),e=Bs(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ba(n),t.memoizedState=ka,e):Ca(t,a));if(i=e.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return um(e,t,a,r,d,i,n);if(l){l=r.fallback,a=t.mode,i=e.child,d=i.sibling;var h={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=ys(i,h),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?l=ys(d,l):(l=Bs(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ba(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=ka,r}return l=e.child,e=l.sibling,r=ys(l,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ca(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gi(e,t,n,r){return r!==null&&ql(r),ur(t,e.child,null,n),e=Ca(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function um(e,t,n,r,i,l,a){if(n)return t.flags&256?(t.flags&=-257,r=wa(Error(c(422))),Gi(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,i=t.mode,r=al({mode:"visible",children:r.children},i,0,null),l=Bs(l,i,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,(t.mode&1)!==0&&ur(t,e.child,null,a),t.child.memoizedState=ba(a),t.memoizedState=ka,l);if((t.mode&1)===0)return Gi(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,l=Error(c(419)),r=wa(l,r,void 0),Gi(e,t,a,r)}if(d=(a&e.childLanes)!==0,Gt||d){if(r=Mt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|a))!==0?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Yn(e,i),_n(r,e,i,-1))}return Wa(),r=wa(Error(c(421))),Gi(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Sm.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,sn=os(i.nextSibling),nn=t,pt=!0,En=null,e!==null&&(dn[mn++]=Gn,dn[mn++]=Qn,dn[mn++]=Os,Gn=e.id,Qn=e.overflow,Os=t),t=Ca(t,r.children),t.flags|=4096,t)}function Vc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sa(e.return,t,n)}function Ea(e,t,n,r,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function Kc(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if(Wt(e,t,r.children,n),r=gt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vc(e,n,t);else if(e.tag===19)Vc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ct(gt,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Fi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ea(t,!1,i,n,l);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Fi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ea(t,!0,n,null,l);break;case"together":Ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Us|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=ys(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ys(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dm(e,t,n){switch(t.tag){case 3:Wc(t),cr();break;case 5:lc(t);break;case 1:Jt(t.type)&&_i(t);break;case 4:la(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ct(Li,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ct(gt,gt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Bc(e,t,n):(ct(gt,gt.current&1),e=Zn(e,t,n),e!==null?e.sibling:null);ct(gt,gt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Kc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ct(gt,gt.current),r)break;return null;case 22:case 23:return t.lanes=0,Dc(e,t,n)}return Zn(e,t,n)}var Jc,Ia,Gc,Qc;Jc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},Gc=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,zs(An.current);var l=null;switch(n){case"input":i=je(e,i),r=je(e,r),l=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),l=[];break;case"textarea":i=Te(e,i),r=Te(e,r),l=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ii)}Js(n,r);var a;n=null;for(M in i)if(!r.hasOwnProperty(M)&&i.hasOwnProperty(M)&&i[M]!=null)if(M==="style"){var d=i[M];for(a in d)d.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(O.hasOwnProperty(M)?l||(l=[]):(l=l||[]).push(M,null));for(M in r){var h=r[M];if(d=i!=null?i[M]:void 0,r.hasOwnProperty(M)&&h!==d&&(h!=null||d!=null))if(M==="style")if(d){for(a in d)!d.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&d[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(M,n)),n=h;else M==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(l=l||[]).push(M,h)):M==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(M,""+h):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(O.hasOwnProperty(M)?(h!=null&&M==="onScroll"&&mt("scroll",e),l||d===h||(l=[])):(l=l||[]).push(M,h))}n&&(l=l||[]).push("style",n);var M=l;(t.updateQueue=M)&&(t.flags|=4)}},Qc=function(e,t,n,r){n!==r&&(t.flags|=4)};function ni(e,t){if(!pt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function mm(e,t,n){var r=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Jt(t.type)&&Pi(),Dt(t),null;case 3:return r=t.stateNode,hr(),ht(Kt),ht(Lt),ca(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Oi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,En!==null&&(Da(En),En=null))),Ia(e,t),Dt(t),null;case 5:aa(t);var i=zs(Xr.current);if(n=t.type,e!==null&&t.stateNode!=null)Gc(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(c(166));return Dt(t),null}if(e=zs(An.current),Oi(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[On]=t,r[Kr]=l,e=(t.mode&1)!==0,n){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(i=0;i<Hr.length;i++)mt(Hr[i],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":vt(r,l),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},mt("invalid",r);break;case"textarea":ut(r,l),mt("invalid",r)}Js(n,l),i=null;for(var a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="children"?typeof d=="string"?r.textContent!==d&&(l.suppressHydrationWarning!==!0&&Ei(r.textContent,d,e),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&Ei(r.textContent,d,e),i=["children",""+d]):O.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&mt("scroll",r)}switch(n){case"input":Ke(r),me(r,l,!0);break;case"textarea":Ke(r),vn(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ii)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yt(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[On]=t,e[Kr]=r,Jc(e,t,!1,!1),t.stateNode=e;e:{switch(a=dt(n,r),n){case"dialog":mt("cancel",e),mt("close",e),i=r;break;case"iframe":case"object":case"embed":mt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Hr.length;i++)mt(Hr[i],e);i=r;break;case"source":mt("error",e),i=r;break;case"img":case"image":case"link":mt("error",e),mt("load",e),i=r;break;case"details":mt("toggle",e),i=r;break;case"input":vt(e,r),i=je(e,r),mt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),mt("invalid",e);break;case"textarea":ut(e,r),i=Te(e,r),mt("invalid",e);break;default:i=r}Js(n,i),d=i;for(l in d)if(d.hasOwnProperty(l)){var h=d[l];l==="style"?mi(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&wn(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Un(e,h):typeof h=="number"&&Un(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(O.hasOwnProperty(l)?h!=null&&l==="onScroll"&&mt("scroll",e):h!=null&&Ae(e,l,h,a))}switch(n){case"input":Ke(e),me(e,r,!1);break;case"textarea":Ke(e),vn(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qe(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Qe(e,!!r.multiple,l,!1):r.defaultValue!=null&&Qe(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ii)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)Qc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(c(166));if(n=zs(Xr.current),zs(An.current),Oi(t)){if(r=t.stateNode,n=t.memoizedProps,r[On]=t,(l=r.nodeValue!==n)&&(e=nn,e!==null))switch(e.tag){case 3:Ei(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ei(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=t,t.stateNode=r}return Dt(t),null;case 13:if(ht(gt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pt&&sn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Zo(),cr(),t.flags|=98560,l=!1;else if(l=Oi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[On]=t}else cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Dt(t),l=!1}else En!==null&&(Da(En),En=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(gt.current&1)!==0?Pt===0&&(Pt=3):Wa())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return hr(),Ia(e,t),e===null&&Br(t.stateNode.containerInfo),Dt(t),null;case 10:return na(t.type._context),Dt(t),null;case 17:return Jt(t.type)&&Pi(),Dt(t),null;case 19:if(ht(gt),l=t.memoizedState,l===null)return Dt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ni(l,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Fi(e),a!==null){for(t.flags|=128,ni(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ct(gt,gt.current&1|2),t.child}e=e.sibling}l.tail!==null&&rt()>xr&&(t.flags|=128,r=!0,ni(l,!1),t.lanes=4194304)}else{if(!r)if(e=Fi(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ni(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!pt)return Dt(t),null}else 2*rt()-l.renderingStartTime>xr&&n!==1073741824&&(t.flags|=128,r=!0,ni(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rt(),t.sibling=null,n=gt.current,ct(gt,r?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return Fa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(rn&1073741824)!==0&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function hm(e,t){switch(Yl(t),t.tag){case 1:return Jt(t.type)&&Pi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hr(),ht(Kt),ht(Lt),ca(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return aa(t),null;case 13:if(ht(gt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ht(gt),null;case 4:return hr(),null;case 10:return na(t.type._context),null;case 22:case 23:return Fa(),null;case 24:return null;default:return null}}var Yi=!1,Ut=!1,fm=typeof WeakSet=="function"?WeakSet:Set,ve=null;function pr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function Ta(e,t,n){try{n()}catch(r){jt(e,t,r)}}var Yc=!1;function pm(e,t){if(Fl=te,e=Io(),$l(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,d=-1,h=-1,M=0,Y=0,Z=e,Q=null;t:for(;;){for(var ge;Z!==n||i!==0&&Z.nodeType!==3||(d=a+i),Z!==l||r!==0&&Z.nodeType!==3||(h=a+r),Z.nodeType===3&&(a+=Z.nodeValue.length),(ge=Z.firstChild)!==null;)Q=Z,Z=ge;for(;;){if(Z===e)break t;if(Q===n&&++M===i&&(d=a),Q===l&&++Y===r&&(h=a),(ge=Z.nextSibling)!==null)break;Z=Q,Q=Z.parentNode}Z=ge}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wl={focusedElem:e,selectionRange:n},te=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var we=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var be=we.memoizedProps,kt=we.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?be:In(t.type,be),kt);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(ee){jt(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return we=Yc,Yc=!1,we}function si(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&Ta(t,n,l)}i=i.next}while(i!==r)}}function Xi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Pa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xc(e){var t=e.alternate;t!==null&&(e.alternate=null,Xc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[On],delete t[Kr],delete t[Kl],delete t[Xd],delete t[Zd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zc(e){return e.tag===5||e.tag===3||e.tag===4}function qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _a(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ii));else if(r!==4&&(e=e.child,e!==null))for(_a(e,t,n),e=e.sibling;e!==null;)_a(e,t,n),e=e.sibling}function Ma(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ma(e,t,n),e=e.sibling;e!==null;)Ma(e,t,n),e=e.sibling}var Ot=null,Tn=!1;function fs(e,t,n){for(n=n.child;n!==null;)eu(e,t,n),n=n.sibling}function eu(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(kn,n)}catch{}switch(n.tag){case 5:Ut||pr(n,t);case 6:var r=Ot,i=Tn;Ot=null,fs(e,t,n),Ot=r,Tn=i,Ot!==null&&(Tn?(e=Ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Tn?(e=Ot,n=n.stateNode,e.nodeType===8?Vl(e.parentNode,n):e.nodeType===1&&Vl(e,n),We(e)):Vl(Ot,n.stateNode));break;case 4:r=Ot,i=Tn,Ot=n.stateNode.containerInfo,Tn=!0,fs(e,t,n),Ot=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,a=l.destroy;l=l.tag,a!==void 0&&((l&2)!==0||(l&4)!==0)&&Ta(n,t,a),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!Ut&&(pr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){jt(n,t,d)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,fs(e,t,n),Ut=r):fs(e,t,n);break;default:fs(e,t,n)}}function tu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fm),t.forEach(function(r){var i=km.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=e,a=t,d=a;e:for(;d!==null;){switch(d.tag){case 5:Ot=d.stateNode,Tn=!1;break e;case 3:Ot=d.stateNode.containerInfo,Tn=!0;break e;case 4:Ot=d.stateNode.containerInfo,Tn=!0;break e}d=d.return}if(Ot===null)throw Error(c(160));eu(l,a,i),Ot=null,Tn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(M){jt(i,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nu(t,e),t=t.sibling}function nu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pn(t,e),zn(e),r&4){try{si(3,e,e.return),Xi(3,e)}catch(be){jt(e,e.return,be)}try{si(5,e,e.return)}catch(be){jt(e,e.return,be)}}break;case 1:Pn(t,e),zn(e),r&512&&n!==null&&pr(n,n.return);break;case 5:if(Pn(t,e),zn(e),r&512&&n!==null&&pr(n,n.return),e.flags&32){var i=e.stateNode;try{Un(i,"")}catch(be){jt(e,e.return,be)}}if(r&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&bt(i,l),dt(d,a);var M=dt(d,l);for(a=0;a<h.length;a+=2){var Y=h[a],Z=h[a+1];Y==="style"?mi(i,Z):Y==="dangerouslySetInnerHTML"?wn(i,Z):Y==="children"?Un(i,Z):Ae(i,Y,Z,M)}switch(d){case"input":S(i,l);break;case"textarea":xn(i,l);break;case"select":var Q=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var ge=l.value;ge!=null?Qe(i,!!l.multiple,ge,!1):Q!==!!l.multiple&&(l.defaultValue!=null?Qe(i,!!l.multiple,l.defaultValue,!0):Qe(i,!!l.multiple,l.multiple?[]:"",!1))}i[Kr]=l}catch(be){jt(e,e.return,be)}}break;case 6:if(Pn(t,e),zn(e),r&4){if(e.stateNode===null)throw Error(c(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(be){jt(e,e.return,be)}}break;case 3:if(Pn(t,e),zn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{We(t.containerInfo)}catch(be){jt(e,e.return,be)}break;case 4:Pn(t,e),zn(e);break;case 13:Pn(t,e),zn(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Oa=rt())),r&4&&tu(e);break;case 22:if(Y=n!==null&&n.memoizedState!==null,e.mode&1?(Ut=(M=Ut)||Y,Pn(t,e),Ut=M):Pn(t,e),zn(e),r&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!Y&&(e.mode&1)!==0)for(ve=e,Y=e.child;Y!==null;){for(Z=ve=Y;ve!==null;){switch(Q=ve,ge=Q.child,Q.tag){case 0:case 11:case 14:case 15:si(4,Q,Q.return);break;case 1:pr(Q,Q.return);var we=Q.stateNode;if(typeof we.componentWillUnmount=="function"){r=Q,n=Q.return;try{t=r,we.props=t.memoizedProps,we.state=t.memoizedState,we.componentWillUnmount()}catch(be){jt(r,n,be)}}break;case 5:pr(Q,Q.return);break;case 22:if(Q.memoizedState!==null){iu(Z);continue}}ge!==null?(ge.return=Q,ve=ge):iu(Z)}Y=Y.sibling}e:for(Y=null,Z=e;;){if(Z.tag===5){if(Y===null){Y=Z;try{i=Z.stateNode,M?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=Z.stateNode,h=Z.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=jr("display",a))}catch(be){jt(e,e.return,be)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=M?"":Z.memoizedProps}catch(be){jt(e,e.return,be)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===e)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===e)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===e)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Pn(t,e),zn(e),r&4&&tu(e);break;case 21:break;default:Pn(t,e),zn(e)}}function zn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zc(n)){var r=n;break e}n=n.return}throw Error(c(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Un(i,""),r.flags&=-33);var l=qc(e);Ma(e,l,i);break;case 3:case 4:var a=r.stateNode.containerInfo,d=qc(e);_a(e,d,a);break;default:throw Error(c(161))}}catch(h){jt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gm(e,t,n){ve=e,su(e)}function su(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var i=ve,l=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Yi;if(!a){var d=i.alternate,h=d!==null&&d.memoizedState!==null||Ut;d=Yi;var M=Ut;if(Yi=a,(Ut=h)&&!M)for(ve=i;ve!==null;)a=ve,h=a.child,a.tag===22&&a.memoizedState!==null?lu(i):h!==null?(h.return=a,ve=h):lu(i);for(;l!==null;)ve=l,su(l),l=l.sibling;ve=i,Yi=d,Ut=M}ru(e)}else(i.subtreeFlags&8772)!==0&&l!==null?(l.return=i,ve=l):ru(e)}}function ru(e){for(;ve!==null;){var t=ve;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ut||Xi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:In(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ic(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ic(t,a,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var Y=M.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&We(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Ut||t.flags&512&&Pa(t)}catch(Q){jt(t,t.return,Q)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function iu(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function lu(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xi(4,t)}catch(h){jt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(h){jt(t,i,h)}}var l=t.return;try{Pa(t)}catch(h){jt(t,l,h)}break;case 5:var a=t.return;try{Pa(t)}catch(h){jt(t,a,h)}}}catch(h){jt(t,t.return,h)}if(t===e){ve=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ve=d;break}ve=t.return}}var xm=Math.ceil,Zi=Le.ReactCurrentDispatcher,$a=Le.ReactCurrentOwner,pn=Le.ReactCurrentBatchConfig,it=0,Mt=null,Et=null,At=0,rn=0,gr=cs(0),Pt=0,ri=null,Us=0,qi=0,Ra=0,ii=null,Qt=null,Oa=0,xr=1/0,qn=null,el=!1,Aa=null,ps=null,tl=!1,gs=null,nl=0,li=0,La=null,sl=-1,rl=0;function Ht(){return(it&6)!==0?rt():sl!==-1?sl:sl=rt()}function xs(e){return(e.mode&1)===0?1:(it&2)!==0&&At!==0?At&-At:em.transition!==null?(rl===0&&(rl=wi()),rl):(e=st,e!==0||(e=window.event,e=e===void 0?16:Be(e.type)),e)}function _n(e,t,n,r){if(50<li)throw li=0,La=null,Error(c(185));Ts(e,n,r),((it&2)===0||e!==Mt)&&(e===Mt&&((it&2)===0&&(qi|=n),Pt===4&&vs(e,At)),Yt(e,r),n===1&&it===0&&(t.mode&1)===0&&(xr=rt()+500,Mi&&ds()))}function Yt(e,t){var n=e.callbackNode;Cl(e,t);var r=Xs(e,e===Mt?At:0);if(r===0)n!==null&&ss(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ss(n),t===1)e.tag===0?qd(ou.bind(null,e)):Jo(ou.bind(null,e)),Qd(function(){(it&6)===0&&ds()}),n=null;else{switch($r(r)){case 1:n=Ir;break;case 4:n=Tr;break;case 16:n=ks;break;case 536870912:n=bs;break;default:n=ks}n=gu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(sl=-1,rl=0,(it&6)!==0)throw Error(c(327));var n=e.callbackNode;if(vr()&&e.callbackNode!==n)return null;var r=Xs(e,e===Mt?At:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=il(e,r);else{t=r;var i=it;it|=2;var l=uu();(Mt!==e||At!==t)&&(qn=null,xr=rt()+500,Ws(e,t));do try{wm();break}catch(d){cu(e,d)}while(!0);ta(),Zi.current=l,it=i,Et!==null?t=0:(Mt=null,At=0,t=Pt)}if(t!==0){if(t===2&&(i=_r(e),i!==0&&(r=i,t=za(e,i))),t===1)throw n=ri,Ws(e,0),vs(e,r),Yt(e,rt()),n;if(t===6)vs(e,r);else{if(i=e.current.alternate,(r&30)===0&&!vm(i)&&(t=il(e,r),t===2&&(l=_r(e),l!==0&&(r=l,t=za(e,l))),t===1))throw n=ri,Ws(e,0),vs(e,r),Yt(e,rt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(c(345));case 2:Hs(e,Qt,qn);break;case 3:if(vs(e,r),(r&130023424)===r&&(t=Oa+500-rt(),10<t)){if(Xs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ht(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Bl(Hs.bind(null,e,Qt,qn),t);break}Hs(e,Qt,qn);break;case 4:if(vs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-tn(r);l=1<<a,a=t[a],a>i&&(i=a),r&=~l}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xm(r/1960))-r,10<r){e.timeoutHandle=Bl(Hs.bind(null,e,Qt,qn),r);break}Hs(e,Qt,qn);break;case 5:Hs(e,Qt,qn);break;default:throw Error(c(329))}}}return Yt(e,rt()),e.callbackNode===n?au.bind(null,e):null}function za(e,t){var n=ii;return e.current.memoizedState.isDehydrated&&(Ws(e,t).flags|=256),e=il(e,t),e!==2&&(t=Qt,Qt=n,t!==null&&Da(t)),e}function Da(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function vm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!Cn(l(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vs(e,t){for(t&=~Ra,t&=~qi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if((it&6)!==0)throw Error(c(327));vr();var t=Xs(e,0);if((t&1)===0)return Yt(e,rt()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=_r(e);r!==0&&(t=r,n=za(e,r))}if(n===1)throw n=ri,Ws(e,0),vs(e,t),Yt(e,rt()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hs(e,Qt,qn),Yt(e,rt()),null}function Ua(e,t){var n=it;it|=1;try{return e(t)}finally{it=n,it===0&&(xr=rt()+500,Mi&&ds())}}function Fs(e){gs!==null&&gs.tag===0&&(it&6)===0&&vr();var t=it;it|=1;var n=pn.transition,r=st;try{if(pn.transition=null,st=1,e)return e()}finally{st=r,pn.transition=n,it=t,(it&6)===0&&ds()}}function Fa(){rn=gr.current,ht(gr)}function Ws(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gd(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(Yl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pi();break;case 3:hr(),ht(Kt),ht(Lt),ca();break;case 5:aa(r);break;case 4:hr();break;case 13:ht(gt);break;case 19:ht(gt);break;case 10:na(r.type._context);break;case 22:case 23:Fa()}n=n.return}if(Mt=e,Et=e=ys(e.current,null),At=rn=t,Pt=0,ri=null,Ra=qi=Us=0,Qt=ii=null,Ls!==null){for(t=0;t<Ls.length;t++)if(n=Ls[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=i,r.next=a}n.pending=r}Ls=null}return e}function cu(e,t){do{var n=Et;try{if(ta(),Wi.current=Ki,Hi){for(var r=xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hi=!1}if(Ds=0,_t=Tt=xt=null,Zr=!1,qr=0,$a.current=null,n===null||n.return===null){Pt=1,ri=t,Et=null;break}e:{var l=e,a=n.return,d=n,h=t;if(t=At,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var M=h,Y=d,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ge=Rc(a);if(ge!==null){ge.flags&=-257,Oc(ge,a,d,l,t),ge.mode&1&&$c(l,M,t),t=ge,h=M;var we=t.updateQueue;if(we===null){var be=new Set;be.add(h),t.updateQueue=be}else we.add(h);break e}else{if((t&1)===0){$c(l,M,t),Wa();break e}h=Error(c(426))}}else if(pt&&d.mode&1){var kt=Rc(a);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),Oc(kt,a,d,l,t),ql(fr(h,d));break e}}l=h=fr(h,d),Pt!==4&&(Pt=2),ii===null?ii=[l]:ii.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var b=_c(l,h,t);rc(l,b);break e;case 1:d=h;var x=l.type,E=l.stateNode;if((l.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ps===null||!ps.has(E)))){l.flags|=65536,t&=-t,l.lanes|=t;var ee=Mc(l,d,t);rc(l,ee);break e}}l=l.return}while(l!==null)}mu(n)}catch(Ie){t=Ie,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function uu(){var e=Zi.current;return Zi.current=Ki,e===null?Ki:e}function Wa(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Mt===null||(Us&268435455)===0&&(qi&268435455)===0||vs(Mt,At)}function il(e,t){var n=it;it|=2;var r=uu();(Mt!==e||At!==t)&&(qn=null,Ws(e,t));do try{ym();break}catch(i){cu(e,i)}while(!0);if(ta(),it=n,Zi.current=r,Et!==null)throw Error(c(261));return Mt=null,At=0,Pt}function ym(){for(;Et!==null;)du(Et)}function wm(){for(;Et!==null&&!Qs();)du(Et)}function du(e){var t=pu(e.alternate,e,rn);e.memoizedProps=e.pendingProps,t===null?mu(e):Et=t,$a.current=null}function mu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=mm(n,t,rn),n!==null){Et=n;return}}else{if(n=hm(n,t),n!==null){n.flags&=32767,Et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,Et=null;return}}if(t=t.sibling,t!==null){Et=t;return}Et=t=e}while(t!==null);Pt===0&&(Pt=5)}function Hs(e,t,n){var r=st,i=pn.transition;try{pn.transition=null,st=1,jm(e,t,n,r)}finally{pn.transition=i,st=r}return null}function jm(e,t,n,r){do vr();while(gs!==null);if((it&6)!==0)throw Error(c(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(El(e,l),e===Mt&&(Et=Mt=null,At=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||tl||(tl=!0,gu(ks,function(){return vr(),null})),l=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||l){l=pn.transition,pn.transition=null;var a=st;st=1;var d=it;it|=4,$a.current=null,pm(e,n),nu(n,e),Fd(Wl),te=!!Fl,Wl=Fl=null,e.current=n,gm(n),Er(),it=d,st=a,pn.transition=l}else e.current=n;if(tl&&(tl=!1,gs=e,nl=i),l=e.pendingLanes,l===0&&(ps=null),Cs(n.stateNode),Yt(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(el)throw el=!1,e=Aa,Aa=null,e;return(nl&1)!==0&&e.tag!==0&&vr(),l=e.pendingLanes,(l&1)!==0?e===La?li++:(li=0,La=e):li=0,ds(),null}function vr(){if(gs!==null){var e=$r(nl),t=pn.transition,n=st;try{if(pn.transition=null,st=16>e?16:e,gs===null)var r=!1;else{if(e=gs,gs=null,nl=0,(it&6)!==0)throw Error(c(331));var i=it;for(it|=4,ve=e.current;ve!==null;){var l=ve,a=l.child;if((ve.flags&16)!==0){var d=l.deletions;if(d!==null){for(var h=0;h<d.length;h++){var M=d[h];for(ve=M;ve!==null;){var Y=ve;switch(Y.tag){case 0:case 11:case 15:si(8,Y,l)}var Z=Y.child;if(Z!==null)Z.return=Y,ve=Z;else for(;ve!==null;){Y=ve;var Q=Y.sibling,ge=Y.return;if(Xc(Y),Y===M){ve=null;break}if(Q!==null){Q.return=ge,ve=Q;break}ve=ge}}}var we=l.alternate;if(we!==null){var be=we.child;if(be!==null){we.child=null;do{var kt=be.sibling;be.sibling=null,be=kt}while(be!==null)}}ve=l}}if((l.subtreeFlags&2064)!==0&&a!==null)a.return=l,ve=a;else e:for(;ve!==null;){if(l=ve,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:si(9,l,l.return)}var b=l.sibling;if(b!==null){b.return=l.return,ve=b;break e}ve=l.return}}var x=e.current;for(ve=x;ve!==null;){a=ve;var E=a.child;if((a.subtreeFlags&2064)!==0&&E!==null)E.return=a,ve=E;else e:for(a=x;ve!==null;){if(d=ve,(d.flags&2048)!==0)try{switch(d.tag){case 0:case 11:case 15:Xi(9,d)}}catch(Ie){jt(d,d.return,Ie)}if(d===a){ve=null;break e}var ee=d.sibling;if(ee!==null){ee.return=d.return,ve=ee;break e}ve=d.return}}if(it=i,ds(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(kn,e)}catch{}r=!0}return r}finally{st=n,pn.transition=t}}return!1}function hu(e,t,n){t=fr(n,t),t=_c(e,t,1),e=hs(e,t,1),t=Ht(),e!==null&&(Ts(e,1,t),Yt(e,t))}function jt(e,t,n){if(e.tag===3)hu(e,e,n);else for(;t!==null;){if(t.tag===3){hu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){e=fr(n,e),e=Mc(t,e,1),t=hs(t,e,1),e=Ht(),t!==null&&(Ts(t,1,e),Yt(t,e));break}}t=t.return}}function Nm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&n,Mt===e&&(At&n)===n&&(Pt===4||Pt===3&&(At&130023424)===At&&500>rt()-Oa?Ws(e,0):Ra|=n),Yt(e,t)}function fu(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ys,Ys<<=1,(Ys&130023424)===0&&(Ys=4194304)));var n=Ht();e=Yn(e,t),e!==null&&(Ts(e,t,n),Yt(e,n))}function Sm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),fu(e,n)}function km(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(c(314))}r!==null&&r.delete(t),fu(e,n)}var pu;pu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Gt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Gt=!1,dm(e,t,n);Gt=(e.flags&131072)!==0}else Gt=!1,pt&&(t.flags&1048576)!==0&&Go(t,Ri,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qi(e,t),e=t.pendingProps;var i=lr(t,Lt.current);mr(t,n),i=ma(null,t,r,e,i,n);var l=ha();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jt(r)?(l=!0,_i(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ia(t),i.updater=Ji,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Sa(null,t,r,!0,l,n)):(t.tag=0,pt&&l&&Ql(t),Wt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qi(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Cm(r),e=In(r,e),i){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Fc(null,t,r,e,n);break e;case 11:t=Ac(null,t,r,e,n);break e;case 14:t=Lc(null,t,r,In(r.type,e),n);break e}throw Error(c(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:In(r,i),Na(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:In(r,i),Fc(e,t,r,i,n);case 3:e:{if(Wc(t),e===null)throw Error(c(387));r=t.pendingProps,l=t.memoizedState,i=l.element,sc(e,t),Ui(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=fr(Error(c(423)),t),t=Hc(e,t,r,n,i);break e}else if(r!==i){i=fr(Error(c(424)),t),t=Hc(e,t,r,n,i);break e}else for(sn=os(t.stateNode.containerInfo.firstChild),nn=t,pt=!0,En=null,n=tc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cr(),r===i){t=Zn(e,t,n);break e}Wt(e,t,r,n)}t=t.child}return t;case 5:return lc(t),e===null&&Zl(t),r=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,a=i.children,Hl(r,i)?a=null:l!==null&&Hl(r,l)&&(t.flags|=32),Uc(e,t),Wt(e,t,a,n),t.child;case 6:return e===null&&Zl(t),null;case 13:return Bc(e,t,n);case 4:return la(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ur(t,null,r,n):Wt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:In(r,i),Ac(e,t,r,i,n);case 7:return Wt(e,t,t.pendingProps,n),t.child;case 8:return Wt(e,t,t.pendingProps.children,n),t.child;case 12:return Wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,l=t.memoizedProps,a=i.value,ct(Li,r._currentValue),r._currentValue=a,l!==null)if(Cn(l.value,a)){if(l.children===i.children&&!Kt.current){t=Zn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var d=l.dependencies;if(d!==null){a=l.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=Xn(-1,n&-n),h.tag=2;var M=l.updateQueue;if(M!==null){M=M.shared;var Y=M.pending;Y===null?h.next=h:(h.next=Y.next,Y.next=h),M.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),sa(l.return,n,t),d.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(c(341));a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),sa(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Wt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,mr(t,n),i=hn(i),r=r(i),t.flags|=1,Wt(e,t,r,n),t.child;case 14:return r=t.type,i=In(r,t.pendingProps),i=In(r.type,i),Lc(e,t,r,i,n);case 15:return zc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:In(r,i),Qi(e,t),t.tag=1,Jt(r)?(e=!0,_i(t)):e=!1,mr(t,n),Tc(t,r,i),ya(t,r,i,n),Sa(null,t,r,!0,e,n);case 19:return Kc(e,t,n);case 22:return Dc(e,t,n)}throw Error(c(156,t.tag))};function gu(e,t){return yi(e,t)}function bm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,t,n,r){return new bm(e,t,n,r)}function Ha(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cm(e){if(typeof e=="function")return Ha(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ne)return 11;if(e===re)return 14}return 2}function ys(e,t){var n=e.alternate;return n===null?(n=gn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ll(e,t,n,r,i,l){var a=2;if(r=e,typeof e=="function")Ha(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ae:return Bs(n.children,i,l,t);case ye:a=8,i|=8;break;case nt:return e=gn(12,n,t,i|2),e.elementType=nt,e.lanes=l,e;case F:return e=gn(13,n,t,i),e.elementType=F,e.lanes=l,e;case K:return e=gn(19,n,t,i),e.elementType=K,e.lanes=l,e;case R:return al(n,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ge:a=10;break e;case at:a=9;break e;case Ne:a=11;break e;case re:a=14;break e;case T:a=16,r=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=gn(a,n,t,i),t.elementType=e,t.type=r,t.lanes=l,t}function Bs(e,t,n,r){return e=gn(7,e,r,t),e.lanes=n,e}function al(e,t,n,r){return e=gn(22,e,r,t),e.elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ba(e,t,n){return e=gn(6,e,null,t),e.lanes=n,e}function Va(e,t,n){return t=gn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Em(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mr(0),this.expirationTimes=Mr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ka(e,t,n,r,i,l,a,d,h){return e=new Em(e,t,n,d,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=gn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ia(l),e}function Im(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xu(e){if(!e)return us;e=e._reactInternals;e:{if(on(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(Jt(n))return Vo(e,n,t)}return t}function vu(e,t,n,r,i,l,a,d,h){return e=Ka(n,r,!0,e,i,l,a,d,h),e.context=xu(null),n=e.current,r=Ht(),i=xs(n),l=Xn(r,i),l.callback=t??null,hs(n,l,i),e.current.lanes=i,Ts(e,i,r),Yt(e,r),e}function ol(e,t,n,r){var i=t.current,l=Ht(),a=xs(i);return n=xu(n),t.context===null?t.context=n:t.pendingContext=n,t=Xn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hs(i,t,a),e!==null&&(_n(e,i,a,l),Di(e,i,a)),a}function cl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ja(e,t){yu(e,t),(e=e.alternate)&&yu(e,t)}function Tm(){return null}var wu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ga(e){this._internalRoot=e}ul.prototype.render=Ga.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));ol(e,t,null,null)},ul.prototype.unmount=Ga.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fs(function(){ol(null,e,null,null)}),t[Kn]=null}};function ul(e){this._internalRoot=e}ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=ji();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oe.length&&t!==0&&t<oe[n].priority;n++);oe.splice(n,0,e),n===0&&Re(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ju(){}function Pm(e,t,n,r,i){if(i){if(typeof r=="function"){var l=r;r=function(){var M=cl(a);l.call(M)}}var a=vu(t,r,e,0,null,!1,!1,"",ju);return e._reactRootContainer=a,e[Kn]=a.current,Br(e.nodeType===8?e.parentNode:e),Fs(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var M=cl(h);d.call(M)}}var h=Ka(e,0,!1,null,null,!1,!1,"",ju);return e._reactRootContainer=h,e[Kn]=h.current,Br(e.nodeType===8?e.parentNode:e),Fs(function(){ol(t,h,n,r)}),h}function ml(e,t,n,r,i){var l=n._reactRootContainer;if(l){var a=l;if(typeof i=="function"){var d=i;i=function(){var h=cl(a);d.call(h)}}ol(t,a,e,i)}else a=Pm(n,t,e,i,r);return cl(a)}Rr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Is(t.pendingLanes);n!==0&&(Rn(t,n|1),Yt(t,rt()),(it&6)===0&&(xr=rt()+500,ds()))}break;case 13:Fs(function(){var r=Yn(e,1);if(r!==null){var i=Ht();_n(r,e,1,i)}}),Ja(e,1)}},Or=function(e){if(e.tag===13){var t=Yn(e,134217728);if(t!==null){var n=Ht();_n(t,e,134217728,n)}Ja(e,134217728)}},Ar=function(e){if(e.tag===13){var t=xs(e),n=Yn(e,t);if(n!==null){var r=Ht();_n(n,e,t,r)}Ja(e,t)}},ji=function(){return st},Lr=function(e,t){var n=st;try{return st=e,t()}finally{st=n}},Sr=function(e,t,n){switch(t){case"input":if(S(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ti(r);if(!i)throw Error(c(90));ze(r),S(r,i)}}}break;case"textarea":xn(e,n);break;case"select":t=n.value,t!=null&&Qe(e,!!n.multiple,t,!1)}},Wn=Ua,fi=Fs;var _m={usingClientEntryPoint:!1,Events:[Jr,rr,Ti,Ss,hi,Ua]},ai={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mm={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Le.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xi(e),e===null?null:e.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||Tm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{kn=hl.inject(Mm),cn=hl}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_m,Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(t))throw Error(c(200));return Im(e,t,null,n)},Xt.createRoot=function(e,t){if(!Qa(e))throw Error(c(299));var n=!1,r="",i=wu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ka(e,1,!1,null,null,n,!1,r,i),e[Kn]=t.current,Br(e.nodeType===8?e.parentNode:e),new Ga(t)},Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=xi(t),e=e===null?null:e.stateNode,e},Xt.flushSync=function(e){return Fs(e)},Xt.hydrate=function(e,t,n){if(!dl(t))throw Error(c(200));return ml(null,e,t,!0,n)},Xt.hydrateRoot=function(e,t,n){if(!Qa(e))throw Error(c(405));var r=n!=null&&n.hydratedSources||null,i=!1,l="",a=wu;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vu(t,null,e,1,n??null,i,!1,l,a),e[Kn]=t.current,Br(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ul(t)},Xt.render=function(e,t,n){if(!dl(t))throw Error(c(200));return ml(null,e,t,!1,n)},Xt.unmountComponentAtNode=function(e){if(!dl(e))throw Error(c(40));return e._reactRootContainer?(Fs(function(){ml(null,null,e,!1,function(){e._reactRootContainer=null,e[Kn]=null})}),!0):!1},Xt.unstable_batchedUpdates=Ua,Xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dl(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return ml(e,t,n,!1,r)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Tu;function Fm(){if(Tu)return Za.exports;Tu=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(g){console.error(g)}}return f(),Za.exports=Um(),Za.exports}var Pu;function Wm(){if(Pu)return fl;Pu=1;var f=Fm();return fl.createRoot=f.createRoot,fl.hydrateRoot=f.hydrateRoot,fl}var Hm=Wm();const Bm=ed(Hm),_u="miniOtomePhone_full_Theme_v1",td=w.createContext(null);function Vm({children:f}){const[g,c]=w.useState(()=>{if(typeof window>"u")return"pink";try{const O=window.localStorage.getItem(_u);return O==="pink"||O==="blue"||O==="mint"||O==="sunset"||O==="lavender"?O:"pink"}catch{return"pink"}});w.useEffect(()=>{try{window.localStorage.setItem(_u,g)}catch{}},[g]),w.useEffect(()=>{if(typeof document>"u")return;document.documentElement.setAttribute("data-theme",g)},[g]);const V=w.useMemo(()=>({theme:g,setTheme:O=>c(O)}),[g]);return s.jsx(td.Provider,{value:V,children:f})}function Km(){const f=w.useContext(td);if(!f)throw new Error("useTheme must be used within ThemeProvider");return f}const Jm=[{id:"pink",name:"",desc:""},{id:"blue",name:"",desc:""},{id:"mint",name:"",desc:""},{id:"sunset",name:"",desc:""},{id:"lavender",name:"",desc:""}],Gm=({onBackHome:f})=>{const{theme:g,setTheme:c}=Km();return s.jsxs("div",{className:"appearance-screen",children:[s.jsxs("header",{className:"settings-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:f,children:" "}),s.jsxs("div",{className:"settings-title",children:[s.jsx("div",{className:"settings-title-main",children:"  "}),s.jsx("div",{className:"settings-title-sub",children:""})]})]}),s.jsx("main",{className:"settings-body",children:s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),Jm.map(V=>{const O=g===V.id;return s.jsxs("button",{type:"button",className:`soft-card appearance-card ${O?"appearance-card-active":""}`,onClick:()=>c(V.id),children:[s.jsx("div",{className:`appearance-preview appearance-preview-${V.id}`,"aria-hidden":"true"}),s.jsxs("div",{className:"appearance-main",children:[s.jsx("div",{className:"appearance-name",children:V.name}),s.jsx("div",{className:"appearance-desc",children:V.desc})]})]},V.id)})]})})]})},Mu="miniOtomePhone_full_AiConfig_v1",pl={baseUrl:"",apiKey:"",model:""},nd=w.createContext(null);function Qm({children:f}){const[g,c]=w.useState(()=>{if(typeof window>"u")return pl;try{const O=window.localStorage.getItem(Mu);if(!O)return pl;const y=JSON.parse(O);return{...pl,...y}}catch{return pl}});w.useEffect(()=>{try{window.localStorage.setItem(Mu,JSON.stringify(g))}catch{}},[g]);const V=w.useMemo(()=>({aiConfig:g,updateAiConfig:O=>c(y=>({...y,...O}))}),[g]);return s.jsx(nd.Provider,{value:V,children:f})}function di(){const f=w.useContext(nd);if(!f)throw new Error("useAiSettings must be used within AiSettingsProvider");return f}function sd(f){const V=f.replace(/\s+/g,"").replace(/\/+(chat\/completions|completions)\/*$/i,"").replace(/\/+$/g,""),O=`${V}/chat/completions`;return{root:V,chatUrl:O}}async function Zt(f,g){var z,L,C,W,P,_,X,I;if(!f.baseUrl||!f.apiKey||!f.model)throw new Error(" AI    Base URLAPI Key ");const{chatUrl:c}=sd(f.baseUrl),V={model:f.model,messages:g};console.log("AIURL:",c),console.log("AI:",JSON.stringify(V,null,2));const O=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.apiKey}`},body:JSON.stringify(V)});if(!O.ok){const H=await O.text();throw new Error(`${O.status} ${H}`)}const y=await O.json();console.log("AI:",JSON.stringify(y,null,2));let N=((C=(L=(z=y==null?void 0:y.choices)==null?void 0:z[0])==null?void 0:L.message)==null?void 0:C.content)??((P=(W=y==null?void 0:y.choices)==null?void 0:W[0])==null?void 0:P.text)??((_=y==null?void 0:y.message)==null?void 0:_.content)??(y==null?void 0:y.content)??(y==null?void 0:y.text)??"";if(!N&&Array.isArray(y==null?void 0:y.choices))for(const H of y.choices){if((X=H==null?void 0:H.message)!=null&&X.content&&H.message.content.trim()){N=H.message.content;break}if(H!=null&&H.text&&H.text.trim()){N=H.text;break}}if(!N||!N.trim()){const H=(I=y==null?void 0:y.choices)==null?void 0:I[0],se=H==null?void 0:H.finish_reason,fe=H==null?void 0:H.finish_details;console.error("AI:",{finish_reason:se,finish_details:fe,choice:H,fullResponse:y});let q="AI ";throw se==="content_filter"?q="AI ":se==="length"?q="AI ":se==="stop"?q="AI ":se&&(q=`AI ${se}`),q+=`

${JSON.stringify(y).substring(0,300)}${JSON.stringify(y).length>300?"...":""}`,new Error(q)}return N.trim()}async function Ym(f){if(!f.baseUrl||!f.apiKey)throw new Error(" API Base URL  API Key");const{root:g}=sd(f.baseUrl),c=`${g}/models`,V=await fetch(c,{method:"GET",headers:{Authorization:`Bearer ${f.apiKey}`}});if(!V.ok){const N=await V.text();throw new Error(`${V.status} ${N}`)}const O=await V.json(),y=(O==null?void 0:O.data)??(O==null?void 0:O.models)??[];if(!Array.isArray(y)||y.length===0)throw new Error(" OpenAI ");return y.map(N=>({id:N.id??N.name??"unknown-model",...N}))}function Xm({onBackHome:f}){const{aiConfig:g,updateAiConfig:c}=di(),[V,O]=w.useState(!1),[y,N]=w.useState([]),[z,L]=w.useState(!1),[C,W]=w.useState(""),P=I=>{W(I),L(!0)},_=async()=>{O(!0);try{const I=await Ym(g);N(I),P(`API  ${I.length} `)}catch(I){P(I.message??"")}finally{O(!1)}},X=()=>{P("")};return s.jsxs("div",{className:"settings-screen",children:[s.jsxs("header",{className:"settings-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:f,children:" "}),s.jsxs("div",{className:"settings-title",children:[s.jsx("div",{className:"settings-title-main",children:"  "}),s.jsx("div",{className:"settings-title-sub",children:""})]})]}),s.jsx("main",{className:"settings-body",children:s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:"AI "}),s.jsx("div",{className:"soft-card-subtitle",children:" OpenAI "})]})}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"API Base URL"}),s.jsx("input",{className:"settings-input",placeholder:"https://api.xxx.com/v1",value:g.baseUrl,onChange:I=>c({baseUrl:I.target.value})})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"API Key"}),s.jsx("input",{type:"password",className:"settings-input",placeholder:"",value:g.apiKey,onChange:I=>c({apiKey:I.target.value})})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"gpt-4.x / deepseek-xxx",value:g.model,onChange:I=>c({model:I.target.value})})]}),s.jsxs("div",{className:"settings-field settings-model-row",children:[s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:_,disabled:V,children:V?" API":" API "}),y.length>0&&s.jsxs("select",{className:"settings-select",value:g.model,onChange:I=>c({model:I.target.value}),children:[s.jsx("option",{value:"",children:""}),y.map(I=>s.jsx("option",{value:I.id,children:I.id},I.id))]})]}),g.model&&s.jsxs("div",{className:"settings-current-model",children:["",s.jsx("span",{children:g.model})]}),s.jsx("div",{className:"settings-field",children:s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:X,children:""})})]})}),z&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>L(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:I=>{I.stopPropagation()},children:[s.jsx("div",{className:"settings-modal-title",children:"API "}),s.jsx("div",{className:"settings-modal-message",children:C}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>L(!1),children:""})]})})]})}const $u="miniOtomePhone_full_Worldbook_v1",Dn={global:[],perApp:{wechat:[{id:"wechat-default-world",title:"",entries:[{id:"wechat-online-chat",title:"",enabled:!0,content:`
1. """""/""/"
2. """"
3. ""
4. ""****AI"...""...""..."
5. """"...
6. """"""""""
7. 
8. 
9.  OOC `},{id:"wechat-story-mode",title:"",enabled:!0,content:`
1. ****
2. ****
3. ****
4. ******[]**"""""""
5. ****
6. **** OOC
7. ****
8. ****
9. `}]}],xiaohongshu:[],weibo:[],coupleSpace:[],food:[]}},rd=w.createContext(null);function Zm({children:f}){const[g,c]=w.useState(()=>{if(typeof window>"u")return Dn;try{const O=window.localStorage.getItem($u);if(!O)return Dn;const y=JSON.parse(O),N=P=>(P??[]).map((_,X)=>({id:typeof(_==null?void 0:_.id)=="string"?_.id:`item-${X}`,title:typeof(_==null?void 0:_.title)=="string"?_.title:"",content:typeof(_==null?void 0:_.content)=="string"?_.content:"",enabled:typeof(_==null?void 0:_.enabled)=="boolean"?_.enabled:!0})),z=P=>(P??[]).map((_,X)=>({id:typeof(_==null?void 0:_.id)=="string"?_.id:`wb-${X}`,title:typeof(_==null?void 0:_.title)=="string"?_.title:"",entries:N(_==null?void 0:_.entries)}));let L=Array.isArray(y.global)?z(y.global):Dn.global;const C={...Dn.perApp};y.perApp&&typeof y.perApp=="object"&&Object.keys(Dn.perApp).forEach(P=>{const _=y.perApp[P];C[P]=Array.isArray(_)?z(_):Dn.perApp[P]}),C.wechat&&C.wechat.some(P=>P.id==="wechat-default-world"||P.title==="")||(C.wechat=[...C.wechat??[],...Dn.perApp.wechat]);try{const P=Dn.perApp.wechat.find(X=>X.id==="wechat-default-world"||X.title===""),_=(P==null?void 0:P.entries.find(X=>X.id==="wechat-online-chat"||X.title===""))??null;_&&C.wechat&&(C.wechat=C.wechat.map(X=>X.id==="wechat-default-world"||X.title===""?{...X,entries:X.entries.map(I=>(I.id==="wechat-online-chat"||I.title==="")&&!I.content.includes("")&&!I.content.includes("")?{...I,title:_.title,content:_.content}:I)}:X))}catch{}try{const P=Dn.perApp.wechat.find(X=>X.id==="wechat-default-world"||X.title===""),_=(P==null?void 0:P.entries.find(X=>X.id==="wechat-story-mode"||X.title===""))??null;_&&C.wechat&&(C.wechat=C.wechat.map(X=>X.id==="wechat-default-world"||X.title===""?{...X,entries:X.entries.map(I=>(I.id==="wechat-story-mode"||I.title==="")&&(!I.content.includes("")||!I.content.includes("")||!I.content.includes(""))?{...I,title:_.title,content:_.content}:I)}:X))}catch{}return{global:L,perApp:C}}catch{return Dn}});w.useEffect(()=>{try{window.localStorage.setItem($u,JSON.stringify(g))}catch{}},[g]);const V=w.useMemo(()=>{const O=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;return{config:g,addGlobalWorldbook:(y,N)=>c(z=>({...z,global:[...z.global,{id:O(),title:y||"",entries:[{id:O(),title:y||"",content:N,enabled:!0}]}]})),updateGlobalWorldbook:(y,N)=>c(z=>({...z,global:z.global.map(L=>L.id===y?{...L,...N}:L)})),addAppWorldbook:(y,N,z)=>c(L=>({...L,perApp:{...L.perApp,[y]:[...L.perApp[y]??[],{id:O(),title:N||"",entries:z.map(C=>({id:O(),title:C.title||"",content:C.content,enabled:!0}))}]}})),updateAppWorldbook:(y,N,z)=>c(L=>({...L,perApp:{...L.perApp,[y]:(L.perApp[y]??[]).map(C=>C.id===N?{...C,...z}:C)}})),addAppWorldbookItem:(y,N,z,L)=>c(C=>({...C,perApp:{...C.perApp,[y]:(C.perApp[y]??[]).map(W=>W.id===N?{...W,entries:[...W.entries,{id:O(),title:z||"",content:L,enabled:!0}]}:W)}})),updateAppWorldbookItem:(y,N,z,L)=>c(C=>({...C,perApp:{...C.perApp,[y]:(C.perApp[y]??[]).map(W=>W.id===N?{...W,entries:W.entries.map(P=>P.id===z?{...P,...L}:P)}:W)}})),toggleAppWorldbookItemEnabled:(y,N,z)=>c(L=>({...L,perApp:{...L.perApp,[y]:(L.perApp[y]??[]).map(C=>C.id===N?{...C,entries:C.entries.map(W=>W.id===z?{...W,enabled:!W.enabled}:W)}:C)}})),deleteAppWorldbook:(y,N)=>c(z=>({...z,perApp:{...z.perApp,[y]:(z.perApp[y]??[]).filter(L=>L.id!==N)}})),deleteAppWorldbookItem:(y,N,z)=>c(L=>({...L,perApp:{...L.perApp,[y]:(L.perApp[y]??[]).map(C=>C.id===N?{...C,entries:C.entries.filter(W=>W.id!==z)}:C)}}))}},[g]);return s.jsx(rd.Provider,{value:V,children:f})}function wl(){const f=w.useContext(rd);if(!f)throw new Error("useWorldbook must be used within WorldbookProvider");return f}const Ru=[{id:"quiet",text:"",emoji:"",description:""},{id:"online",text:"",emoji:"",description:""},{id:"busy",text:"",emoji:"",description:""},{id:"dnd",text:"",emoji:"",description:""},{id:"away",text:"",emoji:"",description:""},{id:"sleeping",text:"",emoji:"",description:""},{id:"listening_music",text:"",emoji:"",description:""},{id:"gaming",text:"",emoji:"",description:""},{id:"working",text:"",emoji:"",description:""},{id:"studying",text:"",emoji:"",description:""},{id:"commuting",text:"",emoji:"",description:""},{id:"fishing",text:"",emoji:"",description:""},{id:"happy",text:"",emoji:"",description:""},{id:"shy",text:"",emoji:"",description:""},{id:"confession",text:"",emoji:"",description:""},{id:"angry",text:"",emoji:"",description:""},{id:"story",text:"",emoji:"",description:""},{id:"missing",text:"",emoji:"",description:""}],Ou="miniOtomePhone_chatSettings_",Au="miniOtomePhone_localWorldbook_",to="miniOtomePhone_chatMemories_",qm="miniOtomePhone_heartMemoryLastTurn_",Lu="miniOtomePhone_messages_",eh=({chatId:f,chatName:g,onBack:c,initialTab:V})=>{const{aiConfig:O}=di(),[y,N]=w.useState(V??"chatSettings"),[z,L]=w.useState(()=>{try{const S=window.localStorage.getItem(`${Ou}${f}`);if(S)return JSON.parse(S)}catch{}return{realName:"",nickname:"",callMe:"",myIdentity:"",myGender:"",myOther:"",taIdentity:"",taGender:"",taOther:"",chatStyle:"",opening:"",status:"quiet",customStatus:"",avatar:"",clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0,backgroundType:"default",backgroundValue:""}});w.useEffect(()=>{try{window.localStorage.setItem(`${Ou}${f}`,JSON.stringify(z)),window.dispatchEvent(new CustomEvent("miniOtomePhone:chatSettingsUpdated",{detail:{chatId:f}}))}catch{}},[z,f]);const C=(S,me)=>{L(ue=>({...ue,[S]:me}))},[W,P]=w.useState(()=>{try{const S=window.localStorage.getItem(`${Au}${f}`);if(S)return JSON.parse(S)}catch{}return[]}),[_,X]=w.useState(()=>{try{const S=window.localStorage.getItem(`${to}${f}`);if(S)return JSON.parse(S)}catch{}return[]});w.useEffect(()=>{const S=()=>{try{const ue=window.localStorage.getItem(`${to}${f}`);X(ue?JSON.parse(ue):[])}catch{X([])}};S();const me=()=>S();return window.addEventListener("storage",me),()=>window.removeEventListener("storage",me)},[f]),w.useEffect(()=>{try{window.localStorage.setItem(`${Au}${f}`,JSON.stringify(W))}catch{}},[W,f]);const I=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,[H,se]=w.useState(!1),[fe,q]=w.useState(""),[Ae,Le]=w.useState([{id:"item-0",title:"",content:""}]),[xe,u]=w.useState(null),[ae,ye]=w.useState(null),[nt,Ge]=w.useState(""),[at,Ne]=w.useState(""),[F,K]=w.useState(null),[re,T]=w.useState(""),[R,j]=w.useState(""),[A,B]=w.useState(!1),[m,$]=w.useState(""),[k,_e]=w.useState(null),pe=w.useRef(null);w.useEffect(()=>{ae&&pe.current&&setTimeout(()=>{var S;(S=pe.current)==null||S.focus()},100)},[ae]);const Xe=()=>{if(!fe.trim())return;const S=Ae.filter(ue=>ue.title.trim()||ue.content.trim());if(S.length===0)return;const me={id:I(),title:fe.trim(),entries:S.map(ue=>({id:I(),title:ue.title.trim()||"",content:ue.content.trim(),enabled:!0}))};P(ue=>[...ue,me]),q(""),Le([{id:"item-0",title:"",content:""}]),se(!1)},Ye=(S,me)=>{P(ue=>ue.map(le=>le.id===S?{...le,...me}:le))},qe=S=>{P(me=>me.filter(ue=>ue.id!==S))},v=(S,me,ue)=>{P(le=>le.map(Qe=>Qe.id===S?{...Qe,entries:[...Qe.entries,{id:I(),title:me.trim()||"",content:ue.trim(),enabled:!0}]}:Qe))},ie=(S,me,ue)=>{P(le=>le.map(Qe=>Qe.id===S?{...Qe,entries:Qe.entries.map(Te=>Te.id===me?{...Te,...ue}:Te)}:Qe))},Ke=(S,me)=>{P(ue=>ue.map(le=>le.id===S?{...le,entries:le.entries.filter(Qe=>Qe.id!==me)}:le))},ze=(S,me)=>{P(ue=>ue.map(le=>le.id===S?{...le,entries:le.entries.map(Qe=>Qe.id===me?{...Qe,enabled:!Qe.enabled}:Qe)}:le))},Je=async(S,me,ue,le)=>{if(!S.trim()||A)return;B(!0),_e({type:ue?"editing":le!==void 0?"creating":"adding",worldbookId:me,itemId:ue,itemIndex:le});try{let Te="";if(me){const Bt=W.find(yn=>yn.id===me);Te=(Bt==null?void 0:Bt.title)||""}else fe&&(Te=fe);const ut=`


1. 
2. AI
3. 
4. 100-300
5. 

${Te||""}
${S}`,xn=`"${S}"`;let yt=(await Zt(O,[{role:"system",content:ut},{role:"user",content:xn}])).trim();if((yt.startsWith('"')&&yt.endsWith('"')||yt.startsWith("'")&&yt.endsWith("'"))&&(yt=yt.slice(1,-1).trim()),yt=yt.replace(/^```[\w]*\n?/g,"").replace(/\n?```$/g,"").trim(),ue)Ne(yt);else if(le!==void 0){const Bt=[...Ae];Bt[le].content=yt,Le(Bt)}else j(yt)}catch(Te){console.error(":",Te),alert(`${Te instanceof Error?Te.message:""}`)}finally{B(!1),_e(null),$("")}},je=()=>{try{const{status:S,customStatus:me,clothing:ue,clothingState:le,innerThoughts:Qe,genitalState:Te,desire:ut,mood:xn,favorability:vn,jealousy:yt,...Bt}=z,yn={settings:Bt,localWorldbooks:W,exportTime:new Date().toISOString(),version:"1.0"},wn=JSON.stringify(yn,null,2),Un=new Blob([wn],{type:"application/json"}),jn=URL.createObjectURL(Un),Nn=document.createElement("a");Nn.href=jn,Nn.download=`_${g||f}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Nn),Nn.click(),document.body.removeChild(Nn),URL.revokeObjectURL(jn)}catch(S){console.error(":",S),alert("")}},vt=()=>{try{let S=[];try{const ut=window.localStorage.getItem(`${Lu}${f}`);ut&&(S=JSON.parse(ut))}catch{}const me={chatId:f,chatName:g,messages:S,settings:z,localWorldbooks:W,heartMemories:_,exportTime:new Date().toISOString(),version:"1.0"},ue=JSON.stringify(me,null,2),le=new Blob([ue],{type:"application/json"}),Qe=URL.createObjectURL(le),Te=document.createElement("a");Te.href=Qe,Te.download=`_${g||f}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(Qe),alert("")}catch(S){console.error(":",S),alert("")}},bt=()=>{try{const S=document.createElement("input");S.type="file",S.accept=".json,application/json",S.style.display="none",S.style.position="absolute",S.style.left="-9999px";const me=()=>{try{S.parentNode&&document.body.removeChild(S)}catch{}};document.body.appendChild(S),S.onchange=ue=>{var Te;const le=(Te=ue.target.files)==null?void 0:Te[0];if(!le){me();return}const Qe=new FileReader;Qe.onload=ut=>{var xn;try{me();const vn=(xn=ut.target)==null?void 0:xn.result,yt=JSON.parse(vn);if(!yt.settings){alert("");return}confirm("")&&(L(yt.settings),yt.localWorldbooks&&P(yt.localWorldbooks||[]),alert(""))}catch(vn){console.error(":",vn),alert("")}},Qe.onerror=()=>{me(),alert("")},Qe.readAsText(le)},requestAnimationFrame(()=>{try{S.parentNode||document.body.appendChild(S),S.click()}catch(ue){console.error(":",ue),me(),alert(" iOS PWA ")}})}catch(S){console.error(":",S),alert("")}};return s.jsxs("div",{className:"settings-screen wechat-screen",children:[s.jsxs("header",{className:"wechat-header wechat-chat-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:c,children:" "}),s.jsxs("div",{className:"wechat-title",children:[s.jsx("div",{className:"wechat-title-main",children:""}),s.jsx("div",{className:"wechat-title-sub",children:g})]}),s.jsx("div",{className:"wechat-header-right",children:s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{if(window.confirm(""))try{window.localStorage.removeItem(`${Lu}${f}`),window.localStorage.removeItem(`${to}${f}`),window.localStorage.removeItem(`${qm}${f}`),X([]),L(S=>({...S,clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0})),window.dispatchEvent(new CustomEvent("miniOtomePhone:chatHistoryCleared",{detail:{chatId:f}})),alert("")}catch{}},style:{whiteSpace:"nowrap",padding:"6px 14px",fontSize:"11px"},children:""})})]}),s.jsxs("nav",{className:"chat-settings-nav",children:[s.jsx("button",{type:"button",className:`chat-settings-nav-item ${y==="chatSettings"?"chat-settings-nav-item-active":""}`,onClick:()=>N("chatSettings"),children:""}),s.jsx("button",{type:"button",className:`chat-settings-nav-item ${y==="localWorldbook"?"chat-settings-nav-item-active":""}`,onClick:()=>N("localWorldbook"),children:""}),s.jsx("button",{type:"button",className:`chat-settings-nav-item ${y==="chatBackground"?"chat-settings-nav-item-active":""}`,onClick:()=>N("chatBackground"),children:""}),s.jsx("button",{type:"button",className:`chat-settings-nav-item ${y==="replyPresets"?"chat-settings-nav-item-active":""}`,onClick:()=>N("replyPresets"),children:""}),s.jsx("button",{type:"button",className:`chat-settings-nav-item ${y==="memories"?"chat-settings-nav-item-active":""}`,onClick:()=>N("memories"),children:""})]}),s.jsxs("main",{className:"settings-body",children:[y==="chatSettings"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),s.jsxs("div",{className:"export-import-buttons",style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px",marginTop:"12px",padding:"10px",background:"rgba(255, 240, 252, 0.4)",borderRadius:"12px",border:"1px solid rgba(255, 195, 224, 0.5)",width:"100%",boxSizing:"border-box"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"6px"},children:[s.jsx("button",{type:"button",onClick:je,title:"",style:{flex:"1 1 0%",padding:"8px 10px",fontSize:"11px",whiteSpace:"nowrap",background:"#fff0fc",border:"2px solid #ffc3e0",borderRadius:"20px",color:"#8b5a6b",cursor:"pointer",fontWeight:600,minWidth:0,maxWidth:"50%"},children:" "}),s.jsx("button",{type:"button",onClick:bt,title:"",style:{flex:"1 1 0%",padding:"8px 10px",fontSize:"11px",whiteSpace:"nowrap",background:"#fff0fc",border:"2px solid #ffc3e0",borderRadius:"20px",color:"#8b5a6b",cursor:"pointer",fontWeight:600,minWidth:0,maxWidth:"50%"},children:" "})]}),s.jsx("button",{type:"button",onClick:vt,title:"",style:{width:"100%",padding:"10px 14px",fontSize:"12px",whiteSpace:"nowrap",background:"linear-gradient(135deg, #ffc3e0 0%, #ff9ec7 100%)",border:"2px solid #ff9ec7",borderRadius:"20px",color:"#fff",cursor:"pointer",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 158, 199, 0.3)"},children:" "})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("input",{className:"settings-input",placeholder:"ta",value:z.realName,onChange:S=>C("realName",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("input",{className:"settings-input",placeholder:"ta",value:z.nickname,onChange:S=>C("nickname",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.callMe,onChange:S=>C("callMe",S.target.value)})]})]}),s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:"ta"})]})}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.myIdentity,onChange:S=>C("myIdentity",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.myGender,onChange:S=>C("myGender",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("textarea",{className:"settings-textarea",placeholder:"...",value:z.myOther,onChange:S=>C("myOther",S.target.value)})]})]}),s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:"ta"}),s.jsx("div",{className:"soft-card-subtitle",children:"ta"})]})}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"4px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{className:"wechat-chat-avatar",style:{width:"60px",height:"60px",borderRadius:"14px",background:z.avatar?"transparent":"radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:z.avatar?s.jsx("img",{src:z.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"},onError:S=>{C("avatar","")}}):s.jsx("span",{style:{fontSize:"24px"},children:""})}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx("label",{htmlFor:"avatar-upload",className:"primary-pill-btn",style:{display:"inline-block",cursor:"pointer",textAlign:"center",padding:"6px 12px",fontSize:"12px"},children:""}),s.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:S=>{var ue;const me=(ue=S.target.files)==null?void 0:ue[0];if(me){if(me.size>5*1024*1024){alert("5MB");return}const le=new FileReader;le.onload=Qe=>{var ut;const Te=(ut=Qe.target)==null?void 0:ut.result;typeof Te=="string"&&C("avatar",Te)},le.readAsDataURL(me)}}})]})]}),s.jsx("div",{children:s.jsx("input",{className:"settings-input",placeholder:"URL",value:z.avatar&&!z.avatar.startsWith("data:")?z.avatar:"",onChange:S=>{const me=S.target.value.trim();me?C("avatar",me):C("avatar","")}})}),z.avatar&&s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>C("avatar",""),style:{alignSelf:"flex-start"},children:""})]})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.taIdentity,onChange:S=>C("taIdentity",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.taGender,onChange:S=>C("taGender",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta"}),s.jsx("textarea",{className:"settings-textarea",placeholder:"ta...",value:z.taOther,onChange:S=>C("taOther",S.target.value)})]})]}),s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("textarea",{className:"settings-textarea",placeholder:"",value:z.chatStyle,onChange:S=>C("chatStyle",S.target.value)})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("textarea",{className:"settings-textarea",placeholder:"...",value:z.opening,onChange:S=>C("opening",S.target.value)})]})]})]}),y==="localWorldbook"&&s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),W.length>0?W.map(S=>{const me=xe===S.id,ue=(ae==null?void 0:ae.worldbookId)===S.id;return s.jsxs("details",{className:"worldbook-entry",open:ue||void 0,children:[s.jsxs("summary",{className:"worldbook-entry-summary",children:[s.jsx("span",{className:"worldbook-entry-title",children:S.title}),s.jsxs("span",{className:"worldbook-entry-count",children:[" ",S.entries.length," "]})]}),s.jsxs("div",{className:"worldbook-entry-body",children:[me?s.jsxs("div",{className:"worldbook-editor",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:xe===S.id?S.title:"",onChange:le=>Ye(S.id,{title:le.target.value}),placeholder:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{u(null)},style:{marginTop:"8px"},children:""})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"worldbook-entry-item-header",children:[s.jsx("span",{className:"worldbook-entry-item-title",children:S.title}),s.jsxs("div",{children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>u(S.id),children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>qe(S.id),style:{marginLeft:"6px"},children:""})]})]})}),S.entries.map(le=>{const Qe=(ae==null?void 0:ae.worldbookId)===S.id&&(ae==null?void 0:ae.itemId)===le.id;return s.jsx("div",{className:"worldbook-entry",children:Qe?s.jsxs("div",{className:"worldbook-editor",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{ref:pe,className:"settings-input",value:nt,onChange:Te=>Ge(Te.target.value),onTouchStart:Te=>{Te.currentTarget.focus()},onClick:Te=>{Te.currentTarget.focus()},placeholder:"",autoFocus:!0}),s.jsx("label",{className:"settings-label",style:{marginTop:"6px"},children:""}),s.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"6px",alignItems:"center"},children:[s.jsx("input",{className:"settings-input",value:(k==null?void 0:k.type)==="editing"&&(k==null?void 0:k.worldbookId)===S.id&&(k==null?void 0:k.itemId)===le.id?m:"",onChange:Te=>{(k==null?void 0:k.type)==="editing"&&(k==null?void 0:k.worldbookId)===S.id&&(k==null?void 0:k.itemId)===le.id?$(Te.target.value):($(Te.target.value),_e({type:"editing",worldbookId:S.id,itemId:le.id}))},placeholder:"AI",style:{flex:1,fontSize:"12px"},disabled:A}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{const Te=(k==null?void 0:k.type)==="editing"&&(k==null?void 0:k.worldbookId)===S.id&&(k==null?void 0:k.itemId)===le.id?m:"";Te.trim()&&Je(Te,S.id,le.id)},disabled:A||!m.trim()||((k==null?void 0:k.type)==="editing"&&(k==null?void 0:k.worldbookId)===S.id&&(k==null?void 0:k.itemId)===le.id?!m.trim():!0),style:{whiteSpace:"nowrap",fontSize:"11px",padding:"6px 10px"},children:A&&(k==null?void 0:k.type)==="editing"&&(k==null?void 0:k.worldbookId)===S.id&&(k==null?void 0:k.itemId)===le.id?"...":" "})]}),s.jsx("textarea",{className:"settings-textarea worldbook-textarea",value:at,onChange:Te=>Ne(Te.target.value),onTouchStart:Te=>{Te.currentTarget.focus()},onClick:Te=>{Te.currentTarget.focus()},placeholder:"..."}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{ie(S.id,le.id,{title:nt,content:at}),ye(null),Ge(""),Ne("")},style:{marginTop:"8px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{ye(null),Ge(""),Ne("")},style:{marginTop:"4px"},children:""})]}):s.jsxs("details",{className:"worldbook-entry",children:[s.jsx("summary",{className:"worldbook-entry-summary",style:{cursor:"pointer"},children:s.jsxs("div",{className:"worldbook-entry-item-header",style:{margin:0,border:"none",padding:0},children:[s.jsxs("div",{className:"worldbook-entry-item-left",children:[s.jsx("span",{className:"worldbook-entry-item-title",children:le.title}),s.jsxs("label",{className:"worldbook-toggle",children:[s.jsx("input",{type:"checkbox",checked:le.enabled,onChange:Te=>{Te.stopPropagation(),ze(S.id,le.id)}}),s.jsx("span",{className:"worldbook-toggle-slider"})]})]}),s.jsxs("div",{className:"worldbook-entry-item-actions",children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:Te=>{Te.stopPropagation(),Te.preventDefault(),ye({worldbookId:S.id,itemId:le.id}),Ge(le.title),Ne(le.content),_e({type:"editing",worldbookId:S.id,itemId:le.id}),$("");let ut=Te.currentTarget;for(;ut&&ut!==document.body;){if(ut.tagName==="DETAILS"&&ut.classList.contains("worldbook-entry")){ut.open=!0;break}ut=ut.parentElement}},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:Te=>{Te.stopPropagation(),Ke(S.id,le.id)},style:{marginLeft:"6px"},children:""})]})]})}),s.jsx("div",{className:"worldbook-entry-body",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed rgba(255, 195, 224, 0.5)"},children:s.jsx("div",{className:"worldbook-entry-item-content",children:le.content})})]})},le.id)}),!me&&s.jsx(s.Fragment,{children:F!==S.id?s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{K(S.id),T(""),j(""),_e({type:"adding",worldbookId:S.id}),$("")},style:{marginTop:"10px"},children:"+ "}):s.jsxs("div",{className:"worldbook-editor",style:{marginTop:"10px"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:re,onChange:le=>T(le.target.value),placeholder:""}),s.jsx("label",{className:"settings-label",style:{marginTop:"6px"},children:""}),s.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"6px",alignItems:"center"},children:[s.jsx("input",{className:"settings-input",value:(k==null?void 0:k.type)==="adding"&&(k==null?void 0:k.worldbookId)===S.id?m:"",onChange:le=>{(k==null?void 0:k.type)==="adding"&&(k==null?void 0:k.worldbookId)===S.id?$(le.target.value):($(le.target.value),_e({type:"adding",worldbookId:S.id}))},placeholder:"AI",style:{flex:1,fontSize:"12px"},disabled:A}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{const le=(k==null?void 0:k.type)==="adding"&&(k==null?void 0:k.worldbookId)===S.id?m:"";le.trim()&&Je(le,S.id)},disabled:A||!m.trim()||((k==null?void 0:k.type)==="adding"&&(k==null?void 0:k.worldbookId)===S.id?!m.trim():!0),style:{whiteSpace:"nowrap",fontSize:"11px",padding:"6px 10px"},children:A&&(k==null?void 0:k.type)==="adding"&&(k==null?void 0:k.worldbookId)===S.id?"...":" "})]}),s.jsx("textarea",{className:"settings-textarea",value:R,onChange:le=>j(le.target.value),placeholder:"...",style:{minHeight:"80px"}})]}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{(re.trim()||R.trim())&&(v(S.id,re,R),T(""),j(""),K(null))},style:{marginTop:"12px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{K(null),T(""),j("")},style:{marginTop:"6px"},children:""})]})})]})]},S.id)}):s.jsx("div",{className:"settings-field",children:s.jsx("p",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:""})}),H?s.jsxs("div",{className:"worldbook-editor",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:fe,onChange:S=>q(S.target.value),placeholder:""}),s.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),Ae.map((S,me)=>s.jsxs("div",{style:{marginTop:me>0?"8px":"4px"},children:[s.jsx("input",{className:"settings-input",value:S.title,onChange:ue=>{const le=[...Ae];le[me].title=ue.target.value,Le(le)},placeholder:"",style:{marginBottom:"4px"}}),s.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"6px",alignItems:"center"},children:[s.jsx("input",{className:"settings-input",value:(k==null?void 0:k.type)==="creating"&&(k==null?void 0:k.itemIndex)===me?m:"",onChange:ue=>{(k==null?void 0:k.type)==="creating"&&(k==null?void 0:k.itemIndex)===me?$(ue.target.value):($(ue.target.value),_e({type:"creating",itemIndex:me}))},placeholder:"AI",style:{flex:1,fontSize:"12px"},disabled:A}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{const ue=(k==null?void 0:k.type)==="creating"&&(k==null?void 0:k.itemIndex)===me?m:"";ue.trim()&&Je(ue,void 0,void 0,me)},disabled:A||!m.trim()||((k==null?void 0:k.type)==="creating"&&(k==null?void 0:k.itemIndex)===me?!m.trim():!0),style:{whiteSpace:"nowrap",fontSize:"11px",padding:"6px 10px"},children:A&&(k==null?void 0:k.type)==="creating"&&(k==null?void 0:k.itemIndex)===me?"...":" "})]}),s.jsx("textarea",{className:"settings-textarea",value:S.content,onChange:ue=>{const le=[...Ae];le[me].content=ue.target.value,Le(le)},placeholder:"...",style:{minHeight:"80px"}}),Ae.length>1&&s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{Le(Ae.filter((ue,le)=>le!==me))},style:{marginTop:"4px"},children:""})]},S.id)),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{Le([...Ae,{id:I(),title:"",content:""}])},style:{marginTop:"8px"},children:"+ "})]}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:Xe,style:{marginTop:"12px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{se(!1),q(""),Le([{id:"item-0",title:"",content:""}])},style:{marginTop:"6px"},children:""})]}):s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>se(!0),style:{marginTop:"10px"},children:"+ "})]}),y==="chatBackground"&&s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"6px"},children:["https://c-ssl.duitang.com/uploads/blog/202302/24/20230224210227_875bf.png","https://ts4.tc.mm.bing.net/th/id/OIP-C.n_f7vIw6QF9MT118r9Xg6AHaPh?pid=ImgDet&w=474&h=993&rs=1&o=7&rm=3","https://pic1.zhimg.com/v2-a8f301a2fec7aca4dcb4ee5b9154ccc8_1440w.jpg","https://pica.zhimg.com/v2-ba9d8b6ecb1dcc6afd1f41fe9f3ead9c_r.jpg","https://picx.zhimg.com/v2-1845a2a947c086d6c85a97805da9c6e3_r.jpg","https://pic3.zhimg.com/v2-d58744fe1c214b9a80f1d16739bdfda8_r.jpg","https://picx.zhimg.com/v2-ddf5065b5c9cf13591eb1a33defda5f7_r.jpg","https://pic2.zhimg.com/v2-e718a4dffabaf6f361a04afcb01c087d_r.jpg","https://pica.zhimg.com/v2-42ad97f554f3d6e61b1050878af2d6a6_r.jpg"].map(S=>{const me=z.backgroundType==="preset"&&z.backgroundValue===S;return s.jsx("button",{type:"button",onClick:()=>{L(ue=>({...ue,backgroundType:"preset",backgroundValue:S}))},style:{borderRadius:"10px",padding:0,border:me?"2px solid var(--accent-pink)":"1px solid rgba(148, 163, 184, 0.5)",overflow:"hidden",width:"72px",height:"120px",cursor:"pointer",background:"#f9fafb"},children:s.jsx("img",{src:S,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})},S)})})]}),s.jsxs("div",{className:"settings-field",style:{marginTop:"14px"},children:[s.jsx("label",{className:"settings-label",children:" URL"}),s.jsx("input",{className:"settings-input",placeholder:"",value:z.backgroundType==="customUrl"&&z.backgroundValue||"",onChange:S=>{const me=S.target.value.trim();L(ue=>({...ue,backgroundType:me?"customUrl":"default",backgroundValue:me}))}}),s.jsx("div",{style:{fontSize:"11px",color:"var(--text-sub)",marginTop:"4px"},children:" https "})]}),s.jsxs("div",{className:"settings-field",style:{marginTop:"14px"},children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var le;const me=(le=S.target.files)==null?void 0:le[0];if(!me)return;const ue=new FileReader;ue.onload=()=>{const Qe=typeof ue.result=="string"?ue.result:"";Qe&&L(Te=>({...Te,backgroundType:"customUpload",backgroundValue:Qe}))},ue.readAsDataURL(me)}}),s.jsx("div",{style:{fontSize:"11px",color:"var(--text-sub)",marginTop:"4px"},children:""})]}),s.jsx("div",{className:"settings-field",style:{marginTop:"16px"},children:s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>L(S=>({...S,backgroundType:"default",backgroundValue:""})),children:""})})]}),y==="replyPresets"&&s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),s.jsx("div",{className:"settings-field",children:s.jsx("p",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:"..."})})]}),y==="memories"&&s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsx("div",{className:"soft-card-title",children:""}),s.jsx("div",{className:"soft-card-subtitle",children:""})]})}),s.jsx("div",{className:"settings-field",children:_.length===0?s.jsx("p",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:" ta AI "}):s.jsx("ul",{className:"memories-timeline",children:_.slice().sort((S,me)=>S.timestamp-me.timestamp).map(S=>{const ue=new Date(S.timestamp).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsxs("li",{className:"memories-item",children:[s.jsx("div",{className:"memories-dot"}),s.jsxs("div",{className:"memories-content",children:[s.jsx("div",{className:"memories-title",children:S.title}),s.jsx("div",{className:"memories-time",children:ue}),s.jsx("div",{className:"memories-desc",children:S.description})]})]},S.id)})})})]})]})]})},id="miniOtomePhone_moments",th="miniOtomePhone_chatSettings_",no="miniOtomePhone_momentsCover",ld=f=>{const c=Date.now()-f,V=Math.floor(c/(1e3*60)),O=Math.floor(c/(1e3*60*60)),y=Math.floor(c/(1e3*60*60*24));return V<1?"":V<60?`${V}`:O<24?`${O}`:y===1?"":y<7?`${y}`:new Date(f).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric"})},so=()=>{try{const f=window.localStorage.getItem(id);if(f)return JSON.parse(f).map(c=>({...c,time:ld(c.timestamp)}))}catch{}return[]},zu=f=>{try{window.localStorage.setItem(id,JSON.stringify(f))}catch{}},nh=({onBack:f,onCharacterAction:g})=>{const{aiConfig:c}=di(),{config:V}=wl(),[O,y]=w.useState(so()),[N,z]=w.useState(new Set),[L,C]=w.useState(!1),[W,P]=w.useState(""),[_,X]=w.useState([]),[I,H]=w.useState(""),[se,fe]=w.useState(!1),[q,Ae]=w.useState(()=>{try{return window.localStorage.getItem(no)||""}catch{return""}}),[Le,xe]=w.useState(!1);w.useEffect(()=>{const F=setInterval(()=>{y(T=>T.map(R=>({...R,time:ld(R.timestamp)})))},6e4),K=()=>{const T=so();y(T)};window.addEventListener("storage",K);const re=setInterval(()=>{const T=so(),R=T.map(A=>A.id).sort().join(","),j=O.map(A=>A.id).sort().join(",");R!==j&&y(T)},1e3);return()=>{clearInterval(F),clearInterval(re),window.removeEventListener("storage",K)}},[O]),w.useEffect(()=>{zu(O)},[O]),w.useEffect(()=>{try{q?window.localStorage.setItem(no,q):window.localStorage.removeItem(no)}catch{}},[q]);const u=F=>{var K;try{const re=window.localStorage.getItem(`${th}${F}`);if(re){const T=JSON.parse(re);return{name:((K=T.nickname)==null?void 0:K.trim())||"/",avatar:T.avatar||"",emoji:""}}}catch{}return{name:"/",avatar:"",emoji:""}},ae=async F=>{if(!O.find(T=>T.id===F))return;const re=N.has(F);y(T=>T.map(R=>{if(R.id===F){if(re)return z(j=>{const A=new Set(j);return A.delete(F),A}),{...R,likes:R.likes.filter(j=>j!=="")};{z(A=>new Set(A).add(F));const j=[...R.likes,""];return R.chatId&&R.chatId!==""&&g&&g("like",F),{...R,likes:j}}}return R}))},ye=async(F,K)=>{if(!K.trim()||!O.find(j=>j.id===F))return;const T=K.trim(),R={id:`c${Date.now()}`,author:"",content:T,timestamp:Date.now()};y(j=>j.map(A=>{if(A.id===F){const B={...A,comments:[...A.comments,R]};return A.chatId&&A.chatId!==""&&g&&g("comment",F,K.trim()),B}return A}))},nt=async()=>{if(!W.trim()&&_.length===0){alert("");return}fe(!0);try{const F={id:`moment_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,chatId:"",author:"",authorAvatar:"",content:W.trim(),images:_.length>0?_:void 0,timestamp:Date.now(),time:"",location:I.trim()||void 0,likes:[],comments:[],autoGenerated:!1},K=[...O,F];y(K),zu(K),P(""),X([]),H(""),C(!1),g&&setTimeout(()=>{g("comment",F.id,W.trim())},500)}catch(F){console.error(":",F),alert("")}finally{fe(!1)}},Ge=F=>{const K=F.target.files;if(!K)return;const re=[],R=9-_.length;Array.from(K).slice(0,R).forEach(j=>{if(j.size>5*1024*1024){alert(` ${j.name} 5MB`);return}const A=new FileReader;A.onload=B=>{var $;const m=($=B.target)==null?void 0:$.result;typeof m=="string"&&(re.push(m),re.length===Math.min(K.length,R)&&X(k=>[...k,...re]))},A.readAsDataURL(j)})},at=F=>{X(K=>K.filter((re,T)=>T!==F))},Ne=[...O].sort((F,K)=>K.timestamp-F.timestamp);return s.jsxs("div",{className:"wechat-screen moments-screen",children:[s.jsxs("header",{className:"wechat-header moments-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:f,children:" "}),s.jsx("div",{className:"wechat-title",children:s.jsx("div",{className:"wechat-title-main",children:""})}),s.jsx("button",{type:"button",className:"moments-camera-btn",title:"",onClick:()=>C(!0),children:""})]}),s.jsxs("main",{className:"moments-body",children:[s.jsxs("div",{className:"moments-profile",children:[s.jsx("div",{className:"moments-cover",onClick:()=>xe(!0),style:{cursor:"pointer",position:"relative"},children:s.jsx("div",{className:"moments-cover-image",style:{backgroundImage:q?`url(${q})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:!q&&s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"14px",color:"rgba(255, 255, 255, 0.7)",textAlign:"center",pointerEvents:"none"},children:""})})}),s.jsx("div",{className:"moments-user-info",children:s.jsxs("div",{className:"moments-user-info-content",children:[s.jsx("div",{className:"moments-user-name",children:(()=>{try{return window.localStorage.getItem("miniOtomePhone_userNickname")||""}catch{return""}})()}),s.jsx("div",{className:"moments-user-avatar",children:(()=>{try{const K=window.localStorage.getItem("miniOtomePhone_userAvatar")||"";if(K)return s.jsx("img",{src:K,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"},onError:re=>{const T=re.target;T.style.display="none";const R=T.parentElement;if(R&&!R.querySelector("span")){const j=document.createElement("span");j.textContent="",R.appendChild(j)}}})}catch{}return s.jsx("span",{children:""})})()})]})})]}),s.jsx("div",{className:"moments-list",children:Ne.length===0?s.jsxs("div",{className:"moments-empty",children:[s.jsx("div",{className:"moments-empty-text",children:""}),s.jsx("div",{className:"moments-empty-hint",children:""})]}):Ne.map(F=>{const K=u(F.chatId);return s.jsxs("div",{className:"moments-item",children:[s.jsx("div",{className:"moments-item-avatar",children:K.avatar?s.jsx("img",{src:K.avatar,alt:K.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"},onError:re=>{const T=re.target;T.style.display="none";const R=T.parentElement;if(R&&!R.querySelector("span")){const j=document.createElement("span");j.textContent=F.authorAvatar||K.emoji,R.appendChild(j)}}}):s.jsx("span",{children:F.authorAvatar||K.emoji})}),s.jsxs("div",{className:"moments-item-content",children:[s.jsx("div",{className:"moments-item-header",children:s.jsx("span",{className:"moments-item-author",children:F.author})}),s.jsx("div",{className:"moments-item-text",children:F.content}),F.images&&F.images.length>0&&s.jsx("div",{className:"moments-item-images",children:F.images.map((re,T)=>s.jsx("div",{className:"moments-item-image",children:re&&(re.startsWith("data:")||re.startsWith("http://")||re.startsWith("https://"))?s.jsx("img",{src:re,alt:"",onError:R=>{const j=R.target;j.style.display="none"}}):s.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f0f0f0",color:"#999",fontSize:"12px"},children:""})},T))}),s.jsxs("div",{className:"moments-item-meta",children:[s.jsx("span",{className:"moments-item-time",children:F.time}),F.location&&s.jsxs("span",{className:"moments-item-location",children:[" ",F.location]})]}),(F.likes.length>0||F.comments.length>0)&&s.jsxs("div",{className:"moments-item-interactions",children:[F.likes.length>0&&s.jsxs("div",{className:"moments-likes",children:[s.jsx("span",{className:"moments-likes-icon",children:""}),s.jsx("span",{className:"moments-likes-users",children:F.likes.join(" ")})]}),F.comments.length>0&&s.jsx("div",{className:"moments-comments",children:F.comments.map(re=>{const T=re.author==="",R=re.content,j=R.match(/^(.+?)\s+\s+(.+?)(.+)$/);if(j&&!T){const[,A,B,m]=j;return s.jsxs("div",{className:"moments-comment",children:[s.jsx("span",{className:"moments-comment-author",children:A}),s.jsx("span",{className:"moments-comment-reply",style:{color:"#576b95",margin:"0 4px"},children:""}),s.jsx("span",{className:"moments-comment-author",style:{marginRight:"4px"},children:B}),s.jsx("span",{style:{marginRight:"4px"},children:""}),s.jsx("span",{className:"moments-comment-content",children:m})]},re.id)}else return s.jsxs("div",{className:"moments-comment",children:[s.jsx("span",{className:"moments-comment-author",children:T?"":re.author}),T?s.jsxs(s.Fragment,{children:[" ",s.jsx("span",{className:"moments-comment-content",children:R})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{style:{marginRight:"4px"},children:""}),s.jsx("span",{className:"moments-comment-content",children:R})]})]},re.id)})})]}),s.jsxs("div",{className:"moments-item-actions",children:[s.jsx("button",{type:"button",className:`moments-action-btn ${N.has(F.id)?"moments-action-btn-liked":""}`,onClick:()=>ae(F.id),children:N.has(F.id)?" ":" "}),s.jsx("button",{type:"button",className:"moments-action-btn",onClick:()=>{const re=prompt("");re&&ye(F.id,re)},children:" "})]})]})]},F.id)})})]}),L&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>!se&&C(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:F=>F.stopPropagation(),style:{maxWidth:"500px",maxHeight:"80vh",overflowY:"auto"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"16px 0"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("textarea",{className:"settings-textarea",placeholder:"...",value:W,onChange:F=>P(F.target.value),style:{minHeight:"120px",fontSize:"15px"},maxLength:500}),s.jsxs("div",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"right",marginTop:"4px"},children:[W.length,"/500"]})]}),_.length>0&&s.jsx("div",{className:"moments-publish-images",children:_.map((F,K)=>s.jsxs("div",{className:"moments-publish-image-item",children:[s.jsx("img",{src:F,alt:` ${K+1}`}),s.jsx("button",{type:"button",className:"moments-publish-image-remove",onClick:()=>at(K),children:""})]},K))}),_.length<9&&s.jsxs("div",{className:"settings-field",children:[s.jsxs("label",{htmlFor:"moments-image-upload",className:"soft-icon-btn",style:{display:"inline-block",cursor:"pointer",textAlign:"center",padding:"8px 16px"},children:["  (",_.length,"/9)"]}),s.jsx("input",{id:"moments-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:Ge})]}),s.jsx("div",{className:"settings-field",children:s.jsx("input",{className:"settings-input",placeholder:" ",value:I,onChange:F=>H(F.target.value)})})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{se||(C(!1),P(""),X([]),H(""))},disabled:se,style:{flex:1},children:""}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:nt,disabled:se||!W.trim()&&_.length===0,style:{flex:1},children:se?"...":""})]})]})}),Le&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>xe(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:F=>F.stopPropagation(),style:{maxWidth:"400px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"16px 0"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("div",{style:{width:"100%",height:"200px",borderRadius:"12px",overflow:"hidden",background:q?`url(${q})`:"linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac))",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",border:"2px solid rgba(255, 195, 224, 0.5)",marginTop:"8px",position:"relative"},children:!q&&s.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-sub)",fontSize:"14px"},children:""})})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{htmlFor:"cover-image-upload",className:"primary-pill-btn",style:{display:"inline-block",cursor:"pointer",textAlign:"center",padding:"8px 16px",fontSize:"13px",width:"100%",marginTop:"8px"},children:""}),s.jsx("input",{id:"cover-image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:F=>{var re;const K=(re=F.target.files)==null?void 0:re[0];if(K){if(K.size>5*1024*1024){alert("5MB");return}const T=new FileReader;T.onload=R=>{var A;const j=(A=R.target)==null?void 0:A.result;typeof j=="string"&&Ae(j)},T.readAsDataURL(K)}}})]}),s.jsx("div",{className:"settings-field",children:s.jsx("input",{className:"settings-input",placeholder:"URL",value:q&&!q.startsWith("data:")?q:"",onChange:F=>{const K=F.target.value.trim();Ae(K||"")}})}),q&&s.jsx("div",{className:"settings-field",children:s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>Ae(""),style:{width:"100%"},children:""})})]}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>xe(!1),children:""})]})})]})},sh=[{id:"1",name:"/",preview:"",time:"21:08",unread:2,emoji:""},{id:"2",name:"",preview:"",time:"18:23",unread:0,emoji:""},{id:"3",name:"",preview:"",time:"",unread:0,emoji:""}],ln="miniOtomePhone_chatSettings_",Mn="miniOtomePhone_messages_",rh="miniOtomePhone_localWorldbook_",Du="miniOtomePhone_moments",ih="miniOtomePhone_lastMomentTime_",js="miniOtomePhone_userAvatar",Ns="miniOtomePhone_userNickname",Uu="miniOtomePhone_momentsMemory_",ro="miniOtomePhone_chatMemories_",ci="miniOtomePhone_heartMemoryLastTurn_",Fu="miniOtomePhone_hiddenChats",Wu="miniOtomePhone_walletBalance",Hu="miniOtomePhone_walletBills",lh=f=>{if(!f)return[f];const g=[];let c=0;const V="",O="",y='"',N=P=>P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),z=new RegExp(`${N(V)}([^${N(O)}]*?)${N(O)}`,"g"),L=new RegExp(`${N(y)}([^${N(y)}]*?)${N(y)}`,"g"),C=[];z.lastIndex=0;let W;for(;(W=z.exec(f))!==null;)C.push({index:W.index,length:W[0].length,content:W[1]});for(L.lastIndex=0;(W=L.exec(f))!==null;)C.some(_=>W.index>=_.index&&W.index<_.index+_.length||_.index>=W.index&&_.index<W.index+W[0].length)||C.push({index:W.index,length:W[0].length,content:W[1]});C.sort((P,_)=>P.index-_.index);for(const P of C){if(P.index>c){const _=f.slice(c,P.index);_&&g.push(_)}P.content&&g.push(s.jsx("span",{className:"wechat-story-dialogue",children:P.content},`quote-${P.index}`)),c=P.index+P.length}if(c<f.length){const P=f.slice(c);P&&g.push(P)}return g.length>0?g:[f]},Bu=f=>{const g=f.trim();if(!g)return[];if(g.length>240)return[g];const c=70,V=g.split(/\n{2,}/).map(z=>z.trim()).filter(Boolean),O=[],y=z=>{const L=z.trim();L&&O.push(L)},N=z=>{const L=[];let C="";for(const W of z)C+=W,"!?".includes(W)&&(L.push(C.trim()),C="");return C.trim()&&L.push(C.trim()),L.length>0?L:[z.trim()]};for(const z of V.length>0?V:[g]){if(z.length<=c){y(z);continue}const L=N(z);let C="";for(const W of L)C?C.length+W.length<=c+10?C+=W:(y(C),C=W):C=W;if(C)if(C.length>c*1.5&&C.indexOf("")===-1&&C.indexOf("")===-1&&C.indexOf("")===-1){let W=C;for(;W.length>c;)y(W.slice(0,c)),W=W.slice(c);y(W)}else y(C)}return O},Vu="miniOtomePhone_userChats",ah=({active:f})=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z",fill:f?"var(--accent-pink)":"var(--text-sub)"}),s.jsx("circle",{cx:"7",cy:"10",r:"1",fill:f?"var(--accent-pink)":"var(--text-sub)"}),s.jsx("circle",{cx:"12",cy:"10",r:"1",fill:f?"var(--accent-pink)":"var(--text-sub)"}),s.jsx("circle",{cx:"17",cy:"10",r:"1",fill:f?"var(--accent-pink)":"var(--text-sub)"})]}),oh=({active:f})=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 7H17V9H7V7ZM7 11H17V13H7V11ZM7 15H13V17H7V15Z",fill:f?"var(--accent-pink)":"var(--text-sub)"})}),ch=()=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",fill:"var(--text-sub)"})}),uh=()=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M13 3L4 14H11L11 21L20 10H13L13 3Z",fill:"var(--text-sub)"})}),dh=()=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M15.5 12C15.5 13.38 14.38 14.5 13 14.5C11.62 14.5 10.5 13.38 10.5 12C10.5 10.62 11.62 9.5 13 9.5C14.38 9.5 15.5 10.62 15.5 12ZM5 7C3.9 7 3 7.9 3 9V15C3 16.1 3.9 17 5 17H9V15H5V9H9V7H5ZM19 7V9H15V7H19ZM19 15V17H15V15H19ZM19 11V13H21V11H19ZM7 11V13H9V11H7ZM19 7H21V9H19V7ZM7 7H9V9H7V7ZM7 15H9V17H7V15Z",fill:"var(--text-sub)"})}),mh=({active:f})=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12V5C15 3.34315 13.6569 2 12 2C10.3431 2 9 3.34315 9 5V12C9 13.6569 10.3431 15 12 15ZM17.5 12C17.5 14.4853 15.4853 16.5 13 16.5H11C8.51472 16.5 6.5 14.4853 6.5 12H4.5C4.5 15.3137 7.18629 18 10.5 18.5V21H13.5V18.5C16.8137 18 19.5 15.3137 19.5 12H17.5Z",fill:f?"var(--accent-pink)":"var(--text-sub)"})}),hh=()=>s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 5V19M5 12H19",stroke:"var(--text-sub)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),fh=({onBackHome:f})=>{var Ps;const{aiConfig:g}=di(),{config:c,toggleAppWorldbookItemEnabled:V}=wl(),[O,y]=w.useState("chats"),[N,z]=w.useState(null),[L,C]=w.useState(!1),[W,P]=w.useState(()=>{try{const o=window.localStorage.getItem(Vu);if(o)return JSON.parse(o)}catch{}return[]}),[_,X]=w.useState(""),[I,H]=w.useState([]),[se,fe]=w.useState(!1),[q,Ae]=w.useState(!1),[Le,xe]=w.useState(null),[u,ae]=w.useState(null),[ye,nt]=w.useState("chat"),[Ge,at]=w.useState(!1),[Ne,F]=w.useState(!1),[K,re]=w.useState(!1),[T,R]=w.useState(!1),[j,A]=w.useState(""),[B,m]=w.useState([]),[$,k]=w.useState(0),[_e,pe]=w.useState([]),[Xe,Ye]=w.useState(!1),[qe,v]=w.useState(null),[ie,Ke]=w.useState(!1),[ze,Je]=w.useState(!1),[je,vt]=w.useState(""),[bt,S]=w.useState(8),[me,ue]=w.useState(!1),[le,Qe]=w.useState(""),[Te,ut]=w.useState(""),[xn,vn]=w.useState(null),[yt,Bt]=w.useState({}),[yn,wn]=w.useState(!1),[Un,jn]=w.useState(!1),[Nn,jr]=w.useState(!1),[mi,jl]=w.useState(""),[Js,dt]=w.useState(!1),[Nr,Vt]=w.useState(""),[Sr,es]=w.useState("chatSettings"),[Fn,kr]=w.useState(!1),[Ss,hi]=w.useState(()=>{try{const o=window.localStorage.getItem(Wu);return o?parseFloat(o):0}catch{return 0}}),[Wn,fi]=w.useState(()=>{try{const o=window.localStorage.getItem(Hu);return o?JSON.parse(o):[]}catch{return[]}}),[br,Cr]=w.useState(!1),[an,Gs]=w.useState(null),[ts,pi]=w.useState(!1),[wt,qt]=w.useState(()=>{try{return window.localStorage.getItem("miniOtomePhone_userAvatar")||""}catch{return""}}),[ns,$n]=w.useState(()=>{try{return window.localStorage.getItem("miniOtomePhone_userNickname")||""}catch{return""}}),[gi,Hn]=w.useState(!1),[Nl,on]=w.useState(!1),[Nt,en]=w.useState({realName:"",nickname:"",callMe:"",myIdentity:"",taIdentity:"",chatStyle:"",opening:"",avatar:"",emoji:""}),Sn=w.useRef(null),[xi,vi]=w.useState(()=>{try{const o=window.localStorage.getItem(Fu);if(o)return JSON.parse(o)}catch{}return[]}),[yi,ss]=w.useState(null),Qs=w.useRef(null),Er=w.useRef(null),rt=w.useRef({chatId:null,timer:null,queued:[]}),Bn=[...sh,...W],Ir=Bn.filter(o=>!xi.includes(o.id)),Tr=()=>{const o=rt.current.timer;o!=null&&window.clearTimeout(o),rt.current={chatId:N??null,timer:null,queued:[]}},ks=(o,p)=>{if(p.length===0)return;if(ye!=="chat"){H(D=>[...D,...p]);return}if(rt.current.chatId!==o){const D=rt.current.timer;D!=null&&window.clearTimeout(D),rt.current={chatId:o,timer:null,queued:[]}}rt.current.queued.push(...p);const U=()=>{if(rt.current.chatId!==o||rt.current.timer!=null)return;const D=rt.current.queued.shift();if(!D)return;H(oe=>[...oe,D]);let J;if(D.isVoice)J=500;else{const Ee=D.content.length/16*1e3+200;J=Math.min(1200,Math.max(280,Ee))}rt.current.timer=window.setTimeout(()=>{rt.current.timer=null,U()},J)};U()},ft=N?Bn.find(o=>o.id===N)??null:null,[bs,kn]=w.useState(!1);w.useEffect(()=>{if(N){try{const o=window.localStorage.getItem(`${ln}${N}`);ae(o?JSON.parse(o):null)}catch{ae(null)}try{const o=window.localStorage.getItem(`${Mn}${N}`);if(o){const U=JSON.parse(o).map(D=>({id:String(D.id),from:D.from==="me"?"me":"ai",content:typeof D.content=="string"?D.content:"",mode:D.mode==="story"?"story":"chat",isVoice:typeof D.isVoice=="boolean"?D.isVoice:void 0,voiceDuration:typeof D.voiceDuration=="number"?D.voiceDuration:void 0,isRedPacket:typeof D.isRedPacket=="boolean"?D.isRedPacket:void 0,redPacketAmount:typeof D.redPacketAmount=="number"?D.redPacketAmount:void 0,redPacketNote:typeof D.redPacketNote=="string"?D.redPacketNote:void 0,redPacketOpenedBy:D.redPacketOpenedBy==="me"||D.redPacketOpenedBy==="ai"?D.redPacketOpenedBy:"none"}));H(U)}else H([])}catch{H([])}try{const o=window.localStorage.getItem(`${rh}${N}`);m(o?JSON.parse(o):[])}catch{m([])}}else ae(null),H([]),m([])},[N]),w.useEffect(()=>{if(N&&I.length>0)try{window.localStorage.setItem(`${Mn}${N}`,JSON.stringify(I))}catch{}},[I,N]),w.useEffect(()=>{try{window.localStorage.setItem(Wu,Ss.toString())}catch{}},[Ss]),w.useEffect(()=>{try{window.localStorage.setItem(Hu,JSON.stringify(Wn))}catch{}},[Wn]);const cn=()=>{!an||ts||(pi(!0),setTimeout(()=>{const{id:o,amount:p}=an;if(H(D=>D.map(J=>J.id===o?{...J,redPacketOpenedBy:"me"}:J)),N){const D=window.localStorage.getItem(`${Mn}${N}`);if(D)try{const oe=JSON.parse(D).map(Ce=>Ce.id===o?{...Ce,redPacketOpenedBy:"me"}:Ce);window.localStorage.setItem(`${Mn}${N}`,JSON.stringify(oe))}catch{}}hi(D=>D+p);const U=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;fi(D=>[{id:U,type:"income",amount:p,description:`${an.note}`,timestamp:Date.now()},...D].slice(0,100)),setTimeout(()=>{Cr(!1),pi(!1),Gs(null)},2e3)},2e3))};w.useEffect(()=>{if(!N)return;const o=()=>{try{const U=window.localStorage.getItem(`${ln}${N}`);ae(U?JSON.parse(U):null)}catch{ae(null)}};window.addEventListener("storage",o);const p=setInterval(o,500);return()=>{window.removeEventListener("storage",o),clearInterval(p)}},[N]),w.useEffect(()=>{const o=p=>{var D;const U=p.detail;!U||!U.chatId||U.chatId!==N||(H([]),ae(J=>J&&{...J,clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0}),(D=u==null?void 0:u.opening)!=null&&D.trim()&&H([{id:`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,from:"ai",content:u.opening.trim(),mode:"chat"}]))};return window.addEventListener("miniOtomePhone:chatHistoryCleared",o),()=>{window.removeEventListener("miniOtomePhone:chatHistoryCleared",o)}},[N,u==null?void 0:u.opening]);const Cs=()=>{var o;return ft?(o=u==null?void 0:u.nickname)!=null&&o.trim()?u.nickname.trim():ft.name:""},tn=o=>{var U;try{const D=window.localStorage.getItem(`${ln}${o}`);if(D){const J=JSON.parse(D);if((U=J.nickname)!=null&&U.trim())return J.nickname.trim()}}catch{}const p=Bn.find(D=>D.id===o);return(p==null?void 0:p.name)||""},Sl=o=>{var p;try{const U=window.localStorage.getItem(`${ln}${o}`);if(U){const D=JSON.parse(U);if((p=D.avatar)!=null&&p.trim())return D.avatar.trim()}}catch{}return""},kl=o=>{try{const p=window.localStorage.getItem(`${Mn}${o}`);if(p){const U=JSON.parse(p);if(U.length>0)return U[U.length-1].content||""}}catch{}return""},bl=o=>{try{const U=window.localStorage.getItem(`${Mn}${o}`);if(U){const D=JSON.parse(U);if(D.length>0){const J=D[D.length-1];if(J.timestamp){const oe=new Date(J.timestamp),He=(new Date().getTime()-oe.getTime())/(1e3*60*60);return He<24?oe.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):He<48?"":oe.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric"})}}}}catch{}const p=Bn.find(U=>U.id===o);return(p==null?void 0:p.time)||""},Es=()=>{if(!I.length)return null;const o=I[I.length-1];if(o.from!=="ai")return null;const p=o.content||"";return p.toLowerCase(),ye==="story"?"story":/|||||/.test(p)?"angry":/|||||||/.test(p)?"confession":/||||/.test(p)?"shy":/|||/.test(p)?"missing":/|||||/.test(p)?"happy":null},Ys=()=>{var D,J;const p=Es()||((D=u==null?void 0:u.customStatus)!=null&&D.trim()?"custom":(u==null?void 0:u.status)||"quiet");if(p==="custom"&&((J=u==null?void 0:u.customStatus)!=null&&J.trim()))return u.customStatus.trim();const U=Ru.find(oe=>oe.id===p);return U?U.text:""},Is=()=>{var D;const p=Es()||((D=u==null?void 0:u.customStatus)!=null&&D.trim()?"custom":(u==null?void 0:u.status)||"quiet");if(p==="custom")return"";const U=Ru.find(J=>J.id===p);return U?U.emoji:""};w.useEffect(()=>{if(T){const o=setTimeout(()=>{R(!1)},2e3);return()=>clearTimeout(o)}},[T]);const Xs=async()=>{var He,Ee;if(!N||!ft||bs||!g.baseUrl||!g.apiKey||!g.model)return;const o=`${ci}${N}_time`,p=window.localStorage.getItem(o),U=Date.now();if(p){const Re=U-parseInt(p,10);if(Re<6e4){const ce=Math.ceil((6e4-Re)/1e3);Vt(` ${ce} `),dt(!0),setTimeout(()=>dt(!1),2e3);return}}let D=0,J=-1;for(let Re=0;Re<I.length;Re++)I[Re].from==="ai"&&(J=Re,(Re===0||I[Re-1].from!=="ai")&&(D+=1));if(D<1||J===-1){Vt(""),dt(!0),setTimeout(()=>dt(!1),3e3);return}const oe=`${ci}${N}`,Ce=window.localStorage.getItem(oe);if(Ce){const Re=parseInt(Ce,10);if(D===Re){Vt(""),dt(!0),setTimeout(()=>dt(!1),3e3);return}}kn(!0);const Oe=setTimeout(()=>{kn(!1),Vt(""),dt(!0),setTimeout(()=>{dt(!1)},3e3)},3e4);try{let Re=[];try{const $e=window.localStorage.getItem(`${ro}${N}`);$e&&(Re=JSON.parse($e))}catch{Re=[]}let ne=`${Cs()||ft.name}`;u&&((He=u.myIdentity)!=null&&He.trim()&&(ne+=` | ${u.myIdentity.trim()}`),(Ee=u.taIdentity)!=null&&Ee.trim()&&(ne+=` | ${u.taIdentity.trim()}`)),ne+=`



****
- 8
- 
- 
- 
- ......

****
- 1-2**""**
- "...""...""..."
- **"""/"**

JSON{"title":"8","description":""}
{"title":"","description":""}`;const Fe=I.slice(Math.max(0,J-9),J+1).filter($e=>$e.content&&$e.content.trim());if(Fe.length===0){console.warn(""),Vt(""),dt(!0),setTimeout(()=>{dt(!1)},3e3),kn(!1);return}const We=[{role:"system",content:ne},...Fe.map($e=>({role:$e.from==="me"?"user":"assistant",content:$e.content.trim()}))];console.log(":",We.length),console.log(":",JSON.stringify(We,null,2)),console.log(" sendChatRequest...");let Pe;try{Pe=await Zt(g,We),console.log("sendChatRequest ")}catch($e){throw console.error("sendChatRequest :",$e),$e}if(clearTimeout(Oe),console.log(" AI :",Pe),!Pe||!Pe.trim()){console.error("AI "),Vt("AI "),dt(!0),setTimeout(()=>{dt(!1)},3e3),kn(!1);return}let te=null;try{const $e=Pe.match(/\{[\s\S]*\}/);if($e){const Be=$e[0];te=JSON.parse(Be),console.log("JSON:",te)}}catch($e){console.log("JSON :",$e)}if(!te||!te.title||!te.description){const $e=Pe.match(/(?:|title)[:]\s*(.+?)(?:\n|$)/i),Be=Pe.match(/(?:|description|)[:]\s*(.+?)(?:\n|$)/i);if($e&&Be)te={title:$e[1].trim(),description:Be[1].trim()},console.log(":",te);else{const de=Pe.split(`
`).map(G=>G.trim()).filter(G=>G&&!G.match(/^[\(]/)).slice(0,5);if(de.length>=2)te={title:de[0].replace(/^["""]|["""]$/g,"").trim(),description:de.slice(1).join(" ").replace(/^["""]|["""]$/g,"").trim()},console.log(":",te);else if(de.length===1){const G=de[0].replace(/^["""]|["""]$/g,"").trim(),ke=G.replace(/^[\(]|[\)]$/g,"").trim();if(ke.length>20)te={title:ke.slice(0,20)+"...",description:ke};else{const ot=Fe.filter(Ft=>Ft.from==="me").slice(-1)[0],Rt=Fe.filter(Ft=>Ft.from==="ai").slice(-1)[0];let St="";if(ot!=null&&ot.content){const Ft=ot.content.slice(0,10).replace(/[\s]/g,"");Ft&&(St=`${Ft}...`)}te={title:St,description:ke||G}}console.log(":",te)}}}if(!te||!te.title||!te.description){const $e=Pe.trim().replace(/^[\(]|[\)]$/g,"").replace(/^["""]|["""]$/g,"").trim();if($e){const Be=Fe.filter(ke=>ke.from==="me").slice(-1)[0],de=Fe.filter(ke=>ke.from==="ai").slice(-1)[0];let G="";if(Be!=null&&Be.content){const ke=Be.content.slice(0,15).replace(/[\s]/g,"");ke&&(G=`${ke}...`)}else if(de!=null&&de.content){const ke=de.content.slice(0,15).replace(/[\s]/g,"");ke&&(G=`${ke}...`)}te={title:G,description:$e.slice(0,140)},console.log(":",te)}}if(!te||!te.title||!te.description){console.error("AI :",Pe),Vt("AI "),dt(!0),setTimeout(()=>{dt(!1)},3e3),kn(!1);return}const Se=$e=>{const Be=$e.trim();if(Be.length<=8)return Be.replace(/[""'']$/,"").trim();let de=Be.replace(/^["]?/g,"").replace(/^.*?[,]?/g,"").replace(/^.*?[,]?/g,"").replace(/^["](.+?)["]$/,"$1").replace(/^(.+?)[:].*$/,"$1").trim();if(de.length>8){const G=/[\s]+/,ke=de.split(G).filter(ot=>ot.length>0);if(ke.length>1){let ot="";for(const Rt of ke){const St=ot?ot+Rt:Rt;if(St.length<=8)ot=St;else break}if(ot&&ot.length>=2)de=ot;else{const Rt=ke[0];Rt.length<=8?de=Rt:de=Rt.slice(0,6)}}else de=de.slice(0,6)}return de.length>8&&(de=de.slice(0,8)),de=de.replace(/[""''\s]+$/,"").trim(),de.length<2?"":de};let Me=Se(te.title.trim());if(!Me||Me.length<2){const $e=Fe.filter(Be=>Be.from==="me").slice(-1)[0];if($e!=null&&$e.content){const Be=$e.content.slice(0,6).replace(/[\s]/g,"");Me=Be?`${Be}`:""}else Me="";Me=Se(Me)}const tt={id:`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,title:Me,description:te.description.trim().slice(0,140),timestamp:Date.now()},he=[...Re,tt].slice(-50);try{window.localStorage.setItem(`${ro}${N}`,JSON.stringify(he));const $e=`${ci}${N}`,Be=`${ci}${N}_time`;window.localStorage.setItem($e,D.toString()),window.localStorage.setItem(Be,Date.now().toString()),Vt(`${tt.title}`),dt(!0),setTimeout(()=>{dt(!1)},5e3)}catch{}}catch(Re){console.error(":",Re);const ce=Re instanceof Error?Re.message:String(Re);console.error(":",ce),console.error(":",Re instanceof Error?Re.stack:"");let ne="";if(ce.includes("Failed to fetch")||ce.includes("NetworkError")||ce.includes("")||ce.includes("timeout")||ce.includes("")||Re instanceof TypeError&&ce.includes("fetch"))ne="";else if(ce.includes(" AI "))ne=" AI  Base URLAPI Key ";else if(ce.includes("")||ce.includes("status")){const Fe=ce.match(/status[:\s]*(\d+)/i);if(Fe){const We=Fe[1];We==="401"||We==="403"?ne="API  API ":We==="429"?ne="":We.startsWith("5")?ne="AI ":ne=`AI ${We}`}else ne="AI  API "}else ce.includes("")||ce.includes("")?ne="AI ":ce.includes("JSON")||ce.includes("")?ne="AI ":ne=`${ce.slice(0,50)}${ce.length>50?"...":""}`;Vt(ne),dt(!0),setTimeout(()=>{dt(!1)},4e3)}finally{clearTimeout(Oe),kn(!1)}},Pr=async()=>{var o,p,U,D,J,oe,Ce,Oe,He;if(!ft||!g.baseUrl||!g.apiKey||!g.model){pe([]),v("AIBase URLAPI Key");return}Ye(!0),v(null);try{let Ee="";const Re=Cs();Ee+=`${Re}`,u&&((o=u.realName)!=null&&o.trim()&&(Ee+=`${u.realName.trim()}`),(p=u.callMe)!=null&&p.trim()&&(Ee+=`${u.callMe.trim()}`),(U=u.myIdentity)!=null&&U.trim()&&(Ee+=`${u.myIdentity.trim()}`),(D=u.myGender)!=null&&D.trim()&&(Ee+=`${u.myGender.trim()}`),(J=u.taIdentity)!=null&&J.trim()&&(Ee+=`${u.taIdentity.trim()}`),(oe=u.taGender)!=null&&oe.trim()&&(Ee+=`${u.taGender.trim()}`),(Ce=u.chatStyle)!=null&&Ce.trim()&&(Ee+=`${u.chatStyle.trim()}`),(Oe=u.myOther)!=null&&Oe.trim()&&(Ee+=`${u.myOther.trim()}`),(He=u.taOther)!=null&&He.trim()&&(Ee+=`${u.taOther.trim()}`)),ye==="story"?Ee+=`

3

****
1. 
2. 
3. 
4. 15-40
5. 




`:Ee+=`

310-30`;const ce=I.map(Pe=>{if(Pe.from==="ai"){let Se=Pe.content;return Se=Se.replace(/<STATUS_UPDATE>[\s\S]*?<\/STATUS_UPDATE>/g,"").trim(),{role:"assistant",content:Se}}return{role:Pe.from==="me"?"user":"assistant",content:Pe.content}}),ne=[{role:"system",content:Ee},...ce];I.length===0?ye==="story"?ne.push({role:"user",content:"3"}):ne.push({role:"user",content:"3"}):ye==="story"?ne.push({role:"user",content:"assistant3"}):ne.push({role:"user",content:"assistant3"}),console.log(":",ne);const et=await Zt(g,ne);console.log("AI:",et);let Fe=et.replace(/<STATUS_UPDATE>[\s\S]*?<\/STATUS_UPDATE>/g,"").replace(/<[^>]+>/g,"").trim(),We=Fe.split(/\n+/).map(Pe=>Pe.trim()).filter(Pe=>{const te=Pe.toLowerCase();return Pe.length>0&&!te.includes("")&&!te.includes("")&&!te.includes("")&&!te.startsWith("")&&!te.startsWith("")});if(We.length<3){const Pe=Fe.split(/[,;]/).map(te=>te.trim()).filter(te=>{const Se=te.toLowerCase();return te.length>0&&te.length<50&&!Se.includes("")&&!Se.includes("")&&!Se.includes("")});Pe.length>=3&&(We=Pe)}if(We=We.map(Pe=>(Pe=Pe.replace(/^[0-9]+[\.]\s*/,""),Pe=Pe.replace(/^[]\s*/,""),Pe=Pe.replace(/^[(]\d+[)]\s*/,""),Pe=Pe.replace(/^["""'']|["""'']$/g,""),Pe.trim())).filter(Pe=>{const te=ye==="story"?60:50;return Pe.length>0&&Pe.length<=te}),We=We.slice(0,3),console.log(":",We),We.length>=2)pe(We),v(null);else{const Pe=Fe.length>0?`${Fe.substring(0,150)}${Fe.length>150?"...":""}`:"AI";v(`AI2${Pe}`),pe([])}}catch(Ee){console.error(":",Ee);const Re=(Ee==null?void 0:Ee.message)||"AI";v(Re),pe([])}finally{Ye(!1)}};w.useEffect(()=>{Ne&&N&&Pr()},[Ne,N,ye]),w.useEffect(()=>{var o;if(N&&I.length===0&&((o=u==null?void 0:u.opening)!=null&&o.trim()))try{window.localStorage.getItem(`${Mn}${N}`)||H([{id:`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,from:"ai",content:u.opening.trim(),mode:"chat"}])}catch{}},[N,u==null?void 0:u.opening]),w.useEffect(()=>{Sn.current&&I.length>0&&setTimeout(()=>{Sn.current&&(Sn.current.scrollTop=Sn.current.scrollHeight)},0)},[I,N]),w.useEffect(()=>{Sn.current&&N&&setTimeout(()=>{Sn.current&&(Sn.current.scrollTop=Sn.current.scrollHeight)},100)},[N]),w.useEffect(()=>{Tr()},[N]);const Cl=(o,p)=>{Qs.current=p,Er.current=o},_r=(o,p)=>{if(Er.current!==o||Qs.current==null)return;const U=p-Qs.current;U<-40&&ss(o),U>20&&ss(null)},wi=()=>{Qs.current=null,Er.current=null},Mr=o=>{try{window.localStorage.removeItem(`${Mn}${o}`),window.localStorage.removeItem(`${ro}${o}`)}catch{}N===o&&H([]),ss(null)},Ts=o=>{vi(p=>{if(p.includes(o))return p;const U=[...p,o];try{window.localStorage.setItem(Fu,JSON.stringify(U))}catch{}return U}),ss(null)},El=async o=>{var D,J,oe,Ce,Oe,He,Ee,Re,ce;o.preventDefault();const p=_.trim();if(!p||!ft||se)return;const U=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;H(ne=>[...ne,{id:U(),from:"me",content:p,mode:ye}]),X(""),fe(!0),xe(null);try{let ne="";const et=Cs();ne+=`${et}`;const Fe=ye==="chat"?"wechat-online-chat":"wechat-story-mode",We=c.perApp.wechat||[],Pe=We.find(G=>G.id==="wechat-default-world");if(Pe){const G=Pe.entries.find(ke=>ke.id===Fe&&ke.enabled);G&&(ne+=`

${G.title}
${G.content}`)}We.forEach(G=>{G.id!=="wechat-default-world"&&G.entries.forEach(ke=>{ke.enabled&&ke.content.trim()&&(ne+=`

${G.title} - ${ke.title}
${ke.content}`)})}),B.forEach(G=>{G.entries.forEach(ke=>{ke.enabled&&ke.content.trim()&&(ne+=`

${G.title} - ${ke.title}
${ke.content}`)})}),ye==="chat"&&(ne+=`


1. 
2. ****AI"...""...""..."
3. """"
4. 
<VOICE ></VOICE>
5. <VOICE>
<VOICE 8></VOICE>
<VOICE 5>...</VOICE>
6. """"""""""


1. 
2. 
<REDPACKET  ></REDPACKET>
3. ""
4. 
<REDPACKET 8.88 ></REDPACKET>
<REDPACKET 66.66 ></REDPACKET>
<REDPACKET 5.20></REDPACKET>
5. `),u&&((D=u.realName)!=null&&D.trim()&&(ne+=`ta${u.realName.trim()}`),(J=u.callMe)!=null&&J.trim()&&(ne+=`ta${u.callMe.trim()}`),(oe=u.myIdentity)!=null&&oe.trim()&&(ne+=`${u.myIdentity.trim()}`),(Ce=u.myGender)!=null&&Ce.trim()&&(ne+=`${u.myGender.trim()}`),(Oe=u.taIdentity)!=null&&Oe.trim()&&(ne+=`ta${u.taIdentity.trim()}`),(He=u.taGender)!=null&&He.trim()&&(ne+=`ta${u.taGender.trim()}`),(Ee=u.chatStyle)!=null&&Ee.trim()&&(ne+=`${u.chatStyle.trim()}`),(Re=u.myOther)!=null&&Re.trim()&&(ne+=`${u.myOther.trim()}`),(ce=u.taOther)!=null&&ce.trim()&&(ne+=`ta${u.taOther.trim()}`)),ne+=`

`;const te=u?{clothing:u.clothing||"",clothingState:u.clothingState||"",innerThoughts:u.innerThoughts||"",genitalState:u.genitalState||"",desire:u.desire??0,mood:u.mood??50,favorability:u.favorability??50,jealousy:u.jealousy??0}:null;ne+=`

JSON
<STATUS_UPDATE>
{
  "clothing": "",
  "clothingState": "",
  "innerThoughts": "",
  "genitalState": "",
  "desire": 0-100,
  "mood": 0-100,
  "favorability": 0-100,
  "jealousy": 0-100
}
</STATUS_UPDATE>

${te?`=${te.clothing||""}=${te.clothingState||""}=${te.innerThoughts||""}=${te.genitalState||""}=${te.desire}=${te.mood}=${te.favorability}=${te.jealousy}`:""}




- 
- 
- 

JSON<STATUS_UPDATE>`;const Se=[{role:"system",content:ne},...I.map(G=>({role:G.from==="me"?"user":"assistant",content:G.content})),{role:"user",content:p}],Me=await Zt(g,Se);let tt=Me,he=null;const $e=Me.match(/<STATUS_UPDATE>([\s\S]*?)<\/STATUS_UPDATE>/);if($e)try{he=JSON.parse($e[1]),tt=Me.replace(/<STATUS_UPDATE>[\s\S]*?<\/STATUS_UPDATE>/,"").trim()}catch(G){console.error(":",G)}if(!he){const G=Me.match(/\{[\s\S]*(?:"clothing"|"desire"|"mood"|"favorability"|"innerThoughts"|"genitalState"|"jealousy")[\s\S]*\}/);if(G)try{he=JSON.parse(G[0]),tt=Me.replace(/\{[\s\S]*(?:"clothing"|"desire"|"mood"|"favorability"|"innerThoughts"|"genitalState"|"jealousy")[\s\S]*\}/,"").trim()}catch(ke){console.error(":",ke)}}let Be;if(ye==="story")Be=[{type:"text",text:tt}];else{const G=[],ke=/<REDPACKET\s+([\d.]+)(?:\s+(.+?))?\s*><\/REDPACKET>/gi,ot=/<VOICE\s+(\d+)\s*>([\s\S]*?)<\/VOICE>/gi,Rt=[];let St;for(;(St=ke.exec(tt))!==null;)Rt.push({type:"redpacket",match:St,start:St.index,end:St.index+St[0].length});for(;(St=ot.exec(tt))!==null;)Rt.push({type:"voice",match:St,start:St.index,end:St.index+St[0].length});Rt.sort((Ct,bn)=>Ct.start-bn.start);let Ft=0;for(const Ct of Rt){const{type:bn,match:rs,start:is}=Ct;if(is>Ft){const ls=tt.slice(Ft,is).trim();ls&&G.push({type:"text",text:ls})}if(bn==="redpacket"){const[,ls,_s]=rs;let un=parseFloat(ls)||0;un=Math.max(.01,Math.min(200,un));const Vn=(_s||"").trim();un>0&&G.push({type:"redpacket",amount:un,note:Vn})}else if(bn==="voice"){const[,ls,_s]=rs,un=parseInt(ls,10),Vn=Number.isFinite(un)&&un>0?Math.max(1,Math.min(120,un)):8,Ms=(_s||"").trim();Ms&&G.push({type:"voice",text:Ms,duration:Vn})}Ft=rs.index+rs[0].length}if(Ft<tt.length){const Ct=tt.slice(Ft).trim();Ct&&G.push({type:"text",text:Ct})}Be=G.length>0?G:[{type:"text",text:tt}]}const de=[];if(ye==="chat"?Be.forEach(G=>{G.type==="text"?Bu(G.text).forEach(ot=>{de.push({id:U(),from:"ai",content:ot,mode:"chat"})}):G.type==="voice"?de.push({id:U(),from:"ai",content:G.text,mode:"chat",isVoice:!0,voiceDuration:G.duration}):G.type==="redpacket"&&de.push({id:U(),from:"ai",content:"",mode:"chat",isRedPacket:!0,redPacketAmount:G.amount,redPacketNote:G.note,redPacketOpenedBy:"none"})}):Be.forEach(G=>{G.type==="text"&&de.push({id:U(),from:"ai",content:G.text.trim(),mode:"story"})}),de.length>0&&(ye==="chat"&&N?ks(N,de.map(G=>({id:G.id,from:"ai",content:G.content,mode:G.mode,isVoice:G.isVoice,voiceDuration:G.voiceDuration,isRedPacket:G.isRedPacket,redPacketAmount:G.redPacketAmount,redPacketNote:G.redPacketNote,redPacketOpenedBy:G.redPacketOpenedBy}))):H(G=>[...G,...de])),he&&N){const ke={...u||{realName:"",nickname:"",callMe:"",myIdentity:"",myGender:"",myOther:"",taIdentity:"",taGender:"",taOther:"",chatStyle:"",opening:"",status:"quiet",customStatus:"",avatar:"",clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0},...he.clothing!==void 0&&{clothing:String(he.clothing)},...he.clothingState!==void 0&&{clothingState:String(he.clothingState)},...he.innerThoughts!==void 0&&{innerThoughts:String(he.innerThoughts)},...he.genitalState!==void 0&&{genitalState:String(he.genitalState)},...he.desire!==void 0&&{desire:typeof he.desire=="number"?he.desire:parseInt(String(he.desire))||0},...he.mood!==void 0&&{mood:typeof he.mood=="number"?he.mood:parseInt(String(he.mood))||50},...he.favorability!==void 0&&{favorability:typeof he.favorability=="number"?he.favorability:parseInt(String(he.favorability))||50},...he.jealousy!==void 0&&{jealousy:typeof he.jealousy=="number"?he.jealousy:parseInt(String(he.jealousy))||0}};ae(ke);try{window.localStorage.setItem(`${ln}${N}`,JSON.stringify(ke))}catch{}}}catch(ne){xe((ne==null?void 0:ne.message)??" API ")}finally{fe(!1)}},Rn=()=>{try{const o=window.localStorage.getItem(Du);if(o)return JSON.parse(o)}catch{}return[]},st=o=>{try{window.localStorage.setItem(Du,JSON.stringify(o))}catch{}},$r=async(o,p,U=!1)=>{var D,J;if(!g.baseUrl||!g.apiKey||!g.model)return!1;try{const oe=`${ih}${o}`,Ce=parseInt(window.localStorage.getItem(oe)||"0",10),Oe=Date.now(),He=Oe-Ce,Ee=U?1200*1e3:1800*1e3;if(He<Ee)return!1;const Re=U?.15:.3;if(Math.random()>Re)return!1;const ce=window.localStorage.getItem(`${ln}${o}`);let ne="/",et="";if(ce){const Se=JSON.parse(ce);ne=((D=Se.nickname)==null?void 0:D.trim())||ne,et=Se.avatar||et}let Fe="";Fe+=`${ne}`;const Pe=(c.perApp.wechat||[]).find(Se=>Se.id==="wechat-default-world");if(Pe){const Se=Pe.entries.find(Me=>Me.id==="wechat-online-chat"&&Me.enabled);Se&&(Fe+=`

${Se.title}
${Se.content}`)}if(U){const Se=new Date().getHours();let Me="";Se>=6&&Se<9?Me="":Se>=9&&Se<12?Me="":Se>=12&&Se<14?Me="":Se>=14&&Se<18?Me="":Se>=18&&Se<22?Me="":Me="";const tt=window.localStorage.getItem(`${ln}${o}`);let he="";if(tt){const $e=JSON.parse(tt),Be=$e.favorability??50,de=$e.mood??50,G=((J=$e.innerThoughts)==null?void 0:J.trim())||"";he=`${Be}/100${de}/100`,G&&(he+=`${G}`)}Fe+=`

${Me}
1. 
2. 20-50
3. 
4. 
5. 

${he}`}else Fe+=`


1. 
2. 20-50
3. 
4. 
5. 

${p||""}`;const te=await Zt(g,[{role:"system",content:Fe},{role:"user",content:""}]);if(te.trim()){const Se=Rn(),Me={id:`moment_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,chatId:o,author:ne,authorAvatar:et,content:te.trim(),timestamp:Date.now(),time:"",likes:[],comments:[],autoGenerated:!0};return Se.push(Me),st(Se),window.localStorage.setItem(oe,Oe.toString()),N===o&&(jl(`${ne} `),jr(!0)),!0}return!1}catch(oe){return console.error(":",oe),!1}},Rr=async(o,p,U)=>{var D;if(!(!g.baseUrl||!g.apiKey||!g.model))try{const oe=Rn().find(et=>et.id===p);if(!oe)return;if(oe.chatId===""){await Ar(p,oe,o,U);return}if(!oe.chatId||oe.chatId==="")return;const Ce=window.localStorage.getItem(`${ln}${oe.chatId}`);let Oe="/";Ce&&(Oe=((D=JSON.parse(Ce).nickname)==null?void 0:D.trim())||Oe);let He="";He+=`${Oe}`;const Re=(c.perApp.wechat||[]).find(et=>et.id==="wechat-default-world");if(Re){const et=Re.entries.find(Fe=>Fe.id==="wechat-online-chat"&&Fe.enabled);et&&(He+=`

${et.title}
${et.content}`)}const ce=(()=>{try{const et=window.localStorage.getItem(Ns);return(et==null?void 0:et.trim())||""}catch{return""}})();o==="like"?He+=`

${oe.content}20`:He+=`

${U}${oe.content}


1.   ${ce}
2. ${Oe}  ${ce}
3. 30
4. `;const ne=await Zt(g,[{role:"system",content:He},{role:"user",content:o==="like"?"":`${U}`}]);if(ne.trim()&&o==="comment"&&U){const et=(()=>{try{const te=window.localStorage.getItem(Ns);return(te==null?void 0:te.trim())||""}catch{return""}})();let Fe=ne.trim();Fe.includes("")||(Fe=`${Oe}  ${et}${Fe}`);const Pe=Rn().map(te=>{if(te.id===p){const Se={id:`c${Date.now()}_${Math.random().toString(36).slice(2,8)}`,author:Oe,content:Fe,timestamp:Date.now()};return{...te,comments:[...te.comments,Se]}}return te});st(Pe),window.dispatchEvent(new Event("storage"));try{const te=`${Uu}${oe.chatId}`,Se=window.localStorage.getItem(te),Me=Se?JSON.parse(Se):[];Me.push({momentId:p,momentContent:oe.content,playerComment:U,characterReply:Fe,timestamp:Date.now()});const tt=Me.slice(-50);window.localStorage.setItem(te,JSON.stringify(tt))}catch(te){console.error(":",te)}if(Math.random()<.3){const te=Fe.includes("")?Fe.split("").slice(-1)[0]:Fe;setTimeout(()=>{Or(oe.chatId,oe.content,U,te)},2e3+Math.random()*3e3)}}}catch(J){console.error(":",J)}},Or=async(o,p,U,D)=>{var J,oe,Ce,Oe;if(!(!g.baseUrl||!g.apiKey||!g.model))try{const He=window.localStorage.getItem(`${ln}${o}`);if(!He)return;const Ee=JSON.parse(He),Re=((J=Ee.nickname)==null?void 0:J.trim())||"/";let ce="";ce+=`${Re}`;const et=(c.perApp.wechat||[]).find(Se=>Se.id==="wechat-default-world");if(et){const Se=et.entries.find(Me=>Me.id==="wechat-online-chat"&&Me.enabled);Se&&(ce+=`

${Se.title}
${Se.content}`)}(oe=Ee.realName)!=null&&oe.trim()&&(ce+=`ta${Ee.realName.trim()}`),(Ce=Ee.callMe)!=null&&Ce.trim()&&(ce+=`ta${Ee.callMe.trim()}`),(Oe=Ee.chatStyle)!=null&&Oe.trim()&&(ce+=`${Ee.chatStyle.trim()}`);const Fe=Ee.favorability??50,We=Ee.mood??50,Pe=Ee.jealousy??0;ce+=`

${Fe}/100${We}/100${Pe}/100`;try{const Se=`${Uu}${o}`,Me=window.localStorage.getItem(Se);if(Me){const tt=JSON.parse(Me);tt.length>0&&(ce+=`


`,tt.slice(-5).forEach($e=>{ce+=`${$e.momentContent}
${$e.playerComment}
${$e.characterReply}

`}))}}catch{}ce+=`




1. 
2. 
3. 20-50
4. `;const te=await Zt(g,[{role:"system",content:ce},{role:"user",content:""}]);if(te.trim()){const Se=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;if(N===o)H(Me=>[...Me,{id:Se(),from:"ai",content:te.trim(),mode:"chat"}]);else try{const Me=window.localStorage.getItem(`${Mn}${o}`),tt=Me?JSON.parse(Me):[];tt.push({id:Se(),from:"ai",content:te.trim(),mode:"chat"}),window.localStorage.setItem(`${Mn}${o}`,JSON.stringify(tt))}catch(Me){console.error(":",Me)}}}catch(He){console.error(":",He)}},Ar=async(o,p,U,D)=>{var J,oe,Ce,Oe,He;if(!(!g.baseUrl||!g.apiKey||!g.model))for(const Ee of Bn)try{const Re=window.localStorage.getItem(`${ln}${Ee.id}`);if(!Re)continue;const ce=JSON.parse(Re),ne=((J=ce.nickname)==null?void 0:J.trim())||Ee.name,et=ce.avatar||Ee.emoji;if(Math.random()>.7)continue;const Fe=Math.random()<.6;let We="";We+=`${ne}`;const te=(c.perApp.wechat||[]).find(Be=>Be.id==="wechat-default-world");if(te){const Be=te.entries.find(de=>de.id==="wechat-online-chat"&&de.enabled);Be&&(We+=`

${Be.title}
${Be.content}`)}(oe=ce.myIdentity)!=null&&oe.trim()&&(We+=`
${ce.myIdentity.trim()}`),(Ce=ce.taIdentity)!=null&&Ce.trim()&&(We+=`
${ce.taIdentity.trim()}`),(Oe=ce.chatStyle)!=null&&Oe.trim()&&(We+=`
${ce.chatStyle.trim()}`);const Se=ce.favorability??50,Me=ce.mood??50,tt=ce.jealousy??0,he=((He=ce.innerThoughts)==null?void 0:He.trim())||"";let $e="";Se>=80&&Me>=70&&tt<20?$e="":Se>=60&&Me>=50?$e="":Se<40||Me<40?$e="":tt>50?$e="":$e="",We+=`


${$e}`,We+=`
${Se}/100${Me}/100${tt}/100`,he&&(We+=`
${he}`);try{const Be=window.localStorage.getItem(`${Mn}${Ee.id}`);if(Be){const G=JSON.parse(Be).slice(-6);G.length>0&&(We+=`


`,G.forEach(ke=>{We+=`${ke.from==="me"?"":""}: ${ke.content}
`}))}}catch{}if(Fe){We+=`

${p.content}${D?`${D}`:""}


1. ${$e}
2. 
3. 15-30
4. `;const Be=await Zt(g,[{role:"system",content:We},{role:"user",content:""}]);if(Be.trim()){const G=Rn().map(ke=>{if(ke.id===o){const ot={id:`c${Date.now()}_${Math.random().toString(36).slice(2,8)}`,author:ne,content:Be.trim(),timestamp:Date.now()};return{...ke,comments:[...ke.comments,ot]}}return ke});if(st(G),N===Ee.id){const ke=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;H(ot=>[...ot,{id:ke(),from:"ai",content:`${Be.trim()}`,mode:"chat"}])}}}else{const de=Rn().map(G=>G.id===o&&!G.likes.includes(ne)?{...G,likes:[...G.likes,ne]}:G);if(st(de),N===Ee.id){const G=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;let ke="";Se>=80&&Me>=70?ke="":(Se<40||Me<40)&&(ke=""),H(ot=>[...ot,{id:G(),from:"ai",content:ke,mode:"chat"}])}}}catch(Re){console.error(` ${Ee.id} :`,Re)}},ji=()=>{const o=`user-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,p=Nt.nickname.trim(),U=Nt.realName.trim(),D=p||U||"",J=Nt.emoji.trim()||"",oe={id:o,name:D,preview:"",time:"",unread:0,emoji:J},Ce=[...W,oe];P(Ce);try{window.localStorage.setItem(Vu,JSON.stringify(Ce))}catch{}const Oe={realName:U,nickname:p||D,callMe:Nt.callMe.trim(),myIdentity:Nt.myIdentity.trim(),myGender:"",myOther:"",taIdentity:Nt.taIdentity.trim(),taGender:"",taOther:"",chatStyle:Nt.chatStyle.trim(),opening:Nt.opening.trim(),status:"quiet",customStatus:"",avatar:Nt.avatar.trim(),clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0};try{window.localStorage.setItem(`${ln}${o}`,JSON.stringify(Oe))}catch{}on(!1),z(o),C(!0)};w.useEffect(()=>{if(N&&I.length>0){const o=I[I.length-1];if(o.from==="ai"&&!se){const p=setTimeout(()=>{$r(N,o.content,!1)},3e3);return()=>clearTimeout(p)}}},[I,N,se]),w.useEffect(()=>{if(!g.baseUrl||!g.apiKey||!g.model)return;const o=setInterval(()=>{Bn.forEach(p=>{Math.random()>.3||$r(p.id,void 0,!0).catch(U=>{console.error(` ${p.id} :`,U)})})},300*1e3);return()=>clearInterval(o)},[g,c]),w.useEffect(()=>{if(Nn){const o=setTimeout(()=>{jr(!1)},3e3);return()=>clearTimeout(o)}},[Nn]);const Lr=async()=>{var U,D,J,oe,Ce,Oe,He,Ee,Re;if(!ft||se||q)return;let o=-1;for(let ce=I.length-1;ce>=0;ce--)if(I[ce].from==="ai"){o=ce;break}if(o===-1)return;let p=o;for(;p-1>=0&&I[p-1].from==="ai";)p-=1;Ae(!0),xe(null);try{Tr();const ce=I.slice(0,p);H(ce);let ne="";const et=Cs();ne+=`${et}`;const Fe=ye==="chat"?"wechat-online-chat":"wechat-story-mode",We=c.perApp.wechat||[],Pe=We.find(de=>de.id==="wechat-default-world");if(Pe){const de=Pe.entries.find(G=>G.id===Fe&&G.enabled);de&&(ne+=`

${de.title}
${de.content}`)}We.forEach(de=>{de.id!=="wechat-default-world"&&de.entries.forEach(G=>{G.enabled&&G.content.trim()&&(ne+=`

${de.title} - ${G.title}
${G.content}`)})}),B.forEach(de=>{de.entries.forEach(G=>{G.enabled&&G.content.trim()&&(ne+=`

${de.title} - ${G.title}
${G.content}`)})}),u&&((U=u.realName)!=null&&U.trim()&&(ne+=`ta${u.realName.trim()}`),(D=u.callMe)!=null&&D.trim()&&(ne+=`ta${u.callMe.trim()}`),(J=u.myIdentity)!=null&&J.trim()&&(ne+=`${u.myIdentity.trim()}`),(oe=u.myGender)!=null&&oe.trim()&&(ne+=`${u.myGender.trim()}`),(Ce=u.taIdentity)!=null&&Ce.trim()&&(ne+=`ta${u.taIdentity.trim()}`),(Oe=u.taGender)!=null&&Oe.trim()&&(ne+=`ta${u.taGender.trim()}`),(He=u.chatStyle)!=null&&He.trim()&&(ne+=`${u.chatStyle.trim()}`),(Ee=u.myOther)!=null&&Ee.trim()&&(ne+=`${u.myOther.trim()}`),(Re=u.taOther)!=null&&Re.trim()&&(ne+=`ta${u.taOther.trim()}`)),ne+=`

`;const te=u?{clothing:u.clothing||"",clothingState:u.clothingState||"",innerThoughts:u.innerThoughts||"",genitalState:u.genitalState||"",desire:u.desire??0,mood:u.mood??50,favorability:u.favorability??50,jealousy:u.jealousy??0}:null;ne+=`

JSON
<STATUS_UPDATE>
{
  "clothing": "",
  "clothingState": "",
  "innerThoughts": "",
  "genitalState": "",
  "desire": 0-100,
  "mood": 0-100,
  "favorability": 0-100,
  "jealousy": 0-100
}
</STATUS_UPDATE>

${te?`=${te.clothing||""}=${te.clothingState||""}=${te.innerThoughts||""}=${te.genitalState||""}=${te.desire}=${te.mood}=${te.favorability}=${te.jealousy}`:""}




- 
- 
- 

JSON<STATUS_UPDATE>`;const Se=[{role:"system",content:ne},...ce.map(de=>({role:de.from==="me"?"user":"assistant",content:de.content}))],Me=await Zt(g,Se);let tt=Me,he=null;const $e=Me.match(/<STATUS_UPDATE>([\s\S]*?)<\/STATUS_UPDATE>/);if($e)try{he=JSON.parse($e[1]),tt=Me.replace(/<STATUS_UPDATE>[\s\S]*?<\/STATUS_UPDATE>/,"").trim()}catch(de){console.error(":",de)}if(!he){const de=Me.match(/\{[\s\S]*(?:"clothing"|"desire"|"mood"|"favorability"|"innerThoughts"|"genitalState"|"jealousy")[\s\S]*\}/);if(de)try{he=JSON.parse(de[0]),tt=Me.replace(/\{[\s\S]*(?:"clothing"|"desire"|"mood"|"favorability"|"innerThoughts"|"genitalState"|"jealousy")[\s\S]*\}/,"").trim()}catch(G){console.error(":",G)}}const Be=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`;if(ye==="chat"){const G=Bu(tt).map(ke=>({id:Be(),from:"ai",content:ke,mode:"chat"}));N?ks(N,G):H(ke=>[...ke,...G])}else H(de=>[...de,{id:Be(),from:"ai",content:tt,mode:"story"}]);if(he&&N){const G={...u||{realName:"",nickname:"",callMe:"",myIdentity:"",myGender:"",myOther:"",taIdentity:"",taGender:"",taOther:"",chatStyle:"",opening:"",status:"quiet",customStatus:"",avatar:"",clothing:"",clothingState:"",innerThoughts:"",genitalState:"",desire:0,mood:50,favorability:50,jealousy:0},...he.clothing!==void 0&&{clothing:String(he.clothing)},...he.clothingState!==void 0&&{clothingState:String(he.clothingState)},...he.innerThoughts!==void 0&&{innerThoughts:String(he.innerThoughts)},...he.genitalState!==void 0&&{genitalState:String(he.genitalState)},...he.desire!==void 0&&{desire:typeof he.desire=="number"?he.desire:parseInt(String(he.desire))||0},...he.mood!==void 0&&{mood:typeof he.mood=="number"?he.mood:parseInt(String(he.mood))||50},...he.favorability!==void 0&&{favorability:typeof he.favorability=="number"?he.favorability:parseInt(String(he.favorability))||50},...he.jealousy!==void 0&&{jealousy:typeof he.jealousy=="number"?he.jealousy:parseInt(String(he.jealousy))||0}};ae(G);try{window.localStorage.setItem(`${ln}${N}`,JSON.stringify(G))}catch{}}}catch(ce){xe((ce==null?void 0:ce.message)??" API ")}finally{Ae(!1)}};if(L&&ft)return s.jsx(eh,{chatId:ft.id,chatName:ft.name,initialTab:Sr,onBack:()=>C(!1)});if(Un)return s.jsx(nh,{onBack:()=>jn(!1),onCharacterAction:(o,p,U)=>{if(o==="comment"){const J=Rn().find(oe=>oe.id===p);J&&J.chatId===""?Ar(p,J,"comment",U):Rr(o,p,U)}else Rr(o,p,U)}});let Zs=-1;for(let o=I.length-1;o>=0;o--)if(I[o].from==="ai"){Zs=o;break}return s.jsx("div",{className:"wechat-screen",children:ft?s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"wechat-header wechat-chat-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:()=>z(null),children:" "}),s.jsxs("div",{className:"wechat-title",children:[s.jsx("div",{className:"wechat-title-main",children:Cs()}),s.jsxs("div",{className:"wechat-title-sub",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[s.jsx("span",{children:Is()}),s.jsx("span",{children:Ys()})]})]}),s.jsx("button",{type:"button",className:"wechat-header-right",onClick:()=>C(!0),style:{border:"none",background:"transparent",cursor:"pointer",padding:"4px 8px"},children:""})]}),s.jsxs("main",{className:"wechat-chat-body",ref:Sn,style:u!=null&&u.backgroundType&&u.backgroundType!=="default"&&u.backgroundValue?{backgroundImage:`url(${u.backgroundValue})`,backgroundSize:"cover",backgroundPosition:"center top",backgroundRepeat:"no-repeat"}:void 0,children:[s.jsxs("div",{className:"wechat-chat-bubbles",children:[I.map((o,p)=>{var D;const U=o.from==="ai"&&p===Zs;if(o.mode==="story"){const J=o.from==="me";return s.jsx("div",{className:"wechat-story-wrapper",children:s.jsxs("div",{className:"wechat-story-block",children:[s.jsxs("div",{className:"wechat-story-meta",children:["  ",((D=u==null?void 0:u.nickname)==null?void 0:D.trim())||ft.name]}),s.jsx("p",{className:J?"wechat-story-paragraph wechat-story-paragraph-me":"wechat-story-paragraph",children:lh(o.content)}),o.from==="ai"&&U&&!se&&!q&&s.jsx("button",{type:"button",onClick:Lr,disabled:q,style:{marginTop:"8px",alignSelf:"flex-start",padding:"4px 10px",fontSize:"11px",color:"var(--text-sub)",background:"rgba(255, 240, 252, 0.9)",border:"1px solid rgba(244, 114, 182, 0.5)",borderRadius:"999px",cursor:"pointer"},children:" "})]})},o.id)}if(o.isRedPacket){const J=o.from==="me";return s.jsxs("div",{className:J?"wechat-chat-row-me":"wechat-chat-row-other",children:[!J&&s.jsx("div",{className:"wechat-chat-avatar-bubble","aria-hidden":"true",children:u!=null&&u.avatar?s.jsx("img",{src:u.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"},onError:oe=>{const Ce=oe.target;Ce.style.display="none";const Oe=Ce.parentElement;if(Oe&&!Oe.querySelector("span")){const He=document.createElement("span");He.textContent=ft.emoji,Oe.appendChild(He)}}}):s.jsx("span",{children:ft.emoji})}),s.jsx("div",{className:`wechat-bubble wechat-bubble-${J?"me":"other"} wechat-redpacket-bubble`,onClick:()=>{!J&&o.redPacketOpenedBy==="none"&&(Gs({id:o.id,amount:o.redPacketAmount??0,note:o.redPacketNote||""}),Cr(!0))},style:{cursor:!J&&o.redPacketOpenedBy==="none"?"pointer":"default"},children:s.jsxs("div",{className:"wechat-redpacket-main",style:{minHeight:"80px"},children:[s.jsx("div",{className:"wechat-redpacket-icon",children:""}),s.jsxs("div",{className:"wechat-redpacket-text",children:[s.jsx("div",{className:"wechat-redpacket-title",children:""}),s.jsx("div",{className:"wechat-redpacket-note",children:o.redPacketNote||""})]}),o.redPacketOpenedBy==="me"&&s.jsxs("div",{className:"wechat-redpacket-amount",children:["",(o.redPacketAmount??0).toFixed(2)]})]})}),J&&s.jsx("div",{className:"wechat-chat-avatar-bubble wechat-chat-avatar-bubble-me","aria-hidden":"true",children:s.jsx("span",{children:""})})]},o.id)}if(o.isVoice){const J=o.from==="me",oe=xn===o.id,Ce=yt[o.id],Oe=()=>{const Re=xn!==o.id;vn(Re?o.id:null),Re&&!Ce&&Bt(ce=>({...ce,[o.id]:!0}))},He=typeof o.voiceDuration=="number"?Math.max(1,Math.round(o.voiceDuration)):0,Ee=He?`${Math.floor(He/60)}:${String(He%60).padStart(2,"0")}`:"0:00";return s.jsxs("div",{className:J?"wechat-chat-row-me":"wechat-chat-row-other",children:[!J&&s.jsx("div",{className:"wechat-chat-avatar-bubble","aria-hidden":"true",children:u!=null&&u.avatar?s.jsx("img",{src:u.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"},onError:Re=>{const ce=Re.target;ce.style.display="none";const ne=ce.parentElement;if(ne&&!ne.querySelector("span")){const et=document.createElement("span");et.textContent=ft.emoji,ne.appendChild(et)}}}):s.jsx("span",{children:ft.emoji})}),s.jsxs("div",{className:`wechat-bubble wechat-bubble-${J?"me":"other"} wechat-voice-bubble`,children:[s.jsx("div",{className:"wechat-voice-main",onClick:Oe,style:{cursor:"pointer"},children:J?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"wechat-voice-wifi wechat-voice-wifi-me",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.07 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z",fill:"currentColor"})})}),s.jsx("div",{className:"wechat-voice-duration",children:Ee})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"wechat-voice-duration",children:Ee}),s.jsx("div",{className:"wechat-voice-wifi wechat-voice-wifi-other",children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.07 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z",fill:"currentColor"})})})]})}),oe&&s.jsx("div",{className:"wechat-voice-text-expanded",children:o.content})]}),J&&s.jsx("div",{className:"wechat-chat-avatar-bubble wechat-chat-avatar-bubble-me","aria-hidden":"true",children:s.jsx("span",{children:""})})]},o.id)}return o.from==="ai"?s.jsxs("div",{className:"wechat-chat-row-other",style:{position:"relative"},children:[s.jsx("div",{className:"wechat-chat-avatar-bubble","aria-hidden":"true",children:u!=null&&u.avatar?s.jsx("img",{src:u.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"},onError:J=>{const oe=J.target;oe.style.display="none";const Ce=oe.parentElement;if(Ce&&!Ce.querySelector("span")){const Oe=document.createElement("span");Oe.textContent=ft.emoji,Ce.appendChild(Oe)}}}):s.jsx("span",{children:ft.emoji})}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[s.jsx("div",{className:"wechat-bubble wechat-bubble-other",children:o.content}),o.mode==="chat"&&U&&!se&&!q&&s.jsx("button",{type:"button",onClick:Lr,disabled:q,style:{alignSelf:"flex-start",padding:"4px 8px",fontSize:"11px",color:"var(--text-sub)",background:"rgba(255, 240, 250, 0.6)",border:"1px solid rgba(255, 195, 224, 0.5)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",marginTop:"4px"},onMouseEnter:J=>{J.currentTarget.style.background="rgba(255, 240, 250, 0.8)",J.currentTarget.style.color="var(--text-main)"},onMouseLeave:J=>{J.currentTarget.style.background="rgba(255, 240, 250, 0.6)",J.currentTarget.style.color="var(--text-sub)"},children:" "})]})]},o.id):s.jsxs("div",{className:"wechat-chat-row-me",children:[s.jsx("div",{className:"wechat-bubble wechat-bubble-me",children:o.content}),s.jsx("div",{className:"wechat-chat-avatar-bubble wechat-chat-avatar-bubble-me","aria-hidden":"true",children:s.jsx("span",{children:""})})]},o.id)}),(se||q)&&I.some(o=>o.mode==="chat")&&s.jsxs("div",{className:"wechat-chat-row-other",children:[s.jsx("div",{className:"wechat-chat-avatar-bubble","aria-hidden":"true",children:u!=null&&u.avatar?s.jsx("img",{src:u.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"},onError:o=>{const p=o.target;p.style.display="none";const U=p.parentElement;if(U&&!U.querySelector("span")){const D=document.createElement("span");D.textContent=ft.emoji,U.appendChild(D)}}}):s.jsx("span",{children:ft.emoji})}),s.jsx("div",{className:"wechat-bubble wechat-bubble-other",children:q?"":""})]})]}),bs&&!Js&&s.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:110,display:"flex",justifyContent:"center",pointerEvents:"none"},children:s.jsxs("div",{style:{maxWidth:"80%",background:"rgba(255, 247, 253, 0.96)",borderRadius:"999px",padding:"6px 12px",boxShadow:"0 6px 18px rgba(244, 114, 182, 0.25)",border:"1px solid rgba(244, 114, 182, 0.45)",fontSize:"10px",color:"var(--text-sub)",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{role:"img","aria-label":"recording",children:""}),s.jsx("span",{children:""})]})}),Js&&s.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:80,display:"flex",justifyContent:"center",pointerEvents:"none"},children:s.jsxs("div",{style:{maxWidth:"80%",background:"rgba(255, 240, 252, 0.96)",borderRadius:"999px",padding:"8px 14px",boxShadow:"0 8px 20px rgba(244, 114, 182, 0.35)",border:"1px solid rgba(244, 114, 182, 0.5)",fontSize:"11px",color:"var(--text-main)",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"auto",cursor:"pointer"},onClick:()=>{ft&&(es("memories"),C(!0),dt(!1))},children:[s.jsx("span",{role:"img","aria-label":"heart",children:""}),s.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Nr||""}),s.jsx("span",{style:{marginLeft:"4px",fontWeight:600,color:"var(--accent-pink-dark, #db2777)"},children:""})]})}),Le&&s.jsx("div",{className:"settings-error-text wechat-chat-error",children:Le})]}),s.jsxs("div",{className:"wechat-chat-toolbar",children:[s.jsxs("button",{type:"button",className:`wechat-toolbar-btn ${ye==="chat"?"wechat-toolbar-btn-active":""}`,onClick:()=>{const o=ye==="chat"?"story":"chat";try{const U=(c.perApp.wechat||[]).find(D=>D.id==="wechat-default-world");U&&U.entries.forEach(D=>{if(D.id==="wechat-online-chat"){const J=o==="chat";D.enabled!==J&&V("wechat",U.id,D.id)}if(D.id==="wechat-story-mode"){const J=o==="story";D.enabled!==J&&V("wechat",U.id,D.id)}})}catch{}nt(o),A(o==="chat"?"":""),R(!0)},title:ye==="chat"?"":"",children:[s.jsx("div",{className:"wechat-toolbar-icon",children:ye==="chat"?s.jsx(ah,{active:ye==="chat"}):s.jsx(oh,{active:ye==="story"})}),s.jsx("span",{className:"wechat-toolbar-label",children:ye==="chat"?"":""})]}),s.jsxs("button",{type:"button",className:"wechat-toolbar-btn",onClick:()=>at(!0),title:"",children:[s.jsx("div",{className:"wechat-toolbar-icon",children:s.jsx(ch,{})}),s.jsx("span",{className:"wechat-toolbar-label",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-toolbar-btn",onClick:()=>F(!0),title:"",children:[s.jsx("div",{className:"wechat-toolbar-icon",children:s.jsx(uh,{})}),s.jsx("span",{className:"wechat-toolbar-label",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-toolbar-btn",onClick:()=>{if(bs)return;const o=`${ci}${N}_time`,p=window.localStorage.getItem(o);if(p){const U=Date.now()-parseInt(p,10);if(U<6e4){const D=Math.ceil((6e4-U)/1e3);Vt(` ${D} `),dt(!0),setTimeout(()=>{dt(!1)},2e3);return}}Xs()},title:"",disabled:bs||!g.baseUrl||!g.apiKey||!g.model,children:[s.jsx("div",{className:"wechat-toolbar-icon",children:s.jsx("span",{role:"img","aria-label":"heart memory",children:""})}),s.jsx("span",{className:"wechat-toolbar-label",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-toolbar-btn",onClick:()=>re(!0),title:"",children:[s.jsx("div",{className:"wechat-toolbar-icon",children:s.jsx(dh,{})}),s.jsx("span",{className:"wechat-toolbar-label",children:""})]})]}),s.jsxs("form",{className:"wechat-chat-input-bar",onSubmit:El,children:[s.jsx("button",{type:"button",className:"wechat-chat-voice-btn",onClick:()=>Je(!0),title:"",children:s.jsx(mh,{active:!1})}),s.jsx("input",{className:"wechat-chat-input",placeholder:"...",value:_,onChange:o=>X(o.target.value)}),s.jsx("button",{type:"button",className:"wechat-chat-plus-btn",onClick:()=>wn(!yn),title:"",children:s.jsx(hh,{})}),s.jsx("button",{type:"submit",className:"wechat-chat-send-btn",disabled:!_.trim(),children:""})]}),yn&&s.jsxs("div",{className:"wechat-chat-extra-menu",children:[s.jsxs("button",{type:"button",className:"wechat-chat-extra-item",onClick:()=>{wn(!1),alert(" ta ")},children:[s.jsx("div",{className:"wechat-chat-extra-icon",children:""}),s.jsx("div",{className:"wechat-chat-extra-text",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-chat-extra-item",onClick:()=>{wn(!1),ue(!0)},children:[s.jsx("div",{className:"wechat-chat-extra-icon",children:""}),s.jsx("div",{className:"wechat-chat-extra-text",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-chat-extra-item",onClick:()=>{wn(!1),alert("")},children:[s.jsx("div",{className:"wechat-chat-extra-icon",children:""}),s.jsx("div",{className:"wechat-chat-extra-text",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-chat-extra-item",onClick:()=>{wn(!1),alert(" ta")},children:[s.jsx("div",{className:"wechat-chat-extra-icon",children:""}),s.jsx("div",{className:"wechat-chat-extra-text",children:""})]}),s.jsxs("button",{type:"button",className:"wechat-chat-extra-item",onClick:()=>{wn(!1),alert(" ta ")},children:[s.jsx("div",{className:"wechat-chat-extra-icon",children:""}),s.jsx("div",{className:"wechat-chat-extra-text",children:""})]})]}),ze&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>Je(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"360px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("textarea",{className:"settings-textarea",placeholder:"",value:je,onChange:o=>vt(o.target.value),style:{minHeight:"80px"}})]}),s.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{type:"number",min:1,max:120,className:"settings-input",value:bt,onChange:o=>{const p=Number(o.target.value)||0;S(Math.min(120,Math.max(1,p)))}}),s.jsx("div",{style:{fontSize:"11px",color:"var(--text-sub)",marginTop:"4px"},children:""})]})]}),s.jsxs("div",{className:"settings-modal-actions",children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{Je(!1),vt(""),S(8)},children:""}),s.jsx("button",{type:"button",className:"primary-pill-btn",disabled:!je.trim(),onClick:()=>{if(!N){Je(!1);return}const p={id:`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,from:"me",content:je.trim(),mode:ye,isVoice:!0,voiceDuration:bt};H(U=>[...U,p]),vn(null),Je(!1),vt(""),S(8)},children:""})]})]})}),me&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>ue(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"360px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"8.88",value:le,onChange:o=>Qe(o.target.value)})]}),s.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"",value:Te,onChange:o=>ut(o.target.value)})]})]}),s.jsxs("div",{className:"settings-modal-actions",children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{ue(!1),Qe(""),ut("")},children:""}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{const o=le.trim(),p=Number(o);if(!N||!Number.isFinite(p)||p<.01||p>200){alert(" 0.01  200 ");return}const U=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,D=Math.max(.01,Math.min(200,Math.round(p*100)/100)),J=Te.trim()||"";H(oe=>[...oe,{id:U(),from:"me",content:"",mode:"chat",isRedPacket:!0,redPacketAmount:D,redPacketNote:J,redPacketOpenedBy:"none"}]),ue(!1),Qe(""),ut("")},children:""})]})]})}),br&&an&&s.jsx("div",{className:"settings-modal-backdrop",style:{background:"rgba(0, 0, 0, 0.8)"},children:s.jsx("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"360px",background:"linear-gradient(135deg, #f97316, #ef4444)",color:"#fff",padding:"40px 20px",textAlign:"center"},children:ts?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"20px",animation:"coinRotate 2s ease-in-out"},children:""}),s.jsx("div",{style:{fontSize:"24px",fontWeight:600,marginBottom:"10px"},children:""}),s.jsxs("div",{style:{fontSize:"32px",fontWeight:700,marginBottom:"20px"},children:["",an.amount.toFixed(2)]}),s.jsx("div",{style:{fontSize:"14px",opacity:.9},children:""})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"16px",marginBottom:"20px",opacity:.9},children:an.note}),s.jsxs("div",{style:{fontSize:"14px",marginBottom:"30px",opacity:.8},children:[((Ps=u==null?void 0:u.nickname)==null?void 0:Ps.trim())||ft.name,""]}),s.jsx("button",{type:"button",onClick:cn,style:{width:"120px",height:"120px",borderRadius:"50%",background:"radial-gradient(circle at 30% 20%, #fed7aa, #ea580c)",border:"none",fontSize:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s"},onMouseDown:o=>{o.currentTarget.style.transform="scale(0.95)"},onMouseUp:o=>{o.currentTarget.style.transform="scale(1)"},children:""}),s.jsx("div",{style:{fontSize:"14px",marginTop:"20px",opacity:.9},children:""})]})})}),Ge&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>at(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px",maxHeight:"80vh",overflowY:"auto"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"12px 0"},children:[s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 240, 250, 0.3)",borderRadius:"8px"},children:[s.jsx("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"var(--text-main)"},children:""}),u!=null&&u.clothing?s.jsx("div",{style:{fontSize:"12px",color:"var(--text-main)",marginBottom:"4px"},children:u.clothing}):s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",fontStyle:"italic"},children:"AI..."}),(u==null?void 0:u.clothingState)&&s.jsx("div",{style:{fontSize:"11px",color:"var(--text-sub)",fontStyle:"italic",marginTop:"4px"},children:u.clothingState})]}),u!=null&&u.innerThoughts?s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 240, 250, 0.3)",borderRadius:"8px"},children:[s.jsx("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"var(--text-main)"},children:""}),s.jsx("div",{style:{fontSize:"12px",color:"var(--text-main)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:u.innerThoughts})]}):s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 240, 250, 0.3)",borderRadius:"8px"},children:[s.jsx("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"var(--text-main)"},children:""}),s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",fontStyle:"italic"},children:"AI..."})]}),s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 240, 250, 0.3)",borderRadius:"8px"},children:[s.jsx("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"var(--text-main)"},children:""}),u!=null&&u.genitalState?s.jsx("div",{style:{fontSize:"12px",color:"var(--text-main)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:u.genitalState}):s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",fontStyle:"italic"},children:"AI..."})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-main)"},children:""}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--accent-pink)"},children:[(u==null?void 0:u.desire)??0,"/100"]})]}),s.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255, 195, 224, 0.3)",borderRadius:"4px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${(u==null?void 0:u.desire)??0}%`,height:"100%",background:"linear-gradient(90deg, var(--accent-pink), #f9a8d4)",transition:"width 0.3s ease"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-main)"},children:""}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:((u==null?void 0:u.mood)??50)>=50?"#4ade80":"#f87171"},children:[(u==null?void 0:u.mood)??50,"/100"]})]}),s.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255, 195, 224, 0.3)",borderRadius:"4px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${(u==null?void 0:u.mood)??50}%`,height:"100%",background:((u==null?void 0:u.mood)??50)>=50?"linear-gradient(90deg, #4ade80, #86efac)":"linear-gradient(90deg, #f87171, #fca5a5)",transition:"width 0.3s ease"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-main)"},children:""}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--accent-lilac)"},children:[(u==null?void 0:u.favorability)??50,"/100"]})]}),s.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255, 195, 224, 0.3)",borderRadius:"4px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${(u==null?void 0:u.favorability)??50}%`,height:"100%",background:"linear-gradient(90deg, var(--accent-lilac), #c084fc)",transition:"width 0.3s ease"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-main)"},children:""}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#f59e0b"},children:[(u==null?void 0:u.jealousy)??0,"/100"]})]}),s.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255, 195, 224, 0.3)",borderRadius:"4px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${(u==null?void 0:u.jealousy)??0}%`,height:"100%",background:"linear-gradient(90deg, #f59e0b, #fbbf24)",transition:"width 0.3s ease"}})})]})]})]}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>at(!1),children:""})]})}),Ne&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>F(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"320px"},children:[s.jsx("div",{className:"settings-modal-title",children:"AI"}),s.jsx("div",{className:"settings-modal-message",children:Xe?s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:"..."}):qe?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"12px",color:"#f97373",marginBottom:"12px",textAlign:"center"},children:qe}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:Pr,style:{width:"100%"},children:""})]}):_e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",marginBottom:"12px"},children:""}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_e.map((o,p)=>s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{X(o),F(!1)},style:{width:"100%",textAlign:"left",padding:"8px 12px"},children:o},p))}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:Pr,style:{marginTop:"8px",width:"100%"},children:""})]}):s.jsx("div",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:"AI"})}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>F(!1),style:{marginTop:"8px"},children:""})]})}),K&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>re(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"320px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsx("div",{className:"settings-modal-message",children:s.jsxs("div",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:["...",s.jsx("br",{}),"ta"]})}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>re(!1),children:""})]})}),T&&s.jsx("div",{className:"wechat-mode-toast",children:j}),Nn&&s.jsx("div",{className:"wechat-mode-toast wechat-moment-toast",children:mi}),gi&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>Hn(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"16px 0"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"4px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{className:"wechat-chat-avatar",style:{width:"80px",height:"80px",borderRadius:"14px",background:wt?"transparent":"radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:wt?s.jsx("img",{src:wt,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"},onError:o=>{const p=o.target;p.style.display="none";const U=p.parentElement;if(U&&!U.querySelector("span")){const D=document.createElement("span");D.textContent="",U.appendChild(D)}}}):s.jsx("span",{style:{fontSize:"40px"},children:""})}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx("label",{htmlFor:"user-avatar-upload",className:"primary-pill-btn",style:{display:"inline-block",cursor:"pointer",textAlign:"center",padding:"6px 12px",fontSize:"12px"},children:""}),s.jsx("input",{id:"user-avatar-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{var U;const p=(U=o.target.files)==null?void 0:U[0];if(p){if(p.size>5*1024*1024){alert("5MB");return}const D=new FileReader;D.onload=J=>{var Ce;const oe=(Ce=J.target)==null?void 0:Ce.result;typeof oe=="string"&&(qt(oe),window.localStorage.setItem(js,oe))},D.readAsDataURL(p)}}})]})]}),s.jsx("div",{children:s.jsx("input",{className:"settings-input",placeholder:"URL",value:wt&&!wt.startsWith("data:")?wt:"",onChange:o=>{const p=o.target.value.trim();p?(qt(p),window.localStorage.setItem(js,p)):(qt(""),window.localStorage.removeItem(js))}})}),wt&&s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{qt(""),window.localStorage.removeItem(js)},style:{alignSelf:"flex-start"},children:""})]})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"",value:ns,onChange:o=>{const p=o.target.value;$n(p),window.localStorage.setItem(Ns,p.trim())},onBlur:o=>{const p=o.target.value.trim();p?($n(p),window.localStorage.setItem(Ns,p)):($n(""),window.localStorage.setItem(Ns,""))},maxLength:20})]})]}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>Hn(!1),children:""})]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"wechat-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:f,children:" "}),s.jsxs("div",{className:"wechat-title",children:[s.jsx("div",{className:"wechat-title-main",children:""}),s.jsx("div",{className:"wechat-title-sub",children:""})]}),s.jsx("div",{className:"wechat-header-right",children:""})]}),s.jsxs("main",{className:"wechat-body",children:[O==="chats"&&s.jsx("ul",{className:"wechat-chat-list",children:Ir.map(o=>{const p=tn(o.id),U=kl(o.id),D=bl(o.id),J=U||o.preview,oe=yi===o.id;return s.jsxs("li",{className:"wechat-chat-card-wrapper",children:[s.jsxs("div",{className:"wechat-chat-card-actions",children:[s.jsx("button",{type:"button",className:"wechat-chat-card-btn wechat-chat-card-btn-delete",onClick:()=>Mr(o.id),children:""}),s.jsx("button",{type:"button",className:"wechat-chat-card-btn wechat-chat-card-btn-hide",onClick:()=>Ts(o.id),children:""})]}),s.jsxs("div",{className:`wechat-chat-card${oe?" wechat-chat-card-swiped":""}`,onClick:()=>{z(o.id),H([]),xe(null),ss(null)},onTouchStart:Ce=>{var Oe;return Cl(o.id,((Oe=Ce.touches[0])==null?void 0:Oe.clientX)??0)},onTouchMove:Ce=>{var Oe;return _r(o.id,((Oe=Ce.touches[0])==null?void 0:Oe.clientX)??0)},onTouchEnd:wi,children:[s.jsx("div",{className:"wechat-chat-avatar","aria-hidden":"true",children:(()=>{const Ce=Sl(o.id);return Ce?s.jsx("img",{src:Ce,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"14px",display:"block"},onError:Oe=>{const He=Oe.target;He.style.display="none";const Ee=He.parentElement;if(Ee&&!Ee.querySelector("span")){const Re=document.createElement("span");Re.textContent=o.emoji,Ee.appendChild(Re)}}}):s.jsx("span",{children:o.emoji})})()}),s.jsxs("div",{className:"wechat-chat-main",children:[s.jsxs("div",{className:"wechat-chat-row",children:[s.jsx("span",{className:"wechat-chat-name",children:p}),s.jsx("span",{className:"wechat-chat-time",children:D})]}),s.jsxs("div",{className:"wechat-chat-row",children:[s.jsx("span",{className:"wechat-chat-preview",children:J}),o.unread>0&&s.jsx("span",{className:"wechat-chat-unread",children:o.unread})]})]})]})]},o.id)})}),O==="contacts"&&s.jsxs("section",{className:"wechat-contacts",children:[s.jsx("div",{className:"wechat-contacts-section-title",children:""}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",margin:"6px 0 10px"},children:s.jsx("button",{type:"button",className:"soft-icon-btn",style:{paddingInline:"12px",fontSize:"11px"},onClick:()=>{en({realName:"",nickname:"",callMe:"",myIdentity:"",taIdentity:"",chatStyle:"",opening:"",avatar:"",emoji:""}),on(!0)},children:" "})}),s.jsx("ul",{className:"wechat-contacts-list",children:Bn.map(o=>{let p=null;try{const J=window.localStorage.getItem(`${ln}${o.id}`);J&&(p=JSON.parse(J))}catch{}const U=()=>{var J,oe,Ce,Oe;if(p){if((J=p.taIdentity)!=null&&J.trim())return p.taIdentity.trim();if((oe=p.chatStyle)!=null&&oe.trim())return p.chatStyle.trim();if((Ce=p.realName)!=null&&Ce.trim())return`${p.realName.trim()}`;if((Oe=p.callMe)!=null&&Oe.trim())return`${p.callMe.trim()}`}return""},D=()=>{var J;return(J=p==null?void 0:p.nickname)!=null&&J.trim()?p.nickname.trim():o.name};return s.jsxs("li",{className:"wechat-contacts-item",onClick:()=>{z(o.id),H([]),xe(null)},children:[s.jsx("div",{className:"wechat-contacts-avatar","aria-hidden":"true",children:p!=null&&p.avatar?s.jsx("img",{src:p.avatar,alt:D(),style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):s.jsx("span",{children:o.emoji})}),s.jsxs("div",{className:"wechat-contacts-main",children:[s.jsx("div",{className:"wechat-contacts-name",children:D()}),s.jsx("div",{className:"wechat-contacts-tagline",children:U()})]})]},o.id)})})]}),O==="discover"&&s.jsx("section",{className:"wechat-discover",children:s.jsxs("ul",{className:"wechat-discover-list",children:[s.jsxs("li",{className:"wechat-discover-item",onClick:()=>jn(!0),children:[s.jsx("div",{className:"wechat-discover-icon","aria-hidden":"true",children:s.jsx("span",{children:""})}),s.jsx("div",{className:"wechat-discover-main",children:s.jsx("div",{className:"wechat-discover-name",children:""})}),s.jsx("div",{className:"wechat-discover-arrow",children:""})]}),s.jsxs("li",{className:"wechat-discover-item",children:[s.jsx("div",{className:"wechat-discover-icon","aria-hidden":"true",children:s.jsx("span",{children:""})}),s.jsx("div",{className:"wechat-discover-main",children:s.jsx("div",{className:"wechat-discover-name",children:""})}),s.jsx("div",{className:"wechat-discover-arrow",children:""})]})]})}),O==="me"&&!Fn&&s.jsxs("section",{className:"wechat-me",children:[s.jsxs("div",{className:"wechat-me-profile",children:[s.jsxs("div",{className:"wechat-me-avatar-container",children:[s.jsx("div",{className:"wechat-me-avatar",onClick:()=>Hn(!0),children:wt?s.jsx("img",{src:wt,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",pointerEvents:"none"},onError:o=>{const p=o.target;p.style.display="none";const U=p.parentElement;if(U&&!U.querySelector("span")){const D=document.createElement("span");D.textContent="",U.appendChild(D)}}}):s.jsx("span",{children:""})}),s.jsx("div",{className:"wechat-me-edit-badge",onClick:()=>Hn(!0),children:""})]}),s.jsx("div",{className:"wechat-me-nickname",onClick:()=>Hn(!0),children:ns||""})]}),s.jsxs("div",{className:"wechat-me-menu",children:[s.jsx("div",{className:"wechat-me-menu-section",children:s.jsxs("div",{className:"wechat-me-menu-item",onClick:()=>kr(!0),children:[s.jsx("div",{className:"wechat-me-menu-icon",children:""}),s.jsx("div",{className:"wechat-me-menu-text",children:""}),s.jsx("div",{className:"wechat-me-menu-arrow",children:""})]})}),s.jsx("div",{className:"wechat-me-menu-section",children:s.jsxs("div",{className:"wechat-me-menu-item",children:[s.jsx("div",{className:"wechat-me-menu-icon",children:""}),s.jsx("div",{className:"wechat-me-menu-text",children:""}),s.jsx("div",{className:"wechat-me-menu-arrow",children:""})]})})]})]}),O==="me"&&Fn&&s.jsxs("section",{className:"wechat-wallet",children:[s.jsxs("header",{className:"wechat-wallet-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:()=>kr(!1),children:" "}),s.jsxs("div",{className:"wechat-title",children:[s.jsx("div",{className:"wechat-title-main",children:""}),s.jsx("div",{className:"wechat-title-sub",children:""})]}),s.jsx("div",{className:"wechat-header-right"})]}),s.jsxs("main",{className:"wechat-wallet-body",children:[s.jsxs("section",{className:"wechat-wallet-balance-card",children:[s.jsxs("div",{className:"wechat-wallet-balance-main",children:[s.jsx("div",{className:"wechat-wallet-balance-label",children:""}),s.jsxs("div",{className:"wechat-wallet-balance-amount",children:[" ",Ss.toFixed(2)]})]}),s.jsxs("div",{className:"wechat-wallet-balance-extra",children:[s.jsxs("div",{className:"wechat-wallet-balance-row",children:[s.jsx("span",{children:""}),s.jsx("span",{children:" 0.00"})]}),s.jsxs("div",{className:"wechat-wallet-balance-row",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[" ",Ss.toFixed(2)]})]})]})]}),s.jsxs("section",{className:"wechat-wallet-actions",children:[s.jsx("button",{type:"button",className:"primary-pill-btn",children:""}),s.jsx("button",{type:"button",className:"primary-pill-btn",children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",children:""})]}),s.jsxs("section",{className:"wechat-wallet-list",children:[s.jsxs("div",{className:"wechat-wallet-list-header",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"wechat-wallet-list-sub",children:Wn.length===0?"":` ${Wn.length} `})]}),Wn.length>0&&s.jsx("div",{className:"wechat-wallet-list-items",children:Wn.map(o=>{const p=new Date(o.timestamp),U=`${p.getMonth()+1}${p.getDate()} ${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`;return s.jsxs("div",{className:"wechat-wallet-list-item",children:[s.jsx("div",{className:"wechat-wallet-list-item-icon",children:o.type==="income"?"":""}),s.jsxs("div",{className:"wechat-wallet-list-item-content",children:[s.jsx("div",{className:"wechat-wallet-list-item-title",children:o.description}),s.jsx("div",{className:"wechat-wallet-list-item-time",children:U})]}),s.jsxs("div",{className:`wechat-wallet-list-item-amount ${o.type==="income"?"income":"expense"}`,children:[o.type==="income"?"+":"-","",o.amount.toFixed(2)]})]},o.id)})})]})]})]})]}),s.jsxs("nav",{className:"wechat-bottom-nav",children:[s.jsxs("button",{type:"button",className:`wechat-bottom-item ${O==="chats"?"wechat-bottom-item-active":""}`,onClick:()=>y("chats"),children:[s.jsx("span",{className:"wechat-bottom-icon",children:""}),s.jsx("span",{className:"wechat-bottom-label",children:""})]}),s.jsxs("button",{type:"button",className:`wechat-bottom-item ${O==="contacts"?"wechat-bottom-item-active":""}`,onClick:()=>y("contacts"),children:[s.jsx("span",{className:"wechat-bottom-icon",children:""}),s.jsx("span",{className:"wechat-bottom-label",children:""})]}),s.jsxs("button",{type:"button",className:`wechat-bottom-item ${O==="discover"?"wechat-bottom-item-active":""}`,onClick:()=>y("discover"),children:[s.jsx("span",{className:"wechat-bottom-icon",children:""}),s.jsx("span",{className:"wechat-bottom-label",children:""})]}),s.jsxs("button",{type:"button",className:`wechat-bottom-item ${O==="me"?"wechat-bottom-item-active":""}`,onClick:()=>y("me"),children:[s.jsx("span",{className:"wechat-bottom-icon",children:""}),s.jsx("span",{className:"wechat-bottom-label",children:""})]})]}),gi&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>Hn(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"16px 0"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"4px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{className:"wechat-chat-avatar",style:{width:"80px",height:"80px",borderRadius:"14px",background:wt?"transparent":"radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:wt?s.jsx("img",{src:wt,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"},onError:o=>{const p=o.target;p.style.display="none";const U=p.parentElement;if(U&&!U.querySelector("span")){const D=document.createElement("span");D.textContent="",U.appendChild(D)}}}):s.jsx("span",{style:{fontSize:"40px"},children:""})}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx("label",{htmlFor:"user-avatar-upload",className:"primary-pill-btn",style:{display:"inline-block",cursor:"pointer",textAlign:"center",padding:"6px 12px",fontSize:"12px"},children:""}),s.jsx("input",{id:"user-avatar-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{var U;const p=(U=o.target.files)==null?void 0:U[0];if(p){if(p.size>5*1024*1024){alert("5MB");return}const D=new FileReader;D.onload=J=>{var Ce;const oe=(Ce=J.target)==null?void 0:Ce.result;typeof oe=="string"&&(qt(oe),window.localStorage.setItem(js,oe))},D.readAsDataURL(p)}}})]})]}),s.jsx("div",{children:s.jsx("input",{className:"settings-input",placeholder:"URL",value:wt&&!wt.startsWith("data:")?wt:"",onChange:o=>{const p=o.target.value.trim();p?(qt(p),window.localStorage.setItem(js,p)):(qt(""),window.localStorage.removeItem(js))}})}),wt&&s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{qt(""),window.localStorage.removeItem(js)},style:{alignSelf:"flex-start"},children:""})]})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",placeholder:"",value:ns,onChange:o=>{const p=o.target.value;$n(p),window.localStorage.setItem(Ns,p.trim())},onBlur:o=>{const p=o.target.value.trim();p?($n(p),window.localStorage.setItem(Ns,p)):($n(""),window.localStorage.setItem(Ns,""))},maxLength:20})]})]}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:()=>Hn(!1),children:""})]})}),Nl&&s.jsx("div",{className:"settings-modal-backdrop",onClick:()=>on(!1),children:s.jsxs("div",{className:"settings-modal-card",onClick:o=>o.stopPropagation(),style:{maxWidth:"420px",maxHeight:"80vh",overflowY:"auto",textAlign:"left"},children:[s.jsx("div",{className:"settings-modal-title",children:""}),s.jsxs("div",{className:"settings-modal-message",style:{padding:"12px 0"},children:[s.jsxs("div",{style:{fontSize:"11px",color:"var(--text-sub)",marginBottom:"10px"},children:["",s.jsx("span",{style:{fontWeight:600},children:""})," "]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:Nt.nickname,onChange:o=>en(p=>({...p,nickname:o.target.value})),placeholder:"..."})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta "}),s.jsx("input",{className:"settings-input",value:Nt.realName,onChange:o=>en(p=>({...p,realName:o.target.value})),placeholder:""})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta "}),s.jsx("input",{className:"settings-input",value:Nt.callMe,onChange:o=>en(p=>({...p,callMe:o.target.value})),placeholder:"..."})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:Nt.myIdentity,onChange:o=>en(p=>({...p,myIdentity:o.target.value})),placeholder:" /  / ..."})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:"ta "}),s.jsx("input",{className:"settings-input",value:Nt.taIdentity,onChange:o=>en(p=>({...p,taIdentity:o.target.value})),placeholder:" / ..."})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:Nt.chatStyle,onChange:o=>en(p=>({...p,chatStyle:o.target.value})),placeholder:" /  / ..."})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("textarea",{className:"settings-textarea",style:{minHeight:"72px"},value:Nt.opening,onChange:o=>en(p=>({...p,opening:o.target.value})),placeholder:"AI"})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:Nt.avatar,onChange:o=>en(p=>({...p,avatar:o.target.value})),placeholder:"http(s) "})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:" Emoji"}),s.jsx("input",{className:"settings-input",value:Nt.emoji,onChange:o=>en(p=>({...p,emoji:o.target.value})),maxLength:4,placeholder:"..."})]})]}),s.jsx("button",{type:"button",className:"primary-pill-btn settings-modal-btn",onClick:ji,children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",style:{marginTop:"8px",width:"100%"},onClick:()=>on(!1),children:""})]})})]})})},io=[{id:"wechat",label:"",desc:" AI "},{id:"xiaohongshu",label:"",desc:""},{id:"weibo",label:"",desc:""},{id:"coupleSpace",label:"",desc:""},{id:"food",label:"",desc:""}],ph=({onBackHome:f})=>{var at,Ne,F;const{config:g,addAppWorldbook:c,updateAppWorldbook:V,addAppWorldbookItem:O,updateAppWorldbookItem:y,toggleAppWorldbookItemEnabled:N,deleteAppWorldbook:z,deleteAppWorldbookItem:L}=wl(),[C,W]=w.useState("wechat"),[P,_]=w.useState(!1),[X,I]=w.useState(""),[H,se]=w.useState([{id:"item-0",title:"",content:""}]),[fe,q]=w.useState(null),[Ae,Le]=w.useState(""),[xe,u]=w.useState(null),[ae,ye]=w.useState(""),[nt,Ge]=w.useState("");return s.jsxs("div",{className:"settings-screen wechat-screen",children:[s.jsxs("header",{className:"wechat-header wechat-chat-header",children:[s.jsx("button",{type:"button",className:"wechat-back-btn",onClick:f,children:" "}),s.jsxs("div",{className:"wechat-title",children:[s.jsx("div",{className:"wechat-title-main",children:""}),s.jsx("div",{className:"wechat-title-sub",children:""})]}),s.jsx("div",{className:"wechat-header-right"})]}),s.jsx("nav",{className:"chat-settings-nav",children:io.map(K=>s.jsx("button",{type:"button",className:`chat-settings-nav-item ${C===K.id?"chat-settings-nav-item-active":""}`,onClick:()=>W(K.id),children:K.label},K.id))}),s.jsx("main",{className:"settings-body",children:s.jsxs("section",{className:"soft-card settings-section",children:[s.jsx("div",{className:"soft-card-header",children:s.jsxs("div",{className:"soft-card-header-text",children:[s.jsxs("div",{className:"soft-card-title",children:[(at=io.find(K=>K.id===C))==null?void 0:at.label,""]}),s.jsx("div",{className:"soft-card-subtitle",children:(Ne=io.find(K=>K.id===C))==null?void 0:Ne.desc})]})}),(F=g.perApp[C])!=null&&F.length?g.perApp[C].map(K=>{const re=fe===K.id;return s.jsxs("details",{className:"worldbook-entry",children:[s.jsxs("summary",{className:"worldbook-entry-summary",children:[s.jsx("span",{className:"worldbook-entry-title",children:K.title}),s.jsxs("span",{className:"worldbook-entry-count",children:[" ",K.entries.length," "]})]}),s.jsxs("div",{className:"worldbook-entry-body",children:[re?s.jsxs("div",{className:"worldbook-editor",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:Ae,onChange:T=>Le(T.target.value),placeholder:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{V(C,K.id,{title:Ae.trim()||""}),q(null),Le("")},style:{marginTop:"8px"},children:""})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"worldbook-entry-item-header",style:{margin:0,border:"none",padding:0},children:[s.jsx("span",{className:"worldbook-entry-item-title",children:K.title}),s.jsxs("div",{children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{q(K.id),Le(K.title)},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>z(C,K.id),style:{marginLeft:"6px"},children:""})]})]})}),K.entries.map(T=>{const R=xe&&xe.worldbookId===K.id&&xe.itemId===T.id;return s.jsx("div",{className:"worldbook-entry",children:R?s.jsxs("div",{className:"worldbook-editor",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:ae,onChange:j=>ye(j.target.value),placeholder:""}),s.jsx("label",{className:"settings-label",style:{marginTop:"6px"},children:""}),s.jsx("textarea",{className:"settings-textarea worldbook-textarea",value:nt,onChange:j=>Ge(j.target.value),placeholder:"..."}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{y(C,K.id,T.id,{title:ae.trim()||"",content:nt}),u(null),ye(""),Ge("")},style:{marginTop:"8px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{u(null),ye(""),Ge("")},style:{marginTop:"4px"},children:""})]}):s.jsxs("details",{className:"worldbook-entry",children:[s.jsx("summary",{className:"worldbook-entry-summary",style:{cursor:"pointer"},children:s.jsxs("div",{className:"worldbook-entry-item-header",style:{margin:0,border:"none",padding:0},children:[s.jsxs("div",{className:"worldbook-entry-item-left",children:[s.jsx("span",{className:"worldbook-entry-item-title",children:T.title}),s.jsxs("label",{className:"worldbook-toggle",children:[s.jsx("input",{type:"checkbox",checked:T.enabled,onChange:j=>{j.stopPropagation(),N(C,K.id,T.id)}}),s.jsx("span",{className:"worldbook-toggle-slider"})]})]}),s.jsxs("div",{className:"worldbook-entry-item-actions",children:[s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:j=>{j.stopPropagation(),u({worldbookId:K.id,itemId:T.id}),ye(T.title),Ge(T.content)},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:j=>{j.stopPropagation(),L(C,K.id,T.id)},style:{marginLeft:"6px"},children:""})]})]})}),s.jsx("div",{className:"worldbook-entry-body",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed rgba(255, 195, 224, 0.5)"},children:s.jsx("div",{className:"worldbook-entry-item-content",children:T.content})})]})},T.id)}),!re&&s.jsx(s.Fragment,{children:(xe==null?void 0:xe.worldbookId)===K.id&&(xe==null?void 0:xe.itemId)==="new"?s.jsxs("div",{className:"worldbook-editor",style:{marginTop:"10px"},children:[s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:ae,onChange:T=>ye(T.target.value),placeholder:""}),s.jsx("label",{className:"settings-label",style:{marginTop:"6px"},children:""}),s.jsx("textarea",{className:"settings-textarea",value:nt,onChange:T=>Ge(T.target.value),placeholder:"...",style:{minHeight:"80px"}})]}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{(ae.trim()||nt.trim())&&(O(C,K.id,ae.trim()||"",nt.trim()),u(null),ye(""),Ge(""))},style:{marginTop:"12px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{u(null),ye(""),Ge("")},style:{marginTop:"6px"},children:""})]}):s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{u({worldbookId:K.id,itemId:"new"}),ye(""),Ge("")},style:{marginTop:"10px"},children:"+ "})})]})]},K.id)}):s.jsx("div",{className:"settings-field",children:s.jsx("p",{style:{fontSize:"12px",color:"var(--text-sub)",textAlign:"center",padding:"20px 0"},children:""})}),P?s.jsxs("div",{className:"worldbook-editor",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),s.jsx("input",{className:"settings-input",value:X,onChange:K=>I(K.target.value),placeholder:""}),s.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[s.jsx("label",{className:"settings-label",children:""}),H.map((K,re)=>s.jsxs("div",{style:{marginTop:re>0?"8px":"4px"},children:[s.jsx("input",{className:"settings-input",value:K.title,onChange:T=>{const R=[...H];R[re].title=T.target.value,se(R)},placeholder:"",style:{marginBottom:"4px"}}),s.jsx("textarea",{className:"settings-textarea",value:K.content,onChange:T=>{const R=[...H];R[re].content=T.target.value,se(R)},placeholder:"...",style:{minHeight:"80px"}}),H.length>1&&s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{se(H.filter((T,R)=>R!==re))},style:{marginTop:"4px"},children:""})]},K.id)),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{se([...H,{id:`item-${H.length}`,title:"",content:""}])},style:{marginTop:"8px"},children:"+ "})]}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{const K=H.map(re=>({title:re.title.trim(),content:re.content.trim()})).filter(re=>re.content);K.length&&(c(C,X.trim()||"",K),_(!1),I(""),se([{id:"item-0",title:"",content:""}]))},style:{marginTop:"12px"},children:""}),s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>{_(!1),I(""),se([{id:"item-0",title:"",content:""}])},style:{marginTop:"6px"},children:""})]}):s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{_(!0),I(""),se([{id:"item-0",title:"",content:""}])},style:{marginTop:"10px"},children:"+ "})]})})]})},gh=({onBackHome:f})=>{const[g,c]=w.useState(null),[V,O]=w.useState(null),[y,N]=w.useState(!1),[z,L]=w.useState(30),[C,W]=w.useState(5),P=w.useRef(null),_=w.useRef(null),X=fe=>{var Le;const q=(Le=fe.target.files)==null?void 0:Le[0];if(!q||!q.type.startsWith("image/")){alert("");return}const Ae=new FileReader;Ae.onload=xe=>{var ae;const u=(ae=xe.target)==null?void 0:ae.result;c(u),O(null)},Ae.readAsDataURL(q)},I=(fe,q,Ae,Le,xe,u)=>Math.sqrt((fe-Le)**2+(q-xe)**2+(Ae-u)**2),H=()=>{if(!g||!_.current)return;N(!0);const fe=new Image;fe.onload=()=>{const q=_.current;if(!q){N(!1);return}const Ae=q.getContext("2d",{willReadFrequently:!0});if(!Ae){N(!1);return}q.width=fe.width,q.height=fe.height,Ae.drawImage(fe,0,0);const Le=Ae.getImageData(0,0,q.width,q.height),xe=Le.data,u=[],ae=C;for(let Ne=0;Ne<q.width&&u.length<ae*4;Ne+=Math.floor(q.width/ae)){const F=(0*q.width+Ne)*4;u.push({r:xe[F],g:xe[F+1],b:xe[F+2]})}for(let Ne=0;Ne<q.width&&u.length<ae*8;Ne+=Math.floor(q.width/ae)){const F=((q.height-1)*q.width+Ne)*4;u.push({r:xe[F],g:xe[F+1],b:xe[F+2]})}for(let Ne=0;Ne<q.height&&u.length<ae*12;Ne+=Math.floor(q.height/ae)){const F=(Ne*q.width+0)*4;u.push({r:xe[F],g:xe[F+1],b:xe[F+2]})}for(let Ne=0;Ne<q.height&&u.length<ae*16;Ne+=Math.floor(q.height/ae)){const F=(Ne*q.width+(q.width-1))*4;u.push({r:xe[F],g:xe[F+1],b:xe[F+2]})}let ye=0,nt=0,Ge=0;u.forEach(Ne=>{ye+=Ne.r,nt+=Ne.g,Ge+=Ne.b}),ye=Math.round(ye/u.length),nt=Math.round(nt/u.length),Ge=Math.round(Ge/u.length);for(let Ne=0;Ne<xe.length;Ne+=4){const F=xe[Ne],K=xe[Ne+1],re=xe[Ne+2];I(F,K,re,ye,nt,Ge)<z&&(xe[Ne+3]=0)}Ae.putImageData(Le,0,0);const at=q.toDataURL("image/png");O(at),N(!1)},fe.src=g},se=()=>{if(!V)return;const fe=document.createElement("a");fe.download="pet-transparent.png",fe.href=V,fe.click()};return s.jsxs("div",{className:"wechat-page",children:[s.jsxs("header",{className:"wechat-header wechat-header-with-back",children:[s.jsxs("button",{type:"button",className:"wechat-back-btn",onClick:f,children:[s.jsx("span",{className:"wechat-back-arrow",children:""}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"wechat-header-title",children:[s.jsx("div",{className:"wechat-header-main",children:""}),s.jsx("div",{className:"wechat-header-sub",children:""})]})]}),s.jsxs("main",{className:"wechat-main pet-main-scroll",children:[s.jsxs("section",{className:"soft-card-minimal",children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:X,style:{display:"none"}}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:()=>{var fe;return(fe=P.current)==null?void 0:fe.click()},children:""}),g&&s.jsxs("div",{style:{marginTop:"12px"},children:[s.jsx("div",{className:"pet-section-title",style:{marginBottom:"6px"},children:""}),s.jsx("img",{src:g,alt:"",style:{maxWidth:"100%",borderRadius:"12px",border:"1px solid rgba(255, 195, 224, 0.5)"}})]})]}),g&&s.jsxs("section",{className:"soft-card-minimal",children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{fontSize:"12px",color:"var(--text-sub)",marginBottom:"4px",display:"block"},children:[": ",z," ()"]}),s.jsx("input",{type:"range",min:"10",max:"80",value:z,onChange:fe=>L(Number(fe.target.value)),style:{width:"100%"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{fontSize:"12px",color:"var(--text-sub)",marginBottom:"4px",display:"block"},children:[": ",C," ()"]}),s.jsx("input",{type:"range",min:"3",max:"10",value:C,onChange:fe=>W(Number(fe.target.value)),style:{width:"100%"}})]})]}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:H,disabled:y,style:{marginTop:"12px"},children:y?"...":""})]}),V&&s.jsxs("section",{className:"soft-card-minimal",children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsx("div",{style:{backgroundImage:"repeating-linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0), repeating-linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0)",backgroundPosition:"0 0, 10px 10px",backgroundSize:"20px 20px",padding:"12px",borderRadius:"12px",marginBottom:"12px"},children:s.jsx("img",{src:V,alt:"",style:{maxWidth:"100%",display:"block"}})}),s.jsx("button",{type:"button",className:"primary-pill-btn",onClick:se,children:" (PNG)"}),s.jsx("p",{style:{fontSize:"11px",color:"var(--text-sub)",marginTop:"8px",lineHeight:"1.5"},children:""})]}),s.jsx("canvas",{ref:_,style:{display:"none"}})]})]})},co="miniOtomePhone_petGame_v1",ad={kind:"slime",name:"",level:1,exp:0,nextLevelExp:30,mood:"happy",hunger:20,clean:80,energy:80,evolutionStage:1,lastUpdated:Date.now()};function Ku(){if(typeof window>"u")return null;try{const f=window.localStorage.getItem(co);if(!f)return null;const g=JSON.parse(f);return!g||typeof g.level!="number"?null:{...ad,...g,kind:g.kind??"slime"}}catch{return null}}function Vs(f){try{window.localStorage.setItem(co,JSON.stringify(f))}catch{}}function yr(f,g,c){return c<25?"sleepy":f>70||g<30?"sad":f>45||g<55?"normal":"happy"}function wr(f){let{level:g,evolutionStage:c}=f;return g>=15?c=3:g>=7?c=2:c=1,{...f,evolutionStage:c}}const xh=({src:f,alt:g,className:c,style:V})=>{const[O,y]=w.useState(null),[N,z]=w.useState(!1);w.useRef(null);const L=w.useRef(null),C=(P,_,X,I,H,se)=>Math.sqrt((P-I)**2+(_-H)**2+(X-se)**2);w.useEffect(()=>{const P=`pet_image_processed_${f}`,_=localStorage.getItem(P);if(_){y(_);return}z(!0);const X=new Image;X.crossOrigin="anonymous",X.onload=()=>{const I=document.createElement("canvas");I.width=X.width,I.height=X.height;const H=I.getContext("2d");if(!H){z(!1);return}H.drawImage(X,0,0);const se=H.getImageData(0,0,I.width,I.height),fe=se.data,q=[],Ae=12,Le=3;[{x:0,y:0},{x:I.width-1,y:0},{x:0,y:I.height-1},{x:I.width-1,y:I.height-1}].forEach(j=>{for(let A=0;A<Le;A++)for(let B=0;B<Le;B++){const m=Math.min(I.width-1,j.x+B),k=(Math.min(I.height-1,j.y+A)*I.width+m)*4;q.push({r:fe[k],g:fe[k+1],b:fe[k+2],count:1})}});const u=Math.min(I.width,I.height)*.1;for(let j=0;j<Ae;j++){const A=j/Ae,B=Math.floor(u+A*(I.width-2*u)),m=(0*I.width+B)*4;q.push({r:fe[m],g:fe[m+1],b:fe[m+2],count:1});const $=((I.height-1)*I.width+B)*4;q.push({r:fe[$],g:fe[$+1],b:fe[$+2],count:1})}let ae=0,ye=0,nt=0,Ge=0;q.forEach(j=>{ae+=j.r*j.count,ye+=j.g*j.count,nt+=j.b*j.count,Ge+=j.count});const at=Math.round(ae/Ge),Ne=Math.round(ye/Ge),F=Math.round(nt/Ge),K=25;new Uint8Array(I.width*I.height);const re=new Uint8Array(I.width*I.height);for(let j=0;j<I.height;j++)for(let A=0;A<I.width;A++){const B=(j*I.width+A)*4,m=fe[B],$=fe[B+1],k=fe[B+2],_e=C(m,$,k,at,Ne,F),pe=A<u||A>I.width-u||j<u||j>I.height-u;_e<K&&(pe||_e<K*.6)&&(re[j*I.width+A]=1)}const T={x:Math.floor(I.width*.9),y:Math.floor(I.height*.9),width:I.width-Math.floor(I.width*.9),height:I.height-Math.floor(I.height*.9)};for(let j=T.y;j<I.height;j++)for(let A=T.x;A<I.width;A++){const B=(j*I.width+A)*4,m=fe[B+3],$=fe[B],k=fe[B+1],_e=fe[B+2];(m<200||C($,k,_e,at,Ne,F)<K*1.5)&&(fe[B+3]=0)}for(let j=0;j<I.height;j++)for(let A=0;A<I.width;A++)if(re[j*I.width+A]){const B=(j*I.width+A)*4;fe[B+3]=0}H.putImageData(se,0,0);const R=I.toDataURL("image/png");try{localStorage.setItem(P,R)}catch{}y(R),z(!1)},X.onerror=()=>{z(!1),y(f)},X.src=f,L.current=X},[f]);const W=O||f;return s.jsx("img",{src:W,alt:g,className:c,style:{...V,opacity:N?.7:1,transition:"opacity 0.3s ease"}})},Ju=({kind:f,stage:g})=>{const c=w.useMemo(()=>`${f==="cat"?"":f==="dragon"?"":""}  ${g===1?"":g===2?"":""}`,[f,g]),V=w.useMemo(()=>{if(f==="cat"){const O={1:"/pet-images/cat-stage1.png",2:"/pet-images/cat-stage2.png",3:"/pet-images/cat-stage3.png"};return s.jsx(xh,{src:O[g],alt:"",className:"pet-sprite-img",style:{width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated",background:"transparent",display:"block"}})}return f==="dragon"?s.jsxs("svg",{viewBox:"0 0 16 16",className:"pet-sprite-svg","aria-hidden":"true",children:[s.jsx("rect",{x:"1",y:"7",width:"3",height:"3",fill:"#bfdbfe"}),s.jsx("rect",{x:"12",y:"7",width:"3",height:"3",fill:"#bfdbfe"}),s.jsx("rect",{x:"4",y:"3",width:"8",height:"9",fill:"#93c5fd"}),s.jsx("rect",{x:"5",y:"1",width:"1",height:"2",fill:"#e5e7eb"}),s.jsx("rect",{x:"10",y:"1",width:"1",height:"2",fill:"#e5e7eb"}),s.jsx("rect",{x:"6",y:"6",width:"1",height:"1",fill:"#0f172a"}),s.jsx("rect",{x:"9",y:"6",width:"1",height:"1",fill:"#0f172a"}),s.jsx("rect",{x:"6",y:"8",width:"4",height:"3",fill:"#e5e7eb"}),s.jsx("rect",{x:"6",y:"9",width:"4",height:"1",fill:"#d1d5db"}),s.jsx("rect",{x:"11",y:"11",width:"2",height:"1",fill:"#60a5fa"}),s.jsx("rect",{x:"12",y:"12",width:"1",height:"1",fill:"#2563eb"})]}):s.jsxs("svg",{viewBox:"0 0 16 16",className:"pet-sprite-svg","aria-hidden":"true",children:[s.jsx("rect",{x:"3",y:"4",width:"10",height:"8",fill:"#bbf7d0"}),s.jsx("rect",{x:"4",y:"3",width:"8",height:"2",fill:"#a7f3d0"}),s.jsx("rect",{x:"5",y:"4",width:"2",height:"1",fill:"#ecfdf5"}),s.jsx("rect",{x:"10",y:"5",width:"1",height:"1",fill:"#ecfdf5"}),s.jsx("rect",{x:"6",y:"7",width:"1",height:"1",fill:"#064e3b"}),s.jsx("rect",{x:"9",y:"7",width:"1",height:"1",fill:"#064e3b"}),s.jsx("rect",{x:"7",y:"9",width:"2",height:"1",fill:"#16a34a"})]})},[f]);return s.jsx("div",{className:"pet-avatar-emoji","aria-label":c,children:V})},lo=({label:f,value:g,color:c})=>{const V=Math.max(0,Math.min(100,g));return s.jsxs("div",{className:"pet-stat-row",children:[s.jsx("span",{className:"pet-stat-label",children:f}),s.jsx("div",{className:`pet-stat-bar pet-stat-bar-${c}`,children:s.jsx("div",{className:"pet-stat-bar-inner",style:{width:`${V}%`}})}),s.jsx("span",{className:"pet-stat-value",children:Math.round(V)})]})},vh=({onBackHome:f})=>{const g=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,[c,V]=w.useState(()=>Ku()),[O,y]=w.useState(()=>Ku()?"play":"choose"),[N,z]=w.useState(null),[L,C]=w.useState(""),[W,P]=w.useState([]),[_,X]=w.useState(null),[I,H]=w.useState(!1),se=(T,R="text")=>{X({id:g(),from:"pet",kind:R,text:T})},fe=T=>{const R=[];T.hunger>70?R.push(""):T.clean<40?R.push(""):T.energy<30?R.push(""):T.mood==="happy"?R.push(""):R.push(""),R.push("","","");const j=Math.floor(Math.random()*R.length);return R[j]};w.useEffect(()=>{const T=window.setInterval(()=>{V(R=>{if(!R)return R;const j=Date.now(),A=Math.min(60,(j-R.lastUpdated)/6e4);if(A<.1)return R;let B=R.hunger+A*1.2,m=R.clean-A*.8,$=R.energy-A*.9;B=Math.max(0,Math.min(100,B)),m=Math.max(0,Math.min(100,m)),$=Math.max(0,Math.min(100,$));let k={...R,hunger:B,clean:m,energy:$,mood:yr(B,m,$),lastUpdated:j};return k=wr(k),Vs(k),Math.random()<.3&&(B>70?se(""):m<40?se(""):$<35?se(""):k.mood==="happy"?se(""):se("")),k})},6e4);return()=>window.clearInterval(T)},[]);const q=T=>{P(R=>[T,...R].slice(0,20))},Ae=(T,R)=>{const j=Date.now(),A=R.trim()||(T==="dragon"?"":T==="cat"?"":"");let B=20,m=80,$=80;return T==="cat"?(B=25,m=70,$=85):T==="dragon"&&(B=30,m=75,$=70),{...ad,kind:T,name:A,hunger:B,clean:m,energy:$,lastUpdated:j}},Le=T=>{z(T),C(T==="dragon"?"":T==="cat"?"":""),y("name")},xe=()=>{if(!N)return;const T=Ae(N,L);V(T),Vs(T),q(` ${T.name} `),se(`${T.name}`),y("play")},u=()=>{V(null),z(null),C(""),y("choose");try{window.localStorage.removeItem(co)}catch{}},ae=T=>{V(R=>{if(!R)return R;let{level:j,exp:A,nextLevelExp:B}=R;A+=T;let m=!1;for(;A>=B;)A-=B,j+=1,B=Math.round(B*1.35+10),m=!0;let $={...R,level:j,exp:A,nextLevelExp:B,mood:yr(R.hunger,R.clean,R.energy),lastUpdated:Date.now()};return $=wr($),Vs($),m&&q(` ${$.name}  Lv.${$.level} `),$})},ye=()=>{V(T=>{if(!T)return T;const R=Math.max(0,T.hunger-28),j=Math.min(100,T.energy+8);let A={...T,hunger:R,energy:j,mood:yr(R,T.clean,j),lastUpdated:Date.now()};return A=wr(A),Vs(A),A}),ae(8),q(" "),se("")},nt=()=>{V(T=>{if(!T)return T;const R=Math.min(100,T.clean+30);let j={...T,clean:R,hunger:Math.min(100,T.hunger+5),mood:yr(T.hunger+5,R,T.energy),lastUpdated:Date.now()};return j=wr(j),Vs(j),j}),ae(6),q(" "),se("")},Ge=()=>{V(T=>{if(!T)return T;const R=Math.max(0,T.energy-12),j=Math.min(100,T.hunger+10);let A={...T,energy:R,hunger:j,clean:Math.max(0,T.clean-8),mood:yr(j,T.clean-8,R),lastUpdated:Date.now()};return A=wr(A),Vs(A),A}),ae(10),q(" "),se("")},at=()=>{V(T=>{if(!T)return T;const R=Math.min(100,T.energy+30),j=Math.min(100,T.hunger+12);let A={...T,energy:R,hunger:j,mood:yr(j,T.clean,R),lastUpdated:Date.now()};return A=wr(A),Vs(A),A}),ae(4),q(" "),se("","voice")},Ne=w.useMemo(()=>c?c.evolutionStage===1?"   | ":c.evolutionStage===2?"   | ":"   | ":"",[c]),F=w.useMemo(()=>{if(!c)return null;if(c.evolutionStage===1){const R=7-c.level;return{stage:2,neededLevel:7,levelsNeeded:R,text:R>0?` ${R} Lv7`:""}}else if(c.evolutionStage===2){const R=15-c.level;return{stage:3,neededLevel:15,levelsNeeded:R,text:R>0?` ${R} Lv15`:""}}else return{stage:3,neededLevel:null,levelsNeeded:0,text:""}},[c]),K=w.useMemo(()=>{if(!c)return"";switch(c.mood){case"happy":return"";case"normal":return"";case"sad":return"";case"sleepy":return"";default:return""}},[c]),re=c?c.exp/c.nextLevelExp*100:0;return s.jsxs("div",{className:"wechat-page",children:[s.jsxs("header",{className:"wechat-header wechat-header-with-back",children:[s.jsxs("button",{type:"button",className:"wechat-back-btn",onClick:f,children:[s.jsx("span",{className:"wechat-back-arrow",children:""}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"wechat-header-title",children:[s.jsx("div",{className:"wechat-header-main",children:""}),s.jsx("div",{className:"wechat-header-sub",children:""})]}),s.jsx("div",{className:"wechat-header-right",children:s.jsx("button",{type:"button",className:"soft-icon-btn",onClick:()=>H(!0),title:"",children:" "})})]}),I?s.jsx(gh,{onBackHome:()=>H(!1)}):s.jsxs("main",{className:"wechat-main pet-main-scroll",children:[(!c||O!=="play")&&s.jsxs("section",{className:"soft-card-minimal pet-onboarding-card",children:[O==="choose"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsxs("div",{className:"pet-choose-grid",children:[s.jsxs("button",{type:"button",className:"pet-choose-card",onClick:()=>Le("slime"),children:[s.jsx("div",{className:"pet-choose-sprite pet-sprite pet-sprite-slime"}),s.jsx("div",{className:"pet-choose-name",children:""}),s.jsx("div",{className:"pet-choose-desc",children:""})]}),s.jsxs("button",{type:"button",className:"pet-choose-card",onClick:()=>Le("cat"),children:[s.jsx("div",{className:"pet-choose-sprite pet-sprite pet-sprite-cat"}),s.jsx("div",{className:"pet-choose-name",children:""}),s.jsx("div",{className:"pet-choose-desc",children:""})]}),s.jsxs("button",{type:"button",className:"pet-choose-card",onClick:()=>Le("dragon"),children:[s.jsx("div",{className:"pet-choose-sprite pet-sprite pet-sprite-dragon"}),s.jsx("div",{className:"pet-choose-name",children:""}),s.jsx("div",{className:"pet-choose-desc",children:""})]})]}),s.jsx("p",{className:"pet-onboarding-tip",children:""})]}),O==="name"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsxs("div",{className:"pet-name-preview-row",children:[s.jsx("div",{className:"pet-avatar-emoji",children:s.jsx(Ju,{kind:N??"slime",stage:1,mood:"happy"})}),s.jsxs("div",{className:"pet-name-preview-text",children:[s.jsx("div",{className:"pet-name-preview-label",children:""}),s.jsx("div",{className:"pet-name-preview-value",children:(L||"").trim()||""})]})]}),s.jsx("input",{className:"pet-name-input",value:L,maxLength:12,onChange:T=>C(T.target.value),placeholder:" ..."}),s.jsx("button",{type:"button",className:"primary-pill-btn pet-name-confirm-btn",onClick:xe,disabled:!N,children:""}),s.jsx("button",{type:"button",className:"pet-name-back-btn",onClick:()=>y("choose"),children:""})]})]}),c&&O==="play"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"soft-card-minimal pet-top-card",children:[s.jsx("div",{className:"pet-screen",children:s.jsxs("div",{className:"pet-screen-frame",children:[s.jsxs("div",{className:"pet-screen-window-bar",children:[s.jsxs("div",{className:"pet-screen-window-dots",children:[s.jsx("div",{className:"pet-screen-window-dot"}),s.jsx("div",{className:"pet-screen-window-dot"}),s.jsx("div",{className:"pet-screen-window-dot"})]}),s.jsx("div",{className:"pet-screen-window-title",children:"  "})]}),s.jsxs("div",{className:"pet-screen-inner",children:[_&&s.jsxs("div",{className:`pet-screen-speech pet-screen-speech-${_.from} pet-screen-speech-${_.kind}`,children:[s.jsx("div",{className:"pet-screen-speech-meta",children:_.from==="pet"?c.name:_.roleName?`${_.roleName}`:""}),s.jsx("div",{className:"pet-screen-speech-text",children:_.text})]}),s.jsx("div",{className:"pet-screen-pet",children:s.jsx("button",{type:"button",className:"pet-screen-pet-btn",onClick:()=>se(fe(c)),children:s.jsx(Ju,{kind:c.kind,stage:c.evolutionStage,mood:c.mood})})})]})]})}),s.jsxs("div",{className:"pet-avatar-info pet-avatar-info-under-screen",children:[s.jsxs("div",{className:"pet-avatar-name",children:[c.name,"  Lv.",c.level]}),s.jsx("div",{className:"pet-avatar-evolution",children:Ne}),F&&F.levelsNeeded>0&&s.jsxs("div",{className:"pet-next-evolution",children:[" ",F.text]}),F&&F.levelsNeeded===0&&c.evolutionStage<3&&s.jsx("div",{className:"pet-next-evolution pet-next-evolution-ready",children:" "}),s.jsx("button",{type:"button",className:"pet-reset-btn",onClick:u,children:""})]}),s.jsxs("div",{className:"pet-level-bar",children:[s.jsxs("div",{className:"pet-level-bar-label",children:[" ",c.exp.toFixed(0)," / ",c.nextLevelExp.toFixed(0)]}),s.jsx("div",{className:"pet-level-bar-outer",children:s.jsx("div",{className:"pet-level-bar-inner",style:{width:`${Math.min(100,re)}%`}})})]}),s.jsx("p",{className:"pet-mood-text",children:K})]}),s.jsxs("section",{className:"soft-card-minimal pet-stats-card",children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsx(lo,{label:"",value:c.hunger,color:"pink"}),s.jsx(lo,{label:"",value:c.clean,color:"blue"}),s.jsx(lo,{label:"",value:c.energy,color:"green"})]}),s.jsxs("section",{className:"soft-card-minimal pet-actions-card",children:[s.jsx("div",{className:"pet-section-title",children:""}),s.jsxs("div",{className:"pet-actions-grid",children:[s.jsxs("button",{type:"button",className:"pet-action-btn",onClick:ye,children:[s.jsx("span",{className:"pet-action-emoji",children:""}),s.jsx("span",{className:"pet-action-title",children:""}),s.jsx("span",{className:"pet-action-sub",children:""}),s.jsx("span",{className:"pet-action-exp",children:"+8 "})]}),s.jsxs("button",{type:"button",className:"pet-action-btn",onClick:nt,children:[s.jsx("span",{className:"pet-action-emoji",children:""}),s.jsx("span",{className:"pet-action-title",children:""}),s.jsx("span",{className:"pet-action-sub",children:""}),s.jsx("span",{className:"pet-action-exp",children:"+6 "})]}),s.jsxs("button",{type:"button",className:"pet-action-btn",onClick:Ge,children:[s.jsx("span",{className:"pet-action-emoji",children:""}),s.jsx("span",{className:"pet-action-title",children:""}),s.jsx("span",{className:"pet-action-sub",children:""}),s.jsx("span",{className:"pet-action-exp",children:"+10 "})]}),s.jsxs("button",{type:"button",className:"pet-action-btn",onClick:at,children:[s.jsx("span",{className:"pet-action-emoji",children:""}),s.jsx("span",{className:"pet-action-title",children:""}),s.jsx("span",{className:"pet-action-sub",children:""}),s.jsx("span",{className:"pet-action-exp",children:"+4 "})]})]}),s.jsx("p",{className:"pet-tip-text",children:" "})]}),s.jsxs("section",{className:"soft-card-minimal pet-log-card",children:[s.jsx("div",{className:"pet-section-title",children:""}),W.length===0?s.jsx("p",{className:"pet-log-empty",children:""}):s.jsx("ul",{className:"pet-log-list",children:W.map((T,R)=>s.jsx("li",{className:"pet-log-item",children:T},R))})]})]})]})]})},Gu=["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpeg","7.webp","8.jpeg","9.jpg","10.jpg","11.jpeg","12.jpeg","13.webp","14.jpeg","15.jpg","16.webp","17.jpeg","18.png","19.webp","20.webp","21.jpg","22.webp","23.webp","24.webp","25.jpeg","26.jpg","27.jpeg","28.webp","29.jpeg","30.webp"],It=f=>{const g=f%Gu.length;return`/weibo-avatar/${Gu[g]}`},ao=async(f,g)=>{const c=`${g}

 fufu 







1. 
2. 
3. 2-8
4. emoji" fufu "
5. 

`;try{return(await Zt(f,[{role:"user",content:c}])).split(`
`).filter(y=>y.trim()).slice(0,g).map(y=>y.trim())}catch(V){return console.error(":",V),Ks(g)}},Ks=f=>{const g=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return Array.from({length:f},(c,V)=>g[V%g.length])},ui=f=>{const g=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return g[f%g.length]},gl=[{id:"1",rank:1,keyword:"",hot:"",count:125.8},{id:"2",rank:2,keyword:"AI",hot:"",count:89.2},{id:"3",rank:3,keyword:"",hot:"",count:67.5},{id:"4",rank:4,keyword:"",hot:"",count:156.3},{id:"5",rank:5,keyword:"",hot:"",count:45.9},{id:"6",rank:6,keyword:"",hot:"",count:32.1},{id:"7",rank:7,keyword:"",hot:"",count:28.7},{id:"8",rank:8,keyword:"",hot:"",count:24.3}],yh=async(f,g,c)=>{const y=`8
1. 
2. 
3. 10
4. 
5. 


${g.slice(-20).map(N=>`${N.from==="me"?"":c}: ${N.content}`).join(`
`)}

`;try{const z=(await Zt(f,[{role:"user",content:y}])).split(`
`).filter(W=>W.trim()).slice(0,8),L=["","",""],C=[1,2,3,4,5,6,7,8];return z.map((W,P)=>({id:`hot-${P+1}`,rank:C[P],keyword:W.trim(),hot:L[Math.floor(Math.random()*L.length)],count:Math.floor(Math.random()*200)+20}))}catch(N){return console.error(":",N),gl}},Qu=[{id:"1",user:{name:"",avatar:It(0),verified:!0,verifiedType:""},content:" ",images:[],time:"1",source:"iPhone",repostCount:12,commentCount:45,likeCount:128,liked:!1},{id:"2",user:{name:"AI ",avatar:It(1),verified:!0,verifiedType:""},content:" ",images:[],time:"8",source:"",repostCount:8,commentCount:23,likeCount:89,liked:!0},{id:"3",user:{name:"",avatar:It(2),verified:!1},content:" ",images:[],time:"15",source:"Android",repostCount:5,commentCount:18,likeCount:67,liked:!1},{id:"4",user:{name:"",avatar:It(3),verified:!0,verifiedType:""},content:" @ ",time:"20",source:"iPhone",repostCount:3,commentCount:9,likeCount:34,liked:!1,reposted:{id:"1-1",user:{name:"",avatar:It(0),verified:!0,verifiedType:""},content:" ",images:[],time:"1",source:"iPhone",repostCount:12,commentCount:45,likeCount:128,liked:!1}},{id:"5",user:{name:"",avatar:It(4),verified:!1},content:" ",images:[],time:"30",source:"",repostCount:2,commentCount:7,likeCount:28,liked:!1}],wh={name:"",nickname:"",avatar:"",bio:" ",following:128,followers:256,likes:1024,verified:!1},jh="miniOtomePhone_userChats",Yu="miniOtomePhone_weiboSelectedCharacter",Nh="miniOtomePhone_chatSettings_",Xu="miniOtomePhone_messages_",Zu=[{id:"1",name:"/",avatar:"",emoji:""},{id:"2",name:"",avatar:"",emoji:""},{id:"3",name:"",avatar:"",emoji:""}],Sh=async(f,g,c)=>{let V="";c&&c.trim()&&(V=`


${c}`);const O=`"${g}"5
1. "${g}"
2. 
3. 
4. 50
5. 
${V}

`;try{return(await Zt(f,[{role:"user",content:O}])).split(`
`).filter(z=>z.trim()).slice(0,5).map((z,L)=>({content:z.trim(),userName:ui(L+200),avatar:It(L+200)}))}catch(y){return console.error(":",y),[{content:`"${g}"`,userName:ui(200),avatar:It(200)},{content:`${g}`,userName:ui(201),avatar:It(201)},{content:`${g}`,userName:ui(202),avatar:It(202)}]}},kh=async(f,g,c,V,O)=>{const N=g.slice(-20).map(C=>`${C.from==="me"?"":c}: ${C.content}`).join(`
`);let z="";V&&V.trim()&&(z=`


${V}`);const L=`5
1. ${c}
2. 
3. 
4. 50
5. 
${z}


${N}

`;try{const W=(await Zt(f,[{role:"user",content:L}])).split(`
`).filter(_=>_.trim()).slice(0,5),P=O||Ks(5);return W.map((_,X)=>({content:_.trim(),userName:P[X%P.length],avatar:It(X)}))}catch(C){return console.error(":",C),bh()}},bh=()=>[{content:"",userName:"",avatar:It(0)},{content:"",userName:"",avatar:It(1)},{content:"",userName:"",avatar:It(2)}],vl=async(f,g,c,V=0,O)=>{const y=`"${g}"

3-6
1. 
2. 
3. 30
4. 

`;try{const z=(await Zt(f,[{role:"user",content:y}])).split(`
`).filter(C=>C.trim()).slice(0,6),L=O||Ks(6);return z.map((C,W)=>({id:`comment-${c}-${W}`,user:{name:L[(V+W)%L.length],avatar:It(V+W+100),verified:Math.random()>.8,verifiedType:Math.random()>.8?"":void 0},content:C.trim(),time:`${W*2+1}`,likeCount:Math.floor(Math.random()*20),liked:Math.random()>.7}))}catch(N){return console.error(":",N),xl(g,c,V)}},xl=(f,g,c=0)=>{const V=Math.floor(Math.random()*4)+3,O=Ks(V);return Array.from({length:V},(y,N)=>({id:`comment-${g}-${N}`,user:{name:O[N%O.length],avatar:It(c+N+100),verified:!1},content:"",time:`${N*2+1}`,likeCount:Math.floor(Math.random()*10),liked:!1}))},Ch=async(f,g,c,V,O,y)=>{const N=O.slice(-20);let z=[],L=[];try{z=await ao(f,5),L=await ao(f,20)}catch(_){console.error(":",_),z=Ks(5),L=Ks(20)}if(N.length===0){const _=yl(),X={};for(let I=0;I<_.length;I++){const H=_[I];X[H.id]=await vl(f,H.content,H.id,I*10,L)}return{posts:_,comments:X}}const C=await kh(f,O,c,y,z),W=[],P={};for(let _=0;_<C.length;_++){const X=C[_],I=`chat-${_+1}`;W.push({id:I,user:{name:X.userName,avatar:X.avatar,verified:Math.random()>.7,verifiedType:Math.random()>.7?"":void 0},content:X.content,images:[],time:`${(_+1)*3}`,source:["iPhone","","Android"][_%3],repostCount:Math.floor(Math.random()*20)+5,commentCount:Math.floor(Math.random()*30)+10,likeCount:Math.floor(Math.random()*100)+20,liked:Math.random()>.7}),P[I]=await vl(f,X.content,I,_*10,L)}return{posts:W.slice(0,5),comments:P}},yl=(f,g)=>[{id:"1",user:{name:"",avatar:It(13),verified:!1},content:"  ",images:[],time:"5",source:"iPhone",repostCount:12,commentCount:45,likeCount:128,liked:!1},{id:"2",user:{name:"",avatar:It(14),verified:!0,verifiedType:""},content:" ",images:[],time:"12",source:"",repostCount:8,commentCount:23,likeCount:89,liked:!0},{id:"3",user:{name:"",avatar:It(15),verified:!1},content:" ",images:[],time:"20",source:"Android",repostCount:5,commentCount:18,likeCount:67,liked:!1}],Eh=async(f,g,c,V,O,y)=>{if(O&&O.length>0)return await Ch(f,g,c,V,O,y);const N=yl(),z={};for(let L=0;L<N.length;L++){const C=N[L];z[C.id]=await vl(f,C.content,C.id,L*10)}return{posts:N,comments:z}},Ih=({onBackHome:f})=>{const{aiConfig:g}=di(),{config:c}=wl(),[V,O]=w.useState(()=>{try{const v=window.localStorage.getItem(jh);if(v){const ie=JSON.parse(v);return[...Zu,...ie.map(Ke=>({id:Ke.id,name:Ke.name,avatar:Ke.emoji,emoji:Ke.emoji}))]}}catch{}return Zu}),[y,N]=w.useState(()=>{try{return window.localStorage.getItem(Yu)||null}catch{return null}}),[z,L]=w.useState(()=>{if(y)try{const v=window.localStorage.getItem(`${Xu}${y}`);if(v)return JSON.parse(v).filter(Ke=>Ke.content&&!Ke.isVoice&&!Ke.isRedPacket)}catch{}return[]}),[C,W]=w.useState(Qu),[P,_]=w.useState(()=>{const v={};return Qu.forEach(ie=>{v[ie.id]=xl(ie.content,ie.id)}),v}),[X,I]=w.useState(!1),[H,se]=w.useState("home"),[fe,q]=w.useState(gl),[Ae,Le]=w.useState(!1),[xe,u]=w.useState(null),[ae,ye]=w.useState(null),[nt,Ge]=w.useState([]),[at,Ne]=w.useState({}),[F,K]=w.useState(!1),[re,T]=w.useState(()=>{try{const v=window.localStorage.getItem("miniOtomePhone_weiboProfile");if(v)return JSON.parse(v)}catch{}return wh});w.useEffect(()=>{try{window.localStorage.setItem("miniOtomePhone_weiboProfile",JSON.stringify(re))}catch{}},[re]);const R=V.find(v=>v.id===y),j=v=>v?`miniOtomePhone_weibo_posts_${v}`:null,A=v=>v?`miniOtomePhone_weibo_comments_${v}`:null,B=v=>v?`miniOtomePhone_weibo_hotSearches_${v}`:null;w.useEffect(()=>{if(y)try{const v=window.localStorage.getItem(`${Xu}${y}`);if(v){const Ke=JSON.parse(v).filter(ze=>ze.content&&!ze.isVoice&&!ze.isRedPacket);L(Ke)}else L([])}catch{L([])}},[y]);const m=async()=>{var v;if(!(!y||!R))if(g.baseUrl&&g.apiKey&&g.model){I(!0),Le(!0);const ze=(((v=c==null?void 0:c.perApp)==null?void 0:v.weibo)||[]).flatMap(Je=>Je.entries.filter(je=>je.enabled).map(je=>`${je.title}: ${je.content}`)).join(`

`);Promise.all([Eh(g,y,R.name,R.avatar,z,ze),yh(g,z,R.name)]).then(([Je,je])=>{W(Je.posts),_(Je.comments),q(je),I(!1),Le(!1);try{const vt=j(y),bt=A(y),S=B(y);vt&&window.localStorage.setItem(vt,JSON.stringify(Je.posts)),bt&&window.localStorage.setItem(bt,JSON.stringify(Je.comments)),S&&window.localStorage.setItem(S,JSON.stringify(je))}catch(vt){console.error(":",vt)}}).catch(Je=>{console.error(":",Je);const je=yl(R.name,R.avatar),vt={};je.forEach(bt=>{vt[bt.id]=xl(bt.content,bt.id)}),W(je),_(vt),q(gl),I(!1),Le(!1)})}else{const ie=yl(R.name,R.avatar),Ke={};ie.forEach(ze=>{Ke[ze.id]=xl(ze.content,ze.id)}),W(ie),_(Ke),q(gl)}};w.useEffect(()=>{if(y)try{const v=j(y),ie=A(y),Ke=B(y);if(v){const ze=window.localStorage.getItem(v);ze&&W(JSON.parse(ze))}if(ie){const ze=window.localStorage.getItem(ie);ze&&_(JSON.parse(ze))}if(Ke){const ze=window.localStorage.getItem(Ke);ze&&q(JSON.parse(ze))}}catch{}},[y]);const $=v=>{N(v);try{window.localStorage.setItem(Yu,v)}catch{}};if(!y)return s.jsxs("div",{className:"weibo-screen",children:[s.jsxs("header",{className:"weibo-header",children:[s.jsx("button",{className:"weibo-back-btn",onClick:f,"aria-label":"",children:""}),s.jsx("div",{className:"weibo-header-title",children:""}),s.jsx("div",{className:"weibo-header-actions"})]}),s.jsx("main",{className:"weibo-main",children:s.jsxs("div",{className:"weibo-character-select",children:[s.jsxs("div",{className:"weibo-character-select-title",children:[s.jsx("h2",{children:""}),s.jsx("p",{children:""})]}),s.jsx("div",{className:"weibo-character-list",children:V.map(v=>{let ie=null;try{const je=window.localStorage.getItem(`${Nh}${v.id}`);je&&(ie=JSON.parse(je))}catch{}const Ke=()=>{var je;return(je=ie==null?void 0:ie.nickname)!=null&&je.trim()?ie.nickname.trim():v.name},ze=()=>{var je,vt,bt,S;if(ie){if((je=ie.taIdentity)!=null&&je.trim())return ie.taIdentity.trim();if((vt=ie.chatStyle)!=null&&vt.trim())return ie.chatStyle.trim();if((bt=ie.realName)!=null&&bt.trim())return`${ie.realName.trim()}`;if((S=ie.callMe)!=null&&S.trim())return`${ie.callMe.trim()}`}return""},Je=()=>{var je;return(je=ie==null?void 0:ie.avatar)!=null&&je.trim()?s.jsx("img",{src:ie.avatar.trim(),alt:Ke(),style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):s.jsx("span",{children:v.avatar})};return s.jsxs("button",{className:"weibo-character-item",onClick:()=>$(v.id),children:[s.jsx("div",{className:"weibo-character-avatar",children:Je()}),s.jsxs("div",{className:"weibo-character-info",children:[s.jsx("div",{className:"weibo-character-name",children:Ke()}),s.jsx("div",{className:"weibo-character-tagline",children:ze()})]}),s.jsx("div",{className:"weibo-character-arrow",children:""})]},v.id)})})]})})]});const k=v=>{W(ie=>ie.map(Ke=>Ke.id===v?{...Ke,liked:!Ke.liked,likeCount:Ke.liked?Ke.likeCount-1:Ke.likeCount+1}:Ke))},_e=(v,ie)=>{_(Ke=>{const ze=Ke[v]||[],Je=je=>je.id===ie?{...je,liked:!je.liked,likeCount:je.liked?je.likeCount-1:je.likeCount+1}:je.replies?{...je,replies:je.replies.map(Je)}:je;return{...Ke,[v]:ze.map(Je)}})},pe=xe?C.find(v=>v.id===xe):null,Xe=xe?P[xe]||[]:[];w.useEffect(()=>{var v;if(ae&&g.baseUrl&&g.apiKey&&g.model){K(!0);const ze=(((v=c==null?void 0:c.perApp)==null?void 0:v.weibo)||[]).flatMap(Je=>Je.entries.filter(je=>je.enabled).map(je=>`${je.title}: ${je.content}`)).join(`

`);(async()=>{let Je=[];try{Je=await ao(g,20)}catch(je){console.error(":",je),Je=Ks(20)}try{const je=await Sh(g,ae.keyword,ze),vt=[],bt={};for(let S=0;S<je.length;S++){const me=je[S],ue=`hot-${ae.id}-${S}`;vt.push({id:ue,user:{name:me.userName,avatar:me.avatar,verified:Math.random()>.7,verifiedType:Math.random()>.7?"":void 0},content:me.content,images:[],time:`${(S+1)*3}`,source:["iPhone","","Android"][S%3],repostCount:Math.floor(Math.random()*20)+5,commentCount:Math.floor(Math.random()*30)+10,likeCount:Math.floor(Math.random()*100)+20,liked:Math.random()>.7}),bt[ue]=await vl(g,me.content,ue,S*10+300,Je)}Ge(vt),Ne(bt),K(!1)}catch(je){console.error(":",je),K(!1)}})()}else if(ae){const ie=[{id:`hot-${ae.id}-1`,user:{name:ui(200),avatar:It(200),verified:!1},content:`"${ae.keyword}"`,images:[],time:"5",source:"",repostCount:5,commentCount:10,likeCount:20,liked:!1}];Ge(ie),Ne({})}},[ae,g]);const Ye=v=>v>=1e4?`${(v/1e4).toFixed(1)}`:v.toString(),qe=v=>{switch(v){case"":return"#ff6b6b";case"":return"#ff8c42";case"":return"#4ecdc4";default:return"#95a5a6"}};return ae?s.jsxs("div",{className:"weibo-screen",children:[s.jsxs("header",{className:"weibo-header",children:[s.jsx("button",{className:"weibo-back-btn",onClick:()=>ye(null),"aria-label":"",children:""}),s.jsxs("div",{className:"weibo-header-title",children:["#",ae.keyword]}),s.jsx("div",{className:"weibo-header-actions"})]}),s.jsx("main",{className:"weibo-main",children:s.jsxs("div",{className:"weibo-hot-search-detail",children:[s.jsxs("div",{className:"weibo-hot-search-detail-header",children:[s.jsxs("h2",{children:["#",ae.keyword]}),ae.hot&&s.jsx("span",{className:"weibo-hot-search-tag",style:{color:qe(ae.hot)},children:ae.hot}),ae.count&&s.jsxs("div",{className:"weibo-hot-search-detail-count",children:[ae.count,""]})]}),F&&s.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-sub)"},children:"..."}),!F&&s.jsx("div",{className:"weibo-posts",children:nt.length===0?s.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-sub)"},children:""}):nt.map(v=>{const ie=at[v.id]||[],Ke=xe===v.id;return s.jsxs("article",{className:"weibo-post",onClick:()=>u(Ke?null:v.id),style:{cursor:"pointer"},children:[s.jsxs("div",{className:"weibo-post-header",children:[s.jsx("div",{className:"weibo-post-avatar",children:v.user.avatar.startsWith("/")?s.jsx("img",{src:v.user.avatar,alt:v.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):v.user.avatar}),s.jsxs("div",{className:"weibo-post-user-info",children:[s.jsxs("div",{className:"weibo-post-user-name",children:[v.user.name,v.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:v.user.verifiedType,children:""})]}),s.jsxs("div",{className:"weibo-post-meta",children:[s.jsx("span",{className:"weibo-post-time",children:v.time}),s.jsx("span",{className:"weibo-post-source",children:v.source})]})]})]}),s.jsx("div",{className:"weibo-post-content",children:s.jsx("p",{children:v.content})}),s.jsxs("div",{className:"weibo-post-actions",onClick:ze=>ze.stopPropagation(),children:[s.jsxs("button",{className:`weibo-action-btn ${v.liked?"weibo-action-btn-liked":""}`,onClick:()=>{const ze=nt.map(Je=>Je.id===v.id?{...Je,liked:!Je.liked,likeCount:Je.liked?Je.likeCount-1:Je.likeCount+1}:Je);Ge(ze)},children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.likeCount>0?Ye(v.likeCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.commentCount>0?Ye(v.commentCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.repostCount>0?Ye(v.repostCount):""})]})]}),Ke&&ie.length>0&&s.jsxs("div",{className:"weibo-comments",onClick:ze=>ze.stopPropagation(),children:[s.jsx("div",{className:"weibo-comments-header",children:s.jsxs("h3",{children:[" ",ie.length]})}),s.jsx("div",{className:"weibo-comments-list",children:ie.map(ze=>s.jsxs("div",{className:"weibo-comment-item",children:[s.jsx("div",{className:"weibo-comment-avatar",children:ze.user.avatar.startsWith("/")?s.jsx("img",{src:ze.user.avatar,alt:ze.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):ze.user.avatar}),s.jsxs("div",{className:"weibo-comment-content",children:[s.jsxs("div",{className:"weibo-comment-header",children:[s.jsxs("span",{className:"weibo-comment-user-name",children:[ze.user.name,ze.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:ze.user.verifiedType,children:""})]}),s.jsx("span",{className:"weibo-comment-time",children:ze.time})]}),s.jsx("div",{className:"weibo-comment-text",children:ze.content}),s.jsxs("div",{className:"weibo-comment-actions",children:[s.jsxs("button",{className:`weibo-comment-action-btn ${ze.liked?"weibo-comment-action-btn-liked":""}`,onClick:()=>{const Je=ie.map(je=>je.id===ze.id?{...je,liked:!je.liked,likeCount:je.liked?je.likeCount-1:je.likeCount+1}:je);Ne({...at,[v.id]:Je})},children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{className:"weibo-comment-action-count",children:ze.likeCount>0?ze.likeCount:""})]}),s.jsxs("button",{className:"weibo-comment-action-btn",children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{children:""})]})]})]})]},ze.id))})]})]},v.id)})})]})})]}):pe?s.jsxs("div",{className:"weibo-screen",children:[s.jsxs("header",{className:"weibo-header",children:[s.jsx("button",{className:"weibo-back-btn",onClick:()=>u(null),"aria-label":"",children:""}),s.jsx("div",{className:"weibo-header-title",children:""}),s.jsx("div",{className:"weibo-header-actions"})]}),s.jsx("main",{className:"weibo-main",children:s.jsxs("div",{className:"weibo-detail",children:[s.jsxs("article",{className:"weibo-detail-post",children:[s.jsxs("div",{className:"weibo-post-header",children:[s.jsx("div",{className:"weibo-post-avatar",children:pe.user.avatar.startsWith("/")?s.jsx("img",{src:pe.user.avatar,alt:pe.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):pe.user.avatar}),s.jsxs("div",{className:"weibo-post-user-info",children:[s.jsxs("div",{className:"weibo-post-user-name",children:[pe.user.name,pe.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:pe.user.verifiedType,children:""})]}),s.jsxs("div",{className:"weibo-post-meta",children:[pe.time,"  ",pe.source]})]}),s.jsx("button",{className:"weibo-post-more-btn","aria-label":"",children:""})]}),s.jsxs("div",{className:"weibo-post-content",children:[pe.reposted?s.jsx("div",{className:"weibo-repost",children:s.jsxs("div",{className:"weibo-repost-header",children:[s.jsx("span",{className:"weibo-repost-user",children:pe.reposted.user.name}),s.jsx("span",{className:"weibo-repost-content",children:pe.reposted.content})]})}):s.jsx("p",{children:pe.content}),pe.images&&pe.images.length>0&&s.jsx("div",{className:"weibo-post-images",children:pe.images.map((v,ie)=>s.jsx("img",{src:v,alt:`${ie+1}`},ie))})]}),s.jsxs("div",{className:"weibo-post-actions",children:[s.jsxs("button",{className:`weibo-action-btn ${pe.liked?"weibo-action-btn-liked":""}`,onClick:()=>k(pe.id),children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:pe.likeCount>0?Ye(pe.likeCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:pe.commentCount>0?Ye(pe.commentCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:pe.repostCount>0?Ye(pe.repostCount):""})]})]})]}),s.jsxs("div",{className:"weibo-comments",children:[s.jsx("div",{className:"weibo-comments-header",children:s.jsxs("h3",{children:[" ",Xe.length]})}),s.jsx("div",{className:"weibo-comments-list",children:Xe.length===0?s.jsx("div",{className:"weibo-comments-empty",children:"~"}):Xe.map(v=>s.jsxs("div",{className:"weibo-comment-item",children:[s.jsx("div",{className:"weibo-comment-avatar",children:v.user.avatar.startsWith("/")?s.jsx("img",{src:v.user.avatar,alt:v.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):v.user.avatar}),s.jsxs("div",{className:"weibo-comment-content",children:[s.jsxs("div",{className:"weibo-comment-header",children:[s.jsxs("span",{className:"weibo-comment-user-name",children:[v.user.name,v.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:v.user.verifiedType,children:""})]}),s.jsx("span",{className:"weibo-comment-time",children:v.time})]}),s.jsx("div",{className:"weibo-comment-text",children:v.content}),s.jsxs("div",{className:"weibo-comment-actions",children:[s.jsxs("button",{className:`weibo-comment-action-btn ${v.liked?"weibo-comment-action-btn-liked":""}`,onClick:()=>_e(pe.id,v.id),children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{className:"weibo-comment-action-count",children:v.likeCount>0?v.likeCount:""})]}),s.jsxs("button",{className:"weibo-comment-action-btn",children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{children:""})]})]}),v.replies&&v.replies.length>0&&s.jsx("div",{className:"weibo-comment-replies",children:v.replies.map(ie=>s.jsxs("div",{className:"weibo-comment-reply-item",children:[s.jsx("div",{className:"weibo-comment-avatar weibo-comment-avatar-small",children:ie.user.avatar.startsWith("/")?s.jsx("img",{src:ie.user.avatar,alt:ie.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):ie.user.avatar}),s.jsxs("div",{className:"weibo-comment-content",children:[s.jsxs("div",{className:"weibo-comment-header",children:[s.jsxs("span",{className:"weibo-comment-user-name",children:[ie.user.name,ie.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:ie.user.verifiedType,children:""})]}),s.jsx("span",{className:"weibo-comment-time",children:ie.time})]}),s.jsx("div",{className:"weibo-comment-text",children:ie.content}),s.jsxs("div",{className:"weibo-comment-actions",children:[s.jsxs("button",{className:`weibo-comment-action-btn ${ie.liked?"weibo-comment-action-btn-liked":""}`,onClick:()=>_e(pe.id,ie.id),children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{className:"weibo-comment-action-count",children:ie.likeCount>0?ie.likeCount:""})]}),s.jsxs("button",{className:"weibo-comment-action-btn",children:[s.jsx("span",{className:"weibo-comment-action-icon",children:""}),s.jsx("span",{children:""})]})]})]})]},ie.id))})]})]},v.id))})]})]})})]}):s.jsxs("div",{className:"weibo-screen",children:[s.jsxs("header",{className:"weibo-header",children:[s.jsx("button",{className:"weibo-back-btn",onClick:f,"aria-label":"",children:""}),s.jsxs("div",{className:"weibo-header-title",children:[H==="home"&&"",H==="hot"&&"",H==="discover"&&"",H==="me"&&""]}),s.jsxs("div",{className:"weibo-header-actions",children:[H==="home"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"weibo-icon-btn",onClick:m,"aria-label":"",title:"",disabled:X||Ae,style:{marginRight:"8px",opacity:X||Ae?.5:1},children:X||Ae?"":""}),s.jsx("button",{className:"weibo-icon-btn",onClick:()=>N(null),"aria-label":"",title:"",children:""})]}),H==="me"&&s.jsx("button",{className:"weibo-icon-btn","aria-label":"",children:""})]})]}),s.jsxs("main",{className:"weibo-main",children:[H==="home"&&s.jsxs("div",{className:"weibo-feed",children:[s.jsxs("div",{className:"weibo-hot-entry",children:[s.jsx("div",{className:"weibo-hot-entry-title",children:" "}),s.jsx("div",{className:"weibo-hot-entry-list",children:fe.slice(0,3).map(v=>s.jsx("span",{className:"weibo-hot-entry-item",onClick:()=>ye(v),style:{cursor:"pointer"},children:v.keyword},v.id))}),s.jsx("button",{className:"weibo-hot-entry-more",onClick:()=>se("hot"),children:" "})]}),s.jsxs("div",{className:"weibo-posts",children:[X&&s.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-sub)"},children:"..."}),!X&&C.map(v=>s.jsxs("article",{className:"weibo-post",onClick:()=>u(v.id),style:{cursor:"pointer"},children:[s.jsxs("div",{className:"weibo-post-header",children:[s.jsx("div",{className:"weibo-post-avatar",children:v.user.avatar.startsWith("/")?s.jsx("img",{src:v.user.avatar,alt:v.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):v.user.avatar}),s.jsxs("div",{className:"weibo-post-user-info",children:[s.jsxs("div",{className:"weibo-post-user-name",children:[v.user.name,v.user.verified&&s.jsx("span",{className:"weibo-verified-badge",title:v.user.verifiedType,children:""})]}),s.jsxs("div",{className:"weibo-post-meta",children:[v.time,"  ",v.source]})]}),s.jsx("button",{className:"weibo-post-more-btn","aria-label":"",children:""})]}),s.jsxs("div",{className:"weibo-post-content",children:[v.reposted?s.jsx("div",{className:"weibo-repost",children:s.jsxs("div",{className:"weibo-repost-header",children:[s.jsx("span",{className:"weibo-repost-user",children:v.reposted.user.name}),s.jsx("span",{className:"weibo-repost-content",children:v.reposted.content})]})}):s.jsx("p",{children:v.content}),v.images&&v.images.length>0&&s.jsx("div",{className:"weibo-post-images",children:v.images.map((ie,Ke)=>s.jsx("img",{src:ie,alt:`${Ke+1}`},Ke))})]}),s.jsxs("div",{className:"weibo-post-actions",onClick:ie=>ie.stopPropagation(),children:[s.jsxs("button",{className:`weibo-action-btn ${v.liked?"weibo-action-btn-liked":""}`,onClick:()=>k(v.id),children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.likeCount>0?Ye(v.likeCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.commentCount>0?Ye(v.commentCount):""})]}),s.jsxs("button",{className:"weibo-action-btn",children:[s.jsx("span",{className:"weibo-action-icon",children:""}),s.jsx("span",{className:"weibo-action-count",children:v.repostCount>0?Ye(v.repostCount):""})]})]})]},v.id))]})]}),H==="hot"&&s.jsxs("div",{className:"weibo-hot-search",children:[s.jsxs("div",{className:"weibo-hot-search-header",children:[s.jsx("h2",{children:""}),s.jsx("div",{className:"weibo-hot-search-update",children:""})]}),Ae&&s.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-sub)"},children:"..."}),!Ae&&s.jsx("div",{className:"weibo-hot-search-list",children:fe.map(v=>s.jsxs("div",{className:"weibo-hot-search-item",onClick:()=>ye(v),style:{cursor:"pointer"},children:[s.jsx("div",{className:"weibo-hot-search-rank",children:v.rank}),s.jsxs("div",{className:"weibo-hot-search-content",children:[s.jsxs("div",{className:"weibo-hot-search-keyword",children:[v.keyword,v.hot&&s.jsx("span",{className:"weibo-hot-search-tag",style:{color:qe(v.hot)},children:v.hot})]}),v.count&&s.jsxs("div",{className:"weibo-hot-search-count",children:[v.count,""]})]}),s.jsx("div",{className:"weibo-hot-search-arrow",children:""})]},v.id))})]}),H==="discover"&&s.jsxs("div",{className:"weibo-discover",children:[s.jsxs("div",{className:"weibo-discover-section",children:[s.jsx("h3",{children:""}),s.jsx("div",{className:"weibo-discover-topics",children:fe.slice(0,6).map(v=>s.jsxs("div",{className:"weibo-discover-topic",children:["#",v.keyword]},v.id))})]}),s.jsxs("div",{className:"weibo-discover-section",children:[s.jsx("h3",{children:""}),s.jsx("div",{className:"weibo-discover-recommendations",children:C.slice(0,3).map(v=>s.jsxs("div",{className:"weibo-discover-user",children:[s.jsx("div",{className:"weibo-discover-user-avatar",children:v.user.avatar.startsWith("/")?s.jsx("img",{src:v.user.avatar,alt:v.user.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):v.user.avatar}),s.jsxs("div",{className:"weibo-discover-user-info",children:[s.jsx("div",{className:"weibo-discover-user-name",children:v.user.name}),s.jsx("div",{className:"weibo-discover-user-desc",children:""})]}),s.jsx("button",{className:"weibo-discover-follow-btn",children:""})]},v.id))})]})]}),H==="me"&&s.jsxs("div",{className:"weibo-profile",children:[s.jsxs("div",{className:"weibo-profile-header",children:[s.jsx("div",{className:"weibo-profile-bg"}),s.jsxs("div",{className:"weibo-profile-info",children:[s.jsx("div",{className:"weibo-profile-avatar",children:re.avatar}),s.jsxs("div",{className:"weibo-profile-name",children:[re.name,re.verified&&s.jsx("span",{className:"weibo-verified-badge",title:re.verifiedType,children:""})]}),s.jsx("div",{className:"weibo-profile-nickname",children:re.nickname}),s.jsx("div",{className:"weibo-profile-bio",children:re.bio})]})]}),s.jsxs("div",{className:"weibo-profile-stats",children:[s.jsxs("div",{className:"weibo-profile-stat-item",children:[s.jsx("div",{className:"weibo-profile-stat-number",children:re.following}),s.jsx("div",{className:"weibo-profile-stat-label",children:""})]}),s.jsxs("div",{className:"weibo-profile-stat-item",children:[s.jsx("div",{className:"weibo-profile-stat-number",children:re.followers}),s.jsx("div",{className:"weibo-profile-stat-label",children:""})]}),s.jsxs("div",{className:"weibo-profile-stat-item",children:[s.jsx("div",{className:"weibo-profile-stat-number",children:Ye(re.likes)}),s.jsx("div",{className:"weibo-profile-stat-label",children:""})]})]}),s.jsxs("div",{className:"weibo-profile-menu",children:[s.jsxs("button",{className:"weibo-profile-menu-item",children:[s.jsx("span",{className:"weibo-profile-menu-icon",children:""}),s.jsx("span",{className:"weibo-profile-menu-text",children:""}),s.jsx("span",{className:"weibo-profile-menu-arrow",children:""})]}),s.jsxs("button",{className:"weibo-profile-menu-item",children:[s.jsx("span",{className:"weibo-profile-menu-icon",children:""}),s.jsx("span",{className:"weibo-profile-menu-text",children:""}),s.jsx("span",{className:"weibo-profile-menu-arrow",children:""})]}),s.jsxs("button",{className:"weibo-profile-menu-item",children:[s.jsx("span",{className:"weibo-profile-menu-icon",children:""}),s.jsx("span",{className:"weibo-profile-menu-text",children:""}),s.jsx("span",{className:"weibo-profile-menu-arrow",children:""})]}),s.jsxs("button",{className:"weibo-profile-menu-item",children:[s.jsx("span",{className:"weibo-profile-menu-icon",children:""}),s.jsx("span",{className:"weibo-profile-menu-text",children:""}),s.jsx("span",{className:"weibo-profile-menu-arrow",children:""})]})]})]})]}),s.jsxs("footer",{className:"weibo-footer",children:[s.jsxs("button",{className:`weibo-footer-tab ${H==="home"?"weibo-footer-tab-active":""}`,onClick:()=>se("home"),children:[s.jsx("span",{className:"weibo-footer-tab-icon",children:""}),s.jsx("span",{className:"weibo-footer-tab-label",children:""})]}),s.jsxs("button",{className:`weibo-footer-tab ${H==="hot"?"weibo-footer-tab-active":""}`,onClick:()=>se("hot"),children:[s.jsx("span",{className:"weibo-footer-tab-icon",children:""}),s.jsx("span",{className:"weibo-footer-tab-label",children:""})]}),s.jsxs("button",{className:`weibo-footer-tab ${H==="discover"?"weibo-footer-tab-active":""}`,onClick:()=>se("discover"),children:[s.jsx("span",{className:"weibo-footer-tab-icon",children:""}),s.jsx("span",{className:"weibo-footer-tab-label",children:""})]}),s.jsxs("button",{className:`weibo-footer-tab ${H==="me"?"weibo-footer-tab-active":""}`,onClick:()=>se("me"),children:[s.jsx("span",{className:"weibo-footer-tab-icon",children:""}),s.jsx("span",{className:"weibo-footer-tab-label",children:""})]})]})]})},qu=[{id:"wechat",label:"",icon:"",hint:"/"},{id:"food",label:"",icon:"",hint:""},{id:"weibo",label:"",icon:"",hint:""},{id:"xiaohongshu",label:"",icon:"",hint:""},{id:"pet",label:"",icon:"",hint:""},{id:"worldbook",label:"",icon:"",hint:" AI "},{id:"settings",label:"",icon:"",hint:" AI "},{id:"appearance",label:"",icon:"",hint:""},{id:"coupleSpace",label:"",icon:"",hint:""}];function Th(){const[f,g]=w.useState(()=>new Date),[c,V]=w.useState(null);w.useEffect(()=>{const L=window.setInterval(()=>g(new Date),3e4);return()=>window.clearInterval(L)},[]),w.useEffect(()=>{const L=W=>{const P=W.target;P&&(P.tagName==="INPUT"&&P.type!=="checkbox"&&P.type!=="radio"&&P.type!=="file"&&P.type!=="submit"&&P.type!=="button"&&P.type!=="reset"&&!P.disabled&&!P.readOnly||P.tagName==="TEXTAREA"&&!P.disabled&&!P.readOnly)&&requestAnimationFrame(()=>{if(P instanceof HTMLInputElement||P instanceof HTMLTextAreaElement){if(P.focus(),P.setSelectionRange){const X=P.value.length;P.setSelectionRange(X,X)}const _=new Event("input",{bubbles:!0,cancelable:!0});P.dispatchEvent(_)}})};document.addEventListener("touchstart",L,{passive:!0,capture:!0});const C=W=>{const P=W.target;P&&(P.tagName==="INPUT"&&P.type!=="checkbox"&&P.type!=="radio"&&P.type!=="file"&&P.type!=="submit"&&P.type!=="button"&&P.type!=="reset"&&!P.disabled&&!P.readOnly||P.tagName==="TEXTAREA"&&!P.disabled&&!P.readOnly)&&requestAnimationFrame(()=>{if((P instanceof HTMLInputElement||P instanceof HTMLTextAreaElement)&&(P.focus(),P.setSelectionRange)){const _=P.value.length;P.setSelectionRange(_,_)}})};return document.addEventListener("click",C,{passive:!0,capture:!0}),()=>{document.removeEventListener("touchstart",L,{capture:!0}),document.removeEventListener("click",C,{capture:!0})}},[]);const O=f.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),y=f.toLocaleDateString("zh-CN",{month:"long",day:"numeric",weekday:"short"}),N=c?qu.find(L=>L.id===c)??null:null,z=!c;return s.jsxs("div",{className:"fullscreen-root",children:[s.jsx("div",{className:"fullscreen-bg"}),s.jsx("main",{className:"phone-fullscreen",children:z?s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"phone-header",children:[s.jsx("div",{className:"phone-header-time",children:O}),s.jsx("div",{className:"phone-header-date",children:y}),s.jsx("p",{className:"phone-header-tagline",children:"    "})]}),s.jsxs("section",{className:"phone-main",children:[s.jsxs("section",{className:"phone-pane soft-card-minimal",children:[s.jsx("div",{className:"phone-pane-title",children:""}),s.jsx("p",{className:"phone-pane-text",children:" API  AI "})]}),s.jsx("section",{className:"phone-grid",children:qu.map(L=>s.jsxs("button",{type:"button",className:`phone-icon ${(N==null?void 0:N.id)===L.id?"phone-icon-active":""}`,onClick:()=>V(L.id),children:[s.jsx("div",{className:"phone-icon-emoji","aria-hidden":"true",children:L.icon}),s.jsx("div",{className:"phone-icon-label",children:L.label})]},L.id))})]}),s.jsx("footer",{className:"phone-footer",children:N?s.jsxs("div",{className:"phone-footer-active",children:[s.jsxs("span",{className:"phone-footer-label",children:["  ",N.label]}),s.jsx("span",{className:"phone-footer-hint",children:N.hint})]}):s.jsx("div",{className:"phone-footer-idle",children:"   /  / "})})]}):s.jsxs(s.Fragment,{children:[c==="wechat"&&s.jsx(fh,{onBackHome:()=>V(null)}),c==="settings"&&s.jsx(Xm,{onBackHome:()=>V(null)}),c==="appearance"&&s.jsx(Gm,{onBackHome:()=>V(null)}),c==="worldbook"&&s.jsx(ph,{onBackHome:()=>V(null)}),c==="pet"&&s.jsx(vh,{onBackHome:()=>V(null)}),c==="weibo"&&s.jsx(Ih,{onBackHome:()=>V(null)})]})})]})}Bm.createRoot(document.getElementById("root")).render(s.jsx(Lm.StrictMode,{children:s.jsx(Vm,{children:s.jsx(Zm,{children:s.jsx(Qm,{children:s.jsx(Th,{})})})})}));

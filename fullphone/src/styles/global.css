:root {
  --bg-gradient-start: #ffe8f4;
  --bg-gradient-end: #e7f0ff;
  --accent-pink: #ff9ac6;
  --accent-pink-soft: #ffd1e6;
  --accent-lilac: #c7b6ff;
  --text-main: #4b3b4b;
  --text-sub: #9b7c9b;
  --radius-lg: 20px;
  --radius-pill: 999px;
}

/* 主题切换：通过 data-theme 覆盖全局配色变量 */
:root[data-theme="pink"] {
  --bg-gradient-start: #ffe8f4;
  --bg-gradient-end: #e7f0ff;
  --accent-pink: #ff9ac6;
  --accent-pink-soft: #ffd1e6;
  --accent-lilac: #c7b6ff;
  --text-main: #4b3b4b;
  --text-sub: #9b7c9b;
}

:root[data-theme="blue"] {
  --bg-gradient-start: #e0f2ff;
  --bg-gradient-end: #dbeafe;
  --accent-pink: #60a5fa;
  --accent-pink-soft: #bfdbfe;
  --accent-lilac: #818cf8;
  --text-main: #1e293b;
  --text-sub: #64748b;
}

:root[data-theme="mint"] {
  --bg-gradient-start: #dcfce7;
  --bg-gradient-end: #e0f2fe;
  --accent-pink: #22c55e;
  --accent-pink-soft: #bbf7d0;
  --accent-lilac: #34d399;
  --text-main: #14532d;
  --text-sub: #4b5563;
}

/* 暖橘日落 */
:root[data-theme="sunset"] {
  --bg-gradient-start: #ffe4d4;
  --bg-gradient-end: #fecaca;
  --accent-pink: #fb923c;
  --accent-pink-soft: #fed7aa;
  --accent-lilac: #f97316;
  --text-main: #7c2d12;
  --text-sub: #9a3412;
}

/* 薰衣草星河 */
:root[data-theme="lavender"] {
  --bg-gradient-start: #ede9fe;
  --bg-gradient-end: #e0f2fe;
  --accent-pink: #a855f7;
  --accent-pink-soft: #ddd6fe;
  --accent-lilac: #6366f1;
  --text-main: #312e81;
  --text-sub: #4c1d95;
}


*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  /* 延续初代小手机的全局字体 */
  font-family: "Noto Serif SC", "Noto Sans SC",
    "PingFang SC", "PingFang TC", "Hiragino Sans GB",
    "STSong", "STKaiti", "FangSong", "KaiTi",
    "Georgia", "Garamond", "Times New Roman", serif;
  background: radial-gradient(circle at top, var(--bg-gradient-start), var(--bg-gradient-end));
  letter-spacing: 0.03em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 400;
  overflow-x: hidden; /* 避免在手机上出现左右滑动 */
  overflow-y: hidden; /* 禁止整体页面上下滑动 */
  touch-action: none; /* 禁止整体页面滚动，但输入框会通过 !important 覆盖为 auto */
  overscroll-behavior: none; /* 防止过度滚动 */
  /* 注意：在 iOS PWA 模式下，viewport 的 user-scalable=no 会阻止键盘弹出
     所以我们将 user-scalable 设置为 yes，但通过 maximum-scale=1.01 来限制缩放 */
}

/* 防止用户缩放（通过限制 touch-action，但允许输入框正常工作） */
* {
  -webkit-user-select: none;
  user-select: none;
  /* 不允许缩放手势 */
  touch-action: pan-y;
}

/* 但允许输入框和文本域选择文本和接收触摸 */
input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):not([type="submit"]):not([type="button"]):not([type="reset"]),
textarea {
  -webkit-user-select: text !important;
  user-select: text !important;
  /* 输入框允许所有触摸操作（包括键盘弹出） */
  touch-action: auto !important;
}

/* 确保所有输入框和文本域可以正常接收触摸输入 */
input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):not([type="submit"]):not([type="button"]):not([type="reset"]),
textarea {
  touch-action: auto !important;
  -webkit-touch-callout: default !important;
  -webkit-user-select: text !important;
  user-select: text !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  pointer-events: auto !important;
  /* 确保输入框可编辑 */
  -webkit-user-modify: read-write !important;
  -moz-user-modify: read-write !important;
  user-modify: read-write !important;
  /* 移除可能阻止输入的样式 */
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
  tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
}

/* 确保输入框在聚焦时也能正常工作 */
input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):not([type="submit"]):not([type="button"]):not([type="reset"]):focus,
textarea:focus {
  touch-action: auto !important;
  -webkit-user-select: text !important;
  user-select: text !important;
  pointer-events: auto !important;
}

body {
  min-height: 100vh;
}

button {
  font-family: inherit;
}

.fullscreen-root {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.fullscreen-bg {
  position: absolute;
  inset: -20%;
  background:
    radial-gradient(circle at top left, #ffe1f0, transparent 55%),
    radial-gradient(circle at bottom right, #e0f8ff, transparent 55%);
  filter: blur(16px);
  opacity: 0.8;
  z-index: -1;
}

.phone-fullscreen {
  position: relative;
  width: min(480px, 100vw);
  height: 100vh;
  padding: 90px 16px 0;
  display: flex;
  flex-direction: column;
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
  overflow-x: hidden;
  /* 确保输入框可以接收触摸事件 */
  touch-action: pan-y;
}

/* 首页固定不滚动，壁纸铺满整块手机区域 */
.phone-fullscreen-no-scroll {
  overflow-y: hidden;
  overscroll-behavior: none;
}

/* 手机桌面壁纸层：覆盖整块手机区域，在内容下方 */
.phone-wallpaper {
  position: absolute;
  inset: 0;
  z-index: -1;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  /* 加一点淡淡的蒙版，保证文字在任何壁纸上都可读 */
  opacity: 0.96;
}

.phone-header {
  padding-bottom: 32px;
  text-align: center;
}

.phone-header-time {
  font-size: 36px;
  font-weight: 600;
  letter-spacing: 0.06em;
  color: var(--text-main);
}

.phone-header-date {
  margin-top: 6px;
  font-size: 14px;
  color: var(--text-sub);
}

.phone-header-tagline {
  margin: 10px auto 0;
  max-width: 260px;
  font-size: 11px;
  color: var(--text-sub);
}

.phone-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 14px;
  min-height: 0;
}

.phone-pane {
  border-radius: var(--radius-lg);
  padding: 12px 14px;
}

.soft-card-minimal {
  background: linear-gradient(
    145deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 80%, #ffffff);
  box-shadow: 0 12px 26px color-mix(in srgb, var(--accent-pink) 30%, transparent);
}

.phone-pane-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: 4px;
}

.phone-pane-text {
  font-size: 12px;
  color: var(--text-main);
  line-height: 1.6;
  margin: 0;
}

.phone-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}

.phone-icon {
  border: none;
  background: transparent;
  padding: 6px 4px 2px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  cursor: pointer;
  transition:
    transform 120ms ease-out,
    opacity 120ms ease-out;
}

.phone-icon-emoji {
  width: 56px;
  height: 56px;
  aspect-ratio: 1 / 1;
  border-radius: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  box-shadow: 0 6px 14px color-mix(in srgb, var(--accent-pink) 55%, transparent);
}

.phone-icon-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
  text-align: center;
}

.phone-icon:hover {
  transform: translateY(-2px);
  opacity: 0.9;
}

.phone-icon-active {
  transform: translateY(-2px);
}

.phone-footer {
  padding-top: 20px;
  padding-bottom: 6px;
  border-top: 1px solid rgba(255, 210, 234, 0.7);
  font-size: 11px;
  color: var(--text-sub);
}

.phone-footer-active {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.phone-footer-label {
  font-weight: 600;
  color: var(--text-main);
}

.phone-footer-hint {
  font-size: 11px;
  color: var(--text-sub);
}

.phone-footer-idle {
  font-size: 11px;
  color: var(--text-sub);
}

@media (max-width: 480px) {
  .phone-fullscreen {
    width: 100vw;
    padding-inline: 14px;
  }

  .wechat-bottom-nav {
    margin-left: -14px;
    margin-right: -14px;
  }

  .wechat-screen {
    margin-left: -14px;
    margin-right: -14px;
  }

  .weibo-screen {
    margin-left: -14px;
    margin-right: -14px;
  }

  .settings-screen {
    margin-left: -14px;
    margin-right: -14px;
    padding-left: 14px;
    padding-right: 14px;
    height: 100vh;
    max-height: 100vh;
  }

  .settings-screen.wechat-screen {
    margin-top: -90px;
    margin-left: -14px;
    margin-right: -14px;
    padding-left: 14px;
    padding-right: 14px;
  }

  .settings-body {
    padding-top: 24px;
    padding-bottom: 20px;
  }

  .soft-card {
    padding: 12px 10px 10px;
  }

  .settings-textarea {
    min-height: 80px;
  }

  .chat-settings-nav {
    padding: 6px 14px 8px;
  }

  .chat-settings-nav-item {
    font-size: 11px;
    padding: 5px 6px;
  }
}

/* WeChat 简约乙女风主页 */
.wechat-screen {
  display: flex;
  flex-direction: column;
  /* 让内容高度稍微比容器高一点，这样上面顶到标题栏、下面也能顶到手机底边 */
  min-height: calc(100% + 90px);
  padding-top: 0;
  /* 顶部与左右贴边显示（冲破 phone-fullscreen 的内边距） */
  margin-top: -90px;
  margin-left: -16px;
  margin-right: -16px;
  /* 只让标题栏及以上区域是纯白，其余保持浅灰色背景 */
  background: linear-gradient(to bottom, #ffffff 0, #ffffff 112px, #f5f5f5 112px);
  overflow-x: hidden;
}

.wechat-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 48px 16px 8px;
}

.wechat-back-btn {
  border: none;
  background: transparent;
  font-size: 12px;
  color: var(--accent-pink);
  cursor: pointer;
  padding: 4px 6px;
}

.wechat-title {
  /* 让标题栏严格水平居中：不受左侧返回按钮、右侧按钮宽度影响 */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  width: min(260px, 70vw);
  pointer-events: none; /* 避免遮挡左右按钮点击 */
}

.wechat-title-main {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main);
}

.wechat-title-sub {
  margin-top: 6px; /* 略微下移副标题，让视觉更舒适 */
  font-size: 11px;
  color: var(--text-sub);
}

.wechat-header-right {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 6px;
  min-width: 0;
}

.wechat-body {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden; /* 避免内容在主列表页横向滚动 */
  /* 底部不要和导航栏之间留空隙 */
  padding: 4px 0 0;
}

.wechat-chat-header {
  /* 聊天页标题栏：整体稍微下移一点，并加高高度 */
  padding: 56px 16px 16px;
}

/* 聊天设置导航栏 */
.chat-settings-nav {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 6px 16px 8px;
  background: #ffffff;
  border-bottom: 1px solid rgba(255, 195, 224, 0.3);
  gap: 4px;
  flex-shrink: 0;
}

.chat-settings-nav-item {
  flex: 1;
  border: none;
  background: transparent;
  padding: 6px 8px;
  font-size: 12px;
  color: var(--text-sub);
  cursor: pointer;
  border-radius: 8px;
  transition: all 140ms ease-out;
  font-weight: 500;
}

.chat-settings-nav-item:hover {
  background: rgba(255, 240, 250, 0.6);
}

.chat-settings-nav-item-active {
  font-weight: 600;
  color: var(--text-main);
}

.wechat-chat-list {
  list-style: none;
  margin: 25px 0 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wechat-chat-card-wrapper {
  position: relative;
  overflow: hidden;
}

.wechat-chat-card-actions {
  position: absolute;
  inset: 0 0 0 auto;
  display: flex;
  align-items: stretch;
  justify-content: flex-end;
  gap: 1px;
  padding-right: 10px;
}

.wechat-chat-card-btn {
  border: none;
  padding: 0 12px;
  font-size: 11px;
  cursor: pointer;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.wechat-chat-card-btn-delete {
  background: #ef4444;
  border-radius: 12px 0 0 12px;
}

.wechat-chat-card-btn-hide {
  background: #9ca3af;
  border-radius: 0 12px 12px 0;
}

.wechat-chat-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 16px;
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  box-shadow: none;
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
  position: relative;
  z-index: 1;
  transition:
    background 0.15s ease-out,
    transform 0.12s ease-out,
    translate 0.16s ease-out;
}

.wechat-chat-card-swiped {
  /* 向左滑动距离要略大于两个按钮宽度，确保红色「删除该聊天」完全露出 */
  translate: -180px 0;
}

.wechat-chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 14px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
}

.wechat-chat-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.wechat-chat-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  min-width: 0;
}

.wechat-chat-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
  flex-shrink: 0;
}

.wechat-chat-time {
  font-size: 11px;
  color: var(--text-sub);
  flex-shrink: 0;
}

.wechat-chat-preview {
  font-size: 11px;
  color: var(--text-sub);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
}

.wechat-chat-unread {
  min-width: 18px;
  padding: 2px 6px;
  border-radius: 999px;
  background: #ef4444;
  color: white;
  font-size: 10px;
  font-weight: 600;
  text-align: center;
  flex-shrink: 0;
}

.wechat-chat-body {
  flex: 1;
  /* 让聊天内容紧贴输入框，不预留多余空白 */
  padding: 8px 0 30px; /* 预留底部空间，避免最后一条消息被功能栏和输入框遮挡 */
  overflow-y: auto;
  overflow-x: hidden; /* 避免聊天详情页横向滚动 */
  background: #f5f5f5;
}

.wechat-chat-body-inner {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center top;
  background-repeat: no-repeat;
}

.wechat-story-body {
  flex: 1;
  padding: 12px 10px 0;
  overflow-y: auto;
  overflow-x: hidden;
}

.wechat-story-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
}

.wechat-story-block {
  width: 100%;
  max-width: 360px;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: 14px;
  padding: 14px 12px 18px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.wechat-story-paragraph {
  font-size: 13px;
  line-height: 1.8;
  color: var(--text-main);
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
  margin: 0 0 10px;
}

.wechat-story-paragraph:last-child {
  margin-bottom: 0;
}

/* 剧情模式下，玩家自己输入的内容（from: me），用不同颜色标记出来 */
.wechat-story-paragraph-me {
  color: #2563eb;
  font-weight: 600;
}

.wechat-story-meta {
  font-size: 10px;
  color: var(--text-sub);
  margin-bottom: 6px;
}

.wechat-story-empty {
  font-size: 12px;
  color: var(--text-sub);
  font-style: italic;
  text-align: center;
}

/* 剧情模式下，双引号内的对话内容高亮显示 */
.wechat-story-dialogue {
  color: #9c0d31;
  font-weight: 400d;
}

.wechat-chat-bubbles {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 4px;
  margin-top: 20px; /* 让第一条消息气泡与标题栏之间留出安全距离，不被覆盖 */
}

.wechat-chat-row-me,
.wechat-chat-row-other {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  width: 100%;
}

.wechat-chat-row-me > .wechat-bubble,
.wechat-chat-row-other > .wechat-bubble {
  flex-shrink: 1;
}

/* 玩家侧消息气泡宽度 - 和角色侧一样，都是80% */
.wechat-chat-row-me .wechat-bubble,
.wechat-chat-row-me > .wechat-bubble,
.wechat-chat-row-me .wechat-bubble-me,
.wechat-chat-row-me .wechat-bubble.wechat-bubble-me,
.wechat-chat-row-me .wechat-bubble.wechat-voice-bubble,
.wechat-chat-row-me .wechat-voice-bubble {
  max-width: 80% !important;
  width: auto !important;
  flex: 0 1 auto !important;
  min-width: 0 !important;
  align-self: flex-end !important;
}

.wechat-chat-row-me {
  justify-content: flex-end;
}

.wechat-chat-row-other {
  justify-content: flex-start;
}

.wechat-chat-avatar-bubble {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, var(--accent-pink));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  flex-shrink: 0;
  margin-top: 0;
  align-self: flex-start;
}

.wechat-chat-avatar-bubble-me {
  background: radial-gradient(circle at 30% 30%, #bfdbfe, var(--accent-lilac));
}

.wechat-bubble {
  max-width: 80%;
  min-width: fit-content;
  width: fit-content;
  padding: 7px 10px 6px;
  border-radius: 14px;
  font-size: 13px;
  line-height: 1.6;
  position: relative;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
}

/* 确保语音气泡和普通文本气泡宽度一致 - 所有语音气泡都限制在80% */
.wechat-voice-bubble {
  max-width: 80% !important;
  width: fit-content !important;
  min-width: 0 !important;
  flex: 0 1 auto !important;
}


.wechat-bubble-me {
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-pink));
  color: #5b3250;
}

/* 剧情模式下，玩家发送的内容用更柔和、偏灰紫的文字颜色，以区分角色叙事 */
.wechat-bubble-me-story {
  /* 明显区别于角色用的深色文本，剧情模式下玩家台词改为偏蓝色并稍微加粗 */
  color: #2563eb;
  font-weight: 600;
}

.wechat-bubble-other {
  background: rgba(255, 255, 255, 0.96);
  color: var(--text-main);
}

/* 两侧小三角，指向头像中间位置（固定在头像中心，约20px） */
.wechat-bubble-me::before,
.wechat-bubble-other::before {
  content: "";
  position: absolute;
  top: 13px; /* 固定位置：20px（头像中心）- 7px（气泡顶部padding）= 13px */
  width: 0;
  height: 0;
  border: 7px solid transparent;
}

.wechat-bubble-other::before {
  left: -10px;
  border-right-color: rgba(255, 255, 255, 0.96);
}

.wechat-bubble-me::before {
  right: -10px;
  /* 使用主题强调色，避免在不同主题下固定粉色 */
  border-left-color: var(--accent-pink);
}

/* 语音消息样式（参考初代小手机） */
.wechat-voice-bubble {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-width: 80% !important;
  width: fit-content !important;
}

.wechat-voice-main {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  user-select: none;
  min-width: 110px;
}

/* 玩家侧语音气泡的min-width限制 */
.wechat-chat-row-me .wechat-voice-bubble .wechat-voice-main {
  min-width: 0 !important;
  max-width: 100% !important;
  width: auto !important;
}

/* 玩家侧语音气泡整体宽度限制 */
.wechat-chat-row-me .wechat-voice-bubble {
  max-width: 250px !important;
}

.wechat-voice-wifi {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

.wechat-voice-wifi svg {
  width: 100%;
  height: 100%;
  color: currentColor;
}

.wechat-voice-wifi-me {
  transform: rotate(-90deg);
}

.wechat-voice-wifi-other {
  transform: rotate(90deg);
}

.wechat-voice-duration {
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

.wechat-voice-text-expanded {
  margin-top: 2px;
  padding: 6px 8px;
  background: rgba(0, 0, 0, 0.03);
  border-radius: 8px;
  font-size: 12px;
  line-height: 1.5;
  word-break: break-word;
  white-space: pre-wrap;
}

.wechat-bubble-me .wechat-voice-text-expanded {
  background: rgba(255, 255, 255, 0.28);
  max-width: 100% !important;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
  display: block;
  box-sizing: border-box;
}

/* 所有语音转写内容宽度限制 - 确保和普通文本消息气泡宽度一致 */
.wechat-voice-text-expanded {
  max-width: 100% !important;
  width: 100% !important;
  min-width: 0 !important;
  word-break: break-word !important;
  overflow-wrap: anywhere !important;
  white-space: pre-wrap !important;
  box-sizing: border-box !important;
  display: block !important;
}


/* 聊天工具栏 */
.wechat-chat-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: 4px;
  padding: 6px 10px 4px;
  margin-left: 0;
  margin-right: 0;
  border-top: 1px solid color-mix(in srgb, var(--accent-pink-soft) 70%, #ffffff);
  background: linear-gradient(
    to top,
    color-mix(in srgb, var(--accent-pink-soft) 8%, #ffffff 92%),
    #ffffff
  );
}

.wechat-toolbar-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  border: none;
  background: transparent;
  padding: 4px 8px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 140ms ease-out;
  color: var(--text-sub);
  flex: 1;
  min-width: 0;
}

.wechat-toolbar-btn:hover {
  background: rgba(255, 240, 250, 0.6);
}

.wechat-toolbar-btn-active {
  background: rgba(255, 240, 250, 0.8);
}

.wechat-toolbar-btn-active .wechat-toolbar-icon svg path,
.wechat-toolbar-btn-active .wechat-toolbar-icon svg circle {
  fill: var(--accent-pink);
}

.wechat-toolbar-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
}

.wechat-toolbar-icon svg {
  width: 100%;
  height: 100%;
}

.wechat-toolbar-label {
  font-size: 10px;
  font-weight: 500;
  margin-top: 2px;
}

.wechat-chat-input-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 8px 39px;
  /* 不再左右“冲出屏幕”，避免输入框被视觉截断 */
  margin-left: 0;
  margin-right: 0;
  border-top: 1px solid color-mix(in srgb, var(--accent-pink-soft) 70%, #ffffff);
  background: linear-gradient(
    to top,
    color-mix(in srgb, var(--accent-pink-soft) 12%, #ffffff 88%),
    color-mix(in srgb, var(--accent-pink-soft) 5%, #ffffff 95%),
    #ffffff
  );
}

.wechat-chat-voice-btn {
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 195, 224, 0.3);
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.wechat-chat-voice-btn:hover {
  background: rgba(255, 195, 224, 0.5);
  transform: scale(1.05);
}

.wechat-chat-voice-btn:active {
  transform: scale(0.95);
}

.wechat-chat-input {
  flex: 1;
  border-radius: 999px;
  border: 1px solid rgba(255, 195, 224, 0.85);
  padding: 10px 14px;
  font-size: 14px;
  outline: none;
  background: rgba(255, 255, 255, 0.98);
  touch-action: auto !important; /* 允许输入框接收触摸输入 */
  -webkit-touch-callout: default !important; /* iOS 允许文本选择 */
  -webkit-user-select: text !important;
  user-select: text !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  pointer-events: auto !important;
}

.wechat-chat-input:focus {
  box-shadow:
    0 0 0 1px rgba(255, 180, 219, 0.9),
    0 0 0 6px rgba(255, 192, 224, 0.25);
}

.wechat-chat-send-btn {
  border: none;
  border-radius: 999px;
  padding: 10px 16px;
  font-size: 13px;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  color: #4b3b4b;
  cursor: pointer;
  box-shadow: 0 6px 14px color-mix(in srgb, var(--accent-lilac) 60%, transparent);
}

.wechat-chat-send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: none;
}

/* 聊天功能扩展菜单（输入框上方的「+」按钮展开区域） */
.wechat-chat-extra-menu {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 10px;
  padding: 14px 12px 20px; /* 底部多留 padding，用背景色填满到底部 */
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.98),
    rgba(255, 240, 252, 0.96)
  );
  border-top: 1px solid rgba(255, 210, 234, 0.9);
}

.wechat-chat-extra-item {
  border: none;
  background: transparent;
  padding: 4px 2px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  cursor: pointer;
}

.wechat-chat-extra-icon {
  width: 40px;
  height: 40px;
  border-radius: 14px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
}

.wechat-chat-extra-text {
  font-size: 11px;
  color: var(--text-main);
}

/* 红包消息气泡（仿微信红包样式） */
.wechat-image-bubble {
  padding: 0;
  overflow: hidden;
  border-radius: 8px;
  background: transparent;
}

.wechat-image-bubble img {
  display: block;
  width: 100%;
  height: auto;
  max-width: 200px;
  border-radius: 8px;
}

.wechat-redpacket-bubble {
  padding: 0;
  overflow: hidden;
  background: transparent;
}

.wechat-bubble-me.wechat-redpacket-bubble {
  background: none;
}

.wechat-bubble-other.wechat-redpacket-bubble {
  background: none;
}

.wechat-redpacket-main {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 12px;
  min-height: 80px;
  border-radius: 14px 14px 10px 10px;
  background: linear-gradient(135deg, #f97316, #ef4444);
  color: #fff7ed;
  position: relative;
}

.wechat-redpacket-icon {
  width: 34px;
  height: 40px;
  border-radius: 10px;
  background: radial-gradient(circle at 30% 20%, #fed7aa, #ea580c);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
}

.wechat-redpacket-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.wechat-redpacket-title {
  font-size: 12px;
  opacity: 0.9;
}

.wechat-redpacket-note {
  font-size: 13px;
  font-weight: 600;
}

.wechat-redpacket-amount {
  font-size: 13px;
  font-weight: 600;
  flex-shrink: 0;
}

.wechat-redpacket-footer {
  padding: 4px 10px 6px;
  font-size: 11px;
  color: var(--text-sub);
}

@keyframes coinRotate {
  0% {
    transform: rotateY(0deg);
  }
  25% {
    transform: rotateY(90deg);
  }
  50% {
    transform: rotateY(180deg);
  }
  75% {
    transform: rotateY(270deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

.wechat-wallet-list-items {
  display: flex;
  flex-direction: column;
  gap: 1px;
  background: var(--bg-sub);
}

.wechat-wallet-list-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-main);
}

.wechat-wallet-list-item-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.wechat-wallet-list-item-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.wechat-wallet-list-item-title {
  font-size: 14px;
  color: var(--text-main);
  font-weight: 500;
}

.wechat-wallet-list-item-time {
  font-size: 12px;
  color: var(--text-sub);
}

.wechat-wallet-list-item-amount {
  font-size: 16px;
  font-weight: 600;
  flex-shrink: 0;
}

.wechat-wallet-list-item-amount.income {
  color: #10b981;
}

.wechat-wallet-list-item-amount.expense {
  color: #ef4444;
}

.wechat-bottom-nav {
  display: flex;
  justify-content: space-around;
  /* 整体往上抬一点，让底部导航更贴近内容 */
  padding: 5px 4px 25px;
  transform: translateY(-6px);
  margin-left: -16px;
  margin-right: -16px;
  border-top: 1px solid color-mix(in srgb, var(--accent-pink-soft) 70%, #ffffff);
  background: linear-gradient(
    to top,
    color-mix(in srgb, var(--accent-pink-soft) 12%, #ffffff 88%),
    color-mix(in srgb, var(--accent-pink-soft) 5%, #ffffff 95%),
    #ffffff
  );
  backdrop-filter: blur(18px);
}

.wechat-bottom-item {
  border: none;
  background: transparent;
  padding: 4px 8px;
  border-radius: 999px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  font-size: 10px;
  color: var(--text-sub);
  cursor: pointer;
}

.wechat-bottom-item-active {
  background: color-mix(in srgb, var(--accent-pink-soft) 25%, #ffffff 75%);
  color: var(--accent-pink);
  box-shadow: 0 6px 14px color-mix(in srgb, var(--accent-pink) 36%, transparent);
}

.wechat-bottom-icon {
  font-size: 16px;
}

.wechat-bottom-label {
  font-size: 10px;
}

/* 通讯录列表（简约乙女风） */
.wechat-contacts {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wechat-contacts-section-title {
  font-size: 11px;
  color: var(--text-sub);
  padding: 4px 4px 0;
}

.wechat-contacts-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wechat-contacts-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 10px rgba(255, 180, 220, 0.2);
}

.wechat-contacts-avatar {
  width: 34px;
  height: 34px;
  border-radius: 12px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.wechat-contacts-main {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wechat-contacts-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.wechat-contacts-tagline {
  font-size: 11px;
  color: var(--text-sub);
}

/* 角色资料卡页面样式 */
.wechat-profile-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: #f5f5f5;
  overflow: hidden;
  z-index: 1000;
}

.wechat-profile-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 95%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 95%, var(--accent-lilac))
  );
  border-bottom: 1px solid color-mix(in srgb, var(--accent-pink-soft) 30%, #ffffff);
  position: sticky;
  top: 0;
  z-index: 10;
}

.wechat-profile-header.wechat-chat-header {
  padding: 8px 16px;
}

.wechat-profile-back-btn {
  width: 40px;
  height: 40px;
  border: none;
  background: transparent;
  font-size: 24px;
  color: var(--text-main);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: background 0.2s ease;
}

.wechat-profile-back-btn:hover {
  background: rgba(255, 240, 250, 0.6);
}

.wechat-profile-back-btn:active {
  background: rgba(255, 240, 250, 0.8);
}

.wechat-profile-header-title {
  font-size: 17px;
  font-weight: 600;
  color: var(--text-main);
  flex: 1;
  text-align: center;
}

.wechat-profile-content {
  flex: 1;
  overflow-y: auto;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.wechat-profile-top {
  display: flex;
  flex-direction: column;
  padding: 30px 20px;
  align-items: center;
  gap: 16px;
}

.wechat-profile-avatar-container {
  position: relative;
}

.wechat-profile-avatar {
  width: 100px;
  height: 100px;
  border-radius: 16px;
  object-fit: cover;
  border: 4px solid rgba(255, 255, 255, 0.9);
  box-shadow: 0 6px 20px rgba(255, 154, 198, 0.3);
}

.wechat-profile-avatar-placeholder {
  width: 100px;
  height: 100px;
  border-radius: 16px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: var(--text-main);
  border: 4px solid rgba(255, 255, 255, 0.9);
  box-shadow: 0 6px 20px rgba(255, 154, 198, 0.3);
}

.wechat-profile-name-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  width: 100%;
}

.wechat-profile-name-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.wechat-profile-name {
  font-size: 22px;
  font-weight: 600;
  color: var(--text-main);
  margin: 0;
}

.wechat-profile-edit-icon {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: background 0.2s ease;
  padding: 0;
}

.wechat-profile-edit-icon:hover {
  background: rgba(255, 240, 250, 0.6);
}

.wechat-profile-edit-nickname {
  width: 100%;
  max-width: 300px;
}

.wechat-profile-nickname-input {
  width: 100%;
  padding: 8px 12px;
  border: 2px solid var(--accent-pink-soft);
  border-radius: 8px;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main);
  background: rgba(255, 255, 255, 0.9);
  text-align: center;
  outline: none;
  transition: border-color 0.2s ease;
}

.wechat-profile-nickname-input:focus {
  border-color: var(--accent-pink);
}

.wechat-profile-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(255, 240, 250, 0.5);
  border-radius: 12px;
  font-size: 13px;
  color: var(--text-sub);
}

.wechat-profile-status-emoji {
  font-size: 14px;
}

.wechat-profile-status-text {
  font-size: 13px;
}

.wechat-profile-info-card {
  background: #ffffff;
  border-radius: 0;
  overflow: hidden;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  margin: 0;
  padding: 0;
}

.wechat-profile-info-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid color-mix(in srgb, var(--accent-pink-soft) 30%, #ffffff);
  transition: background 0.2s ease;
}

.wechat-profile-info-section:last-child {
  border-bottom: none;
}

.wechat-profile-info-section:hover {
  background: rgba(255, 240, 250, 0.3);
}

.wechat-profile-info-label {
  font-size: 14px;
  color: var(--text-sub);
  font-weight: 500;
}

.wechat-profile-info-value {
  font-size: 14px;
  color: var(--text-main);
  font-weight: 500;
  text-align: right;
  max-width: 60%;
  word-break: break-word;
}

.wechat-profile-info-empty {
  color: var(--text-sub);
  font-style: italic;
}

.wechat-profile-moments-card {
  background: #ffffff;
  border-radius: 0;
  overflow: hidden;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  margin: 0;
  padding: 0;
}

.wechat-profile-moments-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.wechat-profile-moments-item:hover {
  background: rgba(255, 240, 250, 0.5);
}

.wechat-profile-moments-item:active {
  background: rgba(255, 240, 250, 0.7);
}

.wechat-profile-moments-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.wechat-profile-moments-text {
  flex: 1;
  font-size: 15px;
  font-weight: 500;
  color: var(--text-main);
}

.wechat-profile-moments-arrow {
  font-size: 18px;
  color: var(--text-sub);
  flex-shrink: 0;
}

/* 雷达扫描动画 */
@keyframes radar-scan {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.wechat-profile-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  margin-top: auto;
  background: #ffffff;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.wechat-profile-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 20px;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.wechat-profile-action-primary {
  background: linear-gradient(135deg, var(--accent-pink), var(--accent-lilac));
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(255, 154, 198, 0.4);
}

.wechat-profile-action-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(255, 154, 198, 0.5);
}

.wechat-profile-action-primary:active {
  transform: translateY(0);
}

.wechat-profile-action-secondary {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  color: var(--text-main);
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
}

.wechat-profile-action-secondary:hover {
  background: rgba(255, 240, 250, 0.8);
  transform: translateY(-1px);
}

.wechat-profile-action-secondary:active {
  transform: translateY(0);
}

.wechat-profile-action-icon {
  font-size: 18px;
}

.wechat-profile-action-text {
  font-size: 16px;
}

/* 发现页面样式 */
.wechat-discover {
  margin: 25px 0 0;
  padding: 0;
}

.wechat-discover-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.wechat-discover-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 0;
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
  border-bottom: none;
  cursor: pointer;
  transition: background 0.2s ease;
}

.wechat-discover-item:first-child {
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
}

.wechat-discover-item:last-child {
  border-bottom: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
  border-bottom-left-radius: 16px;
  border-bottom-right-radius: 16px;
}

.wechat-discover-item:only-child {
  border-radius: 16px;
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
}

.wechat-discover-item:hover {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 95%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 95%, var(--accent-lilac))
  );
}

.wechat-discover-item:active {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 85%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 85%, var(--accent-lilac))
  );
}

.wechat-discover-icon {
  width: 36px;
  height: 36px;
  border-radius: 12px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.wechat-discover-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.wechat-discover-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-main);
}

.wechat-discover-arrow {
  font-size: 18px;
  color: var(--text-sub);
  flex-shrink: 0;
  margin-left: auto;
}

/* 我页面样式 */
.wechat-me {
  margin: 25px 0 0;
  padding: 0;
}

.wechat-me-profile {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  padding: 30px 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  border-radius: 16px;
  margin-bottom: 20px;
}

.wechat-me-avatar-container {
  position: relative;
  cursor: pointer;
  display: inline-block;
}

.wechat-me-avatar {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  overflow: hidden;
  border: 3px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 4px 12px rgba(255, 154, 198, 0.3);
  cursor: pointer;
  transition: transform 0.2s ease;
}

.wechat-me-avatar:hover {
  transform: scale(1.05);
}

.wechat-me-edit-badge {
  position: absolute;
  bottom: -4px;
  right: -4px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--accent-pink);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  border: 2px solid #ffffff;
  box-shadow: 0 2px 6px rgba(255, 154, 198, 0.4);
  cursor: pointer;
  transition: transform 0.2s ease;
}

.wechat-me-edit-badge:hover {
  transform: scale(1.1);
}

.wechat-me-nickname {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main);
  cursor: pointer;
  padding: 8px 16px;
  border-radius: 8px;
  transition: background 0.2s ease;
  user-select: none;
}

.wechat-me-nickname:hover {
  background: rgba(255, 240, 250, 0.6);
}

.wechat-me-nickname:active {
  background: rgba(255, 240, 250, 0.8);
}

.wechat-me-menu {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.wechat-me-menu-section {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #ffffff 90%, var(--accent-pink-soft)),
    color-mix(in srgb, #ffffff 90%, var(--accent-lilac))
  );
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid color-mix(in srgb, var(--accent-pink-soft) 60%, #ffffff);
}

.wechat-me-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.wechat-me-menu-item:hover {
  background: rgba(255, 240, 250, 0.5);
}

.wechat-me-menu-item:active {
  background: rgba(255, 240, 250, 0.7);
}

.wechat-me-menu-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.wechat-me-menu-text {
  flex: 1;
  font-size: 15px;
  font-weight: 500;
  color: var(--text-main);
}

.wechat-me-menu-arrow {
  font-size: 18px;
  color: var(--text-sub);
  flex-shrink: 0;
}

/* 微信钱包页面 */
.wechat-wallet {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.wechat-wallet-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 10px 6px;
  border-bottom: 1px solid rgba(255, 210, 234, 0.7);
}

.wechat-wallet-body {
  flex: 1;
  padding: 10px 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
}

.wechat-wallet-balance-card {
  border-radius: 18px;
  padding: 14px 16px 12px;
  background: radial-gradient(circle at top left, #fef2ff, #e0f2ff);
  box-shadow: 0 10px 26px rgba(248, 187, 208, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.9);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.wechat-wallet-balance-main {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.wechat-wallet-balance-label {
  font-size: 12px;
  color: var(--text-sub);
}

.wechat-wallet-balance-amount {
  font-size: 26px;
  font-weight: 600;
  letter-spacing: 0.03em;
  color: var(--text-main);
}

.wechat-wallet-balance-extra {
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px dashed rgba(255, 210, 234, 0.8);
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wechat-wallet-balance-row {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--text-sub);
}

.wechat-wallet-actions {
  display: flex;
  gap: 8px;
}

.wechat-wallet-actions .primary-pill-btn,
.wechat-wallet-actions .soft-icon-btn {
  flex: 1;
  font-size: 12px;
}

.wechat-wallet-list {
  margin-top: 4px;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.94);
  border: 1px solid rgba(255, 228, 244, 0.8);
  padding: 10px 14px 12px;
}

.wechat-wallet-list-header {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wechat-wallet-list-header span:first-child {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.wechat-wallet-list-sub {
  font-size: 11px;
  color: var(--text-sub);
}

/* 设置应用样式（沿用初代小手机的乙女简约风） */
.settings-screen {
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 100vh;
  max-height: 100vh;
  padding-top: 0;
  overflow: hidden;
  position: relative;
}

.settings-screen.wechat-screen {
  /* 继承wechat-screen的样式，紧贴屏幕顶部 */
  margin-top: -90px;
  margin-left: -16px;
  margin-right: -16px;
  padding-top: 0;
  background: linear-gradient(to bottom, #ffffff 0, #ffffff 135px, transparent 146px);
}

.settings-screen.wechat-screen .wechat-header.wechat-chat-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background: #ffffff;
  flex-shrink: 0;
}

.settings-screen.wechat-screen .chat-settings-nav {
  position: sticky;
  top: 60px;
  z-index: 9;
  background: #ffffff;
  flex-shrink: 0;
}

/* 世界书页面也使用相同的固定样式 */
.settings-screen.wechat-screen .wechat-header.wechat-chat-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background: #ffffff;
  flex-shrink: 0;
}

.settings-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 2px 8px;
  flex-shrink: 0;
}

.settings-title {
  flex: 1;
}

.settings-title-main {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main);
}

.settings-title-sub {
  margin-top: 2px;
  font-size: 11px;
  color: var(--text-sub);
}

.settings-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 0 8px;
  padding-top: 24px;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  -webkit-overflow-scrolling: touch;
  /* 确保滚动区域从标题栏下方开始，内容不会显示在标题栏位置 */
}

.settings-section {
  margin-bottom: 0;
  flex-shrink: 0;
}

.soft-card {
  border-radius: var(--radius-lg);
  padding: 10px 10px 8px;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 240, 250, 0.96));
  box-shadow: 0 10px 25px rgba(255, 180, 218, 0.33);
  border: 1px solid rgba(255, 214, 236, 0.9);
  margin-bottom: 8px;
  position: relative;
  overflow: visible;
  width: 100%;
  box-sizing: border-box;
}

.soft-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.avatar-circle {
  width: 26px;
  height: 26px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  box-shadow: 0 5px 12px rgba(244, 114, 182, 0.45);
}

.soft-card-header-text {
  display: flex;
  flex-direction: column;
}

.soft-card-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.soft-card-subtitle {
  margin-top: 1px;
  font-size: 11px;
  color: var(--text-sub);
}

.settings-field {
  display: flex;
  flex-direction: column;
  gap: 3px;
  margin-top: 6px;
  font-size: 11px;
  width: 100%;
  box-sizing: border-box;
  min-width: 0;
}

.export-import-buttons {
  display: flex !important;
  flex-direction: row !important;
  flex-wrap: nowrap !important;
}

.export-import-buttons button {
  flex: 1 1 0% !important;
  max-width: 50% !important;
}

.settings-label {
  color: var(--text-sub);
}

.settings-input {
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(255, 195, 224, 0.85);
  padding: 5px 9px;
  font-size: 12px;
  outline: none;
  background: rgba(255, 255, 255, 0.98);
  box-sizing: border-box;
  word-wrap: break-word;
  overflow-wrap: break-word;
  touch-action: auto !important; /* 允许输入框接收触摸输入 */
  -webkit-touch-callout: default !important; /* iOS 允许文本选择 */
  -webkit-user-select: text !important;
  user-select: text !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  pointer-events: auto !important;
}

.settings-input:focus {
  box-shadow:
    0 0 0 1px rgba(255, 180, 219, 0.9),
    0 0 0 5px rgba(255, 210, 234, 0.4);
}

/* 心动回忆时间线 */
.memories-timeline {
  list-style: none;
  margin: 4px 0 0;
  padding: 4px 0 0;
  position: relative;
}

.memories-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  position: relative;
  padding-bottom: 12px;
}

.memories-item:not(:last-child)::after {
  content: "";
  position: absolute;
  left: 7px;
  top: 14px;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    to bottom,
    rgba(251, 207, 232, 0.9),
    rgba(191, 219, 254, 0.2)
  );
}

.memories-dot {
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  box-shadow: 0 0 0 3px rgba(255, 228, 245, 0.9);
  flex-shrink: 0;
  margin-top: 2px;
}

.memories-content {
  flex: 1;
  min-width: 0;
}

.memories-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-main);
}

.memories-time {
  font-size: 10px;
  color: var(--text-sub);
  margin-top: 2px;
}

.memories-desc {
  margin-top: 4px;
  font-size: 11px;
  color: var(--text-sub);
  line-height: 1.5;
}

/* 通用多行输入（世界书等） */
.settings-textarea {
  width: 100%;
  min-height: 90px;
  max-height: none;
  border-radius: 10px;
  border: 1px solid rgba(255, 195, 224, 0.85);
  padding: 6px 9px;
  font-size: 12px;
  line-height: 1.6;
  outline: none;
  background: rgba(255, 255, 255, 0.98);
  resize: vertical;
  box-sizing: border-box;
  overflow-y: auto;
  word-wrap: break-word;
  overflow-wrap: break-word;
  touch-action: auto !important; /* 允许文本域接收触摸输入 */
  -webkit-touch-callout: default !important; /* iOS 允许文本选择 */
  -webkit-user-select: text !important;
  user-select: text !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  pointer-events: auto !important;
}

.settings-textarea:focus {
  box-shadow:
    0 0 0 1px rgba(255, 180, 219, 0.9),
    0 0 0 5px rgba(255, 210, 234, 0.4);
}

.worldbook-textarea {
  width: 100%;
  resize: vertical;
  min-height: 120px;
  line-height: 1.5;
  font-size: 12px;
}

.worldbook-tabs {
  display: flex;
  gap: 6px;
  margin-top: 4px;
  margin-bottom: 6px;
  flex-wrap: wrap;
}

.worldbook-tab {
  border-radius: 999px;
  border: 1px solid rgba(255, 195, 224, 0.65);
  padding: 4px 10px;
  font-size: 11px;
  background: rgba(255, 255, 255, 0.9);
  color: var(--text-sub);
  cursor: pointer;
}

.worldbook-tab-active {
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  color: #4b3b4b;
  box-shadow: 0 6px 14px rgba(244, 114, 182, 0.35);
}

.worldbook-tab-desc {
  font-size: 11px;
  color: var(--text-sub);
  margin-bottom: 4px;
}

.worldbook-entry {
  border-radius: 10px;
  border: 1px solid rgba(255, 195, 224, 0.6);
  background: rgba(255, 255, 255, 0.95);
  padding: 6px 8px;
  margin-bottom: 6px;
}

.worldbook-entry-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  cursor: pointer;
  list-style: none;
}

.worldbook-entry-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-main);
}

.worldbook-entry-count {
  font-size: 11px;
  color: var(--text-sub);
}

.worldbook-entry-body {
  margin-top: 6px;
  border-top: 1px dashed rgba(255, 195, 224, 0.7);
  padding-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.worldbook-entry-item-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: 2px;
}

.worldbook-entry-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

/* 条目标题靠左，开关垂直居中 */
.worldbook-entry-item-left {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  min-width: 0;
  flex: 1;
}

.worldbook-entry-item-left .worldbook-entry-item-title {
  margin: 0;
  text-align: left;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.worldbook-entry-item-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 6px;
  flex-shrink: 0;
}

.worldbook-entry-item-tag {
  margin-left: 4px;
  font-size: 10px;
  font-weight: 400;
  color: var(--text-sub);
}

.worldbook-entry-item-content {
  font-size: 11px;
  color: var(--text-sub);
  white-space: pre-wrap;
}

.worldbook-editor {
  margin-top: 8px;
  padding: 8px 10px 10px;
  border-radius: 12px;
  background: radial-gradient(circle at top left, rgba(255, 240, 252, 0.95), rgba(240, 249, 255, 0.95));
  border: 1px solid rgba(255, 195, 224, 0.75);
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.worldbook-editor-item {
  margin-top: 6px;
}

.worldbook-edit-link {
  margin-top: 4px;
  font-size: 11px;
}

/* 世界书编辑区内的辅助按钮、链接按钮在卡片中居中显示 */
.worldbook-editor .soft-icon-btn,
.worldbook-editor .worldbook-edit-link {
  align-self: center;
}

/* 世界书编辑里的主按钮取消强烈发光阴影，避免太抢眼 */
.worldbook-editor .primary-pill-btn {
  box-shadow: none;
}

.worldbook-editor .settings-model-row {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 条目开关样式 */
.worldbook-toggle {
  position: relative;
  display: inline-flex;
  width: 32px;
  height: 18px;
  align-self: center;
  margin-left: 0;
}

.worldbook-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.worldbook-toggle-slider {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: rgba(248, 250, 252, 0.9);
  border: 1px solid rgba(248, 187, 208, 0.8);
  transition: all 140ms ease-out;
}

.worldbook-toggle-slider::before {
  content: "";
  position: absolute;
  height: 12px;
  width: 12px;
  left: 2px;
  top: 1px;
  border-radius: 999px;
  background: #f9a8d4;
  box-shadow: 0 2px 6px rgba(244, 114, 182, 0.55);
  transition: transform 140ms ease-out;
}

.worldbook-toggle input:checked + .worldbook-toggle-slider {
  background: linear-gradient(135deg, #fecdd3, #fbcfe8);
}

.worldbook-toggle input:checked + .worldbook-toggle-slider::before {
  transform: translateX(12px);
}

.settings-model-row {
  margin-top: 8px;
  gap: 6px;
}

.soft-icon-btn {
  border: none;
  background: rgba(255, 240, 252, 0.9);
  border-radius: var(--radius-pill);
  padding: 4px 10px;
  font-size: 11px;
  color: var(--text-sub);
  cursor: pointer;
  transition:
    background 140ms ease-out,
    transform 120ms ease-out,
    box-shadow 160ms ease-out;
  box-shadow: 0 4px 10px rgba(255, 193, 222, 0.4);
}

.soft-icon-btn:hover {
  background: #ffe4f5;
  transform: translateY(-1px);
  box-shadow: 0 7px 14px rgba(255, 180, 220, 0.65);
}

.settings-select {
  margin-top: 4px;
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(255, 195, 224, 0.85);
  padding: 5px 9px;
  font-size: 12px;
  outline: none;
  background: rgba(255, 255, 255, 0.98);
}

.settings-current-model {
  margin-top: 4px;
  font-size: 11px;
  color: var(--text-sub);
}

.settings-current-model span {
  color: #f973a5;
  font-weight: 600;
}

.primary-pill-btn {
  width: 100%;
  border: none;
  border-radius: var(--radius-pill);
  padding: 7px 14px;
  font-size: 12px;
  font-weight: 500;
  color: #fff;
  cursor: pointer;
  background: linear-gradient(135deg, #ff8bb8, #f973a5, #fbbfcd);
  box-shadow: 0 10px 22px rgba(244, 114, 182, 0.6);
  letter-spacing: 0.02em;
  position: relative;
  overflow: hidden;
}

.primary-pill-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.75), transparent 60%);
  opacity: 0;
  transition: opacity 160ms ease-out;
}

.primary-pill-btn:hover::after {
  opacity: 1;
}

.primary-pill-btn:active {
  transform: translateY(1px) scale(0.99);
  box-shadow: 0 6px 14px rgba(244, 114, 182, 0.6);
}

.settings-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.28);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 40;
}

.settings-modal-card {
  width: 260px;
  border-radius: 24px;
  padding: 14px 14px 10px;
  background: linear-gradient(145deg, #fff1f8, #e0f2fe);
  box-shadow: 0 20px 40px rgba(244, 114, 182, 0.7);
  border: 1px solid rgba(255, 214, 236, 0.9);
  text-align: center;
}

.settings-modal-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-main);
}

.settings-modal-message {
  margin-top: 6px;
  font-size: 12px;
  color: var(--text-sub);
  line-height: 1.6;
}

.settings-modal-btn {
  margin-top: 10px;
}

.wechat-chat-error {
  padding: 4px 8px 0;
  font-size: 11px;
  color: #f97373;
}

/* 外观页面 */
.appearance-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding-top: 8px;
}

.appearance-card {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0;
  width: 100%;
  text-align: left;
  background: transparent;
  border: none;
}

.appearance-preview {
  width: 52px;
  height: 52px;
  border-radius: 16px;
  flex-shrink: 0;
}

.appearance-preview-pink {
  background: radial-gradient(circle at top left, #ffe4f5, #fecdd3);
}

.appearance-preview-blue {
  background: radial-gradient(circle at top left, #e0f2fe, #bfdbfe);
}

.appearance-preview-mint {
  background: radial-gradient(circle at top left, #bbf7d0, #a5f3fc);
}

.appearance-preview-sunset {
  background: radial-gradient(circle at top left, #fed7aa, #fb923c);
}

.appearance-preview-lavender {
  background: radial-gradient(circle at top left, #ddd6fe, #a855f7);
}

.appearance-main {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.appearance-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.appearance-desc {
  font-size: 11px;
  color: var(--text-sub);
}

.appearance-card-active {
  box-shadow: 0 12px 24px rgba(244, 114, 182, 0.45);
  border-color: rgba(244, 114, 182, 0.9);
}

/* 外观页面 - 桌面壁纸预览与操作 */
.appearance-wallpaper-preview-wrapper {
  margin-top: 4px;
}

.appearance-wallpaper-preview {
  width: 100%;
  border-radius: 14px;
  background: repeating-linear-gradient(
      45deg,
      #f9fafb,
      #f9fafb 10px,
      #f3f4f6 10px,
      #f3f4f6 20px
    );
  border: 1px dashed rgba(148, 163, 184, 0.8);
  padding: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80px;
  box-sizing: border-box;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.appearance-wallpaper-preview-has-image {
  border-style: solid;
}

.appearance-wallpaper-preview-placeholder {
  font-size: 11px;
  color: var(--text-sub);
  text-align: center;
}

.appearance-wallpaper-actions {
  margin-top: 8px;
  display: flex;
  gap: 8px;
}

.appearance-wallpaper-actions .primary-pill-btn,
.appearance-wallpaper-actions .soft-icon-btn {
  flex: 1;
}

.appearance-wallpaper-file-input {
  padding: 5px 4px;
}

/* 外观页面 - 图标样式设置 */
.appearance-icon-preview-wrapper {
  margin-top: 4px;
}

.appearance-icon-preview-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.appearance-icon-preview {
  width: 56px;
  height: 56px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  box-shadow: 0 6px 14px rgba(244, 114, 182, 0.55);
}

.appearance-icon-preview-emoji {
  display: inline-block;
}

.appearance-icon-preview-caption {
  font-size: 11px;
  color: var(--text-sub);
  line-height: 1.5;
}

.appearance-icon-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.appearance-icon-row-space-between {
  justify-content: space-between;
}

.appearance-icon-color-input {
  width: 34px;
  height: 26px;
  padding: 0;
  border-radius: 8px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  background: transparent;
}

.appearance-icon-color-text {
  flex: 1;
}

.appearance-toggle-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--text-main);
}

/* 模式切换提示弹窗 */
.wechat-mode-toast {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.75);
  color: #ffffff;
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  z-index: 1000;
  pointer-events: none;
  animation: wechat-toast-fade-in 0.3s ease-out, wechat-toast-fade-out 0.3s ease-in 1.7s;
  animation-fill-mode: both;
}

/* 朋友圈发布提示弹窗 */
.wechat-moment-toast {
  background: rgba(255, 154, 198, 0.9);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(255, 154, 198, 0.4);
  animation: wechat-toast-fade-in 0.3s ease-out, wechat-toast-fade-out 0.3s ease-in 2.7s;
}

@keyframes wechat-toast-fade-in {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes wechat-toast-fade-out {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
}

/* 朋友圈页面样式 */
.moments-screen {
  display: flex;
  flex-direction: column;
  min-height: calc(100% + 90px);
  padding-top: 0;
  /* 顶部与左右贴边显示（冲破 phone-fullscreen 的内边距） */
  margin-top: -90px;
  margin-left: -16px;
  margin-right: -16px;
  background: #ededed;
  overflow-x: hidden;
}

.moments-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #ffffff;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  padding: 48px 16px 8px;
}

.moments-camera-btn {
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  padding: 4px 8px;
  color: var(--text-main);
  transition: opacity 0.2s ease;
}

.moments-camera-btn:hover {
  opacity: 0.7;
}

.moments-camera-btn:active {
  opacity: 0.5;
}

.moments-body {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  background: #ededed;
  -webkit-overflow-scrolling: touch;
}

/* 朋友圈顶部用户信息 */
.moments-profile {
  position: relative;
  width: 100%;
  background: linear-gradient(135deg, #ffe8f4, #e7f0ff);
}

.moments-cover {
  width: 100%;
  aspect-ratio: 4 / 3;
  position: relative;
  overflow: hidden;
}

.moments-cover-image {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
}

.moments-user-info {
  position: absolute;
  right: 16px;
  top: 90%;
  transform: translateY(-30%);
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  z-index: 1;
  pointer-events: none;
}

.moments-user-info-content {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
}

.moments-user-avatar-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  position: relative;
}

.moments-user-avatar {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  border: 3px solid #ffffff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  flex-shrink: 0;
}

.moments-user-name {
  font-size: 14px;
  font-weight: 600;
  color: #ffffff;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  white-space: nowrap;
  position: relative;
  z-index: 2;
}

.moments-user-signature {
  font-size: 12px;
  color: #666666;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  position: absolute;
  top: 84px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  text-align: center;
  white-space: nowrap;
  max-width: min(calc(100vw - 80px), 400px);
  overflow: visible;
  word-break: keep-all;
  width: max-content;
}

.moments-generate-btn {
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  padding: 8px 12px;
  color: var(--text-main);
  transition: opacity 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.moments-generate-btn:hover {
  opacity: 0.7;
}

.moments-generate-btn:active {
  opacity: 0.5;
}

.moments-generate-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 朋友圈动态列表 */
.moments-list {
  padding: 0;
  padding-top: 70px;
  /* 背景图区域与内容之间的留白区域（padding-top）不要露出灰底 */
  background: #ffffff;
}

.moments-item {
  display: flex;
  gap: 12px;
  padding: 12px 16px;
  background: #ffffff;
  border-bottom: 8px solid #ededed;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.moments-item:last-child {
  border-bottom: none;
}

.moments-item-avatar {
  width: 42px;
  height: 42px;
  border-radius: 6px;
  background: radial-gradient(circle at 30% 30%, #fff7fb, #f9a8d4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
}

.moments-item-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  overflow-wrap: break-word;
  word-wrap: break-word;
}

.moments-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.moments-item-author {
  font-size: 15px;
  font-weight: 500;
  color: #576b95;
}

.moments-item-text {
  font-size: 15px;
  line-height: 1.5;
  color: #181818;
  word-wrap: break-word;
  margin-top: 2px;
}

.moments-item-images {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
  margin-top: 4px;
}

.moments-item-image {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 6px;
  overflow: hidden;
  background: #f0f0f0;
}

.moments-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.moments-item-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--text-sub);
}

.moments-item-time {
  color: var(--text-sub);
}

.moments-item-location {
  color: var(--text-sub);
}

/* 点赞和评论区域 */
.moments-item-interactions {
  background: #f7f7f7;
  border-radius: 4px;
  padding: 8px 12px;
  margin-top: 6px;
}

.moments-likes {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
  font-size: 14px;
}

.moments-likes-icon {
  font-size: 14px;
}

.moments-likes-users {
  color: var(--text-main);
}

.moments-comments {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.moments-comment {
  font-size: 14px;
  line-height: 1.5;
  color: var(--text-main);
}

.moments-comment-author {
  font-weight: 500;
  color: #576b95;
  margin-right: 4px;
}

.moments-comment-reply-to {
  color: var(--text-sub);
  margin-right: 4px;
}

.moments-comment-content {
  color: var(--text-main);
}

/* 操作按钮 */
.moments-item-actions {
  display: flex;
  gap: 20px;
  margin-top: 6px;
  padding-top: 4px;
}

.moments-action-btn {
  background: transparent;
  border: none;
  font-size: 14px;
  color: #576b95;
  cursor: pointer;
  padding: 4px 0;
  transition: color 0.2s ease;
  font-weight: 400;
}

.moments-action-btn:hover {
  color: var(--accent-pink);
}

.moments-action-btn:active {
  opacity: 0.7;
}

.moments-action-btn-liked {
  color: var(--accent-pink);
  font-weight: 500;
}

/* 朋友圈空状态 */
.moments-empty {
  padding: 60px 20px;
  text-align: center;
}

.moments-empty-text {
  font-size: 16px;
  color: var(--text-sub);
  margin-bottom: 8px;
}

.moments-empty-hint {
  font-size: 13px;
  color: var(--text-sub);
  opacity: 0.7;
}

/* 发布朋友圈样式 */
.moments-publish-images {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin: 12px 0;
}

.moments-publish-image-item {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  border-radius: 8px;
  overflow: hidden;
  background: #f0f0f0;
}

.moments-publish-image-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.moments-publish-image-remove {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.6);
  color: #ffffff;
  border: none;
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;
}

.moments-publish-image-remove:hover {
  background: rgba(0, 0, 0, 0.8);
}

.pet-main-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pet-top-card {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pet-avatar-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.pet-avatar-emoji {
  width: 70px;
  height: 70px;
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  background: radial-gradient(circle at 30% 25%, #ffffff, #fed7e2);
  box-shadow: 0 10px 22px rgba(251, 113, 133, 0.25);
}

.pet-avatar-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.pet-avatar-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-main);
}

.pet-avatar-evolution {
  font-size: 11px;
  color: var(--text-sub);
}

.pet-next-evolution {
  margin-top: 4px;
  font-size: 10px;
  color: #fb7185;
  font-weight: 500;
  padding: 3px 6px;
  border-radius: 6px;
  background: rgba(251, 113, 133, 0.1);
  display: inline-block;
}

.pet-next-evolution-ready {
  color: #22c55e;
  background: rgba(34, 197, 94, 0.1);
  animation: pet-evolution-pulse 2s ease-in-out infinite;
}

@keyframes pet-evolution-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.pet-avatar-info-under-screen {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

.pet-level-bar {
  margin-top: 4px;
}

.pet-level-bar-label {
  font-size: 11px;
  color: var(--text-sub);
  margin-bottom: 4px;
}

.pet-level-bar-outer {
  width: 100%;
  height: 8px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.8);
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255, 186, 210, 0.7);
}

.pet-level-bar-inner {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #fb7185, #fb9a9a, #f9a8ff);
}

.pet-mood-text {
  margin: 4px 0 0;
  font-size: 12px;
  color: var(--text-main);
  line-height: 1.6;
}

.pet-section-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: 8px;
}

.pet-stats-card {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.pet-stat-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.pet-stat-label {
  font-size: 11px;
  color: var(--text-sub);
  width: 52px;
  flex-shrink: 0;
}

.pet-stat-bar {
  flex: 1;
  height: 7px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.9);
  overflow: hidden;
  position: relative;
}

.pet-stat-bar::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0.12;
}

.pet-stat-bar-inner {
  height: 100%;
  border-radius: inherit;
  transition: width 0.16s ease-out;
}

.pet-stat-bar-pink::before {
  background: linear-gradient(90deg, #fb7185, #f472b6);
}

.pet-stat-bar-pink .pet-stat-bar-inner {
  background: linear-gradient(90deg, #fb7185, #f472b6);
}

.pet-stat-bar-blue::before {
  background: linear-gradient(90deg, #60a5fa, #818cf8);
}

.pet-stat-bar-blue .pet-stat-bar-inner {
  background: linear-gradient(90deg, #60a5fa, #818cf8);
}

.pet-stat-bar-green::before {
  background: linear-gradient(90deg, #22c55e, #34d399);
}

.pet-stat-bar-green .pet-stat-bar-inner {
  background: linear-gradient(90deg, #22c55e, #34d399);
}

.pet-stat-value {
  font-size: 11px;
  color: var(--text-sub);
  width: 30px;
  text-align: right;
}

.pet-actions-card {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.pet-actions-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.pet-action-btn {
  border: none;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.9);
  padding: 8px 8px 7px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 3px;
  cursor: pointer;
  text-align: left;
  transition:
    transform 120ms ease-out,
    box-shadow 120ms ease-out,
    background 120ms ease-out;
}

.pet-action-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(248, 113, 113, 0.15);
  background: #ffffff;
}

.pet-action-emoji {
  font-size: 20px;
}

.pet-action-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.pet-action-sub {
  font-size: 11px;
  color: var(--text-sub);
}

.pet-action-exp {
  margin-top: 2px;
  font-size: 10px;
  color: #fb7185;
}

.pet-tip-text {
  margin: 6px 0 0;
  font-size: 11px;
  color: var(--text-sub);
  line-height: 1.6;
}

.pet-log-card {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.pet-log-empty {
  font-size: 12px;
  color: var(--text-sub);
}

.pet-log-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.pet-log-item {
  font-size: 11px;
  color: var(--text-main);
  padding-left: 10px;
  position: relative;
}

.pet-log-item::before {
  content: "·";
  position: absolute;
  left: 0;
  top: 0;
  color: #fb7185;
}

/* 掌机像素屏幕区域 */
.pet-screen {
  margin-bottom: 10px;
}

.pet-screen-frame {
  border-radius: 20px;
  padding: 8px 8px 10px;
  background: radial-gradient(circle at top left, #0f172a, #020617);
  box-shadow:
    inset 0 0 0 1px rgba(148, 163, 184, 0.4),
    0 8px 18px rgba(15, 23, 42, 0.45);
}

.pet-screen-window-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
  padding-inline: 1px;
}

.pet-screen-window-dots {
  display: flex;
  align-items: center;
  gap: 3px;
}

.pet-screen-window-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: #fda4af;
}

.pet-screen-window-dot:nth-child(2) {
  background: #facc15;
}

.pet-screen-window-dot:nth-child(3) {
  background: #22c55e;
}

.pet-screen-window-title {
  font-size: 10px;
  color: #e5e7eb;
  opacity: 0.8;
}

.pet-screen-inner {
  border-radius: 14px;
  padding: 8px 10px 10px;
  /* 像素草原背景：上半部分是天空，下半部分是草地 */
  background-image:
    linear-gradient(to bottom, #e0f2fe 0, #bfdbfe 45%, #bbf7d0 45%, #22c55e 100%);
  background-size: 100% 100%;
  min-height: 190px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  gap: 4px;
}

.pet-screen-pet {
  display: flex;
  align-items: center;
  justify-content: center;
  animation: pet-walk 3.2s ease-in-out infinite;
  padding-top: 16px;
}

.pet-screen-pet-btn {
  border: none;
  background: transparent;
  padding: 0;
  margin: 0;
  cursor: pointer;
}

.pet-screen-speech {
  align-self: stretch;
  border-radius: 8px;
  padding: 4px 6px;
  background: rgba(15, 23, 42, 0.92);
  border: 1px solid rgba(148, 163, 184, 0.8);
  color: #e5e7eb;
  font-size: 10px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.pet-screen-speech-meta {
  font-size: 9px;
  color: #a5b4fc;
}

.pet-screen-speech-text {
  font-size: 10px;
  color: #e5e7eb;
  line-height: 1.4;
}

.pet-screen-speech-role {
  border-color: #fbb6ce;
}

.pet-screen-speech-voice .pet-screen-speech-text::before {
  content: "♪ ";
  color: #f9a8d4;
}

@keyframes pet-walk {
  0% {
    transform: translateX(-10px);
  }
  50% {
    transform: translateX(10px);
  }
  100% {
    transform: translateX(-10px);
  }
}

.pet-onboarding-card {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pet-choose-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.pet-choose-card {
  border: none;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.95);
  padding: 8px 6px 6px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  text-align: center;
  transition:
    transform 120ms ease-out,
    box-shadow 120ms ease-out,
    background 120ms ease-out;
}

.pet-choose-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(248, 113, 113, 0.18);
  background: #ffffff;
}

.pet-choose-sprite {
  width: 48px;
  height: 48px;
}

.pet-choose-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-main);
}

.pet-choose-desc {
  font-size: 10px;
  color: var(--text-sub);
}

.pet-onboarding-tip {
  margin: 4px 0 0;
  font-size: 11px;
  color: var(--text-sub);
  line-height: 1.6;
}

.pet-name-preview-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.pet-name-preview-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.pet-name-preview-label {
  font-size: 11px;
  color: var(--text-sub);
}

.pet-name-preview-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.pet-name-input {
  margin-top: 8px;
  width: 100%;
  border-radius: 12px;
  border: 1px solid rgba(255, 195, 224, 0.85);
  padding: 7px 10px;
  font-size: 12px;
  outline: none;
  background: rgba(255, 255, 255, 0.98);
  touch-action: auto !important; /* 允许输入框接收触摸输入 */
  -webkit-touch-callout: default !important; /* iOS 允许文本选择 */
  -webkit-user-select: text !important;
  user-select: text !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  pointer-events: auto !important;
}

.pet-name-confirm-btn {
  margin-top: 10px;
}

.pet-name-back-btn {
  margin-top: 6px;
  border: none;
  background: transparent;
  font-size: 11px;
  color: var(--text-sub);
  cursor: pointer;
}

.pet-reset-btn {
  margin-left: auto;
  border: none;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 10px;
  color: var(--text-sub);
  cursor: pointer;
}

.pet-reset-btn:hover {
  background: rgba(255, 255, 255, 1);
}

/* 像素风心宠精灵：使用重复渐变营造小像素块感 */
.pet-sprite-svg {
  width: 52px;
  height: 52px;
  image-rendering: pixelated;
}

.pet-sprite-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  image-rendering: pixelated;
  -ms-interpolation-mode: nearest-neighbor;
  background: transparent;
  mix-blend-mode: normal;
}

/* 屏幕里的宠物立绘：去掉外层渐变背景，只保留像素精灵本身 */
.pet-screen .pet-avatar-emoji {
  background: transparent;
  box-shadow: none;
  width: auto;
  height: auto;
  border-radius: 0;
  padding: 0;
}

.pet-screen .pet-sprite-svg {
  width: 64px;
  height: 64px;
}

.pet-screen .pet-sprite-img {
  width: 120px;
  height: auto;
  max-height: 120px;
  object-fit: contain;
  background: transparent !important;
  mix-blend-mode: normal;
}

/* ==================== 微博应用样式 ==================== */
.weibo-screen {
  display: flex;
  flex-direction: column;
  /* 让内容高度稍微比容器高一点，这样上面顶到标题栏、下面也能顶到手机底边 */
  min-height: calc(100% + 90px);
  padding-top: 0;
  /* 顶部与左右贴边显示（冲破 phone-fullscreen 的内边距） */
  margin-top: -90px;
  margin-left: -16px;
  margin-right: -16px;
  /* 只让标题栏及以上区域是纯白，其余保持原背景 */
  background: linear-gradient(to bottom, #ffffff 0, #ffffff 112px, transparent 112px);
  overflow-x: visible !important;
}

/* 顶部导航栏 */
.weibo-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 48px 16px 8px;
  background: transparent;
  flex-shrink: 0;
}

.weibo-back-btn {
  border: none;
  background: transparent;
  font-size: 12px;
  color: var(--accent-pink);
  cursor: pointer;
  padding: 4px 6px;
}

.weibo-back-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

.weibo-header-title {
  /* 标题严格居中：不受左右按钮宽度影响 */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  width: min(260px, 70vw);
  pointer-events: none;
  font-size: 17px;
  font-weight: 600;
  color: var(--text-main);
}

.weibo-header-actions {
  display: flex;
  gap: 8px;
}

.weibo-icon-btn {
  border: none;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 8px;
  transition: background 0.2s;
}

.weibo-icon-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

/* 主内容区 */
.weibo-main {
  flex: 1;
  overflow-y: auto;
  overflow-x: visible !important;
  /* 底部不要和导航栏之间留空隙 */
  padding: 4px 0 0;
  -webkit-overflow-scrolling: touch;
}

/* 首页 - 热搜入口 */
.weibo-hot-entry {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: #ffffff;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-hot-entry-title {
  font-size: 14px;
  font-weight: 600;
  color: #ff6b6b;
  white-space: nowrap;
}

.weibo-hot-entry-list {
  display: flex;
  gap: 8px;
  flex: 1;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.weibo-hot-entry-item {
  font-size: 13px;
  color: var(--text-main);
  padding: 4px 8px;
  background: rgba(255, 107, 107, 0.1);
  border-radius: 12px;
  white-space: nowrap;
}

.weibo-hot-entry-more {
  border: none;
  background: transparent;
  font-size: 12px;
  color: var(--text-sub);
  cursor: pointer;
  white-space: nowrap;
  padding: 4px 8px;
}

.weibo-hot-entry-more:hover {
  color: var(--text-main);
}

/* 微博列表 */
.weibo-posts {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.weibo-post {
  background: #ffffff;
  padding: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-post-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
}

.weibo-post-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  flex-shrink: 0;
}

.weibo-post-user-info {
  flex: 1;
  min-width: 0;
}

.weibo-post-user-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-main);
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 4px;
}

.weibo-verified-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #ff6b6b;
  color: #ffffff;
  font-size: 10px;
  font-weight: bold;
}

.weibo-post-meta {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-post-more-btn {
  border: none;
  background: transparent;
  font-size: 18px;
  color: var(--text-sub);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  flex-shrink: 0;
}

.weibo-post-more-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

.weibo-post-content {
  margin-bottom: 12px;
  line-height: 1.6;
  font-size: 15px;
  color: var(--text-main);
}

.weibo-post-content p {
  margin: 0;
  word-break: break-word;
}

.weibo-repost {
  margin-top: 12px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 8px;
  border-left: 3px solid rgba(255, 107, 107, 0.3);
}

.weibo-repost-header {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.weibo-repost-user {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main);
}

.weibo-repost-content {
  font-size: 14px;
  color: var(--text-main);
  line-height: 1.5;
}

.weibo-post-images {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 12px;
  border-radius: 8px;
  overflow: hidden;
}

.weibo-post-images img {
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 4px;
}

/* 微博操作按钮 */
.weibo-post-actions {
  display: flex;
  align-items: center;
  gap: 24px;
  padding-top: 12px;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  border: none;
  background: transparent;
  font-size: 14px;
  color: var(--text-sub);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 8px;
  transition: all 0.2s;
}

.weibo-action-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

.weibo-action-btn-liked {
  color: #ff6b6b;
}

.weibo-action-icon {
  font-size: 16px;
}

.weibo-action-count {
  font-size: 13px;
}

/* 热搜页面 */
.weibo-hot-search {
  background: #ffffff;
}

.weibo-hot-search-header {
  padding: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-hot-search-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main);
  margin: 0 0 8px 0;
}

.weibo-hot-search-update {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-hot-search-list {
  display: flex;
  flex-direction: column;
}

.weibo-hot-search-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  cursor: pointer;
  transition: background 0.2s;
}

.weibo-hot-search-item:hover {
  background: rgba(0, 0, 0, 0.02);
}

.weibo-hot-search-rank {
  font-size: 16px;
  font-weight: 600;
  color: #ff6b6b;
  min-width: 24px;
  text-align: center;
}

.weibo-hot-search-content {
  flex: 1;
  min-width: 0;
}

.weibo-hot-search-keyword {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-main);
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.weibo-hot-search-tag {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(255, 107, 107, 0.1);
}

.weibo-hot-search-count {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-hot-search-arrow {
  font-size: 16px;
  color: var(--text-sub);
  flex-shrink: 0;
}

/* 发现页面 */
.weibo-discover {
  background: #ffffff;
  padding: 16px;
}

.weibo-discover-section {
  margin-bottom: 24px;
}

.weibo-discover-section h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main);
  margin: 0 0 12px 0;
}

.weibo-discover-topics {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.weibo-discover-topic {
  padding: 8px 12px;
  background: rgba(255, 107, 107, 0.1);
  border-radius: 16px;
  font-size: 13px;
  color: #ff6b6b;
  cursor: pointer;
  transition: all 0.2s;
}

.weibo-discover-topic:hover {
  background: rgba(255, 107, 107, 0.2);
}

.weibo-discover-recommendations {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.weibo-discover-user {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 12px;
}

.weibo-discover-user-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.weibo-discover-user-info {
  flex: 1;
  min-width: 0;
}

.weibo-discover-user-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: 2px;
}

.weibo-discover-user-desc {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-discover-follow-btn {
  border: none;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  color: var(--text-main);
  font-size: 13px;
  font-weight: 500;
  padding: 6px 16px;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.weibo-discover-follow-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
}

/* 个人主页 */
.weibo-profile {
  background: #ffffff;
}

.weibo-profile-header {
  position: relative;
  padding-bottom: 60px;
}

.weibo-profile-bg {
  width: 100%;
  aspect-ratio: 4 / 3;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  border-radius: 0 0 20px 20px;
  position: relative;
  overflow: hidden;
}

.weibo-profile-info {
  position: absolute;
  bottom: -40px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 0 16px;
}

.weibo-profile-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  border: 4px solid #ffffff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.weibo-profile-name {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main);
  display: flex;
  align-items: center;
  gap: 6px;
}

.weibo-profile-nickname {
  font-size: 14px;
  color: var(--text-sub);
}

.weibo-profile-bio {
  font-size: 13px;
  color: var(--text-sub);
  text-align: center;
  max-width: 280px;
  margin-top: 4px;
}

.weibo-profile-stats {
  display: flex;
  justify-content: space-around;
  padding: 60px 16px 20px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-profile-stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  cursor: pointer;
}

.weibo-profile-stat-number {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-main);
}

.weibo-profile-stat-label {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-profile-menu {
  display: flex;
  flex-direction: column;
  padding: 16px;
  gap: 0;
}

.weibo-profile-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border: none;
  background: transparent;
  text-align: left;
  cursor: pointer;
  border-radius: 12px;
  transition: background 0.2s;
}

.weibo-profile-menu-item:hover {
  background: rgba(0, 0, 0, 0.02);
}

.weibo-profile-menu-icon {
  font-size: 20px;
  width: 24px;
  text-align: center;
}

.weibo-profile-menu-text {
  flex: 1;
  font-size: 15px;
  color: var(--text-main);
}

.weibo-profile-menu-arrow {
  font-size: 16px;
  color: var(--text-sub);
}

/* 底部导航栏 */
.weibo-footer {
  display: flex;
  align-items: center;
  justify-content: space-around;
  padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
  background: #ffffff;
  border-top: 1px solid rgba(0, 0, 0, 0.08);
  flex-shrink: 0;
}

.weibo-footer-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 8px 16px;
  border-radius: 12px;
  transition: all 0.2s;
  flex: 1;
}

.weibo-footer-tab:hover {
  background: rgba(0, 0, 0, 0.02);
}

.weibo-footer-tab-active {
  color: #ff6b6b;
}

.weibo-footer-tab-icon {
  font-size: 20px;
}

.weibo-footer-tab-label {
  font-size: 11px;
  color: inherit;
}

/* 微博详情页 */
.weibo-detail {
  display: flex;
  flex-direction: column;
  background: #ffffff;
}

.weibo-detail-post {
  background: #ffffff;
  padding: 16px;
  border-bottom: 8px solid rgba(0, 0, 0, 0.02);
}

/* 评论区 */
.weibo-comments {
  background: #ffffff;
  flex: 1;
}

.weibo-comments-header {
  padding: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  background: #ffffff;
  position: sticky;
  top: 0;
  z-index: 10;
}

.weibo-comments-header h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main);
  margin: 0;
}

.weibo-comments-list {
  display: flex;
  flex-direction: column;
}

.weibo-comments-empty {
  padding: 40px 16px;
  text-align: center;
  color: var(--text-sub);
  font-size: 14px;
}

.weibo-comment-item {
  display: flex;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weibo-comment-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.weibo-comment-avatar-small {
  width: 32px;
  height: 32px;
  font-size: 16px;
}

.weibo-comment-content {
  flex: 1;
  min-width: 0;
}

.weibo-comment-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.weibo-comment-user-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-main);
  display: flex;
  align-items: center;
  gap: 4px;
}

.weibo-comment-time {
  font-size: 12px;
  color: var(--text-sub);
}

.weibo-comment-text {
  font-size: 14px;
  color: var(--text-main);
  line-height: 1.6;
  margin-bottom: 8px;
  word-break: break-word;
}

.weibo-comment-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.weibo-comment-action-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  border: none;
  background: transparent;
  font-size: 12px;
  color: var(--text-sub);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 8px;
  transition: all 0.2s;
}

.weibo-comment-action-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

.weibo-comment-action-btn-liked {
  color: #ff6b6b;
}

.weibo-comment-action-icon {
  font-size: 14px;
}

.weibo-comment-action-count {
  font-size: 12px;
}

/* 回复评论 */
.weibo-comment-replies {
  margin-top: 12px;
  padding-left: 12px;
  border-left: 2px solid rgba(0, 0, 0, 0.05);
}

.weibo-comment-reply-item {
  display: flex;
  gap: 10px;
  padding: 12px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.03);
}

.weibo-comment-reply-item:last-child {
  border-bottom: none;
}

/* 角色选择页面 */
.weibo-character-select {
  background: #ffffff;
  min-height: 100%;
  padding: 24px 16px;
}

.weibo-character-select-title {
  text-align: center;
  margin-bottom: 32px;
}

.weibo-character-select-title h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-main);
  margin: 0 0 8px 0;
}

.weibo-character-select-title p {
  font-size: 14px;
  color: var(--text-sub);
  margin: 0;
}

.weibo-character-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.weibo-character-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--accent-pink-soft) 20%, #ffffff),
    color-mix(in srgb, var(--accent-lilac) 15%, #ffffff)
  );
  border: 1px solid rgba(255, 195, 224, 0.3);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
  width: 100%;
}

.weibo-character-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(255, 107, 107, 0.15);
  border-color: rgba(255, 107, 107, 0.5);
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--accent-pink-soft) 30%, #ffffff),
    color-mix(in srgb, var(--accent-lilac) 25%, #ffffff)
  );
}

.weibo-character-item:active {
  transform: translateY(0);
}

.weibo-character-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-pink-soft), var(--accent-lilac));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  flex-shrink: 0;
  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.2);
}

.weibo-character-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.weibo-character-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-main);
}

.weibo-character-tagline {
  font-size: 13px;
  color: var(--text-sub);
  line-height: 1.4;
}

.weibo-character-arrow {
  font-size: 18px;
  color: var(--text-sub);
  flex-shrink: 0;
}

/* 微博话题标签样式 */
.weibo-topic-tag {
  color: #1890ff;
  cursor: pointer;
  font-weight: 500;
}

.weibo-topic-tag:hover {
  text-decoration: underline;
}

/* 关注列表和粉丝列表样式 */
.weibo-follow-list {
  background: #ffffff;
  min-height: 100%;
  overflow: visible !important;
  width: 100% !important;
}

.weibo-follow-list-content {
  padding: 0;
  overflow: visible !important;
  width: 100% !important;
}

.weibo-follow-item {
  display: flex !important;
  align-items: center !important;
  padding: 12px 16px !important;
  border-bottom: 1px solid var(--border-color);
  gap: 12px !important;
  width: 100% !important;
  box-sizing: border-box !important;
  position: relative !important;
  justify-content: space-between !important;
  overflow: visible !important;
}

.weibo-follow-item-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
  background: var(--bg-secondary);
}

.weibo-follow-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.weibo-follow-item-name {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-main);
  display: flex;
  align-items: center;
  gap: 4px;
}

.weibo-follow-item-btn {
  padding: 6px 16px !important;
  border-radius: 20px !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  border: 1px solid var(--primary-color) !important;
  background: #ffffff !important;
  color: var(--primary-color) !important;
  cursor: pointer !important;
  flex-shrink: 0 !important;
  transition: all 0.2s !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  min-width: 80px !important;
  width: 80px !important;
  height: 32px !important;
  white-space: nowrap !important;
  position: relative !important;
  z-index: 100 !important;
  box-sizing: border-box !important;
  margin-left: 12px !important;
  overflow: visible !important;
  line-height: 20px !important;
  text-align: center !important;
}

.weibo-follow-item-btn:hover {
  background: rgba(24, 144, 255, 0.1);
}

.weibo-follow-item-btn-followed {
  background: #1890ff !important;
  color: #ffffff !important;
  border-color: #1890ff !important;
}

.weibo-follow-item-btn-followed:hover {
  background: #40a9ff !important;
  border-color: #40a9ff !important;
}

.weibo-follow-item-btn-mutual {
  background: #f0f0f0;
  color: var(--text-main);
  border-color: #d9d9d9;
}

.weibo-follow-item-btn-mutual:hover {
  background: #e6e6e6;
  border-color: #bfbfbf;
}


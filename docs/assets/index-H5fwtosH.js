(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function pm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lf={exports:{}},xl={},af={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=Symbol.for("react.element"),hm=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),vm=Symbol.for("react.context"),wm=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),jm=Symbol.for("react.memo"),Nm=Symbol.for("react.lazy"),Wu=Symbol.iterator;function Sm(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uf=Object.assign,df={};function Us(e,t,n){this.props=e,this.context=t,this.refs=df,this.updater=n||cf}Us.prototype.isReactComponent={};Us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ff(){}ff.prototype=Us.prototype;function Cc(e,t,n){this.props=e,this.context=t,this.refs=df,this.updater=n||cf}var bc=Cc.prototype=new ff;bc.constructor=Cc;uf(bc,Us.prototype);bc.isPureReactComponent=!0;var Ou=Array.isArray,pf=Object.prototype.hasOwnProperty,Ic={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function mf(e,t,n){var s,o={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)pf.call(t,s)&&!hf.hasOwnProperty(s)&&(o[s]=t[s]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),p=0;p<c;p++)u[p]=arguments[p+2];o.children=u}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)o[s]===void 0&&(o[s]=c[s]);return{$$typeof:Ko,type:e,key:i,ref:l,props:o,_owner:Ic.current}}function Cm(e,t){return{$$typeof:Ko,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ec(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ko}function bm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uu=/\/+/g;function ql(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bm(""+e.key):t.toString(36)}function Ri(e,t,n,s,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ko:case hm:l=!0}}if(l)return l=e,o=o(l),e=s===""?"."+ql(l,0):s,Ou(o)?(n="",e!=null&&(n=e.replace(Uu,"$&/")+"/"),Ri(o,t,n,"",function(p){return p})):o!=null&&(Ec(o)&&(o=Cm(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(Uu,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=s===""?".":s+":",Ou(e))for(var c=0;c<e.length;c++){i=e[c];var u=s+ql(i,c);l+=Ri(i,t,n,u,o)}else if(u=Sm(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=s+ql(i,c++),l+=Ri(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function hi(e,t,n){if(e==null)return e;var s=[],o=0;return Ri(e,s,"","",function(i){return t.call(n,i,o++)}),s}function Im(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},Mi={transition:null},Em={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Mi,ReactCurrentOwner:Ic};function gf(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:hi,forEach:function(e,t,n){hi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hi(e,function(){t++}),t},toArray:function(e){return hi(e,function(t){return t})||[]},only:function(e){if(!Ec(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Us;je.Fragment=mm;je.Profiler=ym;je.PureComponent=Cc;je.StrictMode=gm;je.Suspense=km;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Em;je.act=gf;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=uf({},e.props),o=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Ic.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)pf.call(t,u)&&!hf.hasOwnProperty(u)&&(s[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){c=Array(u);for(var p=0;p<u;p++)c[p]=arguments[p+2];s.children=c}return{$$typeof:Ko,type:e.type,key:o,ref:i,props:s,_owner:l}};je.createContext=function(e){return e={$$typeof:vm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xm,_context:e},e.Consumer=e};je.createElement=mf;je.createFactory=function(e){var t=mf.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:wm,render:e}};je.isValidElement=Ec;je.lazy=function(e){return{$$typeof:Nm,_payload:{_status:-1,_result:e},_init:Im}};je.memo=function(e,t){return{$$typeof:jm,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=Mi.transition;Mi.transition={};try{e()}finally{Mi.transition=t}};je.unstable_act=gf;je.useCallback=function(e,t){return $t.current.useCallback(e,t)};je.useContext=function(e){return $t.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};je.useEffect=function(e,t){return $t.current.useEffect(e,t)};je.useId=function(){return $t.current.useId()};je.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return $t.current.useMemo(e,t)};je.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};je.useRef=function(e){return $t.current.useRef(e)};je.useState=function(e){return $t.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return $t.current.useTransition()};je.version="18.3.1";af.exports=je;var Lc=af.exports;const j=pm(Lc);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=Lc,$m=Symbol.for("react.element"),Rm=Symbol.for("react.fragment"),Mm=Object.prototype.hasOwnProperty,Pm=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Am={key:!0,ref:!0,__self:!0,__source:!0};function yf(e,t,n){var s,o={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Mm.call(t,s)&&!Am.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:$m,type:e,key:i,ref:l,props:o,_owner:Pm.current}}xl.Fragment=Rm;xl.jsx=yf;xl.jsxs=yf;lf.exports=xl;var r=lf.exports,La={},xf={exports:{}},Zt={},vf={exports:{}},wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,ae){var oe=F.length;F.push(ae);e:for(;0<oe;){var ce=oe-1>>>1,$e=F[ce];if(0<o($e,ae))F[ce]=ae,F[oe]=$e,oe=ce;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ae=F[0],oe=F.pop();if(oe!==ae){F[0]=oe;e:for(var ce=0,$e=F.length,me=$e>>>1;ce<me;){var Pe=2*(ce+1)-1,ft=F[Pe],Ae=Pe+1,Pt=F[Ae];if(0>o(ft,oe))Ae<$e&&0>o(Pt,ft)?(F[ce]=Pt,F[Ae]=oe,ce=Ae):(F[ce]=ft,F[Pe]=oe,ce=Pe);else if(Ae<$e&&0>o(Pt,oe))F[ce]=Pt,F[Ae]=oe,ce=Ae;else break e}}return ae}function o(F,ae){var oe=F.sortIndex-ae.sortIndex;return oe!==0?oe:F.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],p=[],S=1,E=null,N=3,M=!1,T=!1,R=!1,ee=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var ae=n(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=F)s(p),ae.sortIndex=ae.expirationTime,t(u,ae);else break;ae=n(p)}}function P(F){if(R=!1,g(F),!T)if(n(u)!==null)T=!0,Bt(O);else{var ae=n(p);ae!==null&&jt(P,ae.startTime-F)}}function O(F,ae){T=!1,R&&(R=!1,w(K),K=-1),M=!0;var oe=N;try{for(g(ae),E=n(u);E!==null&&(!(E.expirationTime>ae)||F&&!Qe());){var ce=E.callback;if(typeof ce=="function"){E.callback=null,N=E.priorityLevel;var $e=ce(E.expirationTime<=ae);ae=e.unstable_now(),typeof $e=="function"?E.callback=$e:E===n(u)&&s(u),g(ae)}else s(u);E=n(u)}if(E!==null)var me=!0;else{var Pe=n(p);Pe!==null&&jt(P,Pe.startTime-ae),me=!1}return me}finally{E=null,N=oe,M=!1}}var H=!1,V=null,K=-1,Le=5,fe=-1;function Qe(){return!(e.unstable_now()-fe<Le)}function Mt(){if(V!==null){var F=e.unstable_now();fe=F;var ae=!0;try{ae=V(!0,F)}finally{ae?it():(H=!1,V=null)}}else H=!1}var it;if(typeof f=="function")it=function(){f(Mt)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,qe=X.port2;X.port1.onmessage=Mt,it=function(){qe.postMessage(null)}}else it=function(){ee(Mt,0)};function Bt(F){V=F,H||(H=!0,it())}function jt(F,ae){K=ee(function(){F(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){T||M||(T=!0,Bt(O))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(F){switch(N){case 1:case 2:case 3:var ae=3;break;default:ae=N}var oe=N;N=ae;try{return F()}finally{N=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,ae){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var oe=N;N=F;try{return ae()}finally{N=oe}},e.unstable_scheduleCallback=function(F,ae,oe){var ce=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ce+oe:ce):oe=ce,F){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=oe+$e,F={id:S++,callback:ae,priorityLevel:F,startTime:oe,expirationTime:$e,sortIndex:-1},oe>ce?(F.sortIndex=oe,t(p,F),n(u)===null&&F===n(p)&&(R?(w(K),K=-1):R=!0,jt(P,oe-ce))):(F.sortIndex=$e,t(u,F),T||M||(T=!0,Bt(O))),F},e.unstable_shouldYield=Qe,e.unstable_wrapCallback=function(F){var ae=N;return function(){var oe=N;N=ae;try{return F.apply(this,arguments)}finally{N=oe}}}})(wf);vf.exports=wf;var Tm=vf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=Lc,Xt=Tm;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kf=new Set,Lo={};function Yr(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(Lo[e]=t,e=0;e<t.length;e++)kf.add(t[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,_m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fu={},Bu={};function Wm(e){return $a.call(Bu,e)?!0:$a.call(Fu,e)?!1:_m.test(e)?Bu[e]=!0:(Fu[e]=!0,!1)}function Om(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Um(e,t,n,s){if(t===null||typeof t>"u"||Om(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rt(e,t,n,s,o,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var $c=/[\-:]([a-z])/g;function Rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($c,Rc);yt[t]=new Rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($c,Rc);yt[t]=new Rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($c,Rc);yt[t]=new Rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mc(e,t,n,s){var o=yt.hasOwnProperty(t)?yt[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Um(t,n,o,s)&&(n=null),s||o===null?Wm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,s=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Hn=zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),hs=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),Pc=Symbol.for("react.strict_mode"),Ra=Symbol.for("react.profiler"),jf=Symbol.for("react.provider"),Nf=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),Ma=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Tc=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Sf=Symbol.for("react.offscreen"),Du=Symbol.iterator;function io(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,ea;function mo(e){if(ea===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ea=t&&t[1]||""}return`
`+ea+e}var ta=!1;function na(e,t){if(!e||ta)return"";ta=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),i=s.stack.split(`
`),l=o.length-1,c=i.length-1;1<=l&&0<=c&&o[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(o[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||o[l]!==i[c]){var u=`
`+o[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{ta=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mo(e):""}function Fm(e){switch(e.tag){case 5:return mo(e.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return e=na(e.type,!1),e;case 11:return e=na(e.type.render,!1),e;case 1:return e=na(e.type,!0),e;default:return""}}function Aa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ms:return"Fragment";case hs:return"Portal";case Ra:return"Profiler";case Pc:return"StrictMode";case Ma:return"Suspense";case Pa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nf:return(e.displayName||"Context")+".Consumer";case jf:return(e._context.displayName||"Context")+".Provider";case Ac:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tc:return t=e.displayName||null,t!==null?t:Aa(e.type)||"Memo";case qn:t=e._payload,e=e._init;try{return Aa(e(t))}catch{}}return null}function Bm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Aa(t);case 8:return t===Pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dm(e){var t=Cf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gi(e){e._valueTracker||(e._valueTracker=Dm(e))}function bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Cf(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ta(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hu(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=hr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function If(e,t){t=t.checked,t!=null&&Mc(e,"checked",t,!1)}function za(e,t){If(e,t);var n=hr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_a(e,t.type,n):t.hasOwnProperty("defaultValue")&&_a(e,t.type,hr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _a(e,t,n){(t!=="number"||Ki(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var go=Array.isArray;function bs(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+hr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ku(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(go(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hr(n)}}function Ef(e,t){var n=hr(t.value),s=hr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yi,$f=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yi=yi||document.createElement("div"),yi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $o(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hm=["Webkit","ms","Moz","O"];Object.keys(wo).forEach(function(e){Hm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wo[t]=wo[e]})});function Rf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wo.hasOwnProperty(e)&&wo[e]?(""+t).trim():t+"px"}function Mf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=Rf(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,o):e[n]=o}}var Vm=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(e,t){if(t){if(Vm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Fa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Da=null,Is=null,Es=null;function Ju(e){if(e=Qo(e)){if(typeof Da!="function")throw Error(_(280));var t=e.stateNode;t&&(t=Nl(t),Da(e.stateNode,e.type,t))}}function Pf(e){Is?Es?Es.push(e):Es=[e]:Is=e}function Af(){if(Is){var e=Is,t=Es;if(Es=Is=null,Ju(e),t)for(e=0;e<t.length;e++)Ju(t[e])}}function Tf(e,t){return e(t)}function zf(){}var ra=!1;function _f(e,t,n){if(ra)return e(t,n);ra=!0;try{return Tf(e,t,n)}finally{ra=!1,(Is!==null||Es!==null)&&(zf(),Af())}}function Ro(e,t){var n=e.stateNode;if(n===null)return null;var s=Nl(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var Ha=!1;if(Un)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Ha=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Ha=!1}function Km(e,t,n,s,o,i,l,c,u){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(S){this.onError(S)}}var ko=!1,Yi=null,Ji=!1,Va=null,Ym={onError:function(e){ko=!0,Yi=e}};function Jm(e,t,n,s,o,i,l,c,u){ko=!1,Yi=null,Km.apply(Ym,arguments)}function Qm(e,t,n,s,o,i,l,c,u){if(Jm.apply(this,arguments),ko){if(ko){var p=Yi;ko=!1,Yi=null}else throw Error(_(198));Ji||(Ji=!0,Va=p)}}function Jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qu(e){if(Jr(e)!==e)throw Error(_(188))}function Gm(e){var t=e.alternate;if(!t){if(t=Jr(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Qu(o),e;if(i===s)return Qu(o),t;i=i.sibling}throw Error(_(188))}if(n.return!==s.return)n=o,s=i;else{for(var l=!1,c=o.child;c;){if(c===n){l=!0,n=o,s=i;break}if(c===s){l=!0,s=o,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,s=o;break}if(c===s){l=!0,s=i,n=o;break}c=c.sibling}if(!l)throw Error(_(189))}}if(n.alternate!==s)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function Of(e){return e=Gm(e),e!==null?Uf(e):null}function Uf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Uf(e);if(t!==null)return t;e=e.sibling}return null}var Ff=Xt.unstable_scheduleCallback,Gu=Xt.unstable_cancelCallback,Xm=Xt.unstable_shouldYield,Zm=Xt.unstable_requestPaint,Ze=Xt.unstable_now,qm=Xt.unstable_getCurrentPriorityLevel,_c=Xt.unstable_ImmediatePriority,Bf=Xt.unstable_UserBlockingPriority,Qi=Xt.unstable_NormalPriority,eg=Xt.unstable_LowPriority,Df=Xt.unstable_IdlePriority,vl=null,In=null;function tg(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:sg,ng=Math.log,rg=Math.LN2;function sg(e){return e>>>=0,e===0?32:31-(ng(e)/rg|0)|0}var xi=64,vi=4194304;function yo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gi(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,o=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~o;c!==0?s=yo(c):(i&=l,i!==0&&(s=yo(i)))}else l=n&~o,l!==0?s=yo(l):i!==0&&(s=yo(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-vn(t),o=1<<n,s|=e[n],t&=~o;return s}function og(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ig(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-vn(i),c=1<<l,u=o[l];u===-1?(!(c&n)||c&s)&&(o[l]=og(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Ka(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hf(){var e=xi;return xi<<=1,!(xi&4194240)&&(xi=64),e}function sa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=n}function lg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-vn(n),i=1<<o;t[o]=0,s[o]=-1,e[o]=-1,n&=~i}}function Wc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-vn(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}var Me=0;function Vf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kf,Oc,Yf,Jf,Qf,Ya=!1,wi=[],ir=null,lr=null,ar=null,Mo=new Map,Po=new Map,nr=[],ag="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xu(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function ao(e,t,n,s,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Qo(t),t!==null&&Oc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function cg(e,t,n,s,o){switch(t){case"focusin":return ir=ao(ir,e,t,n,s,o),!0;case"dragenter":return lr=ao(lr,e,t,n,s,o),!0;case"mouseover":return ar=ao(ar,e,t,n,s,o),!0;case"pointerover":var i=o.pointerId;return Mo.set(i,ao(Mo.get(i)||null,e,t,n,s,o)),!0;case"gotpointercapture":return i=o.pointerId,Po.set(i,ao(Po.get(i)||null,e,t,n,s,o)),!0}return!1}function Gf(e){var t=_r(e.target);if(t!==null){var n=Jr(t);if(n!==null){if(t=n.tag,t===13){if(t=Wf(n),t!==null){e.blockedOn=t,Qf(e.priority,function(){Yf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ja(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ba=s,n.target.dispatchEvent(s),Ba=null}else return t=Qo(n),t!==null&&Oc(t),e.blockedOn=n,!1;t.shift()}return!0}function Zu(e,t,n){Pi(e)&&n.delete(t)}function ug(){Ya=!1,ir!==null&&Pi(ir)&&(ir=null),lr!==null&&Pi(lr)&&(lr=null),ar!==null&&Pi(ar)&&(ar=null),Mo.forEach(Zu),Po.forEach(Zu)}function co(e,t){e.blockedOn===t&&(e.blockedOn=null,Ya||(Ya=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,ug)))}function Ao(e){function t(o){return co(o,e)}if(0<wi.length){co(wi[0],e);for(var n=1;n<wi.length;n++){var s=wi[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ir!==null&&co(ir,e),lr!==null&&co(lr,e),ar!==null&&co(ar,e),Mo.forEach(t),Po.forEach(t),n=0;n<nr.length;n++)s=nr[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)Gf(n),n.blockedOn===null&&nr.shift()}var Ls=Hn.ReactCurrentBatchConfig,Xi=!0;function dg(e,t,n,s){var o=Me,i=Ls.transition;Ls.transition=null;try{Me=1,Uc(e,t,n,s)}finally{Me=o,Ls.transition=i}}function fg(e,t,n,s){var o=Me,i=Ls.transition;Ls.transition=null;try{Me=4,Uc(e,t,n,s)}finally{Me=o,Ls.transition=i}}function Uc(e,t,n,s){if(Xi){var o=Ja(e,t,n,s);if(o===null)ha(e,t,s,Zi,n),Xu(e,s);else if(cg(o,e,t,n,s))s.stopPropagation();else if(Xu(e,s),t&4&&-1<ag.indexOf(e)){for(;o!==null;){var i=Qo(o);if(i!==null&&Kf(i),i=Ja(e,t,n,s),i===null&&ha(e,t,s,Zi,n),i===o)break;o=i}o!==null&&s.stopPropagation()}else ha(e,t,s,null,n)}}var Zi=null;function Ja(e,t,n,s){if(Zi=null,e=zc(s),e=_r(e),e!==null)if(t=Jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zi=e,null}function Xf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qm()){case _c:return 1;case Bf:return 4;case Qi:case eg:return 16;case Df:return 536870912;default:return 16}default:return 16}}var sr=null,Fc=null,Ai=null;function Zf(){if(Ai)return Ai;var e,t=Fc,n=t.length,s,o="value"in sr?sr.value:sr.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===o[i-s];s++);return Ai=o.slice(e,1<s?1-s:void 0)}function Ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ki(){return!0}function qu(){return!1}function qt(e){function t(n,s,o,i,l){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ki:qu,this.isPropagationStopped=qu,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),t}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=qt(Fs),Jo=Ve({},Fs,{view:0,detail:0}),pg=qt(Jo),oa,ia,uo,wl=Ve({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uo&&(uo&&e.type==="mousemove"?(oa=e.screenX-uo.screenX,ia=e.screenY-uo.screenY):ia=oa=0,uo=e),oa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),ed=qt(wl),hg=Ve({},wl,{dataTransfer:0}),mg=qt(hg),gg=Ve({},Jo,{relatedTarget:0}),la=qt(gg),yg=Ve({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),xg=qt(yg),vg=Ve({},Fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wg=qt(vg),kg=Ve({},Fs,{data:0}),td=qt(kg),jg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sg[e])?!!t[e]:!1}function Dc(){return Cg}var bg=Ve({},Jo,{key:function(e){if(e.key){var t=jg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ng[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dc,charCode:function(e){return e.type==="keypress"?Ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ig=qt(bg),Eg=Ve({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=qt(Eg),Lg=Ve({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dc}),$g=qt(Lg),Rg=Ve({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mg=qt(Rg),Pg=Ve({},wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ag=qt(Pg),Tg=[9,13,27,32],Hc=Un&&"CompositionEvent"in window,jo=null;Un&&"documentMode"in document&&(jo=document.documentMode);var zg=Un&&"TextEvent"in window&&!jo,qf=Un&&(!Hc||jo&&8<jo&&11>=jo),rd=" ",sd=!1;function ep(e,t){switch(e){case"keyup":return Tg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function _g(e,t){switch(e){case"compositionend":return tp(t);case"keypress":return t.which!==32?null:(sd=!0,rd);case"textInput":return e=t.data,e===rd&&sd?null:e;default:return null}}function Wg(e,t){if(gs)return e==="compositionend"||!Hc&&ep(e,t)?(e=Zf(),Ai=Fc=sr=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qf&&t.locale!=="ko"?null:t.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Og[e.type]:t==="textarea"}function np(e,t,n,s){Pf(s),t=qi(t,"onChange"),0<t.length&&(n=new Bc("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var No=null,To=null;function Ug(e){pp(e,0)}function kl(e){var t=vs(e);if(bf(t))return e}function Fg(e,t){if(e==="change")return t}var rp=!1;if(Un){var aa;if(Un){var ca="oninput"in document;if(!ca){var id=document.createElement("div");id.setAttribute("oninput","return;"),ca=typeof id.oninput=="function"}aa=ca}else aa=!1;rp=aa&&(!document.documentMode||9<document.documentMode)}function ld(){No&&(No.detachEvent("onpropertychange",sp),To=No=null)}function sp(e){if(e.propertyName==="value"&&kl(To)){var t=[];np(t,To,e,zc(e)),_f(Ug,t)}}function Bg(e,t,n){e==="focusin"?(ld(),No=t,To=n,No.attachEvent("onpropertychange",sp)):e==="focusout"&&ld()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(To)}function Hg(e,t){if(e==="click")return kl(t)}function Vg(e,t){if(e==="input"||e==="change")return kl(t)}function Kg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kn=typeof Object.is=="function"?Object.is:Kg;function zo(e,t){if(kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!$a.call(t,o)||!kn(e[o],t[o]))return!1}return!0}function ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cd(e,t){var n=ad(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ad(n)}}function op(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?op(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ip(){for(var e=window,t=Ki();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ki(e.document)}return t}function Vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Yg(e){var t=ip(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&op(n.ownerDocument.documentElement,n)){if(s!==null&&Vc(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(s.start,o);s=s.end===void 0?i:Math.min(s.end,o),!e.extend&&i>s&&(o=s,s=i,i=o),o=cd(n,i);var l=cd(n,s);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jg=Un&&"documentMode"in document&&11>=document.documentMode,ys=null,Qa=null,So=null,Ga=!1;function ud(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ga||ys==null||ys!==Ki(s)||(s=ys,"selectionStart"in s&&Vc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),So&&zo(So,s)||(So=s,s=qi(Qa,"onSelect"),0<s.length&&(t=new Bc("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ys)))}function ji(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xs={animationend:ji("Animation","AnimationEnd"),animationiteration:ji("Animation","AnimationIteration"),animationstart:ji("Animation","AnimationStart"),transitionend:ji("Transition","TransitionEnd")},ua={},lp={};Un&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function jl(e){if(ua[e])return ua[e];if(!xs[e])return e;var t=xs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lp)return ua[e]=t[n];return e}var ap=jl("animationend"),cp=jl("animationiteration"),up=jl("animationstart"),dp=jl("transitionend"),fp=new Map,dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){fp.set(e,t),Yr(t,[e])}for(var da=0;da<dd.length;da++){var fa=dd[da],Qg=fa.toLowerCase(),Gg=fa[0].toUpperCase()+fa.slice(1);gr(Qg,"on"+Gg)}gr(ap,"onAnimationEnd");gr(cp,"onAnimationIteration");gr(up,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(dp,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xg=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function fd(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Qm(s,t,void 0,e),e.currentTarget=null}function pp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var c=s[l],u=c.instance,p=c.currentTarget;if(c=c.listener,u!==i&&o.isPropagationStopped())break e;fd(o,c,p),i=u}else for(l=0;l<s.length;l++){if(c=s[l],u=c.instance,p=c.currentTarget,c=c.listener,u!==i&&o.isPropagationStopped())break e;fd(o,c,p),i=u}}}if(Ji)throw e=Va,Ji=!1,Va=null,e}function Oe(e,t){var n=t[tc];n===void 0&&(n=t[tc]=new Set);var s=e+"__bubble";n.has(s)||(hp(t,e,2,!1),n.add(s))}function pa(e,t,n){var s=0;t&&(s|=4),hp(n,e,s,t)}var Ni="_reactListening"+Math.random().toString(36).slice(2);function _o(e){if(!e[Ni]){e[Ni]=!0,kf.forEach(function(n){n!=="selectionchange"&&(Xg.has(n)||pa(n,!1,e),pa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ni]||(t[Ni]=!0,pa("selectionchange",!1,t))}}function hp(e,t,n,s){switch(Xf(t)){case 1:var o=dg;break;case 4:o=fg;break;default:o=Uc}n=o.bind(null,t,n,e),o=void 0,!Ha||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ha(e,t,n,s,o){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(l===4)for(l=s.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;l=l.return}for(;c!==null;){if(l=_r(c),l===null)return;if(u=l.tag,u===5||u===6){s=i=l;continue e}c=c.parentNode}}s=s.return}_f(function(){var p=i,S=zc(n),E=[];e:{var N=fp.get(e);if(N!==void 0){var M=Bc,T=e;switch(e){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":M=Ig;break;case"focusin":T="focus",M=la;break;case"focusout":T="blur",M=la;break;case"beforeblur":case"afterblur":M=la;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=mg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=$g;break;case ap:case cp:case up:M=xg;break;case dp:M=Mg;break;case"scroll":M=pg;break;case"wheel":M=Ag;break;case"copy":case"cut":case"paste":M=wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=nd}var R=(t&4)!==0,ee=!R&&e==="scroll",w=R?N!==null?N+"Capture":null:N;R=[];for(var f=p,g;f!==null;){g=f;var P=g.stateNode;if(g.tag===5&&P!==null&&(g=P,w!==null&&(P=Ro(f,w),P!=null&&R.push(Wo(f,P,g)))),ee)break;f=f.return}0<R.length&&(N=new M(N,T,null,n,S),E.push({event:N,listeners:R}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",N&&n!==Ba&&(T=n.relatedTarget||n.fromElement)&&(_r(T)||T[Fn]))break e;if((M||N)&&(N=S.window===S?S:(N=S.ownerDocument)?N.defaultView||N.parentWindow:window,M?(T=n.relatedTarget||n.toElement,M=p,T=T?_r(T):null,T!==null&&(ee=Jr(T),T!==ee||T.tag!==5&&T.tag!==6)&&(T=null)):(M=null,T=p),M!==T)){if(R=ed,P="onMouseLeave",w="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(R=nd,P="onPointerLeave",w="onPointerEnter",f="pointer"),ee=M==null?N:vs(M),g=T==null?N:vs(T),N=new R(P,f+"leave",M,n,S),N.target=ee,N.relatedTarget=g,P=null,_r(S)===p&&(R=new R(w,f+"enter",T,n,S),R.target=g,R.relatedTarget=ee,P=R),ee=P,M&&T)t:{for(R=M,w=T,f=0,g=R;g;g=us(g))f++;for(g=0,P=w;P;P=us(P))g++;for(;0<f-g;)R=us(R),f--;for(;0<g-f;)w=us(w),g--;for(;f--;){if(R===w||w!==null&&R===w.alternate)break t;R=us(R),w=us(w)}R=null}else R=null;M!==null&&pd(E,N,M,R,!1),T!==null&&ee!==null&&pd(E,ee,T,R,!0)}}e:{if(N=p?vs(p):window,M=N.nodeName&&N.nodeName.toLowerCase(),M==="select"||M==="input"&&N.type==="file")var O=Fg;else if(od(N))if(rp)O=Vg;else{O=Dg;var H=Bg}else(M=N.nodeName)&&M.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(O=Hg);if(O&&(O=O(e,p))){np(E,O,n,S);break e}H&&H(e,N,p),e==="focusout"&&(H=N._wrapperState)&&H.controlled&&N.type==="number"&&_a(N,"number",N.value)}switch(H=p?vs(p):window,e){case"focusin":(od(H)||H.contentEditable==="true")&&(ys=H,Qa=p,So=null);break;case"focusout":So=Qa=ys=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,ud(E,n,S);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":ud(E,n,S)}var V;if(Hc)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else gs?ep(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(qf&&n.locale!=="ko"&&(gs||K!=="onCompositionStart"?K==="onCompositionEnd"&&gs&&(V=Zf()):(sr=S,Fc="value"in sr?sr.value:sr.textContent,gs=!0)),H=qi(p,K),0<H.length&&(K=new td(K,e,null,n,S),E.push({event:K,listeners:H}),V?K.data=V:(V=tp(n),V!==null&&(K.data=V)))),(V=zg?_g(e,n):Wg(e,n))&&(p=qi(p,"onBeforeInput"),0<p.length&&(S=new td("onBeforeInput","beforeinput",null,n,S),E.push({event:S,listeners:p}),S.data=V))}pp(E,t)})}function Wo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",s=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Ro(e,n),i!=null&&s.unshift(Wo(e,i,o)),i=Ro(e,t),i!=null&&s.push(Wo(e,i,o))),e=e.return}return s}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pd(e,t,n,s,o){for(var i=t._reactName,l=[];n!==null&&n!==s;){var c=n,u=c.alternate,p=c.stateNode;if(u!==null&&u===s)break;c.tag===5&&p!==null&&(c=p,o?(u=Ro(n,i),u!=null&&l.unshift(Wo(n,u,c))):o||(u=Ro(n,i),u!=null&&l.push(Wo(n,u,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Zg=/\r\n?/g,qg=/\u0000|\uFFFD/g;function hd(e){return(typeof e=="string"?e:""+e).replace(Zg,`
`).replace(qg,"")}function Si(e,t,n){if(t=hd(t),hd(e)!==t&&n)throw Error(_(425))}function el(){}var Xa=null,Za=null;function qa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,ey=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,ty=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(e){return md.resolve(null).then(e).catch(ny)}:ec;function ny(e){setTimeout(function(){throw e})}function ma(e,t){var n=t,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){e.removeChild(o),Ao(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);Ao(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),bn="__reactFiber$"+Bs,Oo="__reactProps$"+Bs,Fn="__reactContainer$"+Bs,tc="__reactEvents$"+Bs,ry="__reactListeners$"+Bs,sy="__reactHandles$"+Bs;function _r(e){var t=e[bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fn]||n[bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gd(e);e!==null;){if(n=e[bn])return n;e=gd(e)}return t}e=n,n=e.parentNode}return null}function Qo(e){return e=e[bn]||e[Fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function Nl(e){return e[Oo]||null}var nc=[],ws=-1;function yr(e){return{current:e}}function Ue(e){0>ws||(e.current=nc[ws],nc[ws]=null,ws--)}function We(e,t){ws++,nc[ws]=e.current,e.current=t}var mr={},kt=yr(mr),Ot=yr(!1),Br=mr;function Ps(e,t){var n=e.type.contextTypes;if(!n)return mr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ut(e){return e=e.childContextTypes,e!=null}function tl(){Ue(Ot),Ue(kt)}function yd(e,t,n){if(kt.current!==mr)throw Error(_(168));We(kt,t),We(Ot,n)}function mp(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(_(108,Bm(e)||"Unknown",o));return Ve({},n,s)}function nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Br=kt.current,We(kt,e),We(Ot,Ot.current),!0}function xd(e,t,n){var s=e.stateNode;if(!s)throw Error(_(169));n?(e=mp(e,t,Br),s.__reactInternalMemoizedMergedChildContext=e,Ue(Ot),Ue(kt),We(kt,e)):Ue(Ot),We(Ot,n)}var zn=null,Sl=!1,ga=!1;function gp(e){zn===null?zn=[e]:zn.push(e)}function oy(e){Sl=!0,gp(e)}function xr(){if(!ga&&zn!==null){ga=!0;var e=0,t=Me;try{var n=zn;for(Me=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}zn=null,Sl=!1}catch(o){throw zn!==null&&(zn=zn.slice(e+1)),Ff(_c,xr),o}finally{Me=t,ga=!1}}return null}var ks=[],js=0,rl=null,sl=0,sn=[],on=0,Dr=null,_n=1,Wn="";function Ar(e,t){ks[js++]=sl,ks[js++]=rl,rl=e,sl=t}function yp(e,t,n){sn[on++]=_n,sn[on++]=Wn,sn[on++]=Dr,Dr=e;var s=_n;e=Wn;var o=32-vn(s)-1;s&=~(1<<o),n+=1;var i=32-vn(t)+o;if(30<i){var l=o-o%5;i=(s&(1<<l)-1).toString(32),s>>=l,o-=l,_n=1<<32-vn(t)+o|n<<o|s,Wn=i+e}else _n=1<<i|n<<o|s,Wn=e}function Kc(e){e.return!==null&&(Ar(e,1),yp(e,1,0))}function Yc(e){for(;e===rl;)rl=ks[--js],ks[js]=null,sl=ks[--js],ks[js]=null;for(;e===Dr;)Dr=sn[--on],sn[on]=null,Wn=sn[--on],sn[on]=null,_n=sn[--on],sn[on]=null}var Gt=null,Qt=null,Be=!1,xn=null;function xp(e,t){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function vd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gt=e,Qt=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Dr!==null?{id:_n,overflow:Wn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gt=e,Qt=null,!0):!1;default:return!1}}function rc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sc(e){if(Be){var t=Qt;if(t){var n=t;if(!vd(e,t)){if(rc(e))throw Error(_(418));t=cr(n.nextSibling);var s=Gt;t&&vd(e,t)?xp(s,n):(e.flags=e.flags&-4097|2,Be=!1,Gt=e)}}else{if(rc(e))throw Error(_(418));e.flags=e.flags&-4097|2,Be=!1,Gt=e}}}function wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gt=e}function Ci(e){if(e!==Gt)return!1;if(!Be)return wd(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qa(e.type,e.memoizedProps)),t&&(t=Qt)){if(rc(e))throw vp(),Error(_(418));for(;t;)xp(e,t),t=cr(t.nextSibling)}if(wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qt=cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Gt?cr(e.stateNode.nextSibling):null;return!0}function vp(){for(var e=Qt;e;)e=cr(e.nextSibling)}function As(){Qt=Gt=null,Be=!1}function Jc(e){xn===null?xn=[e]:xn.push(e)}var iy=Hn.ReactCurrentBatchConfig;function fo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var s=n.stateNode}if(!s)throw Error(_(147,e));var o=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=o.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kd(e){var t=e._init;return t(e._payload)}function wp(e){function t(w,f){if(e){var g=w.deletions;g===null?(w.deletions=[f],w.flags|=16):g.push(f)}}function n(w,f){if(!e)return null;for(;f!==null;)t(w,f),f=f.sibling;return null}function s(w,f){for(w=new Map;f!==null;)f.key!==null?w.set(f.key,f):w.set(f.index,f),f=f.sibling;return w}function o(w,f){return w=pr(w,f),w.index=0,w.sibling=null,w}function i(w,f,g){return w.index=g,e?(g=w.alternate,g!==null?(g=g.index,g<f?(w.flags|=2,f):g):(w.flags|=2,f)):(w.flags|=1048576,f)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,f,g,P){return f===null||f.tag!==6?(f=Na(g,w.mode,P),f.return=w,f):(f=o(f,g),f.return=w,f)}function u(w,f,g,P){var O=g.type;return O===ms?S(w,f,g.props.children,P,g.key):f!==null&&(f.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===qn&&kd(O)===f.type)?(P=o(f,g.props),P.ref=fo(w,f,g),P.return=w,P):(P=Bi(g.type,g.key,g.props,null,w.mode,P),P.ref=fo(w,f,g),P.return=w,P)}function p(w,f,g,P){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Sa(g,w.mode,P),f.return=w,f):(f=o(f,g.children||[]),f.return=w,f)}function S(w,f,g,P,O){return f===null||f.tag!==7?(f=Fr(g,w.mode,P,O),f.return=w,f):(f=o(f,g),f.return=w,f)}function E(w,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Na(""+f,w.mode,g),f.return=w,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case mi:return g=Bi(f.type,f.key,f.props,null,w.mode,g),g.ref=fo(w,null,f),g.return=w,g;case hs:return f=Sa(f,w.mode,g),f.return=w,f;case qn:var P=f._init;return E(w,P(f._payload),g)}if(go(f)||io(f))return f=Fr(f,w.mode,g,null),f.return=w,f;bi(w,f)}return null}function N(w,f,g,P){var O=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return O!==null?null:c(w,f,""+g,P);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case mi:return g.key===O?u(w,f,g,P):null;case hs:return g.key===O?p(w,f,g,P):null;case qn:return O=g._init,N(w,f,O(g._payload),P)}if(go(g)||io(g))return O!==null?null:S(w,f,g,P,null);bi(w,g)}return null}function M(w,f,g,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(g)||null,c(f,w,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case mi:return w=w.get(P.key===null?g:P.key)||null,u(f,w,P,O);case hs:return w=w.get(P.key===null?g:P.key)||null,p(f,w,P,O);case qn:var H=P._init;return M(w,f,g,H(P._payload),O)}if(go(P)||io(P))return w=w.get(g)||null,S(f,w,P,O,null);bi(f,P)}return null}function T(w,f,g,P){for(var O=null,H=null,V=f,K=f=0,Le=null;V!==null&&K<g.length;K++){V.index>K?(Le=V,V=null):Le=V.sibling;var fe=N(w,V,g[K],P);if(fe===null){V===null&&(V=Le);break}e&&V&&fe.alternate===null&&t(w,V),f=i(fe,f,K),H===null?O=fe:H.sibling=fe,H=fe,V=Le}if(K===g.length)return n(w,V),Be&&Ar(w,K),O;if(V===null){for(;K<g.length;K++)V=E(w,g[K],P),V!==null&&(f=i(V,f,K),H===null?O=V:H.sibling=V,H=V);return Be&&Ar(w,K),O}for(V=s(w,V);K<g.length;K++)Le=M(V,w,K,g[K],P),Le!==null&&(e&&Le.alternate!==null&&V.delete(Le.key===null?K:Le.key),f=i(Le,f,K),H===null?O=Le:H.sibling=Le,H=Le);return e&&V.forEach(function(Qe){return t(w,Qe)}),Be&&Ar(w,K),O}function R(w,f,g,P){var O=io(g);if(typeof O!="function")throw Error(_(150));if(g=O.call(g),g==null)throw Error(_(151));for(var H=O=null,V=f,K=f=0,Le=null,fe=g.next();V!==null&&!fe.done;K++,fe=g.next()){V.index>K?(Le=V,V=null):Le=V.sibling;var Qe=N(w,V,fe.value,P);if(Qe===null){V===null&&(V=Le);break}e&&V&&Qe.alternate===null&&t(w,V),f=i(Qe,f,K),H===null?O=Qe:H.sibling=Qe,H=Qe,V=Le}if(fe.done)return n(w,V),Be&&Ar(w,K),O;if(V===null){for(;!fe.done;K++,fe=g.next())fe=E(w,fe.value,P),fe!==null&&(f=i(fe,f,K),H===null?O=fe:H.sibling=fe,H=fe);return Be&&Ar(w,K),O}for(V=s(w,V);!fe.done;K++,fe=g.next())fe=M(V,w,K,fe.value,P),fe!==null&&(e&&fe.alternate!==null&&V.delete(fe.key===null?K:fe.key),f=i(fe,f,K),H===null?O=fe:H.sibling=fe,H=fe);return e&&V.forEach(function(Mt){return t(w,Mt)}),Be&&Ar(w,K),O}function ee(w,f,g,P){if(typeof g=="object"&&g!==null&&g.type===ms&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case mi:e:{for(var O=g.key,H=f;H!==null;){if(H.key===O){if(O=g.type,O===ms){if(H.tag===7){n(w,H.sibling),f=o(H,g.props.children),f.return=w,w=f;break e}}else if(H.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===qn&&kd(O)===H.type){n(w,H.sibling),f=o(H,g.props),f.ref=fo(w,H,g),f.return=w,w=f;break e}n(w,H);break}else t(w,H);H=H.sibling}g.type===ms?(f=Fr(g.props.children,w.mode,P,g.key),f.return=w,w=f):(P=Bi(g.type,g.key,g.props,null,w.mode,P),P.ref=fo(w,f,g),P.return=w,w=P)}return l(w);case hs:e:{for(H=g.key;f!==null;){if(f.key===H)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(w,f.sibling),f=o(f,g.children||[]),f.return=w,w=f;break e}else{n(w,f);break}else t(w,f);f=f.sibling}f=Sa(g,w.mode,P),f.return=w,w=f}return l(w);case qn:return H=g._init,ee(w,f,H(g._payload),P)}if(go(g))return T(w,f,g,P);if(io(g))return R(w,f,g,P);bi(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(w,f.sibling),f=o(f,g),f.return=w,w=f):(n(w,f),f=Na(g,w.mode,P),f.return=w,w=f),l(w)):n(w,f)}return ee}var Ts=wp(!0),kp=wp(!1),ol=yr(null),il=null,Ns=null,Qc=null;function Gc(){Qc=Ns=il=null}function Xc(e){var t=ol.current;Ue(ol),e._currentValue=t}function oc(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function $s(e,t){il=e,Qc=Ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wt=!0),e.firstContext=null)}function cn(e){var t=e._currentValue;if(Qc!==e)if(e={context:e,memoizedValue:t,next:null},Ns===null){if(il===null)throw Error(_(308));Ns=e,il.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Wr=null;function Zc(e){Wr===null?Wr=[e]:Wr.push(e)}function jp(e,t,n,s){var o=t.interleaved;return o===null?(n.next=n,Zc(t)):(n.next=o.next,o.next=n),t.interleaved=n,Bn(e,s)}function Bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var er=!1;function qc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Np(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function On(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Bn(e,n)}return o=s.interleaved,o===null?(t.next=t,Zc(s)):(t.next=o.next,o.next=t),s.interleaved=t,Bn(e,n)}function zi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Wc(e,n)}}function jd(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ll(e,t,n,s){var o=e.updateQueue;er=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var u=c,p=u.next;u.next=null,l===null?i=p:l.next=p,l=u;var S=e.alternate;S!==null&&(S=S.updateQueue,c=S.lastBaseUpdate,c!==l&&(c===null?S.firstBaseUpdate=p:c.next=p,S.lastBaseUpdate=u))}if(i!==null){var E=o.baseState;l=0,S=p=u=null,c=i;do{var N=c.lane,M=c.eventTime;if((s&N)===N){S!==null&&(S=S.next={eventTime:M,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=e,R=c;switch(N=t,M=n,R.tag){case 1:if(T=R.payload,typeof T=="function"){E=T.call(M,E,N);break e}E=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=R.payload,N=typeof T=="function"?T.call(M,E,N):T,N==null)break e;E=Ve({},E,N);break e;case 2:er=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,N=o.effects,N===null?o.effects=[c]:N.push(c))}else M={eventTime:M,lane:N,tag:c.tag,payload:c.payload,callback:c.callback,next:null},S===null?(p=S=M,u=E):S=S.next=M,l|=N;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;N=c,c=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(!0);if(S===null&&(u=E),o.baseState=u,o.firstBaseUpdate=p,o.lastBaseUpdate=S,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Vr|=l,e.lanes=l,e.memoizedState=E}}function Nd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(_(191,o));o.call(s)}}}var Go={},En=yr(Go),Uo=yr(Go),Fo=yr(Go);function Or(e){if(e===Go)throw Error(_(174));return e}function eu(e,t){switch(We(Fo,t),We(Uo,e),We(En,Go),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oa(t,e)}Ue(En),We(En,t)}function zs(){Ue(En),Ue(Uo),Ue(Fo)}function Sp(e){Or(Fo.current);var t=Or(En.current),n=Oa(t,e.type);t!==n&&(We(Uo,e),We(En,n))}function tu(e){Uo.current===e&&(Ue(En),Ue(Uo))}var De=yr(0);function al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ya=[];function nu(){for(var e=0;e<ya.length;e++)ya[e]._workInProgressVersionPrimary=null;ya.length=0}var _i=Hn.ReactCurrentDispatcher,xa=Hn.ReactCurrentBatchConfig,Hr=0,He=null,st=null,ut=null,cl=!1,Co=!1,Bo=0,ly=0;function xt(){throw Error(_(321))}function ru(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kn(e[n],t[n]))return!1;return!0}function su(e,t,n,s,o,i){if(Hr=i,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=e===null||e.memoizedState===null?dy:fy,e=n(s,o),Co){i=0;do{if(Co=!1,Bo=0,25<=i)throw Error(_(301));i+=1,ut=st=null,t.updateQueue=null,_i.current=py,e=n(s,o)}while(Co)}if(_i.current=ul,t=st!==null&&st.next!==null,Hr=0,ut=st=He=null,cl=!1,t)throw Error(_(300));return e}function ou(){var e=Bo!==0;return Bo=0,e}function Cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?He.memoizedState=ut=e:ut=ut.next=e,ut}function un(){if(st===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ut===null?He.memoizedState:ut.next;if(t!==null)ut=t,st=e;else{if(e===null)throw Error(_(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?He.memoizedState=ut=e:ut=ut.next=e}return ut}function Do(e,t){return typeof t=="function"?t(e):t}function va(e){var t=un(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var s=st,o=s.baseQueue,i=n.pending;if(i!==null){if(o!==null){var l=o.next;o.next=i.next,i.next=l}s.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,s=s.baseState;var c=l=null,u=null,p=i;do{var S=p.lane;if((Hr&S)===S)u!==null&&(u=u.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var E={lane:S,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};u===null?(c=u=E,l=s):u=u.next=E,He.lanes|=S,Vr|=S}p=p.next}while(p!==null&&p!==i);u===null?l=s:u.next=c,kn(s,t.memoizedState)||(Wt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=u,n.lastRenderedState=s}if(e=n.interleaved,e!==null){o=e;do i=o.lane,He.lanes|=i,Vr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=un(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do i=e(i,l.action),l=l.next;while(l!==o);kn(i,t.memoizedState)||(Wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Cp(){}function bp(e,t){var n=He,s=un(),o=t(),i=!kn(s.memoizedState,o);if(i&&(s.memoizedState=o,Wt=!0),s=s.queue,iu(Lp.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Ho(9,Ep.bind(null,n,s,o,t),void 0,null),dt===null)throw Error(_(349));Hr&30||Ip(n,t,o)}return o}function Ip(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ep(e,t,n,s){t.value=n,t.getSnapshot=s,$p(t)&&Rp(e)}function Lp(e,t,n){return n(function(){$p(t)&&Rp(e)})}function $p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kn(e,n)}catch{return!0}}function Rp(e){var t=Bn(e,1);t!==null&&wn(t,e,1,-1)}function Sd(e){var t=Cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:e},t.queue=e,e=e.dispatch=uy.bind(null,He,e),[t.memoizedState,e]}function Ho(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Mp(){return un().memoizedState}function Wi(e,t,n,s){var o=Cn();He.flags|=e,o.memoizedState=Ho(1|t,n,void 0,s===void 0?null:s)}function Cl(e,t,n,s){var o=un();s=s===void 0?null:s;var i=void 0;if(st!==null){var l=st.memoizedState;if(i=l.destroy,s!==null&&ru(s,l.deps)){o.memoizedState=Ho(t,n,i,s);return}}He.flags|=e,o.memoizedState=Ho(1|t,n,i,s)}function Cd(e,t){return Wi(8390656,8,e,t)}function iu(e,t){return Cl(2048,8,e,t)}function Pp(e,t){return Cl(4,2,e,t)}function Ap(e,t){return Cl(4,4,e,t)}function Tp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zp(e,t,n){return n=n!=null?n.concat([e]):null,Cl(4,4,Tp.bind(null,t,e),n)}function lu(){}function _p(e,t){var n=un();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&ru(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Wp(e,t){var n=un();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&ru(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Op(e,t,n){return Hr&21?(kn(n,t)||(n=Hf(),He.lanes|=n,Vr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=n)}function ay(e,t){var n=Me;Me=n!==0&&4>n?n:4,e(!0);var s=xa.transition;xa.transition={};try{e(!1),t()}finally{Me=n,xa.transition=s}}function Up(){return un().memoizedState}function cy(e,t,n){var s=fr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Fp(e))Bp(t,n);else if(n=jp(e,t,n,s),n!==null){var o=Lt();wn(n,e,s,o),Dp(n,t,s)}}function uy(e,t,n){var s=fr(e),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fp(e))Bp(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(o.hasEagerState=!0,o.eagerState=c,kn(c,l)){var u=t.interleaved;u===null?(o.next=o,Zc(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=jp(e,t,o,s),n!==null&&(o=Lt(),wn(n,e,s,o),Dp(n,t,s))}}function Fp(e){var t=e.alternate;return e===He||t!==null&&t===He}function Bp(e,t){Co=cl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dp(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Wc(e,n)}}var ul={readContext:cn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},dy={readContext:cn,useCallback:function(e,t){return Cn().memoizedState=[e,t===void 0?null:t],e},useContext:cn,useEffect:Cd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wi(4194308,4,Tp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wi(4,2,e,t)},useMemo:function(e,t){var n=Cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Cn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=cy.bind(null,He,e),[s.memoizedState,e]},useRef:function(e){var t=Cn();return e={current:e},t.memoizedState=e},useState:Sd,useDebugValue:lu,useDeferredValue:function(e){return Cn().memoizedState=e},useTransition:function(){var e=Sd(!1),t=e[0];return e=ay.bind(null,e[1]),Cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=He,o=Cn();if(Be){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),dt===null)throw Error(_(349));Hr&30||Ip(s,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Cd(Lp.bind(null,s,i,e),[e]),s.flags|=2048,Ho(9,Ep.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Cn(),t=dt.identifierPrefix;if(Be){var n=Wn,s=_n;n=(s&~(1<<32-vn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ly++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fy={readContext:cn,useCallback:_p,useContext:cn,useEffect:iu,useImperativeHandle:zp,useInsertionEffect:Pp,useLayoutEffect:Ap,useMemo:Wp,useReducer:va,useRef:Mp,useState:function(){return va(Do)},useDebugValue:lu,useDeferredValue:function(e){var t=un();return Op(t,st.memoizedState,e)},useTransition:function(){var e=va(Do)[0],t=un().memoizedState;return[e,t]},useMutableSource:Cp,useSyncExternalStore:bp,useId:Up,unstable_isNewReconciler:!1},py={readContext:cn,useCallback:_p,useContext:cn,useEffect:iu,useImperativeHandle:zp,useInsertionEffect:Pp,useLayoutEffect:Ap,useMemo:Wp,useReducer:wa,useRef:Mp,useState:function(){return wa(Do)},useDebugValue:lu,useDeferredValue:function(e){var t=un();return st===null?t.memoizedState=e:Op(t,st.memoizedState,e)},useTransition:function(){var e=wa(Do)[0],t=un().memoizedState;return[e,t]},useMutableSource:Cp,useSyncExternalStore:bp,useId:Up,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ic(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bl={isMounted:function(e){return(e=e._reactInternals)?Jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Lt(),o=fr(e),i=On(s,o);i.payload=t,n!=null&&(i.callback=n),t=ur(e,i,o),t!==null&&(wn(t,e,o,s),zi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Lt(),o=fr(e),i=On(s,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ur(e,i,o),t!==null&&(wn(t,e,o,s),zi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),s=fr(e),o=On(n,s);o.tag=2,t!=null&&(o.callback=t),t=ur(e,o,s),t!==null&&(wn(t,e,s,n),zi(t,e,s))}};function bd(e,t,n,s,o,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!zo(n,s)||!zo(o,i):!0}function Hp(e,t,n){var s=!1,o=mr,i=t.contextType;return typeof i=="object"&&i!==null?i=cn(i):(o=Ut(t)?Br:kt.current,s=t.contextTypes,i=(s=s!=null)?Ps(e,o):mr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Id(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function lc(e,t,n,s){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},qc(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=cn(i):(i=Ut(t)?Br:kt.current,o.context=Ps(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ic(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&bl.enqueueReplaceState(o,o.state,null),ll(e,n,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function _s(e,t){try{var n="",s=t;do n+=Fm(s),s=s.return;while(s);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function ka(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ac(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hy=typeof WeakMap=="function"?WeakMap:Map;function Vp(e,t,n){n=On(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){fl||(fl=!0,xc=s),ac(e,t)},n}function Kp(e,t,n){n=On(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){ac(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ac(e,t),typeof s!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Ed(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new hy;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),e=Ey.bind(null,e,t,n),t.then(e,e))}function Ld(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $d(e,t,n,s,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=On(-1,1),t.tag=2,ur(n,t,1))),n.lanes|=1),e)}var my=Hn.ReactCurrentOwner,Wt=!1;function Et(e,t,n,s){t.child=e===null?kp(t,null,n,s):Ts(t,e.child,n,s)}function Rd(e,t,n,s,o){n=n.render;var i=t.ref;return $s(t,o),s=su(e,t,n,s,i,o),n=ou(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Dn(e,t,o)):(Be&&n&&Kc(t),t.flags|=1,Et(e,t,s,o),t.child)}function Md(e,t,n,s,o){if(e===null){var i=n.type;return typeof i=="function"&&!mu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Yp(e,t,i,s,o)):(e=Bi(n.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:zo,n(l,s)&&e.ref===t.ref)return Dn(e,t,o)}return t.flags|=1,e=pr(i,s),e.ref=t.ref,e.return=t,t.child=e}function Yp(e,t,n,s,o){if(e!==null){var i=e.memoizedProps;if(zo(i,s)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=s=i,(e.lanes&o)!==0)e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,Dn(e,t,o)}return cc(e,t,n,s,o)}function Jp(e,t,n){var s=t.pendingProps,o=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Cs,Jt),Jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(Cs,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,We(Cs,Jt),Jt|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,We(Cs,Jt),Jt|=s;return Et(e,t,o,n),t.child}function Qp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cc(e,t,n,s,o){var i=Ut(n)?Br:kt.current;return i=Ps(t,i),$s(t,o),n=su(e,t,n,s,i,o),s=ou(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Dn(e,t,o)):(Be&&s&&Kc(t),t.flags|=1,Et(e,t,n,o),t.child)}function Pd(e,t,n,s,o){if(Ut(n)){var i=!0;nl(t)}else i=!1;if($s(t,o),t.stateNode===null)Oi(e,t),Hp(t,n,s),lc(t,n,s,o),s=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=cn(p):(p=Ut(n)?Br:kt.current,p=Ps(t,p));var S=n.getDerivedStateFromProps,E=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function";E||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||u!==p)&&Id(t,l,s,p),er=!1;var N=t.memoizedState;l.state=N,ll(t,s,l,o),u=t.memoizedState,c!==s||N!==u||Ot.current||er?(typeof S=="function"&&(ic(t,n,S,s),u=t.memoizedState),(c=er||bd(t,n,c,s,N,u,p))?(E||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),l.props=s,l.state=u,l.context=p,s=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Np(e,t),c=t.memoizedProps,p=t.type===t.elementType?c:gn(t.type,c),l.props=p,E=t.pendingProps,N=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Ut(n)?Br:kt.current,u=Ps(t,u));var M=n.getDerivedStateFromProps;(S=typeof M=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==E||N!==u)&&Id(t,l,s,u),er=!1,N=t.memoizedState,l.state=N,ll(t,s,l,o);var T=t.memoizedState;c!==E||N!==T||Ot.current||er?(typeof M=="function"&&(ic(t,n,M,s),T=t.memoizedState),(p=er||bd(t,n,p,s,N,T,u)||!1)?(S||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,T,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,T,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=T),l.props=s,l.state=T,l.context=u,s=p):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),s=!1)}return uc(e,t,n,s,i,o)}function uc(e,t,n,s,o,i){Qp(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return o&&xd(t,n,!1),Dn(e,t,i);s=t.stateNode,my.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Ts(t,e.child,null,i),t.child=Ts(t,null,c,i)):Et(e,t,c,i),t.memoizedState=s.state,o&&xd(t,n,!0),t.child}function Gp(e){var t=e.stateNode;t.pendingContext?yd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yd(e,t.context,!1),eu(e,t.containerInfo)}function Ad(e,t,n,s,o){return As(),Jc(o),t.flags|=256,Et(e,t,n,s),t.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function fc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xp(e,t,n){var s=t.pendingProps,o=De.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(o&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),We(De,o&1),e===null)return sc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ll(l,s,0,null),e=Fr(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=fc(n),t.memoizedState=dc,e):au(t,l));if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return gy(e,t,l,s,c,o,n);if(i){i=s.fallback,l=t.mode,o=e.child,c=o.sibling;var u={mode:"hidden",children:s.children};return!(l&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=u,t.deletions=null):(s=pr(o,u),s.subtreeFlags=o.subtreeFlags&14680064),c!==null?i=pr(c,i):(i=Fr(i,l,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?fc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=dc,s}return i=e.child,e=i.sibling,s=pr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function au(e,t){return t=Ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ii(e,t,n,s){return s!==null&&Jc(s),Ts(t,e.child,null,n),e=au(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gy(e,t,n,s,o,i,l){if(n)return t.flags&256?(t.flags&=-257,s=ka(Error(_(422))),Ii(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,o=t.mode,s=Ll({mode:"visible",children:s.children},o,0,null),i=Fr(i,o,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Ts(t,e.child,null,l),t.child.memoizedState=fc(l),t.memoizedState=dc,i);if(!(t.mode&1))return Ii(e,t,l,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;return s=c,i=Error(_(419)),s=ka(i,s,void 0),Ii(e,t,l,s)}if(c=(l&e.childLanes)!==0,Wt||c){if(s=dt,s!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|l)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Bn(e,o),wn(s,e,o,-1))}return hu(),s=ka(Error(_(421))),Ii(e,t,l,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Ly.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,Qt=cr(o.nextSibling),Gt=t,Be=!0,xn=null,e!==null&&(sn[on++]=_n,sn[on++]=Wn,sn[on++]=Dr,_n=e.id,Wn=e.overflow,Dr=t),t=au(t,s.children),t.flags|=4096,t)}function Td(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),oc(e.return,t,n)}function ja(e,t,n,s,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=o)}function Zp(e,t,n){var s=t.pendingProps,o=s.revealOrder,i=s.tail;if(Et(e,t,s.children,n),s=De.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Td(e,n,t);else if(e.tag===19)Td(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(We(De,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&al(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ja(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&al(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ja(t,!0,n,null,i);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=pr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yy(e,t,n){switch(t.tag){case 3:Gp(t),As();break;case 5:Sp(t);break;case 1:Ut(t.type)&&nl(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;We(ol,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(We(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?Xp(e,t,n):(We(De,De.current&1),e=Dn(e,t,n),e!==null?e.sibling:null);We(De,De.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Zp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),We(De,De.current),s)break;return null;case 22:case 23:return t.lanes=0,Jp(e,t,n)}return Dn(e,t,n)}var qp,pc,eh,th;qp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};eh=function(e,t,n,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,Or(En.current);var i=null;switch(n){case"input":o=Ta(e,o),s=Ta(e,s),i=[];break;case"select":o=Ve({},o,{value:void 0}),s=Ve({},s,{value:void 0}),i=[];break;case"textarea":o=Wa(e,o),s=Wa(e,s),i=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=el)}Ua(n,s);var l;n=null;for(p in o)if(!s.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var c=o[p];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Lo.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in s){var u=s[p];if(c=o!=null?o[p]:void 0,s.hasOwnProperty(p)&&u!==c&&(u!=null||c!=null))if(p==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(p,n)),n=u;else p==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(p,u)):p==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(p,""+u):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(p)?(u!=null&&p==="onScroll"&&Oe("scroll",e),i||c===u||(i=[])):(i=i||[]).push(p,u))}n&&(i=i||[]).push("style",n);var p=i;(t.updateQueue=p)&&(t.flags|=4)}};th=function(e,t,n,s){n!==s&&(t.flags|=4)};function po(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function xy(e,t,n){var s=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Ut(t.type)&&tl(),vt(t),null;case 3:return s=t.stateNode,zs(),Ue(Ot),Ue(kt),nu(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ci(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xn!==null&&(kc(xn),xn=null))),pc(e,t),vt(t),null;case 5:tu(t);var o=Or(Fo.current);if(n=t.type,e!==null&&t.stateNode!=null)eh(e,t,n,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(_(166));return vt(t),null}if(e=Or(En.current),Ci(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[bn]=t,s[Oo]=i,e=(t.mode&1)!==0,n){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(o=0;o<xo.length;o++)Oe(xo[o],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Hu(s,i),Oe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",s);break;case"textarea":Ku(s,i),Oe("invalid",s)}Ua(n,i),o=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?s.textContent!==c&&(i.suppressHydrationWarning!==!0&&Si(s.textContent,c,e),o=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Si(s.textContent,c,e),o=["children",""+c]):Lo.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Oe("scroll",s)}switch(n){case"input":gi(s),Vu(s,i,!0);break;case"textarea":gi(s),Yu(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=el)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[bn]=t,e[Oo]=s,qp(e,t,!1,!1),t.stateNode=e;e:{switch(l=Fa(n,s),n){case"dialog":Oe("cancel",e),Oe("close",e),o=s;break;case"iframe":case"object":case"embed":Oe("load",e),o=s;break;case"video":case"audio":for(o=0;o<xo.length;o++)Oe(xo[o],e);o=s;break;case"source":Oe("error",e),o=s;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),o=s;break;case"details":Oe("toggle",e),o=s;break;case"input":Hu(e,s),o=Ta(e,s),Oe("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=Ve({},s,{value:void 0}),Oe("invalid",e);break;case"textarea":Ku(e,s),o=Wa(e,s),Oe("invalid",e);break;default:o=s}Ua(n,o),c=o;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Mf(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$f(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(e,u):typeof u=="number"&&$o(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Oe("scroll",e):u!=null&&Mc(e,i,u,l))}switch(n){case"input":gi(e),Vu(e,s,!1);break;case"textarea":gi(e),Yu(e);break;case"option":s.value!=null&&e.setAttribute("value",""+hr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?bs(e,!!s.multiple,i,!1):s.defaultValue!=null&&bs(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=el)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)th(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(_(166));if(n=Or(Fo.current),Or(En.current),Ci(t)){if(s=t.stateNode,n=t.memoizedProps,s[bn]=t,(i=s.nodeValue!==n)&&(e=Gt,e!==null))switch(e.tag){case 3:Si(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Si(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[bn]=t,t.stateNode=s}return vt(t),null;case 13:if(Ue(De),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Qt!==null&&t.mode&1&&!(t.flags&128))vp(),As(),t.flags|=98560,i=!1;else if(i=Ci(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(_(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_(317));i[bn]=t}else As(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),i=!1}else xn!==null&&(kc(xn),xn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?ot===0&&(ot=3):hu())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return zs(),pc(e,t),e===null&&_o(t.stateNode.containerInfo),vt(t),null;case 10:return Xc(t.type._context),vt(t),null;case 17:return Ut(t.type)&&tl(),vt(t),null;case 19:if(Ue(De),i=t.memoizedState,i===null)return vt(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)po(i,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=al(e),l!==null){for(t.flags|=128,po(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ze()>Ws&&(t.flags|=128,s=!0,po(i,!1),t.lanes=4194304)}else{if(!s)if(e=al(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),po(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Be)return vt(t),null}else 2*Ze()-i.renderingStartTime>Ws&&n!==1073741824&&(t.flags|=128,s=!0,po(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,n=De.current,We(De,s?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return pu(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Jt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function vy(e,t){switch(Yc(t),t.tag){case 1:return Ut(t.type)&&tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(),Ue(Ot),Ue(kt),nu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(Ue(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));As()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(De),null;case 4:return zs(),null;case 10:return Xc(t.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var Ei=!1,wt=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Je(e,t,s)}else n.current=null}function hc(e,t,n){try{n()}catch(s){Je(e,t,s)}}var zd=!1;function ky(e,t){if(Xa=Xi,e=ip(),Vc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,p=0,S=0,E=e,N=null;t:for(;;){for(var M;E!==n||o!==0&&E.nodeType!==3||(c=l+o),E!==i||s!==0&&E.nodeType!==3||(u=l+s),E.nodeType===3&&(l+=E.nodeValue.length),(M=E.firstChild)!==null;)N=E,E=M;for(;;){if(E===e)break t;if(N===n&&++p===o&&(c=l),N===i&&++S===s&&(u=l),(M=E.nextSibling)!==null)break;E=N,N=E.parentNode}E=M}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:e,selectionRange:n},Xi=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var T=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var R=T.memoizedProps,ee=T.memoizedState,w=t.stateNode,f=w.getSnapshotBeforeUpdate(t.elementType===t.type?R:gn(t.type,R),ee);w.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(P){Je(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return T=zd,zd=!1,T}function bo(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&hc(t,n,i)}o=o.next}while(o!==s)}}function Il(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function mc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nh(e){var t=e.alternate;t!==null&&(e.alternate=null,nh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bn],delete t[Oo],delete t[tc],delete t[ry],delete t[sy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rh(e){return e.tag===5||e.tag===3||e.tag===4}function _d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=el));else if(s!==4&&(e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function yc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}var mt=null,yn=!1;function Zn(e,t,n){for(n=n.child;n!==null;)sh(e,t,n),n=n.sibling}function sh(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:wt||Ss(n,t);case 6:var s=mt,o=yn;mt=null,Zn(e,t,n),mt=s,yn=o,mt!==null&&(yn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(yn?(e=mt,n=n.stateNode,e.nodeType===8?ma(e.parentNode,n):e.nodeType===1&&ma(e,n),Ao(e)):ma(mt,n.stateNode));break;case 4:s=mt,o=yn,mt=n.stateNode.containerInfo,yn=!0,Zn(e,t,n),mt=s,yn=o;break;case 0:case 11:case 14:case 15:if(!wt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var i=o,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&hc(n,t,l),o=o.next}while(o!==s)}Zn(e,t,n);break;case 1:if(!wt&&(Ss(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){Je(n,t,c)}Zn(e,t,n);break;case 21:Zn(e,t,n);break;case 22:n.mode&1?(wt=(s=wt)||n.memoizedState!==null,Zn(e,t,n),wt=s):Zn(e,t,n);break;default:Zn(e,t,n)}}function Wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wy),t.forEach(function(s){var o=$y.bind(null,e,s);n.has(s)||(n.add(s),s.then(o,o))})}}function hn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:mt=c.stateNode,yn=!1;break e;case 3:mt=c.stateNode.containerInfo,yn=!0;break e;case 4:mt=c.stateNode.containerInfo,yn=!0;break e}c=c.return}if(mt===null)throw Error(_(160));sh(i,l,o),mt=null,yn=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(p){Je(o,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oh(t,e),t=t.sibling}function oh(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hn(t,e),Sn(e),s&4){try{bo(3,e,e.return),Il(3,e)}catch(R){Je(e,e.return,R)}try{bo(5,e,e.return)}catch(R){Je(e,e.return,R)}}break;case 1:hn(t,e),Sn(e),s&512&&n!==null&&Ss(n,n.return);break;case 5:if(hn(t,e),Sn(e),s&512&&n!==null&&Ss(n,n.return),e.flags&32){var o=e.stateNode;try{$o(o,"")}catch(R){Je(e,e.return,R)}}if(s&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&If(o,i),Fa(c,l);var p=Fa(c,i);for(l=0;l<u.length;l+=2){var S=u[l],E=u[l+1];S==="style"?Mf(o,E):S==="dangerouslySetInnerHTML"?$f(o,E):S==="children"?$o(o,E):Mc(o,S,E,p)}switch(c){case"input":za(o,i);break;case"textarea":Ef(o,i);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var M=i.value;M!=null?bs(o,!!i.multiple,M,!1):N!==!!i.multiple&&(i.defaultValue!=null?bs(o,!!i.multiple,i.defaultValue,!0):bs(o,!!i.multiple,i.multiple?[]:"",!1))}o[Oo]=i}catch(R){Je(e,e.return,R)}}break;case 6:if(hn(t,e),Sn(e),s&4){if(e.stateNode===null)throw Error(_(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(R){Je(e,e.return,R)}}break;case 3:if(hn(t,e),Sn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(t.containerInfo)}catch(R){Je(e,e.return,R)}break;case 4:hn(t,e),Sn(e);break;case 13:hn(t,e),Sn(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(du=Ze())),s&4&&Wd(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(p=wt)||S,hn(t,e),wt=p):hn(t,e),Sn(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!S&&e.mode&1)for(Q=e,S=e.child;S!==null;){for(E=Q=S;Q!==null;){switch(N=Q,M=N.child,N.tag){case 0:case 11:case 14:case 15:bo(4,N,N.return);break;case 1:Ss(N,N.return);var T=N.stateNode;if(typeof T.componentWillUnmount=="function"){s=N,n=N.return;try{t=s,T.props=t.memoizedProps,T.state=t.memoizedState,T.componentWillUnmount()}catch(R){Je(s,n,R)}}break;case 5:Ss(N,N.return);break;case 22:if(N.memoizedState!==null){Ud(E);continue}}M!==null?(M.return=N,Q=M):Ud(E)}S=S.sibling}e:for(S=null,E=e;;){if(E.tag===5){if(S===null){S=E;try{o=E.stateNode,p?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=E.stateNode,u=E.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Rf("display",l))}catch(R){Je(e,e.return,R)}}}else if(E.tag===6){if(S===null)try{E.stateNode.nodeValue=p?"":E.memoizedProps}catch(R){Je(e,e.return,R)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;S===E&&(S=null),E=E.return}S===E&&(S=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:hn(t,e),Sn(e),s&4&&Wd(e);break;case 21:break;default:hn(t,e),Sn(e)}}function Sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rh(n)){var s=n;break e}n=n.return}throw Error(_(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&($o(o,""),s.flags&=-33);var i=_d(e);yc(e,i,o);break;case 3:case 4:var l=s.stateNode.containerInfo,c=_d(e);gc(e,c,l);break;default:throw Error(_(161))}}catch(u){Je(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jy(e,t,n){Q=e,ih(e)}function ih(e,t,n){for(var s=(e.mode&1)!==0;Q!==null;){var o=Q,i=o.child;if(o.tag===22&&s){var l=o.memoizedState!==null||Ei;if(!l){var c=o.alternate,u=c!==null&&c.memoizedState!==null||wt;c=Ei;var p=wt;if(Ei=l,(wt=u)&&!p)for(Q=o;Q!==null;)l=Q,u=l.child,l.tag===22&&l.memoizedState!==null?Fd(o):u!==null?(u.return=l,Q=u):Fd(o);for(;i!==null;)Q=i,ih(i),i=i.sibling;Q=o,Ei=c,wt=p}Od(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,Q=i):Od(e)}}function Od(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||Il(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!wt)if(n===null)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Nd(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Nd(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var S=p.memoizedState;if(S!==null){var E=S.dehydrated;E!==null&&Ao(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}wt||t.flags&512&&mc(t)}catch(N){Je(t,t.return,N)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Ud(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Fd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Il(4,t)}catch(u){Je(t,n,u)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(u){Je(t,o,u)}}var i=t.return;try{mc(t)}catch(u){Je(t,i,u)}break;case 5:var l=t.return;try{mc(t)}catch(u){Je(t,l,u)}}}catch(u){Je(t,t.return,u)}if(t===e){Q=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Q=c;break}Q=t.return}}var Ny=Math.ceil,dl=Hn.ReactCurrentDispatcher,cu=Hn.ReactCurrentOwner,an=Hn.ReactCurrentBatchConfig,Ee=0,dt=null,et=null,gt=0,Jt=0,Cs=yr(0),ot=0,Vo=null,Vr=0,El=0,uu=0,Io=null,_t=null,du=0,Ws=1/0,An=null,fl=!1,xc=null,dr=null,Li=!1,or=null,pl=0,Eo=0,vc=null,Ui=-1,Fi=0;function Lt(){return Ee&6?Ze():Ui!==-1?Ui:Ui=Ze()}function fr(e){return e.mode&1?Ee&2&&gt!==0?gt&-gt:iy.transition!==null?(Fi===0&&(Fi=Hf()),Fi):(e=Me,e!==0||(e=window.event,e=e===void 0?16:Xf(e.type)),e):1}function wn(e,t,n,s){if(50<Eo)throw Eo=0,vc=null,Error(_(185));Yo(e,n,s),(!(Ee&2)||e!==dt)&&(e===dt&&(!(Ee&2)&&(El|=n),ot===4&&rr(e,gt)),Ft(e,s),n===1&&Ee===0&&!(t.mode&1)&&(Ws=Ze()+500,Sl&&xr()))}function Ft(e,t){var n=e.callbackNode;ig(e,t);var s=Gi(e,e===dt?gt:0);if(s===0)n!==null&&Gu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Gu(n),t===1)e.tag===0?oy(Bd.bind(null,e)):gp(Bd.bind(null,e)),ty(function(){!(Ee&6)&&xr()}),n=null;else{switch(Vf(s)){case 1:n=_c;break;case 4:n=Bf;break;case 16:n=Qi;break;case 536870912:n=Df;break;default:n=Qi}n=hh(n,lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lh(e,t){if(Ui=-1,Fi=0,Ee&6)throw Error(_(327));var n=e.callbackNode;if(Rs()&&e.callbackNode!==n)return null;var s=Gi(e,e===dt?gt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hl(e,s);else{t=s;var o=Ee;Ee|=2;var i=ch();(dt!==e||gt!==t)&&(An=null,Ws=Ze()+500,Ur(e,t));do try{by();break}catch(c){ah(e,c)}while(!0);Gc(),dl.current=i,Ee=o,et!==null?t=0:(dt=null,gt=0,t=ot)}if(t!==0){if(t===2&&(o=Ka(e),o!==0&&(s=o,t=wc(e,o))),t===1)throw n=Vo,Ur(e,0),rr(e,s),Ft(e,Ze()),n;if(t===6)rr(e,s);else{if(o=e.current.alternate,!(s&30)&&!Sy(o)&&(t=hl(e,s),t===2&&(i=Ka(e),i!==0&&(s=i,t=wc(e,i))),t===1))throw n=Vo,Ur(e,0),rr(e,s),Ft(e,Ze()),n;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(_(345));case 2:Tr(e,_t,An);break;case 3:if(rr(e,s),(s&130023424)===s&&(t=du+500-Ze(),10<t)){if(Gi(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Lt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ec(Tr.bind(null,e,_t,An),t);break}Tr(e,_t,An);break;case 4:if(rr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var l=31-vn(s);i=1<<l,l=t[l],l>o&&(o=l),s&=~i}if(s=o,s=Ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ny(s/1960))-s,10<s){e.timeoutHandle=ec(Tr.bind(null,e,_t,An),s);break}Tr(e,_t,An);break;case 5:Tr(e,_t,An);break;default:throw Error(_(329))}}}return Ft(e,Ze()),e.callbackNode===n?lh.bind(null,e):null}function wc(e,t){var n=Io;return e.current.memoizedState.isDehydrated&&(Ur(e,t).flags|=256),e=hl(e,t),e!==2&&(t=_t,_t=n,t!==null&&kc(t)),e}function kc(e){_t===null?_t=e:_t.push.apply(_t,e)}function Sy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],i=o.getSnapshot;o=o.value;try{if(!kn(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~uu,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vn(t),s=1<<n;e[n]=-1,t&=~s}}function Bd(e){if(Ee&6)throw Error(_(327));Rs();var t=Gi(e,0);if(!(t&1))return Ft(e,Ze()),null;var n=hl(e,t);if(e.tag!==0&&n===2){var s=Ka(e);s!==0&&(t=s,n=wc(e,s))}if(n===1)throw n=Vo,Ur(e,0),rr(e,t),Ft(e,Ze()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tr(e,_t,An),Ft(e,Ze()),null}function fu(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Ws=Ze()+500,Sl&&xr())}}function Kr(e){or!==null&&or.tag===0&&!(Ee&6)&&Rs();var t=Ee;Ee|=1;var n=an.transition,s=Me;try{if(an.transition=null,Me=1,e)return e()}finally{Me=s,an.transition=n,Ee=t,!(Ee&6)&&xr()}}function pu(){Jt=Cs.current,Ue(Cs)}function Ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ey(n)),et!==null)for(n=et.return;n!==null;){var s=n;switch(Yc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tl();break;case 3:zs(),Ue(Ot),Ue(kt),nu();break;case 5:tu(s);break;case 4:zs();break;case 13:Ue(De);break;case 19:Ue(De);break;case 10:Xc(s.type._context);break;case 22:case 23:pu()}n=n.return}if(dt=e,et=e=pr(e.current,null),gt=Jt=t,ot=0,Vo=null,uu=El=Vr=0,_t=Io=null,Wr!==null){for(t=0;t<Wr.length;t++)if(n=Wr[t],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,i=n.pending;if(i!==null){var l=i.next;i.next=o,s.next=l}n.pending=s}Wr=null}return e}function ah(e,t){do{var n=et;try{if(Gc(),_i.current=ul,cl){for(var s=He.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}cl=!1}if(Hr=0,ut=st=He=null,Co=!1,Bo=0,cu.current=null,n===null||n.return===null){ot=1,Vo=t,et=null;break}e:{var i=e,l=n.return,c=n,u=t;if(t=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var p=u,S=c,E=S.tag;if(!(S.mode&1)&&(E===0||E===11||E===15)){var N=S.alternate;N?(S.updateQueue=N.updateQueue,S.memoizedState=N.memoizedState,S.lanes=N.lanes):(S.updateQueue=null,S.memoizedState=null)}var M=Ld(l);if(M!==null){M.flags&=-257,$d(M,l,c,i,t),M.mode&1&&Ed(i,p,t),t=M,u=p;var T=t.updateQueue;if(T===null){var R=new Set;R.add(u),t.updateQueue=R}else T.add(u);break e}else{if(!(t&1)){Ed(i,p,t),hu();break e}u=Error(_(426))}}else if(Be&&c.mode&1){var ee=Ld(l);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),$d(ee,l,c,i,t),Jc(_s(u,c));break e}}i=u=_s(u,c),ot!==4&&(ot=2),Io===null?Io=[i]:Io.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=Vp(i,u,t);jd(i,w);break e;case 1:c=u;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(dr===null||!dr.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=Kp(i,c,t);jd(i,P);break e}}i=i.return}while(i!==null)}dh(n)}catch(O){t=O,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function ch(){var e=dl.current;return dl.current=ul,e===null?ul:e}function hu(){(ot===0||ot===3||ot===2)&&(ot=4),dt===null||!(Vr&268435455)&&!(El&268435455)||rr(dt,gt)}function hl(e,t){var n=Ee;Ee|=2;var s=ch();(dt!==e||gt!==t)&&(An=null,Ur(e,t));do try{Cy();break}catch(o){ah(e,o)}while(!0);if(Gc(),Ee=n,dl.current=s,et!==null)throw Error(_(261));return dt=null,gt=0,ot}function Cy(){for(;et!==null;)uh(et)}function by(){for(;et!==null&&!Xm();)uh(et)}function uh(e){var t=ph(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?dh(e):et=t,cu.current=null}function dh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vy(n,t),n!==null){n.flags&=32767,et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,et=null;return}}else if(n=xy(n,t,Jt),n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);ot===0&&(ot=5)}function Tr(e,t,n){var s=Me,o=an.transition;try{an.transition=null,Me=1,Iy(e,t,n,s)}finally{an.transition=o,Me=s}return null}function Iy(e,t,n,s){do Rs();while(or!==null);if(Ee&6)throw Error(_(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(lg(e,i),e===dt&&(et=dt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Li||(Li=!0,hh(Qi,function(){return Rs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var l=Me;Me=1;var c=Ee;Ee|=4,cu.current=null,ky(e,n),oh(n,e),Yg(Za),Xi=!!Xa,Za=Xa=null,e.current=n,jy(n),Zm(),Ee=c,Me=l,an.transition=i}else e.current=n;if(Li&&(Li=!1,or=e,pl=o),i=e.pendingLanes,i===0&&(dr=null),tg(n.stateNode),Ft(e,Ze()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(fl)throw fl=!1,e=xc,xc=null,e;return pl&1&&e.tag!==0&&Rs(),i=e.pendingLanes,i&1?e===vc?Eo++:(Eo=0,vc=e):Eo=0,xr(),null}function Rs(){if(or!==null){var e=Vf(pl),t=an.transition,n=Me;try{if(an.transition=null,Me=16>e?16:e,or===null)var s=!1;else{if(e=or,or=null,pl=0,Ee&6)throw Error(_(331));var o=Ee;for(Ee|=4,Q=e.current;Q!==null;){var i=Q,l=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var p=c[u];for(Q=p;Q!==null;){var S=Q;switch(S.tag){case 0:case 11:case 15:bo(8,S,i)}var E=S.child;if(E!==null)E.return=S,Q=E;else for(;Q!==null;){S=Q;var N=S.sibling,M=S.return;if(nh(S),S===p){Q=null;break}if(N!==null){N.return=M,Q=N;break}Q=M}}}var T=i.alternate;if(T!==null){var R=T.child;if(R!==null){T.child=null;do{var ee=R.sibling;R.sibling=null,R=ee}while(R!==null)}}Q=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Q=l;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Q=w;break e}Q=i.return}}var f=e.current;for(Q=f;Q!==null;){l=Q;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,Q=g;else e:for(l=f;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Il(9,c)}}catch(O){Je(c,c.return,O)}if(c===l){Q=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,Q=P;break e}Q=c.return}}if(Ee=o,xr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(vl,e)}catch{}s=!0}return s}finally{Me=n,an.transition=t}}return!1}function Dd(e,t,n){t=_s(n,t),t=Vp(e,t,1),e=ur(e,t,1),t=Lt(),e!==null&&(Yo(e,1,t),Ft(e,t))}function Je(e,t,n){if(e.tag===3)Dd(e,e,n);else for(;t!==null;){if(t.tag===3){Dd(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(dr===null||!dr.has(s))){e=_s(n,e),e=Kp(t,e,1),t=ur(t,e,1),e=Lt(),t!==null&&(Yo(t,1,e),Ft(t,e));break}}t=t.return}}function Ey(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Lt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(gt&n)===n&&(ot===4||ot===3&&(gt&130023424)===gt&&500>Ze()-du?Ur(e,0):uu|=n),Ft(e,t)}function fh(e,t){t===0&&(e.mode&1?(t=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):t=1);var n=Lt();e=Bn(e,t),e!==null&&(Yo(e,t,n),Ft(e,n))}function Ly(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),fh(e,n)}function $y(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(_(314))}s!==null&&s.delete(t),fh(e,n)}var ph;ph=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ot.current)Wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wt=!1,yy(e,t,n);Wt=!!(e.flags&131072)}else Wt=!1,Be&&t.flags&1048576&&yp(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Oi(e,t),e=t.pendingProps;var o=Ps(t,kt.current);$s(t,n),o=su(null,t,s,e,o,n);var i=ou();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ut(s)?(i=!0,nl(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,qc(t),o.updater=bl,t.stateNode=o,o._reactInternals=t,lc(t,s,e,n),t=uc(null,t,s,!0,i,n)):(t.tag=0,Be&&i&&Kc(t),Et(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Oi(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=My(s),e=gn(s,e),o){case 0:t=cc(null,t,s,e,n);break e;case 1:t=Pd(null,t,s,e,n);break e;case 11:t=Rd(null,t,s,e,n);break e;case 14:t=Md(null,t,s,gn(s.type,e),n);break e}throw Error(_(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:gn(s,o),cc(e,t,s,o,n);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:gn(s,o),Pd(e,t,s,o,n);case 3:e:{if(Gp(t),e===null)throw Error(_(387));s=t.pendingProps,i=t.memoizedState,o=i.element,Np(e,t),ll(t,s,null,n);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=_s(Error(_(423)),t),t=Ad(e,t,s,n,o);break e}else if(s!==o){o=_s(Error(_(424)),t),t=Ad(e,t,s,n,o);break e}else for(Qt=cr(t.stateNode.containerInfo.firstChild),Gt=t,Be=!0,xn=null,n=kp(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(As(),s===o){t=Dn(e,t,n);break e}Et(e,t,s,n)}t=t.child}return t;case 5:return Sp(t),e===null&&sc(t),s=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,l=o.children,qa(s,o)?l=null:i!==null&&qa(s,i)&&(t.flags|=32),Qp(e,t),Et(e,t,l,n),t.child;case 6:return e===null&&sc(t),null;case 13:return Xp(e,t,n);case 4:return eu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ts(t,null,s,n):Et(e,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:gn(s,o),Rd(e,t,s,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,We(ol,s._currentValue),s._currentValue=l,i!==null)if(kn(i.value,l)){if(i.children===o.children&&!Ot.current){t=Dn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var u=c.firstContext;u!==null;){if(u.context===s){if(i.tag===1){u=On(-1,n&-n),u.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var S=p.pending;S===null?u.next=u:(u.next=S.next,S.next=u),p.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),oc(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(_(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),oc(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,$s(t,n),o=cn(o),s=s(o),t.flags|=1,Et(e,t,s,n),t.child;case 14:return s=t.type,o=gn(s,t.pendingProps),o=gn(s.type,o),Md(e,t,s,o,n);case 15:return Yp(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:gn(s,o),Oi(e,t),t.tag=1,Ut(s)?(e=!0,nl(t)):e=!1,$s(t,n),Hp(t,s,o),lc(t,s,o,n),uc(null,t,s,!0,e,n);case 19:return Zp(e,t,n);case 22:return Jp(e,t,n)}throw Error(_(156,t.tag))};function hh(e,t){return Ff(e,t)}function Ry(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,t,n,s){return new Ry(e,t,n,s)}function mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function My(e){if(typeof e=="function")return mu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ac)return 11;if(e===Tc)return 14}return 2}function pr(e,t){var n=e.alternate;return n===null?(n=ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bi(e,t,n,s,o,i){var l=2;if(s=e,typeof e=="function")mu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ms:return Fr(n.children,o,i,t);case Pc:l=8,o|=8;break;case Ra:return e=ln(12,n,t,o|2),e.elementType=Ra,e.lanes=i,e;case Ma:return e=ln(13,n,t,o),e.elementType=Ma,e.lanes=i,e;case Pa:return e=ln(19,n,t,o),e.elementType=Pa,e.lanes=i,e;case Sf:return Ll(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jf:l=10;break e;case Nf:l=9;break e;case Ac:l=11;break e;case Tc:l=14;break e;case qn:l=16,s=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=ln(l,n,t,o),t.elementType=e,t.type=s,t.lanes=i,t}function Fr(e,t,n,s){return e=ln(7,e,s,t),e.lanes=n,e}function Ll(e,t,n,s){return e=ln(22,e,s,t),e.elementType=Sf,e.lanes=n,e.stateNode={isHidden:!1},e}function Na(e,t,n){return e=ln(6,e,null,t),e.lanes=n,e}function Sa(e,t,n){return t=ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Py(e,t,n,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function gu(e,t,n,s,o,i,l,c,u){return e=new Py(e,t,n,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ln(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(i),e}function Ay(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function mh(e){if(!e)return mr;e=e._reactInternals;e:{if(Jr(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(Ut(n))return mp(e,n,t)}return t}function gh(e,t,n,s,o,i,l,c,u){return e=gu(n,s,!0,e,o,i,l,c,u),e.context=mh(null),n=e.current,s=Lt(),o=fr(n),i=On(s,o),i.callback=t??null,ur(n,i,o),e.current.lanes=o,Yo(e,o,s),Ft(e,s),e}function $l(e,t,n,s){var o=t.current,i=Lt(),l=fr(o);return n=mh(n),t.context===null?t.context=n:t.pendingContext=n,t=On(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ur(o,t,l),e!==null&&(wn(e,o,l,i),zi(e,o,l)),l}function ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yu(e,t){Hd(e,t),(e=e.alternate)&&Hd(e,t)}function Ty(){return null}var yh=typeof reportError=="function"?reportError:function(e){console.error(e)};function xu(e){this._internalRoot=e}Rl.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));$l(e,t,null,null)};Rl.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kr(function(){$l(null,e,null,null)}),t[Fn]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nr.length&&t!==0&&t<nr[n].priority;n++);nr.splice(n,0,e),n===0&&Gf(e)}};function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function zy(e,t,n,s,o){if(o){if(typeof s=="function"){var i=s;s=function(){var p=ml(l);i.call(p)}}var l=gh(t,s,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=l,e[Fn]=l.current,_o(e.nodeType===8?e.parentNode:e),Kr(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var c=s;s=function(){var p=ml(u);c.call(p)}}var u=gu(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=u,e[Fn]=u.current,_o(e.nodeType===8?e.parentNode:e),Kr(function(){$l(t,u,n,s)}),u}function Pl(e,t,n,s,o){var i=n._reactRootContainer;if(i){var l=i;if(typeof o=="function"){var c=o;o=function(){var u=ml(l);c.call(u)}}$l(t,l,e,o)}else l=zy(n,t,e,o,s);return ml(l)}Kf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yo(t.pendingLanes);n!==0&&(Wc(t,n|1),Ft(t,Ze()),!(Ee&6)&&(Ws=Ze()+500,xr()))}break;case 13:Kr(function(){var s=Bn(e,1);if(s!==null){var o=Lt();wn(s,e,1,o)}}),yu(e,1)}};Oc=function(e){if(e.tag===13){var t=Bn(e,134217728);if(t!==null){var n=Lt();wn(t,e,134217728,n)}yu(e,134217728)}};Yf=function(e){if(e.tag===13){var t=fr(e),n=Bn(e,t);if(n!==null){var s=Lt();wn(n,e,t,s)}yu(e,t)}};Jf=function(){return Me};Qf=function(e,t){var n=Me;try{return Me=e,t()}finally{Me=n}};Da=function(e,t,n){switch(t){case"input":if(za(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=Nl(s);if(!o)throw Error(_(90));bf(s),za(s,o)}}}break;case"textarea":Ef(e,n);break;case"select":t=n.value,t!=null&&bs(e,!!n.multiple,t,!1)}};Tf=fu;zf=Kr;var _y={usingClientEntryPoint:!1,Events:[Qo,vs,Nl,Pf,Af,fu]},ho={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wy={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Of(e),e===null?null:e.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||Ty,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{vl=$i.inject(Wy),In=$i}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_y;Zt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vu(t))throw Error(_(200));return Ay(e,t,null,n)};Zt.createRoot=function(e,t){if(!vu(e))throw Error(_(299));var n=!1,s="",o=yh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=gu(e,1,!1,null,null,n,!1,s,o),e[Fn]=t.current,_o(e.nodeType===8?e.parentNode:e),new xu(t)};Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=Of(t),e=e===null?null:e.stateNode,e};Zt.flushSync=function(e){return Kr(e)};Zt.hydrate=function(e,t,n){if(!Ml(t))throw Error(_(200));return Pl(null,e,t,!0,n)};Zt.hydrateRoot=function(e,t,n){if(!vu(e))throw Error(_(405));var s=n!=null&&n.hydratedSources||null,o=!1,i="",l=yh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=gh(t,null,e,1,n??null,o,!1,i,l),e[Fn]=t.current,_o(e),s)for(e=0;e<s.length;e++)n=s[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Rl(t)};Zt.render=function(e,t,n){if(!Ml(t))throw Error(_(200));return Pl(null,e,t,!1,n)};Zt.unmountComponentAtNode=function(e){if(!Ml(e))throw Error(_(40));return e._reactRootContainer?(Kr(function(){Pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Fn]=null})}),!0):!1};Zt.unstable_batchedUpdates=fu;Zt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Ml(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Pl(e,t,n,!1,s)};Zt.version="18.3.1-next-f1338f8080-20240426";function xh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xh)}catch(e){console.error(e)}}xh(),xf.exports=Zt;var Oy=xf.exports,Kd=Oy;La.createRoot=Kd.createRoot,La.hydrateRoot=Kd.hydrateRoot;const vh="mini-ai-phone.api-config",Uy=()=>{try{const e=window.localStorage.getItem(vh);if(!e)return{baseUrl:"",apiKey:"",model:"",models:[]};const t=JSON.parse(e);return{baseUrl:t.baseUrl??"",apiKey:t.apiKey??"",model:t.model??"",models:t.models??[]}}catch{return{baseUrl:"",apiKey:"",model:"",models:[]}}},Fy=e=>{try{window.localStorage.setItem(vh,JSON.stringify(e))}catch{}},By=()=>{const e=j.useMemo(Uy,[]),[t,n]=j.useState(e.baseUrl),[s,o]=j.useState(e.apiKey),[i,l]=j.useState(e.model),[c,u]=j.useState(e.models),[p,S]=j.useState(!1),[E,N]=j.useState(null),M=()=>{const R={baseUrl:t.trim(),apiKey:s.trim(),model:i.trim(),models:c};Fy(R),N("")},T=async()=>{if(!t.trim()){N(" API ");return}S(!0),N(null);try{const R=t.replace(/\/+$/,"")+"/models",ee=await fetch(R,{method:"GET",headers:{"Content-Type":"application/json",...s.trim()?{Authorization:`Bearer ${s.trim()}`}:{}}});if(!ee.ok)throw new Error(` ${ee.status}`);const w=await ee.json();let f=[];Array.isArray(w)?f=w.map(g=>typeof g=="string"?g:g.id||g.name).filter(Boolean):Array.isArray(w.data)?f=w.data.map(g=>g.id||g.name).filter(g=>typeof g=="string"):Array.isArray(w.models)&&(f=w.models.map(g=>g.id||g.name).filter(g=>typeof g=="string")),f.length||(f=["gpt-4.1-mini","gpt-4.1","gpt-4.1-chat"]),u(f),f.includes(i)||l(f[0]??""),N("")}catch(R){N(`${R.message}`)}finally{S(!1)}};return r.jsxs("div",{className:"api-settings",children:[r.jsxs("div",{className:"api-section",children:[r.jsxs("div",{className:"api-row",children:[r.jsx("label",{className:"api-label",children:"API "}),r.jsx("input",{className:"api-input",placeholder:"https://api.xxx.com/v1",value:t,onChange:R=>n(R.target.value)})]}),r.jsxs("div",{className:"api-row",children:[r.jsx("label",{className:"api-label",children:"API Key"}),r.jsx("input",{className:"api-input",type:"password",placeholder:"",value:s,onChange:R=>o(R.target.value)})]}),r.jsxs("div",{className:"api-actions",children:[r.jsx("button",{type:"button",className:"api-btn primary",onClick:T,disabled:p,children:p?"":""}),r.jsx("button",{type:"button",className:"api-btn",onClick:M,children:""})]}),E&&r.jsx("div",{className:"api-message",children:E})]}),r.jsxs("div",{className:"api-section",children:[r.jsxs("div",{className:"api-row",children:[r.jsx("label",{className:"api-label",children:""}),c.length>0?r.jsxs("select",{className:"api-input",value:i,onChange:R=>l(R.target.value),style:{padding:"8px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:[r.jsx("option",{value:"",children:""}),c.map(R=>r.jsx("option",{value:R,children:R},R))]}):r.jsx("input",{className:"api-input",placeholder:"gpt-4.1-mini''",value:i,onChange:R=>l(R.target.value)})]}),c.length>0&&r.jsxs("p",{className:"api-tip",style:{marginTop:"8px",fontSize:"12px",color:"#666"},children:[" ",c.length," "]}),r.jsx("p",{className:"api-tip",children:" AI "})]})]})},Dy="BJOFT35nXTBG6xil5t5kPLOnyZvlGomKDST5TVTtP2WqQOE3xqj8vSmsUdOqNXq4czdKsJcAINr6mL12C5VyVIc",Hy="https://wodexiaoshouji.vercel.app",wu="mini-ai-phone.push-enabled",Vy=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(n),o=new Uint8Array(s.length);for(let i=0;i<s.length;i+=1)o[i]=s.charCodeAt(i);return o},Qr=()=>typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,Ky=async()=>{if(!Qr())return null;try{return await navigator.serviceWorker.register("./sw.js")}catch(e){return console.error("[pushClient]  Service Worker :",e),null}},wh=async()=>Qr()?(await navigator.serviceWorker.ready).pushManager.getSubscription():null,Yy=async()=>{if(!Qr())return!1;try{return!(!await wh()||Notification.permission!=="granted")}catch{return!1}},Jy=async()=>{if(!Qr())return{ok:!1,message:" Web Push Chrome / Edge / Safari "};if(await Notification.requestPermission()!=="granted")return{ok:!1,message:""};try{const t=await navigator.serviceWorker.ready;let n=await t.pushManager.getSubscription();if(!n){const s=Vy(Dy);n=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s})}return await fetch(`${Hy}/api/save-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),window.localStorage.setItem(wu,"1"),{ok:!0,message:""}}catch(t){return console.error("[pushClient] :",t),{ok:!1,message:""}}},Qy=async()=>{if(!Qr())return{ok:!1,message:" Web Push"};try{const e=await wh();return e&&await e.unsubscribe(),window.localStorage.setItem(wu,"0"),{ok:!0,message:""}}catch(e){return console.error("[pushClient] :",e),{ok:!1,message:""}}},Gy=()=>typeof window>"u"?!1:window.localStorage.getItem(wu)==="1",kh="mini-ai-phone.story-roles",Xy="mini-ai-phone.api-config",jh="mini-ai-phone.story-appearance",Nh="mini-ai-phone.friend-requests",Sh="mini-ai-phone.wechat-contacts",jc=()=>{try{const e=window.localStorage.getItem(kh);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},Ca=e=>{try{window.localStorage.setItem(kh,JSON.stringify(e))}catch{}},zt=()=>{try{const e=window.localStorage.getItem(Xy);if(!e)return{baseUrl:"",apiKey:"",model:""};const t=JSON.parse(e);return{baseUrl:t.baseUrl??"",apiKey:t.apiKey??"",model:t.model??""}}catch{return{baseUrl:"",apiKey:"",model:""}}},Pr=()=>`${Date.now()}-${Math.random().toString(16).slice(2)}`,Ch="mini-ai-phone.story-identity",Nc="mini-ai-phone.wechat-role-identity-per-role",Tn=()=>{try{const e=window.localStorage.getItem(Ch);if(!e)return{name:"",gender:"",intro:"",tags:"",worldbooks:[]};const t=JSON.parse(e);return{name:t.name??t.nickname??"",gender:t.gender??"",intro:t.intro??"",tags:t.tags??"",worldbooks:t.worldbooks??[]}}catch{return{name:"",gender:"",intro:"",tags:"",worldbooks:[]}}},Zy=e=>{try{window.localStorage.setItem(Ch,JSON.stringify(e))}catch{}},qy=e=>{try{const t=window.localStorage.getItem(Nc);if(!t)return null;const n=JSON.parse(t);if(!n||typeof n!="object")return null;const s=n[e];return s||null}catch{return null}},e1=(e,t)=>{if(e)try{const n=window.localStorage.getItem(Nc),s=n?JSON.parse(n):{};s[e]=t,window.localStorage.setItem(Nc,JSON.stringify(s))}catch{}},ba=()=>{try{const e=window.localStorage.getItem(jh);if(!e)return{backgroundImage:"",fontFamily:"",fontSize:14};const t=JSON.parse(e);return{backgroundImage:t.backgroundImage??"",fontFamily:t.fontFamily??"",fontSize:t.fontSize??14}}catch{return{backgroundImage:"",fontFamily:"",fontSize:14}}},t1=e=>{try{window.localStorage.setItem(jh,JSON.stringify(e))}catch{}},gl=()=>{try{const e=window.localStorage.getItem(Nh);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},yl=e=>{try{const t=gl(),n=t.findIndex(s=>s.id===e.id);n>=0?t[n]=e:t.push(e),window.localStorage.setItem(Nh,JSON.stringify(t))}catch(t){console.error(":",t)}},n1=()=>{try{const e=window.localStorage.getItem(Sh);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},bh=e=>{try{const t=n1(),n=t.findIndex(s=>s.roleId===e.roleId);n>=0?t[n]=e:t.push(e),window.localStorage.setItem(Sh,JSON.stringify(t))}catch(t){console.error(":",t)}},r1=e=>{try{[`mini-ai-phone.chat-${e}`,`mini-ai-phone.memory-${e}`,`mini-ai-phone.favor-${e}`,`mini-ai-phone.chat-messages-chat-${e}`].forEach(n=>window.localStorage.removeItem(n))}catch{}},Ih=e=>{try{const t=window.localStorage.getItem(`mini-ai-phone.chat-${e}`);if(!t)return[];const n=JSON.parse(t);return Array.isArray(n)?n:[]}catch{return[]}},ps=(e,t)=>{try{window.localStorage.setItem(`mini-ai-phone.chat-${e}`,JSON.stringify(t))}catch{}},s1=e=>{try{const t=window.localStorage.getItem(`mini-ai-phone.status-${e}`);if(!t)return null;const n=JSON.parse(t);return n&&typeof n=="object"&&Array.isArray(n.list)?n:null}catch{return null}},o1=(e,t,n)=>{try{const s={key:t,list:n};window.localStorage.setItem(`mini-ai-phone.status-${e}`,JSON.stringify(s))}catch{}},i1=(e,t)=>{if(!e||!t)return 0;if(e===t)return 1;const n=e.split(/[|\s]+/).filter(u=>u.length>0),s=t.split(/[|\s]+/).filter(u=>u.length>0);if(n.length===0||s.length===0)return 0;const o=new Set(n),i=new Set(s);let l=0;for(const u of o)i.has(u)&&l++;const c=Math.max(o.size,i.size);return c>0?l/c:0},Di=e=>e<=20?"stranger":e<=40?"acquaintance":e<=60?"familiar":e<=80?"friend":"close",vo=e=>({stranger:"",acquaintance:"",familiar:"",friend:"",close:""})[e],l1=async e=>{var n,s,o,i,l;const t=zt();if(!t.baseUrl||!t.model)return 0;try{const c=Tn(),u=e.worldbooks.map(ee=>{const w=ee.name||"",f=ee.entries.filter(g=>g.title||g.content).map(g=>{const P=g.title||"",O=g.content||"";return O?`${P}${O}`:`${P}`}).join(`
`);return f?`${w}
${f}`:""}).filter(ee=>ee.length>0).join(`

`),p=(c.worldbooks??[]).map(ee=>{const w=ee.name||"",f=ee.entries.filter(g=>g.title||g.content).map(g=>{const P=g.title||"",O=g.content||"";return O?`${P}${O}`:`${P}`}).join(`
`);return f?`${w}
${f}`:""}).filter(ee=>ee.length>0).join(`

`),S=t.baseUrl.replace(/\/+$/,""),E=S.endsWith("/chat/completions")||S.endsWith("/completions")?S:S+"/chat/completions",N=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json",...t.apiKey?{Authorization:`Bearer ${t.apiKey}`}:{}},body:JSON.stringify({model:t.model,temperature:.3,messages:[{role:"system",content:`,

1
   - ,21-60
   - ,0-20
   - ,0-10
   - ,61-80
2,0()
3,
4JSON, {"initialFavor": 0-100, "reason": ""}`},{role:"user",content:`${e.name}, ${e.gender==="male"?"":e.gender==="female"?"":""}, ${e.age||""}
${c.name||""}
${u?`
${u}

`:""}${p?`
${p}

`:""},(0-100),0`}]})});if(!N.ok)return 0;const M=await N.json();let T=((o=(s=(n=M==null?void 0:M.choices)==null?void 0:n[0])==null?void 0:s.message)==null?void 0:o.content)??((l=(i=M==null?void 0:M.choices)==null?void 0:i[0])==null?void 0:l.text)??"";if(!T)return 0;let R={};try{T=T.replace(/^```json\n?/g,"").replace(/^```\n?/g,"").replace(/\n?```$/g,"").trim(),R=JSON.parse(T)}catch{const ee=T.match(/initialFavor["']?\s*[:]\s*(\d+)/);ee&&(R.initialFavor=parseInt(ee[1],10))}return R.initialFavor!==void 0?Math.max(0,Math.min(100,R.initialFavor)):0}catch(c){return console.error(":",c),0}},a1=async(e,t)=>{try{const n=window.localStorage.getItem(`mini-ai-phone.favor-${e}`);if(!n){if(t){const i={value:await l1(t),lastUpdate:Date.now()};return Eh(e,i),i}return{value:0,lastUpdate:Date.now()}}const s=JSON.parse(n);return{value:Math.max(0,Math.min(100,s.value??0)),lastUpdate:s.lastUpdate??Date.now(),history:s.history}}catch{return{value:0,lastUpdate:Date.now()}}},zr=e=>{try{const t=window.localStorage.getItem(`mini-ai-phone.favor-${e}`);if(!t)return{value:0,lastUpdate:Date.now()};const n=JSON.parse(t);return{value:Math.max(0,Math.min(100,n.value??0)),lastUpdate:n.lastUpdate??Date.now(),history:n.history}}catch{return{value:0,lastUpdate:Date.now()}}},Eh=(e,t)=>{try{window.localStorage.setItem(`mini-ai-phone.favor-${e}`,JSON.stringify(t))}catch{}},c1=(e,t,n)=>{const s=zr(e),o=Math.max(0,Math.min(100,s.value+t)),i={value:o,lastUpdate:Date.now(),history:s.history?[...s.history,{value:o,timestamp:Date.now(),reason:n}]:void 0};return Eh(e,i),i},Yd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Jd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Qd=async e=>{var c,u,p,S,E;const{roleId:t}=e.detail;console.log("[StoryApp] [] :",t),await new Promise(N=>setTimeout(N,100));const n=gl().filter(N=>N.roleId===t&&N.status==="pending");if(console.log("[StoryApp] [] :",n.length),n.length===0){console.warn("[StoryApp] [] ");return}const s=jc();console.log("[StoryApp] [] :",s.length);const o=s.find(N=>N.id===t);if(!o){console.warn("[StoryApp] [] :",t),console.warn("[StoryApp] [] ID:",s.map(N=>N.id));return}console.log("[StoryApp] [] :",o.name);const i=zt();if(!i.baseUrl||!i.model){console.warn("[StoryApp] [] API. baseUrl:",i.baseUrl,"model:",i.model);return}console.log("[StoryApp] [] API");const l=Ih(t);console.log("[StoryApp] [] :",l.length);try{console.log("[StoryApp] [] AI...");const N=i.baseUrl.replace(/\/+$/,""),M=N.endsWith("/chat/completions")||N.endsWith("/completions")?N:N+"/chat/completions",T=l.slice(-6).map(me=>me.from==="player"?me.kind==="speech"?`${me.text}`:`${me.text}`:`${me.text}`).join(`
`),R=o.worldbooks.map(me=>{const Pe=me.name||"",ft=me.entries.filter(Ae=>Ae.title||Ae.content).map(Ae=>{const Pt=Ae.title||"",en=Ae.content||"";return en?`${Pt}${en}`:`${Pt}`}).join(`
`);return ft?`${Pe}
${ft}`:""}).filter(me=>me.length>0).join(`

`),ee=Tn(),w=(ee.worldbooks??[]).map(me=>{const Pe=me.name||"",ft=me.entries.filter(Ae=>Ae.title||Ae.content).map(Ae=>{const Pt=Ae.title||"",en=Ae.content||"";return en?`${Pt}${en}`:`${Pt}`}).join(`
`);return ft?`${Pe}
${ft}`:""}).filter(me=>me.length>0).join(`

`),f=ee.name?`${ee.name}${ee.intro?`
${ee.intro}`:""}${ee.tags?`
${ee.tags}`:""}${w?`


${w}`:""}`:"",g=zr(t),P=Di(g.value),O=vo(P),H=`${g.value}/100${O}`,V=o.name,K=o.gender==="male"?"":o.gender==="female"?"":o.gender==="other"?"":"",Le=typeof o.age=="number"&&o.age>0?`${o.age} `:"",fe=ee.wechatNickname||ee.name||"",Qe=ee.wechatAvatar||"",Mt=n.length>0?`

****
${V}1"${fe}"2${Qe?"":""}3"${n[0].greeting}"`:"",X=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json",...i.apiKey?{Authorization:`Bearer ${i.apiKey}`}:{}},body:JSON.stringify({model:i.model,temperature:.7,messages:[{role:"system",content:`""
1
2
3 NPC
4""
5""
6****"""" NPC 
7
8
9****""
10****"""A""B""A"XX""
11**** ${g.value}/100"${O}"${H}****""${Mt}
12****""""  """"""`},{role:"user",content:`${V}${K}${Le}

${f}

${R?`
${R}

`:""}${o.opening?`${o.opening}

`:""}
${T}

 ${200||200} `}]})});if(!X.ok)throw new Error(` ${X.status}`);const qe=await X.json();let Bt=((p=(u=(c=qe==null?void 0:qe.choices)==null?void 0:c[0])==null?void 0:u.message)==null?void 0:p.content)??((E=(S=qe==null?void 0:qe.choices)==null?void 0:S[0])==null?void 0:E.text)??"";if(!Bt)throw new Error("");const jt=Bt.trim();console.log("[StoryApp] [] AI:",jt.length);const F=[...l,{from:"narrator",text:jt,kind:"narration"}];ps(t,F),console.log("[StoryApp] [] localStorage:",F.length),window.dispatchEvent(new CustomEvent("story-updated",{detail:{roleId:t,turns:F}}));const ae=["","","","","","","","","",""],oe=["","","","",""],ce=ae.some(me=>jt.includes(me)),$e=oe.some(me=>jt.includes(me));if(ce&&!$e){const me=n[0];me.status="accepted",yl(me);const Pe={roleId:t,remark:me.remark,tags:me.tags,permission:me.permission,hideMyMoments:me.hideMyMoments,hideTheirMoments:me.hideTheirMoments,addedAt:Date.now()};bh(Pe),window.dispatchEvent(new CustomEvent("friend-request-accepted",{detail:{roleId:t,roleName:o.name,greeting:me.greeting}})),console.log("[StoryApp] [] ")}else if($e){const me=n[0];me.status="rejected",yl(me),console.log("[StoryApp] [] ")}console.log("[StoryApp] [] :",t)}catch(N){console.error("[StoryApp] [] :",N),console.error("[StoryApp] [] :",{roleId:t,roleName:o==null?void 0:o.name,existingTurnsCount:l.length,error:N instanceof Error?N.message:String(N)})}};typeof window<"u"&&(console.log("[StoryApp] [] "),window.addEventListener("friend-request-sent",Qd),document.addEventListener("friend-request-sent",Qd));const u1=({onTitleChange:e,onHeaderActionsChange:t,onNavigateToAddFriend:n,onReadModeChange:s,identityEditRoleId:o,onIdentityEditRoleHandled:i,onExitIdentityFromChat:l})=>{var ci;const[c,u]=j.useState(()=>jc()),[p,S]=j.useState("list"),[E,N]=j.useState(""),[M,T]=j.useState(""),[R,ee]=j.useState(""),[w,f]=j.useState(""),[g,P]=j.useState(""),[O,H]=j.useState(""),[V,K]=j.useState([]),[Le,fe]=j.useState(""),[Qe,Mt]=j.useState(""),[it,X]=j.useState(null),[qe,Bt]=j.useState(null);j.useEffect(()=>{if(o)try{S("identity"),Bt(o);const h=qy(o);if(h){const v={name:h.name||"",gender:h.gender||"",intro:h.intro||"",tags:h.tags||"",worldbooks:h.worldbooks??[],phoneNumber:h.phoneNumber,wechatId:h.wechatId};$e(v),Pe(v.worldbooks??[])}else{const v=Tn();$e(v),Pe(v.worldbooks??[])}X("")}finally{i&&i()}},[o,i]);const[jt,F]=j.useState([]),[ae,oe]=j.useState([]),[ce,$e]=j.useState(()=>Tn()),[me,Pe]=j.useState(()=>ce.worldbooks??[]),[ft,Ae]=j.useState([]),[Pt,en]=j.useState([]),[At,Al]=j.useState(()=>ba()),Tl=j.useRef(null),Xo=j.useRef(null),[ue,vr]=j.useState(null),[lt,Ln]=j.useState([]),[zl,Gr]=j.useState(""),[jn,Xr]=j.useState(!1),[Ds,Zo]=j.useState([]),[_l,Wl]=j.useState(!1),[Zr,Vn]=j.useState(120),[qo,Kn]=j.useState("120"),[ze,dn]=j.useState(!1),[Ol,wr]=j.useState(!1),[Nt,qr]=j.useState([]),[Yn,$n]=j.useState(!1),[Dt,Jn]=j.useState(!1),[at,kr]=j.useState(0),[es,jr]=j.useState(null),ei=j.useCallback(()=>{const h=Yd[Math.floor(Math.random()*Yd.length)],v=1+Math.floor(Math.random()*3);let y="";for(let b=0;b<v;b+=1)y+=Jd[Math.floor(Math.random()*Jd.length)];return h+y},[]);j.useEffect(()=>{if(e)if(p==="read"&&ue){const h=c.find(v=>v.id===ue);e((h==null?void 0:h.name)??"")}else e("")},[p,ue,c,e]),j.useEffect(()=>{if(!s)return;s(p==="read"||p==="create"||p==="edit"||p==="identity"||p==="appearance")},[p,s]),j.useEffect(()=>{const h=setTimeout(()=>{let v=document.getElementById("story-appearance-style");v||(v=document.createElement("style"),v.id="story-appearance-style",document.head.appendChild(v));const y=ba();let b="";if(y.fontFamily){const x=y.fontFamily;b+=`.story-read { font-family: ${x} !important; }
`,b+=`.story-read-opening { font-family: ${x} !important; }
`,b+=`.story-read-entry-title { font-family: ${x} !important; }
`,b+=`.story-read-entry-content { font-family: ${x} !important; }
`,console.log("[StoryApp] :",x)}if(y.fontSize&&(b+=`.story-read { font-size: ${y.fontSize}px !important; }
`,b+=`.story-read-opening { font-size: ${y.fontSize}px !important; }
`,b+=`.story-read-entry-title { font-size: ${y.fontSize}px !important; }
`,b+=`.story-read-entry-content { font-size: ${y.fontSize}px !important; }
`),b?(console.log("[StoryApp] CSS:",b),v.textContent=b):v.textContent="",y.fontFamily||y.fontSize){const x=document.querySelectorAll(".story-read, .story-read-opening, .story-read-entry-title, .story-read-entry-content");x.forEach(U=>{const A=U;y.fontFamily&&A.style.setProperty("font-family",y.fontFamily,"important"),y.fontSize&&A.style.setProperty("font-size",`${y.fontSize}px`,"important")}),console.log("[StoryApp] ",x.length,"")}},100);return()=>clearTimeout(h)},[At,p,ue]),j.useEffect(()=>{if(t)if(p==="read"&&ue){const h=c.find(v=>v.id===ue);if(h){const v=h.id;t({showBack:!0,showMore:!0,onBack:()=>{vr(null),S("list")},onMore:()=>{const y=c.find(b=>b.id===v);y&&(vr(v),N(y.name),T(y.gender),ee(typeof y.age=="number"&&y.age>0?String(y.age):""),f(y.opening??""),H(y.avatarUrl),K(y.worldbooks),F(y.worldbooks.map(b=>b.id)),oe(y.worldbooks.flatMap(b=>b.entries.map(x=>x.id))),fe(y.phoneNumber??""),Mt(y.wechatId??""),S("edit"))}})}}else p==="list"?t({showBack:!0,showMore:!1,onBack:void 0}):p==="create"||p==="edit"?t({showBack:!0,showMore:!1,onBack:()=>{p==="edit"&&ue?S("read"):(vr(null),Ht(),S("list"))}}):(p==="identity"||p==="appearance")&&t({showBack:!0,showMore:!1,onBack:()=>{if(p==="identity"&&qe&&l){Bt(null),l();return}S(ue?"read":"create")}})},[p,ue,c,t,qe,l]),j.useEffect(()=>{if(p==="identity"&&!qe){const h=Tn();Pe(h.worldbooks??[]),Ae((h.worldbooks??[]).map(v=>v.id)),en((h.worldbooks??[]).flatMap(v=>v.entries.map(y=>y.id)))}},[p,qe]),j.useEffect(()=>{try{const h=window.localStorage.getItem("mini-ai-phone.story-length");if(!h)return;const v=Number(h);!Number.isNaN(v)&&v>0&&(Vn(v),Kn(String(v)))}catch{}},[]);const Nr=j.useRef(ue),Hs=j.useRef(p),Vs=j.useRef(jn),ts=j.useRef(Ln);j.useRef(Xr),j.useRef(X),j.useEffect(()=>{Nr.current=ue,Hs.current=p,Vs.current=jn},[ue,p,jn]),j.useEffect(()=>{const h=v=>{const{roleId:y,turns:b}=v.detail;Nr.current===y&&Hs.current==="read"&&(console.log("[StoryApp] [] UI"),ts.current(b))};return console.log("[StoryApp] [] "),window.addEventListener("story-updated",h),()=>{console.log("[StoryApp] [] "),window.removeEventListener("story-updated",h)}},[]);const Ht=()=>{N(""),T(""),ee(""),f(""),P(""),H(""),K([]),X(null),F([]),oe([]),fe(""),Mt("")},Ul=()=>{const h=Pr(),v=Pr();K(y=>[...y,{id:h,name:"",entries:[{id:v,title:"",content:"",keyword:""}]}]),F(y=>[...y,h]),oe(y=>[...y,v])},Sr=(h,v)=>{K(y=>y.map(b=>b.id===h?{...b,name:v}:b))},Fl=h=>{const v=Pr();K(y=>y.map(b=>b.id===h?{...b,entries:[...b.entries,{id:v,title:"",content:""}]}:b)),oe(y=>[...y,v])},Rn=(h,v,y,b)=>{K(x=>x.map(U=>U.id===h?{...U,entries:U.entries.map(A=>A.id===v?{...A,[y]:b}:A)}:U))},ti=async(h,v,y,b)=>{var xe,ve,ge,Ne,B;const x=(y??"").trim(),U=(b??"").trim();if(!x){X("");return}const A=zt(),Y=E.trim()||"",le=M==="male"?"":M==="female"?"":M==="other"?"":"",pe=R.trim()?`${R.trim()} `:"",ne=V.map(ie=>{const he=ie.name||"",G=ie.entries.slice(0,4).map(ye=>{const Se=ie.id===h&&ye.id===v?"":"",Ie=ye.title||"",_e=(ye.content||"").slice(0,60);return`- ${Ie}${Se}${_e}`}).join(`
`);return`${he}
${G}`}).join(`

`);if(!A.baseUrl||!A.model){X(" API ");return}X("");try{const ie=A.baseUrl.replace(/\/+$/,""),he=ie.endsWith("/chat/completions")||ie.endsWith("/completions")?ie:ie+"/chat/completions",G=await fetch(he,{method:"POST",headers:{"Content-Type":"application/json",...A.apiKey?{Authorization:`Bearer ${A.apiKey}`}:{}},body:JSON.stringify({model:A.model,temperature:.4,messages:[{role:"system",content:"123132345 OOC"},{role:"user",content:`${Y}${le}${pe}${U||""} OOC

${ne||""}

${x}`}]})});if(!G.ok)throw new Error(` ${G.status}`);const ye=await G.json();let be=((ge=(ve=(xe=ye==null?void 0:ye.choices)==null?void 0:xe[0])==null?void 0:ve.message)==null?void 0:ge.content)??((B=(Ne=ye==null?void 0:ye.choices)==null?void 0:Ne[0])==null?void 0:B.text)??"";if(!be)throw new Error("");K(Se=>Se.map(Ie=>Ie.id===h?{...Ie,entries:Ie.entries.map(_e=>_e.id===v?{..._e,content:_e.content?`${_e.content}

${be}`:be}:_e)}:Ie)),X("")}catch(ie){X(`${ie.message}`)}},pt=h=>{if(!h)return;const v=new FileReader;v.onload=()=>{typeof v.result=="string"&&H(v.result)},v.readAsDataURL(h)},ns=async h=>{var y,b,x,U,A,Y;const v=zt();if(!v.baseUrl||!v.model)return{};try{const le=v.baseUrl.replace(/\/+$/,""),pe=le.endsWith("/chat/completions")||le.endsWith("/completions")?le:le+"/chat/completions",ne=h.gender==="male"?"":h.gender==="female"?"":"",xe=h.age?`${h.age}`:"",ve=((y=h.worldbooks)==null?void 0:y.slice(0,3).map(he=>{var ye;const G=((ye=he.entries)==null?void 0:ye.slice(0,4).map(be=>{const Se=be.title||"",Ie=(be.content||"").slice(0,40);return Ie?`${Se}${Ie}`:Se}).filter(Boolean).join(""))||"";return G?`${he.name}${G}`:""}).filter(Boolean).join(""))||"",ge=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json",...v.apiKey?{Authorization:`Bearer ${v.apiKey}`}:{}},body:JSON.stringify({model:v.model,temperature:.7,messages:[{role:"system",content:`

1 28 
2 20 
3(wechatId) "wxid_xxx"+
4(region)/ " "" "" "
5 JSON {"nickname": "", "signature": "", "wechatId": "", "region": ""} markdown `},{role:"user",content:`${h.name}${ne}${xe}${ve?`/${ve}`:""} JSON `}]})});if(!ge.ok)throw new Error(` ${ge.status}`);const Ne=await ge.json();let B=((U=(x=(b=Ne==null?void 0:Ne.choices)==null?void 0:b[0])==null?void 0:x.message)==null?void 0:U.content)??((Y=(A=Ne==null?void 0:Ne.choices)==null?void 0:A[0])==null?void 0:Y.text)??"";if(!B)throw new Error("");let ie={};try{B=B.replace(/^```json\n?/g,"").replace(/^```\n?/g,"").replace(/\n?```$/g,"").trim(),ie=JSON.parse(B)}catch{const he=B.match(/["']nickname["']\s*:\s*["']([^"']+)["']/)||B.match(/nickname["']?\s*[:]\s*["']?([^"',\n}]+)/),G=B.match(/["']signature["']\s*:\s*["']([^"']+)["']/)||B.match(/signature["']?\s*[:]\s*["']?([^"',\n}]+)/),ye=B.match(/["']wechatId["']\s*:\s*["']([^"']+)["']/)||B.match(/wechatId["']?\s*[:]\s*["']?([^"',\n}]+)/i),be=B.match(/["']region["']\s*:\s*["']([^"']+)["']/)||B.match(/region["']?\s*[:]\s*["']?([^"',\n}]+)/i);he&&(ie.nickname=he[1].trim()),G&&(ie.signature=G[1].trim()),ye&&(ie.wechatId=ye[1].trim()),be&&(ie.region=be[1].trim())}return ie.nickname||ie.signature?console.log(":",ie):console.warn(":",B),ie}catch(le){return console.error(":",le),{}}},ni=async()=>{var Y,le;if(!E.trim()){X("");return}const h=R.trim()?Number(R.trim()):null;if(R.trim()&&(Number.isNaN(h)||h<=0)){X(" 0 ");return}const v=p==="edit"&&ue?ue:Pr(),y=Le.trim()||Qe.trim();let b={};if(y){X("...");const pe={id:v,name:E.trim(),gender:M,age:h,opening:w.trim(),avatarUrl:O.trim(),worldbooks:V,phoneNumber:Le.trim()||void 0,wechatId:Qe.trim()||void 0};b=await ns(pe)}const x={id:v,name:E.trim(),gender:M,age:h,opening:w.trim(),avatarUrl:O.trim(),worldbooks:V,phoneNumber:Le.trim()||void 0,wechatId:((Y=b.wechatId)==null?void 0:Y.trim())||Qe.trim()||void 0,wechatNickname:b.nickname,wechatSignature:b.signature,region:((le=b.region)==null?void 0:le.trim())||void 0};if(p==="edit"&&ue){const pe=c.find(ne=>ne.id===ue);pe&&((!y||!b.nickname)&&(x.wechatNickname=pe.wechatNickname),(!y||!b.signature)&&(x.wechatSignature=pe.wechatSignature),(!y||!b.region)&&(x.region=pe.region))}y&&(!b.nickname||!b.signature)&&console.warn(":",b);const U=p==="edit"&&ue?c.map(pe=>pe.id===ue?x:pe):[...c,x];u(U),Ca(U),S("list"),Ht(),vr(null);let A=p==="edit"?"":"";y&&(b.nickname&&b.signature?A+=`${b.nickname}`:A+="API"),X(A)},Cr=(h,v)=>{$e(y=>({...y,[h]:v}))},rs=()=>{var v,y;const h={name:ce.name.trim(),gender:ce.gender,intro:ce.intro.trim(),tags:ce.tags.trim(),worldbooks:me,phoneNumber:((v=ce.phoneNumber)==null?void 0:v.trim())||void 0,wechatId:((y=ce.wechatId)==null?void 0:y.trim())||void 0};Zy(h),$e(h),qe?(e1(qe,h),Bt(null),X(""),l&&l()):X("")},br=(h,v)=>{Al(y=>({...y,[h]:v}))},Ks=()=>{t1(At),X(`${At.fontFamily?` - : ${At.fontFamily}`:""}${At.fontSize?` - : ${At.fontSize}px`:""}`)},Vt=h=>{if(!h)return;const v=new FileReader;v.onload=()=>{typeof v.result=="string"&&Al(y=>({...y,backgroundImage:v.result}))},v.readAsDataURL(h)},ri=()=>{const h=Pr(),v=Pr();Pe(y=>[...y,{id:h,name:"",entries:[{id:v,title:"",content:"",keyword:""}]}]),Ae(y=>[...y,h]),en(y=>[...y,v])},si=(h,v)=>{Pe(y=>y.map(b=>b.id===h?{...b,name:v}:b))},ss=h=>{const v=Pr();Pe(y=>y.map(b=>b.id===h?{...b,entries:[...b.entries,{id:v,title:"",content:""}]}:b)),en(y=>[...y,v])},Ir=(h,v,y,b)=>{Pe(x=>x.map(U=>U.id===h?{...U,entries:U.entries.map(A=>A.id===v?{...A,[y]:b}:A)}:U))},Bl=async(h,v,y,b)=>{var ne,xe,ve,ge,Ne;const x=(y??"").trim(),U=(b??"").trim();if(!x){X("");return}const A=zt(),Y=ce.name.trim()||"",le=ce.gender==="male"?"":ce.gender==="female"?"":ce.gender==="other"?"":"",pe=me.map(B=>{const ie=B.name||"",he=B.entries.slice(0,4).map(G=>{const be=B.id===h&&G.id===v?"":"",Se=G.title||"",Ie=(G.content||"").slice(0,60);return`- ${Se}${be}${Ie}`}).join(`
`);return`${ie}
${he}`}).join(`

`);if(!A.baseUrl||!A.model){X(" API ");return}X("");try{const B=A.baseUrl.replace(/\/+$/,""),ie=B.endsWith("/chat/completions")||B.endsWith("/completions")?B:B+"/chat/completions",he=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json",...A.apiKey?{Authorization:`Bearer ${A.apiKey}`}:{}},body:JSON.stringify({model:A.model,temperature:.4,messages:[{role:"system",content:'12313234""5'},{role:"user",content:`${Y}${le}${U||""}

${pe||""}

${x}`}]})});if(!he.ok)throw new Error(` ${he.status}`);const G=await he.json();let ye=((ve=(xe=(ne=G==null?void 0:G.choices)==null?void 0:ne[0])==null?void 0:xe.message)==null?void 0:ve.content)??((Ne=(ge=G==null?void 0:G.choices)==null?void 0:ge[0])==null?void 0:Ne.text)??"";if(!ye)throw new Error("");Pe(be=>be.map(Se=>Se.id===h?{...Se,entries:Se.entries.map(Ie=>Ie.id===v?{...Ie,content:Ie.content?`${Ie.content}

${ye}`:ye}:Ie)}:Se)),X("")}catch(B){X(`${B.message}`)}},oi=async()=>{var b,x,U,A,Y;const h=ce.name.trim();if(!h){X("");return}const v=zt();if(!v.baseUrl||!v.model){X(" API ");return}const y=ce.gender==="male"?"":ce.gender==="female"?"":ce.gender==="other"?" / ":"";X("");try{const le=v.baseUrl.replace(/\/+$/,""),pe=le.endsWith("/chat/completions")||le.endsWith("/completions")?le:le+"/chat/completions",ne=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json",...v.apiKey?{Authorization:`Bearer ${v.apiKey}`}:{}},body:JSON.stringify({model:v.model,temperature:.4,messages:[{role:"system",content:"12 12 345"},{role:"user",content:`${h}${y}${ce.tags||""} 12 `}]})});if(!ne.ok)throw new Error(` ${ne.status}`);const xe=await ne.json();let ve=((U=(x=(b=xe==null?void 0:xe.choices)==null?void 0:b[0])==null?void 0:x.message)==null?void 0:U.content)??((Y=(A=xe==null?void 0:xe.choices)==null?void 0:A[0])==null?void 0:Y.text)??"";if(!ve)throw new Error("");ve=ve.trim(),$e(ge=>({...ge,intro:ve})),X("")}catch(le){X(`${le.message}`)}},Dl=async()=>{var U,A,Y,le,pe;if(!E.trim()){X("");return}const h=zt();if(!h.baseUrl||!h.model){X(" API ");return}const v=E.trim(),y=M==="male"?"":M==="female"?"":M==="other"?"":"",b=R.trim()?`${R.trim()} `:"",x=g.trim();X("");try{const ne=h.baseUrl.replace(/\/+$/,""),xe=ne.endsWith("/chat/completions")||ne.endsWith("/completions")?ne:ne+"/chat/completions",ve=await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json",...h.apiKey?{Authorization:`Bearer ${h.apiKey}`}:{}},body:JSON.stringify({model:h.model,temperature:.5,messages:[{role:"system",content:"12 24 3/456"},{role:"user",content:`${v}${y}${b}${x||""}`}]})});if(!ve.ok)throw new Error(` ${ve.status}`);const ge=await ve.json();let Ne=((Y=(A=(U=ge==null?void 0:ge.choices)==null?void 0:U[0])==null?void 0:A.message)==null?void 0:Y.content)??((pe=(le=ge==null?void 0:ge.choices)==null?void 0:le[0])==null?void 0:pe.text)??"";if(!Ne)throw new Error("");Ne=Ne.trim(),f(B=>B?`${B}

${Ne}`:Ne),X("")}catch(ne){X(`${ne.message}`)}},os=async(h,v,y,b,x)=>{var A,Y,le,pe,ne,xe;const U=zt();if(!(!U.baseUrl||!U.model))try{const ve=U.baseUrl.replace(/\/+$/,""),ge=ve.endsWith("/chat/completions")||ve.endsWith("/completions")?ve:ve+"/chat/completions",Ne=((A=b.worldbooks)==null?void 0:A.slice(0,2).map(ye=>{var Se;const be=((Se=ye.entries)==null?void 0:Se.slice(0,2).map(Ie=>Ie.title||"").filter(Boolean).join(""))||"";return be?`${ye.name}${be}`:""}).filter(Boolean).join(""))||"",B=await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json",...U.apiKey?{Authorization:`Bearer ${U.apiKey}`}:{}},body:JSON.stringify({model:U.model,temperature:.3,messages:[{role:"system",content:`AI,

1****,
2****,
3****,
4****,
5****
   - 
   - 
   - 
   - ,
   - 
6****
   - 
   - 
   - 
   - 
   - 
7****
   - 
   - ,
   - ,
8****
   - 1-3,
   - 1-3,
   - (),5
9JSON, {"delta": -33, "reason": ""}
   - delta > 0 
   - delta < 0 
   - delta = 0 
   - 1-3,5`},{role:"user",content:`${b.name}, ${b.gender==="male"?"":b.gender==="female"?"":""}, ${b.age||""}
${x.value}/100 (${vo(Di(x.value))})
${Ne?`${Ne}
`:""}${v}
AI${y}

,,,,,,`}]})});if(!B.ok)return;const ie=await B.json();let he=((pe=(le=(Y=ie==null?void 0:ie.choices)==null?void 0:Y[0])==null?void 0:le.message)==null?void 0:pe.content)??((xe=(ne=ie==null?void 0:ie.choices)==null?void 0:ne[0])==null?void 0:xe.text)??"";if(!he)return;let G={};try{he=he.replace(/^```json\n?/g,"").replace(/^```\n?/g,"").replace(/\n?```$/g,"").trim(),G=JSON.parse(he)}catch{const ye=he.match(/delta["']?\s*[:]\s*(-?\d+)/);ye&&(G.delta=parseInt(ye[1],10))}if(G.delta!==void 0&&G.delta!==0){const ye=Math.max(-5,Math.min(5,G.delta));c1(h,ye,G.reason||"")}}catch(ve){console.error(":",ve)}},ht=async(h,v,y,b)=>{var U,A,Y,le,pe,ne;const x=zt();if(!x.baseUrl||!x.model)return{stranger:"",acquaintance:"",familiar:"",friend:"",close:""}[b];try{const xe=x.baseUrl.replace(/\/+$/,""),ve=xe.endsWith("/chat/completions")||xe.endsWith("/completions")?xe:xe+"/chat/completions",ge=h.slice(-4).map(G=>G.from==="player"?G.kind==="speech"?`${G.text}`:`${G.text}`:`${G.text}`).join(`
`),Ne=((U=v.worldbooks)==null?void 0:U.slice(0,2).map(G=>{var be;const ye=((be=G.entries)==null?void 0:be.slice(0,2).map(Se=>Se.title||"").filter(Boolean).join(""))||"";return ye?`${G.name}${ye}`:""}).filter(Boolean).join(""))||"",B=await fetch(ve,{method:"POST",headers:{"Content-Type":"application/json",...x.apiKey?{Authorization:`Bearer ${x.apiKey}`}:{}},body:JSON.stringify({model:x.model,temperature:.5,messages:[{role:"system",content:`

115-25
2
3
4
5
6""""`},{role:"user",content:`${v.name}${y.value}/100${vo(b)}
${Ne?`${Ne}
`:""}${ge||""}

15-25`}]})});if(!B.ok)throw new Error(` ${B.status}`);const ie=await B.json();let he=((le=(Y=(A=ie==null?void 0:ie.choices)==null?void 0:A[0])==null?void 0:Y.message)==null?void 0:le.content)??((ne=(pe=ie==null?void 0:ie.choices)==null?void 0:pe[0])==null?void 0:ne.text)??"";if(!he)throw new Error("");return he=he.trim(),he=he.replace(/^["']|["']$/g,""),he.length>30&&(he=he.slice(0,27)+"..."),he||""}catch(xe){return console.error(":",xe),{stranger:"",acquaintance:"",familiar:"",friend:"",close:""}[b]}},fn=async(h,v,y,b)=>{var as,Qn,Xs,Zs,qs;const x=ue;if(!x)throw new Error("ID");const U=zt();if(!U.baseUrl||!U.model)throw new Error(" API ");const A=U.baseUrl.replace(/\/+$/,""),Y=A.endsWith("/chat/completions")||A.endsWith("/completions")?A:A+"/chat/completions",le=h.slice(-6).map(Ge=>Ge.from==="player"?Ge.kind==="speech"?`${Ge.text}`:`${Ge.text}`:`${Ge.text}`).join(`
`),pe=v.worldbooks.map(Ge=>{const Tt=Ge.name||"",Ye=Ge.entries.filter(St=>St.title||St.content).map(St=>{const Nn=St.title||"",pn=St.content||"";return pn?`${Nn}${pn}`:`${Nn}`}).join(`
`);return Ye?`${Tt}
${Ye}`:""}).filter(Ge=>Ge.length>0).join(`

`),ne=Tn(),xe=(ne.worldbooks??[]).map(Ge=>{const Tt=Ge.name||"",Ye=Ge.entries.filter(St=>St.title||St.content).map(St=>{const Nn=St.title||"",pn=St.content||"";return pn?`${Nn}${pn}`:`${Nn}`}).join(`
`);return Ye?`${Tt}
${Ye}`:""}).filter(Ge=>Ge.length>0).join(`

`),ve=ne.name?`${ne.name}${ne.intro?`
${ne.intro}`:""}${ne.tags?`
${ne.tags}`:""}${xe?`


${xe}`:""}`:"",ge=zr(x),Ne=Di(ge.value),B=vo(Ne),ie=await ht(h,v,ge,Ne),he=v.name,G=v.gender==="male"?"":v.gender==="female"?"":v.gender==="other"?"":"",ye=typeof v.age=="number"&&v.age>0?`${v.age} `:"",be=gl().filter(Ge=>Ge.roleId===v.id&&Ge.status==="pending"),Se=Tn(),Ie=Se.wechatNickname||Se.name||"",_e=Se.wechatAvatar||"",Ke=be.length>0?`

****
${he}1"${Ie}"2${_e?"":""}3"${be[0].greeting}"`:"",Gs=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json",...U.apiKey?{Authorization:`Bearer ${U.apiKey}`}:{}},body:JSON.stringify({model:U.model,temperature:.7,messages:[{role:"system",content:`""
1
2
3 NPC
4""
5""
6****"""" NPC 
7
8
9****""
10****"""A""B""A"XX""
11**** ${ge.value}/100"${B}"${ie}****""${Ke}
12****""""  """"""`},{role:"user",content:`${he}${G}${ye}

${ve}

${pe?`
${pe}

`:""}${v.opening?`${v.opening}

`:""}
${le}

 200 `}]})});if(!Gs.ok)throw new Error(` ${Gs.status}`);const nn=await Gs.json();let ui=((Xs=(Qn=(as=nn==null?void 0:nn.choices)==null?void 0:as[0])==null?void 0:Qn.message)==null?void 0:Xs.content)??((qs=(Zs=nn==null?void 0:nn.choices)==null?void 0:Zs[0])==null?void 0:qs.text)??"";if(!ui)throw new Error("");return ui.trim()},tn=(h,v)=>{const y=gl().filter(Y=>Y.roleId===h&&Y.status==="pending");if(y.length===0)return;const x=["","","","","","","","","",""].some(Y=>v.includes(Y)),A=["","","","",""].some(Y=>v.includes(Y));if(x&&!A){const Y=y[0];Y.status="accepted",yl(Y);const le={roleId:h,remark:Y.remark,tags:Y.tags,permission:Y.permission,hideMyMoments:Y.hideMyMoments,hideTheirMoments:Y.hideTheirMoments,addedAt:Date.now()};bh(le);const ne=jc().find(xe=>xe.id===h);ne&&window.dispatchEvent(new CustomEvent("friend-request-accepted",{detail:{roleId:h,roleName:ne.wechatNickname||ne.name,greeting:Y.greeting}})),console.log(":",le)}else if(A){const Y=y[0];Y.status="rejected",yl(Y),console.log("")}},is=async()=>{if(!ue)return;if(lt.length===0){X("");return}if(lt[lt.length-1].from!=="narrator"){X("AI");return}const v=c.find(b=>b.id===ue);if(!v)return;const y=zt();if(!y.baseUrl||!y.model){X(" API ");return}Xr(!0),X(null);try{const b=lt.slice(0,-1);Ln(b),ps(ue,b);const x=await fn(b,v),U=[...b,{from:"narrator",text:x,kind:"narration"}];if(Ln(U),ps(ue,U),b.length>0){const A=b[b.length-1];if(A.from==="player"){const Y=zr(ue);await os(ue,A.text,x,v,Y)}}}catch(b){X(`${b.message}`),Ln(lt),ps(ue,lt)}finally{Xr(!1)}},Su=async()=>{if(!ue)return;const h=zl.trim();if(!h)return;const v=h[0],y=h[h.length-1],b=(v==='"'||v==="")&&(y==='"'||y==="")||(v===""||v==="")&&(y===""||y===""),x=c.find(Y=>Y.id===ue);if(!x)return;const U=zt();if(!U.baseUrl||!U.model){X(" API ");return}x.name,x.gender==="male"||x.gender==="female"||x.gender,typeof x.age=="number"&&x.age>0&&`${x.age}`;const A=[...lt,{from:"player",text:h,kind:b?"speech":"narration"}];Ln(A),Gr(""),ps(ue,A),Xr(!0),X(null);try{const Y=await fn(A,x,h),le=[...A,{from:"narrator",text:Y,kind:"narration"}];Ln(le),ps(ue,le),tn(ue,Y);const pe=zr(ue);await os(ue,h,Y,x,pe)}catch(Y){X(`${Y.message}`)}finally{Xr(!1)}},ii=h=>{vr(h),Ln(Ih(h)),Gr(""),S("read");const v=c.find(y=>y.id===h);if(v){const y=zr(h);y.value===0&&!y.history&&a1(h,v).catch(b=>{console.error(":",b)})}},Hl=()=>{if(!ue)return;const h=c.filter(v=>v.id!==ue);u(h),Ca(h),vr(null),Ht(),S(h.length?"list":"create"),X("")},li=()=>{ue&&(r1(ue),Ln([]),Gr(""),X(""))},Ys=async()=>{var U,A,Y,le,pe;if(!ue)return;const h=c.find(ne=>ne.id===ue);if(!h)return;const v=zt();if(!v.baseUrl||!v.model){X(" API ");return}const y=h.name,b=h.gender==="male"?"":h.gender==="female"?"":h.gender==="other"?"":"",x=lt.slice(-6).map(ne=>ne.from==="player"?ne.kind==="speech"?`${ne.text}`:`${ne.text}`:`${ne.text}`).join(`
`);Wl(!0),X(null);try{const ne=v.baseUrl.replace(/\/+$/,""),xe=ne.endsWith("/chat/completions")||ne.endsWith("/completions")?ne:ne+"/chat/completions",ve=await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json",...v.apiKey?{Authorization:`Bearer ${v.apiKey}`}:{}},body:JSON.stringify({model:v.model,temperature:.7,messages:[{role:"system",content:`
1
2
3//
4
5`},{role:"user",content:`${y}${b}
${x}

 3 `}]})});if(!ve.ok)throw new Error(` ${ve.status}`);const ge=await ve.json();let Ne=((Y=(A=(U=ge==null?void 0:ge.choices)==null?void 0:U[0])==null?void 0:A.message)==null?void 0:Y.content)??((pe=(le=ge==null?void 0:ge.choices)==null?void 0:le[0])==null?void 0:pe.text)??"";Ne=(Ne||"").trim();const B=Ne.split(`
`).map(ie=>ie.replace(/^\s*\d+[\.\)]\s*/,"").trim()).filter(ie=>ie.length>0).slice(0,3);Zo(B),wr(!0),B.length||X("")}catch(ne){X(`${ne.message}`)}finally{Wl(!1)}},ls=h=>{Gr(h),wr(!1),Zo([])},Mn=()=>{dn(h=>!h)},Js=h=>{const v=h.target.value;if(Kn(v),!v.trim())return;const y=Number(v);if(!(Number.isNaN(y)||y<=0)){Vn(y);try{window.localStorage.setItem("mini-ai-phone.story-length",String(y))}catch{}}},Vl=async()=>{var pe,ne,xe,ve,ge,Ne;if(!ue)return;const h=c.find(B=>B.id===ue);if(!h)return;const v=zt();if(!v.baseUrl||!v.model){X(" API ");return}const y=lt.slice(-6).map(B=>B.from==="player"?B.kind==="speech"?`${B.text}`:`${B.text}`:`${B.text}`).join(`
`),b=`${lt.length}:${((pe=lt[lt.length-1])==null?void 0:pe.text)??""}`;if(Nt.length&&es===b){$n(!0);return}const x=s1(ue);if(x&&x.key===b&&x.list.length){qr(x.list),kr(0),jr(b),$n(!0);return}Jn(!0),X(null);const U=Tn(),A={};x&&x.list.length?x.list.forEach(B=>{B.schedule&&B.schedule.length>0&&(A[B.name]=B.schedule)}):Nt.length&&Nt.forEach(B=>{B.schedule&&B.schedule.length>0&&(A[B.name]=B.schedule)});const Y=y&&(y.includes("")||y.includes("")||y.includes("")||y.includes("")||y.includes("")||y.includes("")||y.includes("")||y.includes("")||y.includes("")),le=Object.keys(A).length>0?`

****

${Object.entries(A).map(([B,ie])=>`${B}${ie.join("")}`).join(`
`)}

${Y?"":"****"}`:"";try{const B=v.baseUrl.replace(/\/+$/,""),ie=B.endsWith("/chat/completions")||B.endsWith("/completions")?B:B+"/chat/completions",he=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json",...v.apiKey?{Authorization:`Bearer ${v.apiKey}`}:{}},body:JSON.stringify({model:v.model,temperature:.4,messages:[{role:"system",content:`"" JSON 
[
  {
    "name": "",
    "time": "21:35 ",
    "clothing": "",
    "mood": "",
    "action": "",
    "innerVoice": "",
    "schedule": ["8:00-9:00  ", "10:00-12:00  "]
  }, ...]

1 NPC
2****NPC
3 schedule """8:00-9:00  "
4
5innerVoice "/"
6**schedule**
   - 
   - 
   - """"""""""
   - 
7 JSON`},{role:"user",content:`${h.name}${U.name?`"${U.name}"****NPC`:""}
${y||""}${le}
 JSON NPC`}]})});if(!he.ok)throw new Error(` ${he.status}`);const G=await he.json();let ye=((ve=(xe=(ne=G==null?void 0:G.choices)==null?void 0:ne[0])==null?void 0:xe.message)==null?void 0:ve.content)??((Ne=(ge=G==null?void 0:G.choices)==null?void 0:ge[0])==null?void 0:Ne.text)??"";ye=(ye||"").trim();let be=null;try{const Se=JSON.parse(ye);if(Array.isArray(Se)){const Ie=Tn();be=Se.map(_e=>({name:String(_e.name??h.name),time:_e.time!==void 0?String(_e.time):"",clothing:String(_e.clothing??""),mood:String(_e.mood??""),action:String(_e.action??""),innerVoice:String(_e.innerVoice??""),schedule:Array.isArray(_e.schedule)?_e.schedule.map(Ke=>String(Ke)):[]})).filter(_e=>{const Ke=_e.name.trim();return!(Ie.name&&Ke===Ie.name.trim()||Ke.includes("")||Ke.includes("Player")||Ke.toLowerCase().includes("player")||Ke===""||Ke===""||Ke==="")})}}catch{be=null}if(!be||!be.length){X("");return}Object.keys(A).length>0&&!Y&&(be=be.map(Se=>{const Ie=A[Se.name];if(Ie&&Ie.length>0){const _e=Se.schedule.join("|").toLowerCase(),Ke=Ie.join("|").toLowerCase();if(i1(_e,Ke)<.5)return{...Se,schedule:Ie}}return Se})),qr(be),kr(0),jr(b),o1(ue,b,be),$n(!0)}catch(B){X(`${B.message}`)}finally{Jn(!1)}},ai=()=>{if(!c.length){X("");return}try{const h=JSON.stringify(c,null,2),v=new Blob([h],{type:"application/json"}),y=URL.createObjectURL(v),b=document.createElement("a");b.href=y,b.download="offline-story-roles.json",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y),X("offline-story-roles.json")}catch{X("")}},Er=()=>{var h;(h=Xo.current)==null||h.click()},Kt=h=>{var b;const v=(b=h.target.files)==null?void 0:b[0];if(!v)return;const y=new FileReader;y.onload=()=>{try{const x=typeof y.result=="string"?y.result:"";if(!x)throw new Error("");const U=JSON.parse(x);if(!Array.isArray(U))throw new Error("");const A=U;u(A),Ca(A),S("list"),X("")}catch(x){X(`${x.message}`)}finally{h.target.value=""}},y.readAsText(v,"utf-8")};if(c.length===0&&p!=="identity"&&p!=="appearance")return r.jsx("div",{className:"story-app",children:r.jsxs("div",{className:"story-form",style:{padding:"40px 20px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"18px",fontWeight:"500",marginBottom:"12px",color:"#333"},children:""}),r.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"24px",lineHeight:"1.6"},children:""}),n&&r.jsx("button",{type:"button",className:"story-btn primary",onClick:n,style:{padding:"12px 24px",fontSize:"16px"},children:""})]})});if(p==="identity")return r.jsx("div",{className:"story-app",children:r.jsxs("div",{className:"story-form",children:[!qe&&r.jsxs("div",{className:"story-top-tabs",children:[r.jsx("button",{type:"button",className:`story-top-tab ${p==="create"?"active":""}`,onClick:()=>S("create"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="identity"?"active":""}`,onClick:()=>S("identity"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="appearance"?"active":""}`,onClick:()=>S("appearance"),children:""})]}),r.jsx("div",{className:"story-form-header-row",children:r.jsx("div",{className:"story-form-header",children:""})}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("input",{className:"story-input",placeholder:"",value:ce.name,onChange:h=>Cr("name",h.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-gender-row",children:[r.jsx("button",{type:"button",className:`story-gender-btn ${ce.gender==="male"?"active":""}`,onClick:()=>Cr("gender","male"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${ce.gender==="female"?"active":""}`,onClick:()=>Cr("gender","female"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${ce.gender==="other"?"active":""}`,onClick:()=>Cr("gender","other"),children:" / "})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:"",value:ce.intro,onChange:h=>Cr("intro",h.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:oi,children:"AI "})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("p",{className:"story-tip",children:" / "}),me.map(h=>{const v=ft.includes(h.id);return r.jsxs("div",{className:"story-worldbook-card",children:[r.jsxs("div",{className:"story-worldbook-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:h.name,onChange:y=>si(h.id,y.target.value)}),r.jsxs("div",{className:"story-worldbook-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>Ae(y=>y.includes(h.id)?y.filter(b=>b!==h.id):[...y,h.id]),children:v?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&(Pe(y=>y.filter(b=>b.id!==h.id)),Ae(y=>y.filter(b=>b!==h.id)))},children:""})]})]}),v&&r.jsxs(r.Fragment,{children:[h.entries.map(y=>{const b=Pt.includes(y.id);return r.jsxs("div",{className:"story-entry",children:[r.jsxs("div",{className:"story-entry-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:y.title,onChange:x=>Ir(h.id,y.id,"title",x.target.value)}),r.jsxs("div",{className:"story-entry-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>en(x=>x.includes(y.id)?x.filter(U=>U!==y.id):[...x,y.id]),children:b?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&Pe(x=>x.map(U=>U.id===h.id?{...U,entries:U.entries.filter(A=>A.id!==y.id)}:U))},children:""})]})]}),b&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:" /  / ",value:y.keyword??"",onChange:x=>Ir(h.id,y.id,"keyword",x.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:()=>Bl(h.id,y.id,y.keyword,y.title),children:"AI "})]}),r.jsx("textarea",{className:"story-textarea",placeholder:"",value:y.content,onChange:x=>Ir(h.id,y.id,"content",x.target.value)})]})]},y.id)}),r.jsx("button",{type:"button",className:"story-add-entry",onClick:()=>ss(h.id),children:"+ "})]})]},h.id)}),r.jsx("button",{type:"button",className:"story-add-worldbook",onClick:ri,children:"+ "})]}),r.jsxs("div",{className:"story-actions",children:[r.jsx("button",{type:"button",className:"story-btn primary",onClick:rs,children:""}),!qe&&r.jsx("button",{type:"button",className:"story-btn",onClick:()=>S(c.length?"list":"create"),children:" / "})]}),it&&r.jsx("div",{className:"story-message",children:it})]})});if(p==="appearance")return r.jsx("div",{className:"story-app",children:r.jsxs("div",{className:"story-form",children:[r.jsxs("div",{className:"story-top-tabs",children:[r.jsx("button",{type:"button",className:`story-top-tab ${p==="create"?"active":""}`,onClick:()=>S("create"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="identity"?"active":""}`,onClick:()=>S("identity"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="appearance"?"active":""}`,onClick:()=>S("appearance"),children:""})]}),r.jsx("div",{className:"story-form-header-row",children:r.jsx("div",{className:"story-form-header",children:""})}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-avatar-row",children:[r.jsx("div",{className:"story-avatar-preview",style:{backgroundImage:At.backgroundImage?`url(${At.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:!At.backgroundImage&&r.jsx("span",{children:""})}),r.jsxs("div",{className:"story-avatar-actions",children:[r.jsx("input",{type:"file",accept:"image/*",ref:Tl,style:{display:"none"},onChange:h=>{var v;return Vt(((v=h.target.files)==null?void 0:v[0])??null)}}),r.jsx("button",{type:"button",className:"story-btn small",onClick:()=>{var h;return(h=Tl.current)==null?void 0:h.click()},children:""}),r.jsx("input",{className:"story-input",placeholder:" URL",value:At.backgroundImage||"",onChange:h=>br("backgroundImage",h.target.value)}),At.backgroundImage&&r.jsx("button",{type:"button",className:"story-btn small danger",onClick:()=>br("backgroundImage",""),children:""})]})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("select",{className:"story-input",value:At.fontFamily||"",onChange:h=>br("fontFamily",h.target.value),children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"'Microsoft YaHei', '', sans-serif",children:""}),r.jsx("option",{value:"'SimSun', '', serif",children:""}),r.jsx("option",{value:"'SimHei', '', sans-serif",children:""}),r.jsx("option",{value:"'KaiTi', '', serif",children:""}),r.jsx("option",{value:"'FangSong', '', serif",children:""}),r.jsx("option",{value:"'Arial', sans-serif",children:"Arial"}),r.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"}),r.jsx("option",{value:"'Courier New', monospace",children:"Courier New"}),r.jsx("option",{value:"'Georgia', serif",children:"Georgia"}),r.jsx("option",{value:"'Verdana', sans-serif",children:"Verdana"})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("input",{className:"story-input",type:"number",min:"10",max:"24",value:At.fontSize||14,onChange:h=>br("fontSize",Number(h.target.value)),style:{width:"100px"}}),r.jsx("span",{children:"px10-24"})]})]}),r.jsxs("div",{className:"story-actions",children:[r.jsx("button",{type:"button",className:"story-btn primary",onClick:Ks,children:""}),r.jsx("button",{type:"button",className:"story-btn",onClick:()=>S(c.length?"list":"create"),children:" / "})]}),it&&r.jsx("div",{className:"story-message",children:it})]})});if(p==="create"||p==="edit")return r.jsx("div",{className:"story-app",children:r.jsxs("div",{className:"story-form",children:[r.jsxs("div",{className:"story-top-tabs",children:[r.jsx("button",{type:"button",className:`story-top-tab ${p==="create"?"active":""}`,onClick:()=>S("create"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="identity"?"active":""}`,onClick:()=>S("identity"),children:""}),r.jsx("button",{type:"button",className:`story-top-tab ${p==="appearance"?"active":""}`,onClick:()=>S("appearance"),children:""})]}),r.jsxs("div",{className:"story-form-header-row",children:[r.jsx("div",{className:"story-form-header",children:p==="edit"?"":""}),r.jsxs("div",{className:"story-list-actions",children:[p==="edit"&&r.jsx("button",{type:"button",className:"story-btn small",onClick:li,children:""}),r.jsx("button",{type:"button",className:"story-btn small",onClick:Er,children:""}),r.jsx("button",{type:"button",className:"story-btn small",onClick:ai,children:""})]})]}),r.jsx("input",{ref:Xo,type:"file",accept:"application/json",style:{display:"none"},onChange:Kt}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-avatar-row",children:[r.jsx("div",{className:"story-avatar-preview",children:O?r.jsx("img",{src:O,alt:"avatar"}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"story-avatar-actions",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:h=>{var v;return pt(((v=h.target.files)==null?void 0:v[0])??null)}}),r.jsx("input",{className:"story-input",placeholder:" URL",value:O,onChange:h=>H(h.target.value)})]})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-name-row",children:[r.jsx("input",{className:"story-input",placeholder:"",value:E,onChange:h=>N(h.target.value)}),r.jsx("button",{type:"button",className:"story-name-dice",onClick:()=>{N(ei())},children:""})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("input",{className:"story-input",type:"number",min:0,placeholder:"18",value:R,onChange:h=>ee(h.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:" /  / ",value:g,onChange:h=>P(h.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:Dl,children:"AI "})]}),r.jsx("textarea",{className:"story-textarea",placeholder:" XX ",value:w,onChange:h=>f(h.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-gender-row",children:[r.jsx("button",{type:"button",className:`story-gender-btn ${M==="male"?"active":""}`,onClick:()=>T("male"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${M==="female"?"active":""}`,onClick:()=>T("female"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${M==="other"?"active":""}`,onClick:()=>T("other"),children:""})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("input",{className:"story-input",placeholder:"101381234567",value:Le,onChange:h=>{const v=h.target.value.replace(/\D/g,"").slice(0,10);fe(v)}}),r.jsx("input",{className:"story-input",placeholder:"wxid_abc123",value:Qe,onChange:h=>Mt(h.target.value)})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("p",{className:"story-tip",children:" / "}),V.map(h=>{const v=jt.includes(h.id);return r.jsxs("div",{className:"story-worldbook-card",children:[r.jsxs("div",{className:"story-worldbook-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:h.name,onChange:y=>Sr(h.id,y.target.value)}),r.jsxs("div",{className:"story-worldbook-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>F(y=>y.includes(h.id)?y.filter(b=>b!==h.id):[...y,h.id]),children:v?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&(K(y=>y.filter(b=>b.id!==h.id)),F(y=>y.filter(b=>b!==h.id)))},children:""})]})]}),v&&r.jsxs(r.Fragment,{children:[h.entries.map(y=>{const b=ae.includes(y.id);return r.jsxs("div",{className:"story-entry",children:[r.jsxs("div",{className:"story-entry-header",children:[r.jsx("input",{className:"story-input",placeholder:" / ",value:y.title,onChange:x=>Rn(h.id,y.id,"title",x.target.value)}),r.jsxs("div",{className:"story-entry-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>oe(x=>x.includes(y.id)?x.filter(U=>U!==y.id):[...x,y.id]),children:b?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&K(x=>x.map(U=>U.id===h.id?{...U,entries:U.entries.filter(A=>A.id!==y.id)}:U))},children:""})]})]}),b&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:" /  / ",value:y.keyword??"",onChange:x=>Rn(h.id,y.id,"keyword",x.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:()=>ti(h.id,y.id,y.keyword,y.title),children:"AI "})]}),r.jsx("textarea",{className:"story-textarea",placeholder:"",value:y.content,onChange:x=>Rn(h.id,y.id,"content",x.target.value)})]})]},y.id)}),r.jsx("button",{type:"button",className:"story-add-entry",onClick:()=>Fl(h.id),children:"+ "})]})]},h.id)}),r.jsx("button",{type:"button",className:"story-add-worldbook",onClick:Ul,children:"+ "})]}),r.jsxs("div",{className:"story-actions",children:[r.jsx("button",{type:"button",className:"story-btn primary",onClick:ni,children:p==="edit"?"":""}),p==="edit"&&r.jsx("button",{type:"button",className:"story-btn danger",onClick:Hl,children:""})]}),it&&r.jsx("div",{className:"story-message",children:it})]})});if(p==="read"&&ue){const h=c.find(v=>v.id===ue);if(!h)S("list");else{const v=ba(),y={backgroundImage:v.backgroundImage?`url(${v.backgroundImage})`:void 0,backgroundSize:v.backgroundImage?"cover":void 0,backgroundPosition:v.backgroundImage?"center":void 0,backgroundRepeat:v.backgroundImage?"no-repeat":void 0};v.fontFamily&&(y["--story-font-family"]=v.fontFamily),v.fontSize&&(y["--story-font-size"]=`${v.fontSize}px`);const b=zr(ue),x=Di(b.value),U=vo(x);return r.jsxs("div",{className:"story-app",style:{paddingBottom:"200px"},children:[r.jsxs("div",{className:"story-read",style:y,children:[h.opening&&r.jsx("div",{className:"story-read-opening",children:h.opening}),lt.length>0&&r.jsx("div",{className:"story-read-section",children:lt.map((A,Y)=>r.jsxs("div",{className:`story-read-entry ${A.from==="player"?"story-read-entry-player":"story-read-entry-narrator"}`,children:[r.jsx("div",{className:"story-read-entry-title",children:A.from==="player"?"":""}),r.jsx("div",{className:"story-read-entry-content",children:A.text})]},Y))})]}),Ol&&Ds.length>0&&r.jsx("div",{className:"story-read-quick-overlay",children:r.jsxs("div",{className:"story-read-quick-panel",children:[r.jsxs("div",{className:"story-read-quick-header",children:[r.jsx("span",{children:""}),r.jsx("button",{type:"button",className:"story-read-quick-close",onClick:()=>{wr(!1),Zo([])},children:""})]}),r.jsx("div",{className:"story-read-quick-list",children:Ds.map(A=>r.jsx("button",{type:"button",className:"story-read-quick-item",onClick:()=>ls(A),children:A},A))})]})}),Yn&&Nt.length>0&&r.jsx("div",{className:"story-read-status-overlay",children:r.jsxs("div",{className:"story-read-status-panel",children:[r.jsxs("div",{className:"story-read-status-header",children:[r.jsx("div",{className:"story-read-status-tabs",children:Nt.map((A,Y)=>r.jsx("button",{type:"button",className:`story-read-status-tab ${Y===at?"active":""}`,onClick:()=>kr(Y),children:A.name},`${A.name}-${Y}`))}),r.jsx("button",{type:"button",className:"story-read-status-close",onClick:()=>$n(!1),children:""})]}),Nt[at]&&r.jsxs("div",{className:"story-read-status-body",children:[r.jsxs("div",{className:"story-read-status-row",children:[r.jsx("span",{className:"story-read-status-label",children:""}),r.jsx("span",{className:"story-read-status-value",children:Nt[at].time||""})]}),r.jsxs("div",{className:"story-read-status-row",children:[r.jsx("span",{className:"story-read-status-label",children:""}),r.jsx("span",{className:"story-read-status-value",children:Nt[at].clothing||""})]}),r.jsxs("div",{className:"story-read-status-row",children:[r.jsx("span",{className:"story-read-status-label",children:""}),r.jsx("span",{className:"story-read-status-value",children:Nt[at].mood||""})]}),r.jsxs("div",{className:"story-read-status-row",children:[r.jsx("span",{className:"story-read-status-label",children:""}),r.jsx("span",{className:"story-read-status-value",children:Nt[at].action||""})]}),r.jsxs("div",{className:"story-read-status-block",children:[r.jsx("div",{className:"story-read-status-label",children:""}),r.jsx("div",{className:"story-read-status-inner",children:Nt[at].innerVoice||""})]}),r.jsxs("div",{className:"story-read-status-block",children:[r.jsx("div",{className:"story-read-status-label",children:""}),r.jsx("div",{className:"story-read-status-schedule",children:(Nt[at].schedule||[]).length?Nt[at].schedule.map((A,Y)=>r.jsx("div",{className:"story-read-status-schedule-item",children:A},Y)):""})]})]})]})}),r.jsxs("div",{className:"story-read-input-bar",children:[r.jsxs("div",{className:"story-read-favor-info",style:{padding:"8px 12px",marginBottom:"8px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",fontSize:"13px",color:"#666"},children:[r.jsx("span",{style:{marginRight:"8px"},children:""}),r.jsxs("span",{style:{fontWeight:"bold",color:"#333"},children:[b.value,"/100"]}),r.jsxs("span",{style:{marginLeft:"8px",color:"#888"},children:["(",U,")"]})]}),r.jsxs("div",{className:"story-read-tools",children:[r.jsx("button",{type:"button",className:"story-read-tool-btn",disabled:_l||jn,onClick:Ys,children:_l?"":"3 "}),r.jsx("button",{type:"button",className:"story-read-tool-btn",disabled:Dt||jn,onClick:Vl,children:Dt?"":""}),r.jsx("button",{type:"button",className:"story-read-tool-btn",disabled:jn||lt.length===0||((ci=lt[lt.length-1])==null?void 0:ci.from)!=="narrator",onClick:is,children:jn?"":""}),r.jsx("button",{type:"button",className:"story-read-tool-btn",onClick:Mn,children:""})]}),ze&&r.jsxs("div",{className:"story-read-length-row",children:[r.jsx("span",{className:"story-read-length-label",children:""}),r.jsx("input",{type:"number",className:"story-read-length-input",min:40,max:800,value:qo,onChange:Js}),r.jsx("span",{className:"story-read-length-unit",children:""})]}),Ds.length>0&&r.jsx("div",{className:"story-read-suggestions",children:Ds.map(A=>r.jsx("button",{type:"button",className:"story-read-suggestion",onClick:()=>ls(A),children:A},A))}),r.jsxs("div",{className:"story-read-input-inner",children:[r.jsx("textarea",{className:"story-read-input",placeholder:"",value:zl,onChange:A=>Gr(A.target.value),rows:2}),r.jsx("button",{type:"button",className:"story-read-send",disabled:jn,onClick:Su,children:jn?"":""})]})]})]})}}return r.jsx("div",{className:"story-app",children:r.jsxs("div",{className:"story-list",children:[r.jsxs("div",{className:"story-list-header",children:[r.jsx("span",{children:""}),r.jsxs("div",{className:"story-list-actions",children:[r.jsx("button",{type:"button",className:"story-btn small",onClick:Er,children:""}),r.jsx("button",{type:"button",className:"story-btn small",onClick:ai,children:""}),r.jsx("button",{type:"button",className:"story-btn small",onClick:()=>S("create"),children:"+ "})]})]}),r.jsx("input",{ref:Xo,type:"file",accept:"application/json",style:{display:"none"},onChange:Kt}),it&&r.jsx("div",{className:"story-message",children:it}),c.map(h=>r.jsxs("div",{className:"story-role-card",onClick:()=>ii(h.id),children:[r.jsx("div",{className:"story-role-avatar",children:h.avatarUrl?r.jsx("img",{src:h.avatarUrl,alt:h.name}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"story-role-main",children:[r.jsx("div",{className:"story-role-name",children:h.name}),r.jsxs("div",{className:"story-role-meta",children:[h.gender==="male"&&"",h.gender==="female"&&"",h.gender==="other"&&"",!h.gender&&"",typeof h.age=="number"&&h.age>0&&`  ${h.age} `,"   ",h.worldbooks.length," "]})]})]},h.id))]})})},Lh="mini-ai-phone.story-roles",Gd=new URL(""+new URL("-BqGEj7Sy.png",import.meta.url).href,import.meta.url).toString(),Xd=new URL(""+new URL("-Bv-H917O.png",import.meta.url).href,import.meta.url).toString(),d1="mini-ai-phone.api-config",ds=()=>{try{const e=window.localStorage.getItem(d1);if(!e)return{baseUrl:"",apiKey:"",model:""};const t=JSON.parse(e);return{baseUrl:t.baseUrl??"",apiKey:t.apiKey??"",model:t.model??""}}catch{return{baseUrl:"",apiKey:"",model:""}}},It=()=>{try{const e=window.localStorage.getItem(Lh);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},f1=e=>{try{window.localStorage.setItem(Lh,JSON.stringify(e))}catch{}},fs=()=>`${Date.now()}-${Math.random().toString(16).slice(2)}`,Zd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],qd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p1=()=>{const e=Zd[Math.floor(Math.random()*Zd.length)],t=1+Math.floor(Math.random()*3);let n="";for(let s=0;s<t;s+=1)n+=qd[Math.floor(Math.random()*qd.length)];return e+n},ef=e=>{try{const t=window.localStorage.getItem(`mini-ai-phone.chat-${e}`);if(!t)return[];const n=JSON.parse(t);return Array.isArray(n)?n:[]}catch{return[]}},ku="mini-ai-phone.wechat-contacts",mn=()=>{try{const e=window.localStorage.getItem(ku);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},Ia=e=>{try{const t=mn(),n=t.findIndex(s=>s.roleId===e.roleId);n>=0?t[n]=e:t.push(e),window.localStorage.setItem(ku,JSON.stringify(t))}catch(t){console.error(":",t)}},Hi=()=>{const e=mn(),t=It(),n=e.map(s=>{const o=t.find(i=>i.id===s.roleId);return o?{id:`chat-${s.roleId}`,name:s.remark||o.wechatNickname||o.name,avatarText:o.name.charAt(0),avatarUrl:o.avatarUrl,lastMessage:"",time:"",unread:0,roleId:s.roleId}:null}).filter(Boolean);return[{id:"chat-ai",name:"AI ",avatarText:"AI",avatarUrl:void 0,lastMessage:"",time:"",unread:0},{id:"chat-notes",name:"",avatarText:"",avatarUrl:void 0,lastMessage:"",time:"",unread:0},...n]};Hi();const ju=[{key:"",name:"",src:new URL(""+new URL("-h1FIunTx.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-CZLssBiY.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-EEAvRzYF.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-B_qzs-iu.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-B7Y0kfA9.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-DanHYq8_.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-CatXsxUM.png",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-Dve08qYn.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-Cxy1gwER.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-DJpkeGYt.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-CIY9Gzpe.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-vpJpzJVg.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-CN1Eb5F0.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-CSGuSDiB.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-C810AaqE.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-ByI6kMBH.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-BqEL7jKl.jpg",import.meta.url).href,import.meta.url).href},{key:"2",name:"2",src:new URL(""+new URL("2-vxshpAKV.jpg",import.meta.url).href,import.meta.url).href},{key:"3",name:"3",src:new URL(""+new URL("3-BVbUDMLQ.jpg",import.meta.url).href,import.meta.url).href},{key:"4",name:"4",src:new URL(""+new URL("4-CeQk2CXH.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-B5EUaB9j.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-BPsos-Jt.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-BkdZbsFl.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-Dw6UNtfl.jpg",import.meta.url).href,import.meta.url).href},{key:"",name:"",src:new URL(""+new URL("-B7Ok8xw6.jpg",import.meta.url).href,import.meta.url).href},{key:"...",name:"...",src:new URL(""+new URL("...-U9NL9EnX.jpg",import.meta.url).href,import.meta.url).href}],tf=ju.map(e=>`- ${e.name}`).join(`
`),$h="mini-ai-phone.chat-settings-",h1=e=>{if(!e)return{};try{const t=window.localStorage.getItem(`${$h}${e}`);if(!t)return{};const n=JSON.parse(t);return n&&typeof n=="object"?n:{}}catch{return{}}},nf=(e,t)=>{if(e)try{window.localStorage.setItem(`${$h}${e}`,JSON.stringify(t))}catch{}},Vi=e=>{if(e)return ju.find(t=>t.name===e||t.key===e)},Nu="mini-ai-phone.chat-messages-",Os="mini-ai-phone.chat-memories-",m1="mini-ai-phone.chat-memories-counter-",Rh="mini-ai-phone.wechat-memory-settings",ct=e=>{try{const t=window.localStorage.getItem(`${Nu}${e}`);if(!t)return[];const n=JSON.parse(t);return Array.isArray(n)?n.map(o=>{if(!o||typeof o.text!="string"||o.emojiName)return o;const i=o.text.match(/^[\[][\]]\s*(.+)$/u)||o.text.match(/^[\[][\]]\s*([^,.!?\s]+(?:[(][^)]*[)])?)/u);if(!i)return o;let l=i[1].trim();const c=[l],u=l.replace(/[^]*$/u,"").trim();u&&u!==l&&c.push(u);let p;for(const S of c)if(p=Vi(S),p){l=p.name;break}return p?{...o,text:`[] ${l}`,emojiName:l}:o}):[]}catch{return[]}},rf=e=>{const t=ct(e);if(!t.length)return{lastMessage:"",time:""};const n=t.filter(l=>l.from==="self"||l.from==="other"),s=n.length?n:t,o=s[s.length-1];let i=o.text||"";return o.voiceDuration&&(i=`[] ${o.voiceDuration}`),o.emojiName&&(i="[]"),{lastMessage:i,time:o.time}},rn=(e,t)=>{try{window.localStorage.setItem(`${Nu}${e}`,JSON.stringify(t))}catch(n){console.error(":",n)}},Mh=e=>{try{const t=window.localStorage.getItem(`${Os}${e}`);if(!t)return[];const n=JSON.parse(t);return Array.isArray(n)?n:[]}catch{return[]}},g1=(e,t)=>{try{window.localStorage.setItem(`${Os}${e}`,JSON.stringify(t))}catch(n){console.error(":",n)}},y1=(e,t,n)=>{if(!n||n.length===0)return;const s=t.wechatNickname||t.name||"",i=n.slice(-20).filter(M=>typeof M.text=="string"&&M.text.trim().length>0).map(M=>{const T=M.text.trim();return M.from==="self"?`${T}`:M.from==="other"?`${s}${T}`:`${T}`});if(!i.length)return;let l=i.join(`
`);const c=400;l.length>c&&(l=l.slice(0,c)+"");const u=new Date,p=u.toLocaleString("zh-CN",{hour12:!1}),S={id:`mem-${u.getTime()}-${Math.random().toString(16).slice(2)}`,chatId:e,roleId:t.id,roleName:s,title:`${s}`,summary:l,createdAt:p,updatedAt:p},E=Mh(e);E.push(S);const N=E.slice(-20);g1(e,N)},Ea=()=>{const e=[];try{const t=window.localStorage,n=t.length;for(let s=0;s<n;s++){const o=t.key(s);if(!o||!o.startsWith(Os))continue;const i=o.slice(Os.length),l=t.getItem(o);if(!l)continue;let c=null;try{const p=JSON.parse(l);Array.isArray(p)&&(c=p)}catch{}if(!c||c.length===0)continue;const u=c[c.length-1];e.push({chatId:i,roleId:u.roleId,roleName:u.roleName,snapshotCount:c.length,lastUpdatedAt:u.updatedAt||u.createdAt})}}catch(t){console.error(":",t)}return e},x1=()=>{try{const e=window.localStorage,t=[],n=e.length;for(let s=0;s<n;s++){const o=e.key(s);o&&o.startsWith(Os)&&t.push(o)}t.forEach(s=>e.removeItem(s))}catch(e){console.error(":",e)}},v1=e=>{try{window.localStorage.removeItem(`${Os}${e}`)}catch(t){console.error(":",t)}},w1=e=>{try{const t=`${m1}${e}`,n=window.localStorage.getItem(t),o=(n&&parseInt(n,10)||0)+1;return window.localStorage.setItem(t,String(o)),o}catch{return 1}},k1=()=>{try{const e=window.localStorage.getItem(Rh);if(e){const t=JSON.parse(e),n=typeof t.summaryInterval=="number"&&t.summaryInterval>0?Math.floor(t.summaryInterval):3;return{autoSummaryEnabled:t.autoSummaryEnabled??!0,summaryInterval:n}}}catch{}return{autoSummaryEnabled:!0,summaryInterval:3}},j1=e=>{try{const t={autoSummaryEnabled:!!e.autoSummaryEnabled,summaryInterval:Math.max(1,Math.floor(e.summaryInterval||3))};window.localStorage.setItem(Rh,JSON.stringify(t))}catch{}},N1=(e,t,n)=>{const s=`chat-${e}`,o=ct(s);console.log("[WeChatApp] :",o.length,"chatId:",s);const i=o.some(c=>c.from==="system"&&c.text.includes("")),l=o.filter(c=>!(c.from==="self"&&(c.id.startsWith("greeting-")||c.text===n)));if(i)l.length!==o.length&&(rn(s,l),console.log("[WeChatApp] :",o.length,":",l.length));else{const c={id:`system-${Date.now()}`,from:"system",text:`${t}`,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),greeting:n};l.push(c),rn(s,l),console.log("[WeChatApp] :",l.length,":",l.map(u=>({from:u.from,text:u.text})))}},S1=[],Ph="mini-ai-phone.story-identity",C1="mini-ai-phone.player-identity",Sc="mini-ai-phone.wechat-role-identity-per-role",Ah="mini-ai-phone.wechat-self-profile",tr=()=>{try{const e=window.localStorage.getItem(Ph);if(e){const t=JSON.parse(e),n=t.name??t.nickname??"";return{name:n??"",gender:t.gender??"",intro:t.intro??"",tags:t.tags??"",worldbooks:t.worldbooks??[],phoneNumber:t.phoneNumber??void 0,wechatId:t.wechatId??void 0,wechatNickname:t.wechatNickname??n??""}}}catch{}try{const e=window.localStorage.getItem(C1);if(e){const t=JSON.parse(e),n=t.name??"";return{name:n,gender:"",intro:"",tags:"",worldbooks:[],phoneNumber:void 0,wechatId:void 0,wechatNickname:t.wechatNickname??n}}}catch{}return{name:"",gender:"",intro:"",tags:"",worldbooks:[],phoneNumber:void 0,wechatId:void 0,wechatNickname:""}},b1=()=>{try{const t=window.localStorage.getItem(Ah);if(t){const n=JSON.parse(t);return{nickname:n.nickname??"",gender:n.gender??"",region:n.region??"",wechatId:n.wechatId,pokeText:n.pokeText,intro:n.intro??"",avatarUrl:n.avatarUrl,avatarDesc:n.avatarDesc??""}}}catch{}const e=tr();return{nickname:e.wechatNickname||e.name||"",gender:e.gender||"",region:e.wechatRegion||"",wechatId:e.wechatId,pokeText:e.pokeText||"",intro:e.intro||"",avatarUrl:e.wechatAvatar||void 0,avatarDesc:""}},sf=e=>{var t,n,s,o,i,l,c,u;try{const p={...e,nickname:e.nickname.trim()||"",region:e.region.trim(),intro:((n=(t=e.intro)==null?void 0:t.trim)==null?void 0:n.call(t))||"",pokeText:((o=(s=e.pokeText)==null?void 0:s.trim)==null?void 0:o.call(s))||void 0,wechatId:((l=(i=e.wechatId)==null?void 0:i.trim)==null?void 0:l.call(i))||void 0,avatarDesc:((u=(c=e.avatarDesc)==null?void 0:c.trim)==null?void 0:u.call(c))||""};window.localStorage.setItem(Ah,JSON.stringify(p))}catch{}},I1=e=>{var t,n;try{const s={...e,name:e.name.trim(),intro:e.intro.trim(),tags:e.tags.trim(),phoneNumber:((t=e.phoneNumber)==null?void 0:t.trim())||void 0,wechatId:((n=e.wechatId)==null?void 0:n.trim())||void 0};window.localStorage.setItem(Ph,JSON.stringify(s))}catch{}},of=e=>{const t=tr();if(!e)return t;try{const n=window.localStorage.getItem(Sc);if(!n)return t;const s=JSON.parse(n);if(!s||typeof s!="object")return t;const o=s[e];return o?{...t,...o,worldbooks:o.worldbooks??t.worldbooks??[],wechatNickname:o.wechatNickname??o.name??t.wechatNickname??t.name}:t}catch{return t}},E1=(e,t)=>{if(e)try{const n=window.localStorage.getItem(Sc),s=n?JSON.parse(n):{};s[e]=t,window.localStorage.setItem(Sc,JSON.stringify(s))}catch{}},L1=({onExit:e,onOpenApiSettings:t})=>{const[n,s]=j.useState(null),[o,i]=j.useState("chat"),[l,c]=j.useState(!1),[u,p]=j.useState(!1),[S,E]=j.useState("list"),[N,M]=j.useState(null),[T,R]=j.useState(""),[ee,w]=j.useState(""),[f,g]=j.useState(()=>b1()),[P,O]=j.useState([]),[H,V]=j.useState(()=>k1()),[K]=j.useState(()=>Qr()),[Le,fe]=j.useState(()=>Gy()),[Qe,Mt]=j.useState(!1),[it,X]=j.useState(null),[qe,Bt]=j.useState(null),[jt,F]=j.useState("list"),[ae,oe]=j.useState(!1),ce=j.useRef(null),$e=j.useRef(null),[me,Pe]=j.useState(""),[ft,Ae]=j.useState({});j.useEffect(()=>{o!=="story"&&l&&c(!1)},[o,l]),j.useEffect(()=>{o!=="me"&&u&&(p(!1),E("list"))},[o,u]),j.useEffect(()=>{o==="me"&&u&&S==="storage"&&O(Ea())},[o,u,S]),j.useEffect(()=>{j1(H)},[H]),j.useEffect(()=>{K&&Yy().then(a=>{a!==Le&&fe(a)}).catch(()=>{})},[K,Le]),j.useEffect(()=>{if(!qe)return;const a=window.setTimeout(()=>{Bt(null)},2500);return()=>{window.clearTimeout(a)}},[qe]);const Pt=j.useCallback(()=>{x1(),O(Ea())},[]),en=j.useCallback(a=>{v1(a),O(Ea())},[]),[At,Al]=j.useState(!1),[Tl,Xo]=j.useState(null),[ue,vr]=j.useState(""),[lt,Ln]=j.useState(""),[zl,Gr]=j.useState(""),[jn,Xr]=j.useState("all"),[Ds,Zo]=j.useState(!1),[_l,Wl]=j.useState(!1),[Zr,Vn]=j.useState(!1),[qo,Kn]=j.useState("role"),[ze,dn]=j.useState(()=>tr()),[Ol,wr]=j.useState([]),[Nt,qr]=j.useState([]),[Yn,$n]=j.useState(""),[Dt,Jn]=j.useState(""),[at,kr]=j.useState(""),[es,jr]=j.useState(""),[ei,Nr]=j.useState(""),[Hs,Vs]=j.useState(""),[ts,Ht]=j.useState([]),[Ul,Sr]=j.useState([]),[Fl,Rn]=j.useState([]),[ti,pt]=j.useState(null),[ns,ni]=j.useState(!1),Cr=j.useRef(null),[rs,br]=j.useState(()=>Hi().map(d=>{const{lastMessage:m,time:k}=rf(d.id);return{...d,lastMessage:d.lastMessage||m,time:d.time||k}})),[Ks,Vt]=j.useState(0),[ri,si]=j.useState(()=>{const a=mn(),d=It(),m={};return a.forEach(k=>{const L=d.find($=>$.id===k.roleId);if(L){const I=(k.remark||L.wechatNickname||L.name).charAt(0);let z;/[A-Za-z]/.test(I)?z=I.toUpperCase():/[\u4e00-\u9fa5]/.test(I)?z=I:z="#",m[z]||(m[z]=[]),m[z].push({contact:k,role:L})}}),Object.keys(m).forEach(k=>{m[k].sort((L,$)=>{const I=L.contact.remark||L.role.wechatNickname||L.role.name,z=$.contact.remark||$.role.wechatNickname||$.role.name;return I.localeCompare(z,"zh-CN")})}),Object.keys(m).sort((k,L)=>{if(k==="#")return 1;if(L==="#")return-1;const $=/[A-Z]/.test(k),I=/[A-Z]/.test(L);return $&&!I?-1:!$&&I?1:k.localeCompare(L,"zh-CN")}).map(k=>({letter:k,contacts:m[k]}))}),[ss,Ir]=j.useState(""),[Bl,oi]=j.useState(!1),[Dl,os]=j.useState(!1),[ht,fn]=j.useState("list"),[tn,is]=j.useState(null),[Su,ii]=j.useState(0),[Hl,li]=j.useState(!1),[Ys,ls]=j.useState(!1),[Mn,Js]=j.useState(""),[Vl,ai]=j.useState(null),[Er,Kt]=j.useState(!1),[ci,h]=j.useState(0),v=j.useCallback(()=>{$e.current&&setTimeout(()=>{if(!$e.current)return;const a=$e.current;a.scrollTop=a.scrollHeight},100)},[]),y=j.useCallback(()=>{_e(!1)},[]),b=()=>{if(!x)return;const a=Qn.trim(),d=Number(a);if(!a||Number.isNaN(d)){Tt("");return}const m=Math.round(d*100)/100;if(m<.01){Tt(" 0.01 ");return}if(m>200){Tt(" 200 ");return}const k=Zs.trim()||"",L=ct(x.id),$=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),I=Date.now(),z={id:`redpacket-${I}-${Math.random()}`,from:"self",text:`[] ${k}`,time:$,timestamp:I,redPacketAmount:m,redPacketNote:k};L.push(z),rn(x.id,L),Vt(C=>C+1),as(!1),Tt(null),v()};j.useEffect(()=>{const a=()=>{const I=mn(),z=It(),C={};I.forEach(D=>{const W=z.find(se=>se.id===D.roleId);if(W){const de=(D.remark||W.wechatNickname||W.name).charAt(0);let Z;/[A-Za-z]/.test(de)?Z=de.toUpperCase():/[\u4e00-\u9fa5]/.test(de)?Z=de:Z="#",C[Z]||(C[Z]=[]),C[Z].push({contact:D,role:W})}}),Object.keys(C).forEach(D=>{C[D].sort((W,se)=>{const de=W.contact.remark||W.role.wechatNickname||W.role.name,Z=se.contact.remark||se.role.wechatNickname||se.role.name;return de.localeCompare(Z,"zh-CN")})});const q=Object.keys(C).sort((D,W)=>{if(D==="#")return 1;if(W==="#")return-1;const se=/[A-Z]/.test(D),de=/[A-Z]/.test(W);return se&&!de?-1:!se&&de?1:D.localeCompare(W,"zh-CN")}).map(D=>({letter:D,contacts:C[D]}));si(q)},d=()=>{const I=Hi();br(I.map(z=>{const{lastMessage:C,time:q}=rf(z.id);return{...z,lastMessage:C,time:q}}))},m=()=>{d(),a()},k=I=>{const{roleId:z,roleName:C,greeting:q}=I.detail;console.log("[WeChatApp] :",{roleId:z,roleName:C,greeting:q}),N1(z,C,q),n===`chat-${z}`&&(console.log("[WeChatApp] "),d(),Vt(D=>D+1))},L=I=>{const{roleId:z,chatId:C}=I.detail;console.log("[WeChatApp] :",{roleId:z,chatId:C}),n===C&&(console.log("[WeChatApp] "),d(),Vt(q=>q+1))};window.addEventListener("storage",m),window.addEventListener("friend-request-accepted",k),window.addEventListener("wechat-messages-updated",L);const $=setInterval(()=>{d(),a()},1e3);return()=>{window.removeEventListener("storage",m),window.removeEventListener("friend-request-accepted",k),window.removeEventListener("wechat-messages-updated",L),clearInterval($)}},[n]),j.useEffect(()=>{n&&v()},[n,Ks,v]);const x=n==null?null:rs.find(a=>a.id===n)??null;j.useEffect(()=>{if(!x)return;const a="roleId"in x?x.roleId:null;if(!a||ct(x.id).length>0)return;const k=It().find(I=>I.id===a);if(!k||!k.opening||!k.opening.trim())return;const L=k.opening.split(`
`).map(I=>I.trim()).filter(I=>I.length>0);if(L.length===0)return;const $=L.map((I,z)=>({id:`opening-${Date.now()}-${z}`,from:"other",text:I,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}));rn(x.id,$),Vt(I=>I+1)},[x==null?void 0:x.id]);const[U,A]=j.useState(!1),Y=j.useRef(null),[le,pe]=j.useState(null),[ne,xe]=j.useState(()=>Date.now()),[ve,ge]=j.useState(null),[Ne,B]=j.useState(!1),[ie,he]=j.useState(!1),[G,ye]=j.useState(null),[be,Se]=j.useState(null),[Ie,_e]=j.useState(!1),[Ke,Qs]=j.useState({}),[Gs,nn]=j.useState(!1),[ui,as]=j.useState(!1),[Qn,Xs]=j.useState(""),[Zs,qs]=j.useState(""),[Ge,Tt]=j.useState(null),[Ye,St]=j.useState(null),[Nn,pn]=j.useState(!1),[Cu,di]=j.useState(!1),[Th,Kl]=j.useState(!1),[Lr,fi]=j.useState(null),[zh,eo]=j.useState(!1),to=j.useMemo(()=>{const a=Date.now(),d=[];return rs.forEach(m=>{const k=m;if(!k.roleId)return;ct(m.id).forEach($=>{if(typeof $.redPacketAmount!="number"||$.from!=="other")return;const I=$,z=typeof I.timestamp=="number"&&Number.isFinite(I.timestamp)?I.timestamp:a;d.push({id:$.id,amount:$.redPacketAmount,note:$.redPacketNote||"",timestamp:z,chatId:m.id,roleId:k.roleId,roleName:m.name,roleAvatarText:m.avatarText,roleAvatarUrl:m.avatarUrl})})}),d.sort((m,k)=>k.timestamp-m.timestamp),d},[rs,Ks]),Yt=j.useMemo(()=>{const a=new Set;return to.forEach(d=>{const m=new Date(d.timestamp).getFullYear();Number.isNaN(m)||a.add(m)}),a.size===0?[new Date().getFullYear()]:Array.from(a).sort((d,m)=>m-d)},[to]);j.useEffect(()=>{!Yt||Yt.length===0||(Lr===null||!Yt.includes(Lr))&&fi(Yt[0])},[Yt,Lr]);const _h=j.useMemo(()=>{const a=Lr==null?to:to.filter($=>new Date($.timestamp).getFullYear()===Lr),d=a.reduce(($,I)=>$+I.amount,0),m=a.length,k=a.reduce(($,I)=>I.amount>$?I.amount:$,0),L=k>0?a.filter($=>$.amount===k).length:0;return{records:a,totalAmount:d,totalCount:m,bestLuckCount:L}},[to,Lr]);j.useEffect(()=>{if(!le)return;xe(Date.now());const a=window.setInterval(()=>{xe(Date.now())},1e3);return()=>{window.clearInterval(a)}},[le]);const{records:bu,totalAmount:Wh,totalCount:Oh,bestLuckCount:Uh}=_h,Ct=(f.nickname||"").trim()||"",tt=f.avatarUrl||"",Pn=Ct.charAt(0)||"",$r=a=>{if(a==="gender"){M("gender"),R("");return}let d="",m="";switch(a){case"avatar":d=tt,m=f.avatarDesc||"";break;case"name":d=f.nickname||Ct;break;case"region":d=f.region||"";break;case"wechatId":d=f.wechatId||"";break;case"poke":d=f.pokeText||"";break;case"intro":d=f.intro||"";break;default:d=""}R(d),w(m),M(a)},Fh=()=>{if(!N||N==="gender")return;const a=T,d=N==="avatar"?a:a.trim();g(m=>{const k={...m};switch(N){case"avatar":k.avatarUrl=d||void 0,k.avatarDesc=ee.trim()||"";break;case"name":k.nickname=d||m.nickname||"";break;case"region":k.region=d;break;case"wechatId":k.wechatId=d||void 0;break;case"poke":k.pokeText=d||void 0;break;case"intro":k.intro=d;break}return sf(k),k}),M(null),R("")},Yl=a=>{g(d=>{const m={...d,gender:a};return sf(m),m}),M(null)},Bh=a=>{var k;const d=(k=a.target.files)==null?void 0:k[0];if(!d)return;const m=new FileReader;m.onload=()=>{typeof m.result=="string"&&R(m.result)},m.readAsDataURL(d),a.target.value=""},Dh=a=>{switch(a){case"name":return"";case"avatar":return"";case"region":return"";case"wechatId":return"";case"poke":return"";case"intro":return"";case"gender":return"";default:return""}},Jl=j.useMemo(()=>{if(!x)return!1;const a=ct(x.id);if(a.length===0)return!1;let d=-1;for(let m=a.length-1;m>=0;m--)if(a[m].from==="self"){d=m;break}if(d===-1)return!1;for(let m=d+1;m<a.length;m++)if(a[m].from==="other")return!1;return!0},[x==null?void 0:x.id,Ks]),Iu=(a,d=100)=>{if(a.length<=d)return[a];if(a.includes("")||a.includes("")||a.length>500)return[a];const m=[];let k=0;for(;k<a.length;){let L=k+d;if(L<a.length){const $=["","","","",".","!","?",",",`
`];let I=-1;for(let z=L-20;z<L&&z<a.length;z++)$.includes(a[z])&&(I=z);if(I>k)L=I+1;else{m.push(a.slice(k).trim());break}}m.push(a.slice(k,L).trim()),k=L}return m},Hh=async a=>{var D,W,se,de,Z;const d=ds();if(!d.baseUrl||!d.model)throw new Error("NO_API_CONFIG");const m=d.baseUrl.replace(/\/+$/,""),k=m.endsWith("/chat/completions")||m.endsWith("/completions")?m:m+"/chat/completions",L=`chat-${a.id}`,I=ct(L).slice(-12).map(te=>te.from==="self"?`${te.text}`:te.from==="other"?`${a.wechatNickname||a.name}${te.text}`:"").filter(Boolean).join(`
`),z=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json",...d.apiKey?{Authorization:`Bearer ${d.apiKey}`}:{}},body:JSON.stringify({model:d.model,temperature:.7,messages:[{role:"system",content:`
1234 5~25 5`},{role:"user",content:`
${I||""}

`}]})});if(!z.ok)throw new Error(` ${z.status}`);const C=await z.json();let q=((se=(W=(D=C==null?void 0:C.choices)==null?void 0:D[0])==null?void 0:W.message)==null?void 0:se.content)??((Z=(de=C==null?void 0:C.choices)==null?void 0:de[0])==null?void 0:Z.text)??"";if(!q)throw new Error("");return q=q.trim().replace(/^```[\s\S]*?\n/,"").replace(/\n?```$/,"").trim(),q=q.replace(/^["]+/,"").replace(/["]+$/,"").trim(),q},Vh=a=>a.replace(/[\u{1F300}-\u{1FAFF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{27BF}\u{FE0F}\u{1F90C}-\u{1F9FF}]/gu,""),Eu=(a,d=.25)=>{const m=/[\u{1F300}-\u{1FAFF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{27BF}\u{FE0F}\u{1F90C}-\u{1F9FF}]/gu,k=a.match(m)??[];if(k.length===0)return a;if(k.length>1)return a.replace(m,"").replace(/\s{2,}/g," ").trim();if(!(Math.random()<d))return a.replace(m,"").replace(/\s{2,}/g," ").trim();const $=a.replace(m,"").trim(),I=k[0]??"";return $?`${$}${I}`:I},Kh=j.useCallback((a,d)=>{if(!H.autoSummaryEnabled)return;const m=Math.max(1,Math.floor(H.summaryInterval||3));if(w1(a)%m!==0)return;const L=ct(a);if(!L.length)return;y1(a,d,L);const $=new Date().toLocaleTimeString("zh-CN",{hour12:!1});Bt({roleName:d.wechatNickname||d.name,createdAt:$})},[H.autoSummaryEnabled,H.summaryInterval]),Lu=async(a,d)=>{var Pu,Au,Tu,zu,_u;const m=ds();if(!m.baseUrl||!m.model)throw new Error("NO_API_CONFIG");const k=m.baseUrl.replace(/\/+$/,""),L=k.endsWith("/chat/completions")||k.endsWith("/completions")?k:k+"/chat/completions",$=ct(`chat-${d.id}`);let I=-1;for(let J=$.length-1;J>=0;J--)if($[J].from==="other"){I=J;break}const C=(I>=0?$.slice(0,I+1):$).slice(-10).map(J=>J.from==="self"?`${J.text}`:J.from==="other"?`${d.wechatNickname||d.name}${J.text}`:"").filter(Boolean).join(`
`),q=(d.worldbooks||[]).map(J=>{const nt=J.name||"",Gn=(J.entries||[]).filter(Xn=>Xn.title||Xn.content).map(Xn=>{const rt=Xn.title||"",Mr=Xn.content||"";return Mr?`${rt}${Mr}`:`${rt}`}).join(`
`)||"";return Gn?`${nt}
${Gn}`:""}).filter(J=>J.length>0).join(`

`)||"",D=of(d.id),W=D.name?`${D.name}${D.wechatNickname?`${D.wechatNickname}`:""}`:"",de=ef(d.id).slice(-6).map(J=>J.from==="player"?J.kind==="speech"?`${J.text}`:`${J.text}`:J.from==="narrator"?`${J.text}`:"").filter(Boolean).join(`
`),Z=f.gender==="male"?"":f.gender==="female"?"":"/",te=`${f.nickname||""}
${Z}
${f.region||""}
${f.wechatId||""}
${f.intro||""}
${f.avatarDesc||""}`,re=`chat-${d.id}`;let Re="";try{const J=Mh(re);J.length>0&&(Re=J.slice(-5).map((Gn,Xn)=>`${Xn+1}${Gn.createdAt}
${Gn.summary}`).join(`

`))}catch(J){console.warn("[WeChatApp] :",J)}const Ce=await fetch(L,{method:"POST",headers:{"Content-Type":"application/json",...m.apiKey?{Authorization:`Bearer ${m.apiKey}`}:{}},body:JSON.stringify({model:m.model,temperature:.7,messages:[{role:"system",content:`${d.wechatNickname||d.name}


- 
- **** / persona
-  TA 
- //
-  100% 

**AI**

****
1""""
2
3 120  50 
4 1 
5
   -  200 
   - 
   - /
6****
   - 
   - 
   - 
7****
   - 
   - /
   -  70%/
   - PUA
8****
9
10
   - "<<EMOJI:>>"EMOJI 
   - ""
${tf?`${tf}
`:""}   - 
     "<<EMOJI:>>"
     "<<EMOJI:>>"
   - "[] XXX"
11
   - 
   - 
   -  30%  1 
   - /
12"[] "/
13**/**
   - 
   - //
   - **** "[BUSY:3] "  3  3  110 
   - **** "[NO_REPLY]" "[NO_REPLY] "
   -  [BUSY]  [NO_REPLY]
   - ****  [BUSY]/[NO_REPLY]  /  / 
14****
   - "..."""""""
   - """""""""""666" 
   - emoji **** 0-1 
   - 
     """.""..." 
   - 
   - """"""""
   - 
   - "AI"""""""
12****
   - 
   - ".."""
   -  []
   - 
11"[NO_REPLY] + ""[NO_REPLY] "
12****
   - 
   - 
   - 
   - 

${q?`- 
${q}

`:""}${W?`
${W}

`:""}${te?`
${te}

`:""}${de?`
${de}

****

`:""}${Re?`
${Re}

`:""}
${C||""}

**AI**`},{role:"user",content:`${a.length}
${a.map((J,nt)=>`${nt+1}. ${J}`).join(`
`)}

${d.wechatNickname||d.name}

****
- /AI
- 
- 
- 
- //
- 
- """""""""""""""666" 
- "[] "/
-  120  1  50 
-  200 
- emoji  0-1 
- AI
- 
-  [NO_REPLY] [NO_REPLY] 
- ****
- **""""**`}]})});if(!Ce.ok)throw new Error(` ${Ce.status}`);const ke=await Ce.json();let we=((Tu=(Au=(Pu=ke==null?void 0:ke.choices)==null?void 0:Pu[0])==null?void 0:Au.message)==null?void 0:Tu.content)??((_u=(zu=ke==null?void 0:ke.choices)==null?void 0:zu[0])==null?void 0:_u.text)??"";if(!we)throw new Error("");const Te=we.trim();if(Te.startsWith("[NO_REPLY]")){const J=Te.replace(/^\[NO_REPLY\]\s*/u,"").trim()||"/";return{replies:[],noReplyReason:J}}let Fe=Te.split(/\n+/).map(J=>J.trim()).filter(J=>J.length>0);if(Fe.length===1&&Fe[0].length>100){const J=Fe[0].split(/[.!?]/).filter(nt=>nt.trim().length>0);J.length>1&&(Fe=J.map(nt=>nt.trim()+"").filter(nt=>nt.length>1))}const bt=$.filter(J=>J.from==="other").slice(-6).filter(J=>J.emojiName).length;let Mu=!1;const fm=Fe.map(J=>{let nt=J.match(/^<<EMOJI:(.+)>>$/u);if(!nt){const rt=J.match(/^[\[][\]]\s*(.+)$/u)||J.match(/^[\[][\]]\s*([^,.!?\s]+(?:[(][^)]*[)])?)/u);rt&&(nt=rt)}if(nt){let rt=nt[1].trim();const Mr=[rt],so=rt.replace(/[^]*$/u,"").trim();so&&so!==rt&&Mr.push(so);let oo;for(const cs of Mr)if(oo=Vi(cs),oo){rt=oo.name;break}if(oo){let cs=!1;return Mu||(bt===0?cs=Math.random()<.7:bt===1?cs=Math.random()<.35:cs=!1),cs?(Mu=!0,{text:`[] ${rt}`,isVoice:!1,emojiName:rt}):null}return{text:Eu(rt),isVoice:!1}}if(J.startsWith("[]")||J.includes("")||J.includes("(")||J.includes("")||J.includes("(")){let rt=J.replace(/^\[\]\s*/,"");rt=Vh(rt);const Mr=rt.replace(/[^]*/g,"").replace(/\([^)]*\)/g,"").trim(),so=Ql(Mr||rt);return{text:rt,voiceDuration:so,isVoice:!0}}return{text:Eu(J),isVoice:!1}}).filter(J=>!!J&&typeof J.text=="string"&&J.text.length>0),Rr=[];return fm.forEach(J=>{if(J.isVoice||J.emojiName){Rr.push(J);return}if(J.text&&J.text.length>=200){Rr.push(J);return}if(!J.text||J.text.length<=40){Rr.push(J);return}const nt=Iu(J.text,32);if(!nt||nt.length<=1){Rr.push(J);return}nt.forEach(Gn=>{Rr.push({...J,text:Gn})})}),{replies:Rr.length>0?Rr:[{text:Te,isVoice:!1}]}},$u=async(a,d,m)=>{try{if(console.log("[WeChatApp] generateStoryContent :",{roleId:d,messageCount:a.length}),!It().find(C=>C.id===d)){console.warn("[WeChatApp] :",d);return}const $=ds();if(!$.baseUrl||!$.model){console.warn("[WeChatApp] API");return}const I=ef(d);console.log("[WeChatApp] :",I.length),await new Promise(C=>setTimeout(C,100));const z=new CustomEvent("generate-story-for-wechat-message",{detail:{roleId:d,playerMessages:a,existingTurns:I,wechatReplies:m}});console.log("[WeChatApp] :",{roleId:d,playerMessages:a,existingTurnsCount:I.length}),window.dispatchEvent(z),document.dispatchEvent(z),console.log("[WeChatApp] ")}catch(k){console.error("[WeChatApp] :",k)}},Yh=()=>{if(!x||!ss.trim())return;const a=ss.trim(),d=Iu(a),m=ct(x.id),k=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});d.forEach(L=>{const $=Date.now(),I={id:`msg-${$}-${Math.random()}`,from:"self",text:L,time:k,timestamp:$};m.push(I)}),rn(x.id,m),Ir(""),Vt(L=>L+1),v(),console.log("[WeChatApp] AI:",d)},Ql=a=>{const d=a.length,m=Math.ceil(d/3);return Math.max(1,m)},Jh=()=>{x&&(oi(!0),Js(""))},Qh=a=>{if(!x)return;const d=ct(x.id),m=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),k={id:`emoji-${Date.now()}-${Math.random()}`,from:"self",text:`[] ${a}`,time:m,emojiName:a};d.push(k),rn(x.id,d),ls(!1),Vt(L=>L+1),v()},Gl=()=>{oi(!1),Js("")},Gh=()=>{if(!x||!Mn.trim())return;const a=Mn.trim(),d=Ql(a),m=ct(x.id),k=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),L={id:`voice-${Date.now()}-${Math.random()}`,from:"self",text:a,time:k,voiceDuration:d};m.push(L),rn(x.id,m),Gl(),Vt($=>$+1),v(),console.log("[WeChatApp] :",`"${d}"`,":",a)},Ru=()=>{if(!x||!Jl||U)return;const a=ct(x.id),d=[];let m=-1;for(let C=a.length-1;C>=0;C--)if(a[C].from==="self"){m=C;break}if(m===-1)return;let k=!1;for(let C=m+1;C<a.length;C++)if(a[C].from==="other"){k=!0;break}if(k)return;for(let C=m;C>=0;C--)if(a[C].from==="self")d.unshift(a[C].text);else if(a[C].from==="other")break;if(d.length===0)return;const $=a[m].timestamp,I=3*60*1e3,z=()=>{console.log("[WeChatApp] AI:",d),A(!0);const C=mn(),q=x.roleId;if(!q){A(!1);return}if(!C.find(Z=>Z.roleId===q)){A(!1);return}const se=It().find(Z=>Z.id===q),de=x.id;se&&(pe(null),Lu(d,se).then(async({replies:Z,noReplyReason:te,busyMinutes:re})=>{let Re="";if(typeof re=="number"&&re>0&&(!Z||Z.length===0)){const Ce=se.wechatNickname||se.name,ke=Date.now()+re*60*1e3;pe({roleName:Ce,untilTimestamp:ke}),console.log("[WeChatApp] :",re),Re=""}else if(te&&(!Z||Z.length===0)){const Ce=se.wechatNickname||se.name;ge({roleName:Ce,reason:te}),console.log("[WeChatApp] :",te),Re=""}else{Re=Z.map(ke=>ke.text).join("");const Ce=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});for(let ke=0;ke<Z.length;ke++){const we=Z[ke],Te=Date.now(),Fe={id:`reply-${Te}-${ke}-${Math.random()}`,from:"other",text:we.text,time:Ce,timestamp:Te,...we.isVoice&&we.voiceDuration?{voiceDuration:we.voiceDuration}:{},...we.emojiName?{emojiName:we.emojiName}:{}},Xe=ct(de);Xe.push(Fe),rn(de,Xe),Vt(bt=>bt+1),x&&x.id===de&&v(),console.log(`[WeChatApp] ${ke+1}AI:`,we.text,we.isVoice?`( ${we.voiceDuration})`:""),ke<Z.length-1&&await new Promise(bt=>setTimeout(bt,800+Math.random()*1200))}console.log("[WeChatApp] AI"),Kh(de,se)}(async()=>{try{console.log("[WeChatApp] :",Re),await $u(d,q,Re),console.log("[WeChatApp] ")}catch(Ce){console.error("[WeChatApp] :",Ce)}})()}).catch(Z=>{console.error("[WeChatApp] AI:",Z);const te=Z.message||"";(te==="NO_API_CONFIG"||te.includes("")||te.toLowerCase().includes("fetch")||te.toLowerCase().includes("network"))&&B(!0)}).finally(()=>{A(!1)}))};if($&&Date.now()-$<I){const C=I-(Date.now()-$);console.log("[WeChatApp] AI:",C),Y.current||(Y.current=window.setTimeout(()=>{Y.current=null,z()},C));return}z()},Xh=()=>{if(!x||U||!("roleId"in x))return;const a=x.id,d=ct(a);if(d.length===0)return;let m=-1;for(let W=d.length-1;W>=0;W--)if(d[W].from==="self"){m=W;break}if(m===-1)return;let k=-1;for(let W=m+1;W<d.length;W++)if(d[W].from==="other"){k=W;break}if(k===-1){Ru();return}const L=[];for(let W=m;W>=0;W--)if(d[W].from==="self")L.unshift(d[W].text);else if(d[W].from==="other")break;if(L.length===0)return;const $=d.slice(0,k);rn(a,$),Vt(W=>W+1);const I=mn(),z=x.roleId;if(!I.find(W=>W.roleId===z))return;const D=It().find(W=>W.id===z);D&&(console.log("[WeChatApp] AI:",L),A(!0),Lu(L,D).then(async({replies:W,noReplyReason:se,busyMinutes:de})=>{let Z="";if(typeof de=="number"&&de>0&&(!W||W.length===0)){const te=D.wechatNickname||D.name,re=Date.now()+de*60*1e3;pe({roleName:te,untilTimestamp:re}),console.log("[WeChatApp] :",de),Z=""}else if(se&&(!W||W.length===0)){const te=D.wechatNickname||D.name;ge({roleName:te,reason:se}),console.log("[WeChatApp] :",se),Z=""}else{Z=W.map(re=>re.text).join("");const te=new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});for(let re=0;re<W.length;re++){const Re=W[re],Ce={id:`reply-regenerate-${Date.now()}-${re}-${Math.random()}`,from:"other",text:Re.text,time:te,...Re.isVoice&&Re.voiceDuration?{voiceDuration:Re.voiceDuration}:{}},ke=ct(a);ke.push(Ce),rn(a,ke),Vt(we=>we+1),x&&x.id===a&&v(),re<W.length-1&&await new Promise(we=>setTimeout(we,600+Math.random()*800))}}(async()=>{try{console.log("[WeChatApp] :",Z),await $u(L,z,Z),console.log("[WeChatApp] ")}catch(te){console.error("[WeChatApp] :",te)}})()}).catch(W=>{console.error("[WeChatApp] AI:",W);const se=W.message||"";(se==="NO_API_CONFIG"||se.includes("")||se.toLowerCase().includes("fetch")||se.toLowerCase().includes("network"))&&B(!0)}).finally(()=>{A(!1)}))},Zh=()=>{if(Zr){Vn(!1),$n(""),Jn(""),kr(""),jr(""),Nr(""),Vs(""),Ht([]),Sr([]),Rn([]),pt(null);return}if(o==="chat"&&x){s(null);return}if(o==="discover"&&jt==="moments"){F("list"),oe(!1);return}if(o==="story"&&ft.showBack&&ft.onBack){ft.onBack();return}e&&e()},no=a=>{i(a),a!=="chat"&&s(null),a==="contacts"&&(fn("list"),is(null)),a!=="discover"&&(F("list"),oe(!1)),a!=="story"&&(Pe(""),Ae({}))},qh=()=>{const a=fs(),d=fs();Ht(m=>[...m,{id:a,name:"",entries:[{id:d,title:"",content:"",keyword:""}]}]),Sr(m=>[...m,a]),Rn(m=>[...m,d])},em=(a,d)=>{Ht(m=>m.map(k=>k.id===a?{...k,name:d}:k))},tm=a=>{const d=fs();Ht(m=>m.map(k=>k.id===a?{...k,entries:[...k.entries,{id:d,title:"",content:"",keyword:""}]}:k)),Rn(m=>[...m,d])},Xl=(a,d,m,k)=>{Ht(L=>L.map($=>$.id===a?{...$,entries:$.entries.map(I=>I.id===d?{...I,[m]:k}:I)}:$))},nm=async(a,d,m,k)=>{var W,se,de,Z,te;const L=(m??"").trim(),$=(k??"").trim();if(!L){pt("");return}const I=ds(),z=Yn.trim()||"",C=Dt==="male"?"":Dt==="female"?"":Dt==="other"?"":"",q=at.trim()?`${at.trim()} `:"",D=ts.map(re=>{const Re=re.name||"",Ce=re.entries.slice(0,4).map(ke=>{const Te=re.id===a&&ke.id===d?"":"",Fe=ke.title||"",Xe=(ke.content||"").slice(0,60);return`- ${Fe}${Te}${Xe}`}).join(`
`);return`${Re}
${Ce}`}).join(`

`);if(!I.baseUrl||!I.model){pt(" API ");return}pt("");try{const re=I.baseUrl.replace(/\/+$/,""),Re=re.endsWith("/chat/completions")||re.endsWith("/completions")?re:re+"/chat/completions",Ce=await fetch(Re,{method:"POST",headers:{"Content-Type":"application/json",...I.apiKey?{Authorization:`Bearer ${I.apiKey}`}:{}},body:JSON.stringify({model:I.model,temperature:.4,messages:[{role:"system",content:'12313234""5 OOC'},{role:"user",content:`${z}${C}${q}${$||""} OOC

${D||""}

${L}`}]})});if(!Ce.ok)throw new Error(` ${Ce.status}`);const ke=await Ce.json();let we=((de=(se=(W=ke==null?void 0:ke.choices)==null?void 0:W[0])==null?void 0:se.message)==null?void 0:de.content)??((te=(Z=ke==null?void 0:ke.choices)==null?void 0:Z[0])==null?void 0:te.text)??"";if(!we)throw new Error("");Ht(Te=>Te.map(Fe=>Fe.id===a?{...Fe,entries:Fe.entries.map(Xe=>Xe.id===d?{...Xe,content:Xe.content?`${Xe.content}

${we}`:we}:Xe)}:Fe)),pt("")}catch(re){pt(`${re.message}`)}},ro=(a,d)=>{dn(m=>({...m,[a]:d}))},rm=()=>{const a=tr();dn(a),wr((a.worldbooks??[]).map(d=>d.id)),qr((a.worldbooks??[]).flatMap(d=>(d.entries??[]).map(m=>m.id))),Kn("identity")},sm=async()=>{var d,m,k,L;const a={name:ze.name.trim(),gender:ze.gender,intro:ze.intro.trim(),tags:((m=(d=ze.tags)==null?void 0:d.trim)==null?void 0:m.call(d))||"",worldbooks:ze.worldbooks??[],phoneNumber:((k=ze.phoneNumber)==null?void 0:k.trim())||void 0,wechatId:((L=ze.wechatId)==null?void 0:L.trim())||void 0,wechatNickname:ze.wechatNickname??ze.name.trim()};I1(a),dn(a),await am()},om=a=>{if(!a)return;const d=new FileReader;d.onload=()=>{typeof d.result=="string"&&jr(d.result)},d.readAsDataURL(a)},im=async a=>{var m,k,L,$,I,z;const d=ds();if(!d.baseUrl||!d.model)return B(!0),{};try{const C=d.baseUrl.replace(/\/+$/,""),q=C.endsWith("/chat/completions")||C.endsWith("/completions")?C:C+"/chat/completions",D=a.gender==="male"?"":a.gender==="female"?"":"",W=a.age?`${a.age}`:"",se=((m=a.worldbooks)==null?void 0:m.slice(0,3).map(Re=>{const Ce=(Re.entries??[]).slice(0,4).map(ke=>{const we=ke.title||"",Te=(ke.content||"").slice(0,40);return Te?`${we}${Te}`:we}).filter(Boolean).join("")||"";return Ce?`${Re.name}${Ce}`:""}).filter(Boolean).join(""))||"",de=await fetch(q,{method:"POST",headers:{"Content-Type":"application/json",...d.apiKey?{Authorization:`Bearer ${d.apiKey}`}:{}},body:JSON.stringify({model:d.model,temperature:.7,messages:[{role:"system",content:`

1 28 
2 20 
3(wechatId) "wxid_xxx"+
4(region)/ " "" "" "
5 JSON {"nickname": "", "signature": "", "wechatId": "", "region": ""} markdown `},{role:"user",content:`${a.name}${D}${W}${se?`/${se}`:""} JSON `}]})});if(!de.ok)throw new Error(` ${de.status}`);const Z=await de.json();let te=(($=(L=(k=Z==null?void 0:Z.choices)==null?void 0:k[0])==null?void 0:L.message)==null?void 0:$.content)??((z=(I=Z==null?void 0:Z.choices)==null?void 0:I[0])==null?void 0:z.text)??"";if(!te)throw new Error("");let re={};try{te=te.replace(/^```json\n?/g,"").replace(/^```\n?/g,"").replace(/\n?```$/g,"").trim(),re=JSON.parse(te)}catch{const Re=te.match(/["']nickname["']\s*:\s*["']([^"']+)["']/)||te.match(/nickname["']?\s*[:]\s*["']?([^"',\n}]+)/),Ce=te.match(/["']signature["']\s*:\s*["']([^"']+)["']/)||te.match(/signature["']?\s*[:]\s*["']?([^"',\n}]+)/),ke=te.match(/["']wechatId["']\s*:\s*["']([^"']+)["']/)||te.match(/wechatId["']?\s*[:]\s*["']?([^"',\n}]+)/i),we=te.match(/["']region["']\s*:\s*["']([^"']+)["']/)||te.match(/region["']?\s*[:]\s*["']?([^"',\n}]+)/i);Re&&(re.nickname=Re[1].trim()),Ce&&(re.signature=Ce[1].trim()),ke&&(re.wechatId=ke[1].trim()),we&&(re.region=we[1].trim())}return re}catch(C){return console.error(":",C),B(!0),{}}},lm=async()=>{var I,z,C,q,D;if(!Yn.trim()){pt("");return}const a=ds();if(!a.baseUrl||!a.model){pt(" API ");return}const d=Yn.trim(),m=Dt==="male"?"":Dt==="female"?"":Dt==="other"?"":"",k=at.trim()?`${at.trim()} `:"",L=Hs.trim(),$=ts.filter(W=>W.name.trim()).map(W=>{const se=W.name||"",de=W.entries.filter(Z=>Z.title.trim()||Z.content.trim()).map(Z=>{const te=Z.title||"",re=(Z.content||"").slice(0,100);return re?`- ${te}${re}`:`- ${te}`}).join(`
`);return de?`${se}
${de}`:""}).filter(Boolean).join(`

`);pt("");try{const W=a.baseUrl.replace(/\/+$/,""),se=W.endsWith("/chat/completions")||W.endsWith("/completions")?W:W+"/chat/completions",de=await fetch(se,{method:"POST",headers:{"Content-Type":"application/json",...a.apiKey?{Authorization:`Bearer ${a.apiKey}`}:{}},body:JSON.stringify({model:a.model,temperature:.7,messages:[{role:"system",content:'1****""""""210-3032-545emoji  0-1 67'},{role:"user",content:`${d}${m}${k}${$?`


${$}

`:""}${L?`${L}

`:""}1234`}]})});if(!de.ok)throw new Error(` ${de.status}`);const Z=await de.json();let te=((C=(z=(I=Z==null?void 0:Z.choices)==null?void 0:I[0])==null?void 0:z.message)==null?void 0:C.content)??((D=(q=Z==null?void 0:Z.choices)==null?void 0:q[0])==null?void 0:D.text)??"";if(!te)throw new Error("");te=te.trim(),te=te.replace(/^```[\w]*\n?/g,"").replace(/\n?```$/g,"").trim(),te=te.replace(/^["']|["']$/g,"").trim(),Nr(re=>re?`${re}
${te}`:te),pt("")}catch(W){pt(`${W.message}`)}},am=async()=>{var k,L,$,I,z,C;if(!Yn.trim()){pt("");return}const a=at.trim()?Number(at.trim()):null;if(at.trim()&&(Number.isNaN(a)||a<=0)){pt(" 0 ");return}const d=fs(),m={id:d,name:Yn.trim(),gender:Dt,age:a,opening:ei.trim(),avatarUrl:es.trim(),worldbooks:ts};ni(!0);try{pt("");const q=await im(m),D=(q.nickname??"").trim().replace(/^["']|["']$/g,""),W=(q.signature??"").trim().replace(/^["']|["']$/g,""),se=(q.wechatId??"").trim(),de=(q.region??"").trim();D&&(m.wechatNickname=D.slice(0,12)),W&&(m.wechatSignature=W.slice(0,30)),se&&(m.wechatId=se.slice(0,40)),de&&(m.region=de.slice(0,40));const Z=It();Z.push(m),f1(Z);try{const we={name:ze.name.trim(),gender:ze.gender,intro:((L=(k=ze.intro)==null?void 0:k.trim)==null?void 0:L.call(k))||"",tags:((I=($=ze.tags)==null?void 0:$.trim)==null?void 0:I.call($))||"",worldbooks:ze.worldbooks??[],phoneNumber:((z=ze.phoneNumber)==null?void 0:z.trim())||void 0,wechatId:((C=ze.wechatId)==null?void 0:C.trim())||void 0,wechatNickname:ze.wechatNickname??ze.name.trim()};E1(d,we)}catch{}const te={roleId:d,remark:void 0,tags:void 0,permission:"all",addedAt:Date.now()};Ia(te),br(Hi());const re=mn(),Re=It(),Ce={};re.forEach(we=>{const Te=Re.find(Fe=>Fe.id===we.roleId);if(Te){const Xe=(we.remark||Te.wechatNickname||Te.name).charAt(0);let bt;/[A-Za-z]/.test(Xe)?bt=Xe.toUpperCase():/[\u4e00-\u9fa5]/.test(Xe)?bt=Xe:bt="#",Ce[bt]||(Ce[bt]=[]),Ce[bt].push({contact:we,role:Te})}});const ke=Object.keys(Ce).sort((we,Te)=>{if(we==="#")return 1;if(Te==="#")return-1;const Fe=/[A-Z]/.test(we),Xe=/[A-Z]/.test(Te);return Fe&&!Xe?-1:!Fe&&Xe?1:we.localeCompare(Te,"zh-CN")}).map(we=>({letter:we,contacts:Ce[we].sort((Te,Fe)=>{const Xe=Te.contact.remark||Te.role.wechatNickname||Te.role.name,bt=Fe.contact.remark||Fe.role.wechatNickname||Fe.role.name;return Xe.localeCompare(bt,"zh-CN")})}));si(ke),Vn(!1),Kn("role"),$n(""),Jn(""),kr(""),jr(""),Nr(""),Vs(""),Ht([]),Sr([]),Rn([]),pt(null),i("chat"),s(`chat-${d}`)}finally{ni(!1)}},cm=a=>{const d=a.currentTarget,m=d.clientHeight/2;oe(d.scrollTop>m)},um=Zr?"":o==="chat"?U&&x&&"roleId"in x?"...":(x==null?void 0:x.name)??"":o==="contacts"?ht==="profile"?"":ht==="settings"?"":ht==="permission"?"":"":o==="discover"?jt==="moments"?ae?"":"":"":o==="story"?me:o==="me"&&u?S==="profile"?"":S==="storage"?"":"":"",pi=o==="contacts"&&ht==="profile",Zl=o==="discover"&&jt==="moments",dm=pi?{backgroundColor:"#ffffff",borderBottom:"none",paddingTop:100}:void 0;return r.jsxs("div",{className:`wechat-app ${Zl||pi?"wechat-app-overlay":""}`,style:pi?{backgroundColor:"#ffffff"}:void 0,children:[!Ie&&r.jsxs("div",{className:`wechat-header ${Zl?"wechat-header-overlay":""}`,style:dm,children:[r.jsx("button",{type:"button",className:"wechat-header-back",onClick:()=>{if(o==="me"&&u){S==="profile"||S==="storage"?E("list"):p(!1);return}if(o==="contacts"){if(ht==="permission"){fn("settings");return}if(ht==="settings"){fn("profile");return}if(ht==="profile"){fn("list"),is(null);return}}Zh()},"aria-label":"",style:pi?{marginTop:20}:void 0}),r.jsx("span",{className:"wechat-header-label",children:um}),r.jsx("div",{className:"wechat-header-right",children:Zl?r.jsx("button",{type:"button",className:"wechat-header-plus","aria-label":"",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"34",height:"34",children:[r.jsx("rect",{x:"6",y:"7",width:"12",height:"9",rx:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("path",{d:"M9 7L10 6H14L15 7",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"11.5",r:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.4"}),r.jsx("circle",{cx:"16",cy:"8.5",r:"0.6",fill:"currentColor"})]})}):o==="story"&&ft.showMore?r.jsx("button",{type:"button",className:"wechat-header-plus","aria-label":"",onClick:ft.onMore,children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("circle",{cx:"6",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"18",cy:"12",r:"1.4",fill:"currentColor"})]})}):o==="chat"&&x?r.jsx("button",{type:"button",className:"wechat-header-plus","aria-label":"",onClick:()=>{os(!1);const a=h1(x.id);Qs(a),_e(!0)},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("circle",{cx:"6",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"18",cy:"12",r:"1.4",fill:"currentColor"})]})}):o==="contacts"?ht==="profile"?r.jsx("button",{type:"button",className:"wechat-header-plus","aria-label":"",onClick:()=>fn("settings"),style:{marginTop:40},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("circle",{cx:"6",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.4",fill:"currentColor"}),r.jsx("circle",{cx:"18",cy:"12",r:"1.4",fill:"currentColor"})]})}):ht==="list"&&!Zr?r.jsx("button",{type:"button",className:"wechat-header-plus","aria-label":"",onClick:()=>{Kn("role"),dn(tr()),Vn(!0)},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"28",height:"28",children:[r.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("path",{d:"M12 8V16",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M8 12H16",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}):null:null})]}),Zr?r.jsx("div",{className:"story-app",style:{height:"100%",overflow:"auto",paddingBottom:"110px"},children:r.jsxs("div",{className:"story-form",children:[qo==="identity"&&r.jsx("div",{className:"story-form-header-row",children:r.jsx("div",{className:"story-form-header",children:""})}),qo==="role"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-avatar-row",children:[r.jsx("div",{className:"story-avatar-preview",children:es?r.jsx("img",{src:es,alt:"avatar"}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"story-avatar-actions",children:[r.jsx("input",{type:"file",accept:"image/*",ref:Cr,onChange:a=>{var d;return om(((d=a.target.files)==null?void 0:d[0])??null)}}),r.jsx("input",{className:"story-input",placeholder:" URL",value:es,onChange:a=>jr(a.target.value)})]})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-name-row",children:[r.jsx("input",{className:"story-input",placeholder:"",value:Yn,onChange:a=>$n(a.target.value)}),r.jsx("button",{type:"button",className:"story-name-dice",onClick:()=>{$n(p1())},children:""})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("input",{className:"story-input",type:"number",min:0,placeholder:"18",value:at,onChange:a=>kr(a.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:" /  / ",value:Hs,onChange:a=>Vs(a.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:lm,children:"AI "})]}),r.jsx("textarea",{className:"story-textarea",placeholder:`




`,value:ei,onChange:a=>Nr(a.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-gender-row",children:[r.jsx("button",{type:"button",className:`story-gender-btn ${Dt==="male"?"active":""}`,onClick:()=>Jn("male"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${Dt==="female"?"active":""}`,onClick:()=>Jn("female"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${Dt==="other"?"active":""}`,onClick:()=>Jn("other"),children:""})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("p",{className:"story-tip",children:" / "}),ts.map(a=>{const d=Ul.includes(a.id);return r.jsxs("div",{className:"story-worldbook-card",children:[r.jsxs("div",{className:"story-worldbook-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:a.name,onChange:m=>em(a.id,m.target.value)}),r.jsxs("div",{className:"story-worldbook-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>Sr(m=>m.includes(a.id)?m.filter(k=>k!==a.id):[...m,a.id]),children:d?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&(Ht(m=>m.filter(k=>k.id!==a.id)),Sr(m=>m.filter(k=>k!==a.id)))},children:""})]})]}),d&&r.jsxs(r.Fragment,{children:[a.entries.map(m=>{const k=Fl.includes(m.id);return r.jsxs("div",{className:"story-entry",children:[r.jsxs("div",{className:"story-entry-header",children:[r.jsx("input",{className:"story-input",placeholder:" / ",value:m.title,onChange:L=>Xl(a.id,m.id,"title",L.target.value)}),r.jsxs("div",{className:"story-entry-header-actions",children:[r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>Rn(L=>L.includes(m.id)?L.filter($=>$!==m.id):[...L,m.id]),children:k?"":""}),r.jsx("button",{type:"button",className:"story-mini-btn danger",onClick:()=>{window.confirm("")&&Ht(L=>L.map($=>$.id===a.id?{...$,entries:$.entries.filter(I=>I.id!==m.id)}:$))},children:""})]})]}),k&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"story-entry-ai-row",children:[r.jsx("input",{className:"story-entry-ai-input",placeholder:" /  / ",value:m.keyword??"",onChange:L=>Xl(a.id,m.id,"keyword",L.target.value)}),r.jsx("button",{type:"button",className:"story-entry-ai-btn",onClick:()=>nm(a.id,m.id,m.keyword,m.title),children:"AI "})]}),r.jsx("textarea",{className:"story-textarea",placeholder:"",value:m.content,onChange:L=>Xl(a.id,m.id,"content",L.target.value)})]})]},m.id)}),r.jsx("button",{type:"button",className:"story-add-entry",onClick:()=>tm(a.id),children:"+ "})]})]},a.id)}),r.jsx("button",{type:"button",className:"story-add-worldbook",onClick:qh,children:"+ "})]}),r.jsx("div",{className:"story-actions",children:r.jsx("button",{type:"button",className:"story-btn primary",onClick:rm,disabled:ns,children:""})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("input",{className:"story-input",placeholder:"",value:ze.name,onChange:a=>ro("name",a.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsxs("div",{className:"story-gender-row",children:[r.jsx("button",{type:"button",className:`story-gender-btn ${ze.gender==="male"?"active":""}`,onClick:()=>ro("gender","male"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${ze.gender==="female"?"active":""}`,onClick:()=>ro("gender","female"),children:""}),r.jsx("button",{type:"button",className:`story-gender-btn ${ze.gender==="other"?"active":""}`,onClick:()=>ro("gender","other"),children:" / "})]})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("input",{className:"story-input",placeholder:"",value:ze.intro,onChange:a=>ro("intro",a.target.value)})]}),r.jsxs("div",{className:"story-row",children:[r.jsx("label",{className:"story-label",children:""}),r.jsx("p",{className:"story-tip",children:" / "}),(ze.worldbooks??[]).map(a=>{const d=Ol.includes(a.id);return r.jsxs("div",{className:"story-worldbook-card",children:[r.jsxs("div",{className:"story-worldbook-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:a.name,onChange:m=>{const k=m.target.value;dn(L=>({...L,worldbooks:(L.worldbooks??[]).map($=>$.id===a.id?{...$,name:k}:$)}))}}),r.jsx("div",{className:"story-worldbook-header-actions",children:r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>wr(m=>m.includes(a.id)?m.filter(k=>k!==a.id):[...m,a.id]),children:d?"":""})})]}),d&&r.jsx(r.Fragment,{children:(a.entries??[]).map(m=>{const k=Nt.includes(m.id);return r.jsxs("div",{className:"story-entry",children:[r.jsxs("div",{className:"story-entry-header",children:[r.jsx("input",{className:"story-input",placeholder:" /  / ",value:m.title,onChange:L=>{const $=L.target.value;dn(I=>({...I,worldbooks:(I.worldbooks??[]).map(z=>z.id===a.id?{...z,entries:(z.entries??[]).map(C=>C.id===m.id?{...C,title:$}:C)}:z)}))}}),r.jsx("div",{className:"story-entry-header-actions",children:r.jsx("button",{type:"button",className:"story-mini-btn",onClick:()=>qr(L=>L.includes(m.id)?L.filter($=>$!==m.id):[...L,m.id]),children:k?"":""})})]}),k&&r.jsx("textarea",{className:"story-textarea",placeholder:"",value:m.content,onChange:L=>{const $=L.target.value;dn(I=>({...I,worldbooks:(I.worldbooks??[]).map(z=>z.id===a.id?{...z,entries:(z.entries??[]).map(C=>C.id===m.id?{...C,content:$}:C)}:z)}))}})]},m.id)})})]},a.id)}),r.jsx("button",{type:"button",className:"story-add-worldbook",onClick:()=>{const a=fs(),d=fs(),m={id:a,name:"",entries:[{id:d,title:"",content:""}]};dn(k=>({...k,worldbooks:[...k.worldbooks??[],m]})),wr(k=>[...k,a]),qr(k=>[...k,d])},children:"+ "})]}),r.jsxs("div",{className:"story-actions",children:[r.jsx("button",{type:"button",className:"story-btn",onClick:()=>Kn("role"),disabled:ns,children:""}),r.jsx("button",{type:"button",className:"story-btn primary",onClick:sm,disabled:ns,children:ns?"":""})]})]}),ti&&r.jsx("div",{className:"story-message",children:ti})]})}):o==="chat"?x?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"wechat-chat",ref:$e,style:Ys?{paddingBottom:260}:Er?{paddingBottom:180}:void 0,children:(()=>{let a=ct(x.id);const d=a.filter(I=>I.from==="system");if(d.length>0){d.forEach(z=>{z.greeting&&(a=a.filter(C=>!(C.from==="self"&&(C.id.startsWith("greeting-")||C.text===z.greeting))))});const I=ct(x.id).length;a.length!==I&&(rn(x.id,a),console.log("[WeChatApp] :",I,":",a.length))}const m=[...S1,...a];if(m.length===0)return null;const k=[];let L="",$=!1;return m.forEach((I,z)=>{if(I.from==="system")k.push({type:"system",content:I});else{if(!$&&z===0){const C=I.time||new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});k.push({type:"time",content:C}),$=!0}else I.time!==L&&z>0&&k.push({type:"time",content:I.time});k.push({type:"message",content:I}),L=I.time}}),r.jsx(r.Fragment,{children:k.map((I,z)=>{if(I.type==="time")return r.jsx("div",{className:"wechat-chat-time",children:I.content},`time-${z}`);if(I.type==="system"){const D=I.content;return r.jsxs("div",{className:"wechat-system-message-wrapper",children:[D.greeting&&r.jsxs("div",{className:"wechat-row wechat-row-self",children:[r.jsx("div",{className:"wechat-bubble wechat-bubble-self",children:D.greeting}),r.jsx("div",{className:"wechat-avatar wechat-avatar-self",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})})]}),r.jsx("div",{className:"wechat-system-message",children:D.text})]},D.id)}const C=I.content,q=Vl===C.id;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:C.from==="self"?"flex-end":"flex-start",width:"100%"},children:[r.jsxs("div",{className:`wechat-row wechat-row-${C.from}`,style:{width:"100%"},children:[C.from==="other"&&r.jsx("div",{className:"wechat-avatar",children:x.avatarUrl?r.jsx("img",{src:x.avatarUrl,alt:x.name}):r.jsx("span",{children:x.avatarText})}),r.jsx("div",{className:`wechat-bubble wechat-bubble-${C.from} ${C.emojiName||C.redPacketAmount?"wechat-bubble-no-tail":""}`,style:C.voiceDuration?{cursor:"pointer",userSelect:"none",width:"fit-content",maxWidth:"72%"}:C.emojiName?{background:"transparent",padding:0,boxShadow:"none",borderRadius:0,width:"fit-content",maxWidth:"72%"}:C.redPacketAmount?{background:"transparent",padding:0,boxShadow:"none",borderRadius:0,width:"fit-content",maxWidth:"72%"}:{width:"fit-content",maxWidth:"72%"},onClick:C.voiceDuration?()=>{ai(q?null:C.id)}:C.redPacketAmount?()=>{St(C),di(!1),C.from==="self"?pn(!0):pn(!1)}:void 0,children:C.voiceDuration?r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"80px",padding:"0"},children:C.from==="self"?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",style:{flexShrink:0,transform:"rotate(-90deg)",transformOrigin:"center"},children:[r.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0",fill:"none"}),r.jsx("path",{d:"M5 12.55a11 11 0 0 1 14.08 0",fill:"none"}),r.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20",strokeWidth:"2.5",strokeLinecap:"round"})]}),r.jsxs("span",{style:{fontSize:"14px",fontWeight:"400"},children:['"',C.voiceDuration,'"']})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{style:{fontSize:"14px",fontWeight:"400"},children:['"',C.voiceDuration,'"']}),r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",style:{flexShrink:0,transform:"rotate(90deg)",transformOrigin:"center"},children:[r.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0",fill:"none"}),r.jsx("path",{d:"M5 12.55a11 11 0 0 1 14.08 0",fill:"none"}),r.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20",strokeWidth:"2.5",strokeLinecap:"round"})]})]})}):C.redPacketAmount?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{width:230,borderRadius:14,overflow:"hidden",background:"linear-gradient(135deg, #f97316, #ef4444)",color:"#ffffff",boxShadow:"0 6px 20px rgba(0,0,0,0.18)",boxSizing:"border-box"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px 8px"},children:[r.jsx("div",{style:{width:36,height:48,borderRadius:8,background:"rgba(0,0,0,0.1)",marginRight:10,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",children:[r.jsx("rect",{x:"5.5",y:"4",width:"13",height:"16",rx:"2",stroke:"#ffffff",strokeWidth:"1.4"}),r.jsx("path",{d:"M6.5 9C8.1 10.1 9.5 10.6 12 10.6C14.5 10.6 15.9 10.1 17.5 9",stroke:"#ffffff",strokeWidth:"1.2",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"13.4",r:"1.1",fill:"#ffffff"})]})}),r.jsx("div",{style:{flex:1,minWidth:0},children:r.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:C.redPacketNote||""})})]}),r.jsx("div",{style:{padding:"6px 12px 8px",borderTop:"1px solid rgba(255,255,255,0.12)",fontSize:12,opacity:.92},children:"Lumi"})]})}):C.emojiName&&Vi(C.emojiName)?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("img",{src:Vi(C.emojiName).src,style:{width:120,height:"auto",borderRadius:12,display:"block"}})}):C.text}),C.from==="self"&&r.jsx("div",{className:"wechat-avatar wechat-avatar-self",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})})]}),C.voiceDuration&&q&&r.jsx("div",{style:{marginTop:"4px",marginBottom:"16px",padding:"10px 12px",backgroundColor:"#ffffff",borderRadius:"8px",fontSize:"14px",lineHeight:"1.5",color:"#000000",wordBreak:"break-word",overflowWrap:"anywhere",width:"fit-content",maxWidth:"70%",boxSizing:"border-box",alignSelf:C.from==="self"?"flex-end":"flex-start",marginLeft:C.from==="other"?"48px":"0",marginRight:C.from==="self"?"48px":"0"},children:C.text})]},C.id)})})})()}),r.jsxs("div",{className:"wechat-input-bar",style:Ys?{transform:"translateY(-210px)"}:Er?{transform:"translateY(-140px)"}:void 0,children:[r.jsx("button",{type:"button",className:"wechat-input-voice",onClick:Jh,title:"",style:{width:"40px",height:"40px",borderRadius:"50%",border:"none",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s",flexShrink:0,marginRight:"8px",padding:0},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#666",children:[r.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),r.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})}),r.jsx("textarea",{className:"wechat-input-main",placeholder:" AI...",value:ss,onChange:a=>Ir(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),ss.trim()&&!U&&Yh())},rows:1,style:{resize:"none",minHeight:"42px",maxHeight:"120px",overflowY:"auto",lineHeight:"1.5"}}),r.jsx("button",{type:"button",className:"wechat-input-emoji",title:"",onClick:()=>{ls(a=>{const d=!a;return d&&setTimeout(()=>{v()},50),d}),Er&&Kt(!1)},style:{width:"40px",height:"40px",borderRadius:"50%",border:"none",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s",flexShrink:0,marginLeft:"8px",marginRight:"8px",padding:0},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#666",strokeWidth:"1.6"}),r.jsx("circle",{cx:"9",cy:"10",r:"0.9",fill:"#666"}),r.jsx("circle",{cx:"15",cy:"10",r:"0.9",fill:"#666"}),r.jsx("path",{d:"M8.5 14C9.1 15 10.4 15.7 12 15.7C13.6 15.7 14.9 15 15.5 14",stroke:"#666",strokeWidth:"1.4",strokeLinecap:"round"})]})}),r.jsx("button",{type:"button",className:"wechat-input-send",title:"",onClick:()=>{Kt(a=>{const d=!a;return d&&(h(0),ls(!1),setTimeout(()=>{v()},50)),d})},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"#111827"}),r.jsx("path",{d:"M12 8V16",stroke:"#ffffff",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M8 12H16",stroke:"#ffffff",strokeWidth:"1.8",strokeLinecap:"round"})]})}),r.jsx("button",{type:"button",className:"wechat-input-send-plane",onClick:Ru,disabled:!Jl||U,title:Jl?"AI":"",children:r.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:r.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]}),Ys&&r.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:8,padding:"0 8px 4px",boxSizing:"border-box",pointerEvents:"none",overflowX:"hidden"},children:r.jsx("div",{style:{backgroundColor:"#ffffff",borderRadius:"18px 18px 0 0",padding:"10px 8px 6px",boxShadow:"none",pointerEvents:"auto",maxHeight:220,overflowY:"auto",overflowX:"hidden"},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",rowGap:10,columnGap:4,paddingBottom:6},children:ju.map(a=>r.jsx("button",{type:"button",onClick:()=>Qh(a.name),style:{border:"none",background:"transparent",display:"flex",flexDirection:"column",alignItems:"center",gap:4,cursor:"pointer",width:"100%"},children:r.jsx("div",{style:{width:"100%",paddingTop:"100%",position:"relative",borderRadius:16,backgroundColor:"#f5f5f5",overflow:"hidden"},children:r.jsx("img",{src:a.src,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}})})},a.key))})})}),Er&&(()=>{const a=[{key:"photo",label:"",onClick:()=>{Kt(!1),alert("")},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"4",y:"6.5",width:"16",height:"11",rx:"2",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("path",{d:"M8.5 14L11 11.5L13.8 14.3L15.5 12.5L18 15",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"9",cy:"9.5",r:"1",fill:"#111827"})]})},{key:"video-call",label:"",onClick:()=>{Kt(!1),nn(!0)},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"4.5",y:"6",width:"11",height:"12",rx:"2",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("path",{d:"M15.5 9L19 7V17L15.5 15",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"9.5",cy:"10",r:"0.9",fill:"#111827"})]})},{key:"red-packet",label:"",onClick:()=>{Kt(!1),x&&(Xs(""),qs(""),Tt(null),as(!0))},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("path",{d:"M7 9C9 10.5 10.5 11 12 11C13.5 11 15 10.5 17 9",fill:"none",stroke:"#111827",strokeWidth:"1.2",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"13.2",r:"1.1",fill:"#111827"})]})},{key:"transfer",label:"",onClick:()=>{Kt(!1),alert("")},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"5",y:"6",width:"14",height:"12",rx:"2",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("path",{d:"M8 12H16",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M10.5 9.5L8 12L10.5 14.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]})},{key:"location",label:"",onClick:()=>{Kt(!1),alert("")},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("path",{d:"M12 4.5C9.51472 4.5 7.5 6.51472 7.5 9C7.5 12.25 12 18.5 12 18.5C12 18.5 16.5 12.25 16.5 9C16.5 6.51472 14.4853 4.5 12 4.5Z",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"9",r:"1.6",fill:"#111827"})]})},{key:"regenerate",label:"",onClick:()=>{Kt(!1),Xh()},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("path",{d:"M7 7.5L4.5 10L7 12.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M4.5 10H12C14.4853 10 16.5 12.0147 16.5 14.5C16.5 16.9853 14.4853 19 12 19C10.3831 19 8.94813 18.2261 8.07812 17",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]})},{key:"auto-reply",label:"",onClick:async()=>{if(Kt(!1),!x||!("roleId"in x))return;const z=It().find(C=>C.id===x.roleId);if(z){li(!0);try{const C=await Hh(z);C&&Ir(C)}catch(C){console.error("[WeChatApp] :",C);const q=C.message||"";(q==="NO_API_CONFIG"||q.includes("")||q.toLowerCase().includes("fetch")||q.toLowerCase().includes("network"))&&B(!0)}finally{li(!1)}}},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("path",{d:"M6.5 7.5C6.5 6.39543 7.39543 5.5 8.5 5.5H15.5C16.6046 5.5 17.5 6.39543 17.5 7.5V11.5C17.5 12.6046 16.6046 13.5 15.5 13.5H11.2L8.5 15.8V13.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M9 9H15",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M9 11H12.5",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"})]})},{key:"my-identity",label:"",onClick:()=>{if(Kt(!1),!x||!("roleId"in x)){ye(tr()),he(!0);return}const z=It().find(q=>q.id===x.roleId),C=z?of(z.id):tr();ye(C),he(!0)},icon:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"4.5",y:"6",width:"15",height:"12",rx:"2.2",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("circle",{cx:"9",cy:"11",r:"2.3",fill:"none",stroke:"#111827",strokeWidth:"1.3"}),r.jsx("path",{d:"M6.8 14.7C7.5 13.8 8.2 13.4 9 13.4C9.8 13.4 10.5 13.8 11.2 14.7",fill:"none",stroke:"#111827",strokeWidth:"1.2",strokeLinecap:"round"}),r.jsx("path",{d:"M13.2 10H17",fill:"none",stroke:"#111827",strokeWidth:"1.3",strokeLinecap:"round"}),r.jsx("path",{d:"M13.2 12.7H16.2",fill:"none",stroke:"#111827",strokeWidth:"1.3",strokeLinecap:"round"})]})}],d=8,m=Math.max(1,Math.ceil(a.length/d)),k=Math.min(ci,m-1),L=k*d,$=a.slice(L,L+d);return r.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:16,padding:"0 16px 4px",boxSizing:"border-box",pointerEvents:"none"},children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"18px 18px 0 0",padding:"10px 12px 6px",boxShadow:"none",pointerEvents:"auto"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",rowGap:10,columnGap:4,paddingBottom:6},children:$.map(I=>r.jsxs("button",{type:"button",onClick:I.onClick,style:{border:"none",background:"transparent",display:"flex",flexDirection:"column",alignItems:"center",gap:4,cursor:"pointer"},children:[r.jsx("div",{style:{width:44,height:44,borderRadius:16,backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:I.icon}),r.jsx("span",{style:{fontSize:11,color:"#4b5563"},children:I.label})]},I.key))}),m>1&&r.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,paddingBottom:2},children:[r.jsx("button",{type:"button",onClick:()=>h(I=>Math.max(0,I-1)),disabled:k===0,style:{border:"none",background:"transparent",color:k===0?"#d1d5db":"#6b7280",fontSize:16,cursor:k===0?"default":"pointer"},children:""}),r.jsx("div",{style:{display:"flex",gap:4},children:Array.from({length:m}).map((I,z)=>r.jsx("span",{style:{width:6,height:6,borderRadius:"50%",backgroundColor:z===k?"#111827":"#d1d5db"}},z))}),r.jsx("button",{type:"button",onClick:()=>h(I=>Math.min(m-1,I+1)),disabled:k===m-1,style:{border:"none",background:"transparent",color:k===m-1?"#d1d5db":"#6b7280",fontSize:16,cursor:k===m-1?"default":"pointer"},children:""})]})]})})})(),Bl&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Gl,children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"400px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:"500"},children:""}),r.jsx("textarea",{value:Mn,onChange:a=>Js(a.target.value),placeholder:"...",style:{width:"100%",minHeight:"120px",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",lineHeight:"1.5",resize:"vertical",fontFamily:"inherit"},autoFocus:!0}),r.jsxs("div",{style:{marginTop:"12px",fontSize:"14px",color:"#666",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{children:""}),r.jsxs("span",{style:{fontWeight:"500",color:"#333"},children:['"',Ql(Mn),'"']}),r.jsx("span",{children:""})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:Gl,style:{padding:"8px 16px",border:"1px solid #e0e0e0",borderRadius:"6px",background:"white",cursor:"pointer",fontSize:"14px"},children:""}),r.jsx("button",{type:"button",onClick:Gh,disabled:!Mn.trim(),style:{padding:"8px 16px",border:"none",borderRadius:"6px",background:Mn.trim()?"#07c160":"#ccc",color:"white",cursor:Mn.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500"},children:""})]})]})}),Dl&&!Ie&&x&&"roleId"in x&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>os(!1),children:(()=>{var L;const a=It().find($=>$.id===x.roleId)??null,d=(a==null?void 0:a.wechatNickname)||(a==null?void 0:a.name)||x.name,m=((L=a==null?void 0:a.wechatSignature)==null?void 0:L.trim())||"",k=(a==null?void 0:a.gender)==="male"?Gd:(a==null?void 0:a.gender)==="female"?Xd:null;return r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",width:"86%",maxWidth:"420px",boxShadow:"0 12px 36px rgba(15, 23, 42, 0.28)",overflow:"hidden"},onClick:$=>$.stopPropagation(),children:[r.jsxs("div",{style:{padding:"18px 16px 14px",display:"flex",gap:"14px",alignItems:"center",borderBottom:"1px solid #f3f4f6"},children:[r.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"14px",overflow:"hidden",background:"#111827",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"18px"},children:a!=null&&a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:d,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("span",{children:d.charAt(0)})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("div",{style:{fontSize:"18px",fontWeight:700,color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d}),k&&r.jsx("img",{src:k,alt:(a==null?void 0:a.gender)==="male"?"":"",style:{width:"18px",height:"18px",flexShrink:0}})]}),r.jsx("div",{style:{marginTop:"6px",fontSize:"13px",color:"#6b7280",lineHeight:1.5,wordBreak:"break-word"},children:m})]})]}),r.jsxs("div",{style:{padding:"14px 16px 16px"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"6px"},children:""}),r.jsx("div",{style:{fontSize:"15px",color:"#111827",marginBottom:"12px"},children:d}),r.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"6px"},children:""}),r.jsx("div",{style:{fontSize:"15px",color:"#111827",lineHeight:1.6},children:m}),r.jsx("button",{type:"button",onClick:()=>os(!1),style:{marginTop:"16px",width:"100%",padding:"10px 0",borderRadius:"999px",border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:""})]})]})})()}),Ie&&x&&r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#f5f5f5",zIndex:1e3,display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{paddingTop:44,paddingBottom:8,paddingLeft:16,paddingRight:16,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f5f5f5",boxSizing:"border-box"},children:[r.jsx("button",{type:"button",onClick:y,style:{border:"none",background:"transparent",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:r.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:r.jsx("path",{d:"M15 6L9 12L15 18",fill:"none",stroke:"#111827",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#111827"},children:""}),r.jsx("div",{style:{width:32}})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",backgroundColor:"#f5f5f5"},children:[r.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"16px 18px",display:"flex",gap:16,borderBottom:"8px solid #f5f5f5"},children:[r.jsx("div",{style:{width:58,height:58,borderRadius:10,overflow:"hidden",backgroundColor:"#111827",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontSize:18},children:x.avatarUrl?r.jsx("img",{src:x.avatarUrl,alt:x.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("span",{children:x.avatarText})}),r.jsx("div",{style:{width:58,height:58,borderRadius:10,border:"1px dashed #d1d5db",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:26},children:"+"})]}),r.jsx("div",{style:{marginTop:0,backgroundColor:"#ffffff",borderTop:"0.5px solid #f3f4f6",borderBottom:"8px solid #f5f5f5"},children:r.jsxs("button",{type:"button",onClick:()=>{alert("")},style:{width:"100%",padding:"14px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:"transparent",cursor:"pointer",boxSizing:"border-box"},children:[r.jsx("span",{style:{fontSize:16,color:"#111827"},children:""}),r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:r.jsx("path",{d:"M10 6L16 12L10 18",fill:"none",stroke:"#c4c4c4",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),r.jsxs("div",{style:{marginTop:0,backgroundColor:"#ffffff",borderTop:"0.5px solid #f3f4f6",borderBottom:"8px solid #f5f5f5"},children:[r.jsxs("div",{style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"0.5px solid #f3f4f6",boxSizing:"border-box"},children:[r.jsx("span",{style:{fontSize:16,color:"#111827"},children:""}),r.jsxs("label",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:52,height:32,borderRadius:16,backgroundColor:Ke.mute?"#111827":"#e5e7eb",padding:3,boxSizing:"border-box",cursor:"pointer",transition:"background-color 0.2s ease"},children:[r.jsx("input",{type:"checkbox",checked:!!Ke.mute,onChange:a=>{const d={...Ke,mute:a.target.checked};Qs(d),nf(x.id,d)},style:{display:"none"}}),r.jsx("span",{style:{width:26,height:26,borderRadius:"999px",backgroundColor:"#ffffff",transform:Ke.mute?"translateX(20px)":"translateX(0)",transition:"transform 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})]})]}),r.jsxs("div",{style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box"},children:[r.jsx("span",{style:{fontSize:16,color:"#111827"},children:""}),r.jsxs("label",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:52,height:32,borderRadius:16,backgroundColor:Ke.pinned?"#111827":"#e5e7eb",padding:3,boxSizing:"border-box",cursor:"pointer",transition:"background-color 0.2s ease"},children:[r.jsx("input",{type:"checkbox",checked:!!Ke.pinned,onChange:a=>{const d={...Ke,pinned:a.target.checked};Qs(d),nf(x.id,d)},style:{display:"none"}}),r.jsx("span",{style:{width:26,height:26,borderRadius:"999px",backgroundColor:"#ffffff",transform:Ke.pinned?"translateX(20px)":"translateX(0)",transition:"transform 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})]})]})]}),r.jsx("div",{style:{marginTop:0,backgroundColor:"#ffffff",borderTop:"0.5px solid #f3f4f6",borderBottom:"8px solid #f5f5f5"},children:r.jsxs("button",{type:"button",onClick:()=>{alert("-")},style:{width:"100%",padding:"14px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",background:"transparent",cursor:"pointer",boxSizing:"border-box"},children:[r.jsx("span",{style:{fontSize:16,color:"#111827"},children:""}),r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:r.jsx("path",{d:"M10 6L16 12L10 18",fill:"none",stroke:"#c4c4c4",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),r.jsxs("div",{style:{marginTop:0,backgroundColor:"#ffffff",borderTop:"0.5px solid #f3f4f6",borderBottom:"0.5px solid #f3f4f6"},children:[r.jsx("button",{type:"button",onClick:()=>{!x||!window.confirm("")||(rn(x.id,[]),Vt(d=>d+1),y())},style:{width:"100%",padding:"14px 16px",border:"none",background:"transparent",textAlign:"left",color:"#ef4444",fontSize:16,boxSizing:"border-box"},children:""}),r.jsx("div",{style:{height:8,backgroundColor:"#f5f5f5"}}),r.jsx("button",{type:"button",onClick:()=>{alert("")},style:{width:"100%",padding:"14px 16px",border:"none",background:"transparent",textAlign:"left",color:"#111827",fontSize:16,boxSizing:"border-box"},children:""})]})]})]}),Gs&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.35)",zIndex:1200},onClick:()=>nn(!1),children:r.jsxs("div",{style:{position:"absolute",left:0,right:0,bottom:0,padding:"10px 10px 14px",boxSizing:"border-box"},onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:14,overflow:"hidden",boxShadow:"0 -10px 30px rgba(0,0,0,0.12)"},children:[r.jsxs("button",{type:"button",onClick:()=>{nn(!1),alert("")},style:{width:"100%",padding:"16px 0",border:"none",background:"transparent",fontSize:17,color:"#111827",display:"flex",alignItems:"center",justifyContent:"center",gap:10,cursor:"pointer"},children:[r.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",children:[r.jsx("path",{d:"M4.5 7.2C4.5 6.53726 5.03726 6 5.7 6H14.3C14.9627 6 15.5 6.53726 15.5 7.2V16.8C15.5 17.4627 14.9627 18 14.3 18H5.7C5.03726 18 4.5 17.4627 4.5 16.8V7.2Z",stroke:"#111827",strokeWidth:"1.6",strokeLinejoin:"round"}),r.jsx("path",{d:"M15.5 10L19.5 8V16L15.5 14",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}),""]}),r.jsx("div",{style:{height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("button",{type:"button",onClick:()=>{nn(!1),alert("")},style:{width:"100%",padding:"16px 0",border:"none",background:"transparent",fontSize:17,color:"#111827",display:"flex",alignItems:"center",justifyContent:"center",gap:10,cursor:"pointer"},children:[r.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:r.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",children:r.jsx("path",{d:"M2.25 6.75c0 8.284 6.716 15 15 15 .966 0 1.75-.784 1.75-1.75v-2.943a1.25 1.25 0 0 0-.915-1.2l-3.108-.777a1.25 1.25 0 0 0-1.172.326l-1.21 1.21a11.048 11.048 0 0 1-4.845-4.845l1.21-1.21a1.25 1.25 0 0 0 .326-1.172L8.943 3.665A1.25 1.25 0 0 0 7.743 2.75H4.8A1.75 1.75 0 0 0 3.05 4.5v2.25Z",fill:"none",stroke:"#111827",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),""]})]}),r.jsx("div",{style:{height:10}}),r.jsx("button",{type:"button",onClick:()=>nn(!1),style:{width:"100%",backgroundColor:"#ffffff",border:"none",borderRadius:14,padding:"16px 0",fontSize:17,color:"#111827",cursor:"pointer",boxShadow:"0 -10px 30px rgba(0,0,0,0.08)"},children:""})]})}),ui&&x&&r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#f5f5f5",zIndex:1200,display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{paddingTop:56,paddingBottom:8,paddingLeft:16,paddingRight:16,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f5f5f5",boxSizing:"border-box"},children:[r.jsx("button",{type:"button",onClick:()=>{as(!1),Tt(null)},style:{border:"none",background:"transparent",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:r.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:r.jsx("path",{d:"M15 6L9 12L15 18",fill:"none",stroke:"#111827",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#111827"},children:""}),r.jsx("button",{type:"button",onClick:()=>alert(""),style:{border:"none",background:"transparent",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:32},"aria-label":"",title:"",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:[r.jsx("circle",{cx:"6",cy:"12",r:"1.5",fill:"#111827"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#111827"}),r.jsx("circle",{cx:"18",cy:"12",r:"1.5",fill:"#111827"})]})})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"14px 16px 0",boxSizing:"border-box"},children:(()=>{const a=Number(Qn||"0"),d=Number.isFinite(a)?a:0,m=(Math.round(d*100)/100).toFixed(2),k=d>=.01&&d<=200,L=Qn.trim().length>0,$=(Qn.trim()||"0.00").replace(/\s+/g,""),I=Math.min(14,Math.max(5,$.length+2)),z={backgroundColor:"#ffffff",borderRadius:12,overflow:"hidden",border:"1px solid #f0f0f0"},C={padding:"16px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12};return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{...z,marginBottom:12},children:r.jsxs("div",{style:C,children:[r.jsx("div",{style:{fontSize:18,fontWeight:500,color:"#111827"},children:""}),r.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:0},children:[r.jsx("span",{style:{fontSize:18,fontWeight:500,color:L?"#111827":"#9ca3af"},children:""}),r.jsx("input",{type:"text",inputMode:"decimal",value:Qn,onChange:q=>{let D=q.target.value??"";D=D.replace(/[^\d.]/g,"");const W=D.indexOf(".");if(W!==-1){D=D.slice(0,W+1)+D.slice(W+1).replace(/\./g,"");const[se,de=""]=D.split(".");D=`${se}.${de.slice(0,2)}`}D.length>12&&(D=D.slice(0,12)),Xs(D),Tt(null)},placeholder:"0.00",style:{width:`${I}ch`,border:"none",outline:"none",background:"transparent",textAlign:"left",fontSize:26,fontWeight:500,color:L?"#111827":"#9ca3af",padding:0,margin:0,fontVariantNumeric:"tabular-nums"}})]})]})}),r.jsx("div",{style:{...z,marginBottom:12},children:r.jsxs("div",{style:C,children:[r.jsx("input",{type:"text",maxLength:25,value:Zs,onChange:q=>qs(q.target.value),placeholder:"",style:{flex:1,border:"none",outline:"none",fontSize:18,color:"#111827",background:"transparent"}}),r.jsx("button",{type:"button",onClick:()=>alert(""),style:{border:"none",background:"transparent",padding:6,cursor:"pointer",color:"#6b7280"},"aria-label":"",title:"",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",children:[r.jsx("circle",{cx:"10.5",cy:"10.5",r:"7.1",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("path",{d:"M8.2 9.8H9.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M11.4 9.8H12.8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M7.9 12.6C8.7 13.7 9.6 14.2 10.5 14.2C11.4 14.2 12.3 13.7 13.1 12.6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M18.3 15.6V20.2",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M16 17.9H20.6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})}),r.jsxs("div",{style:{...z,marginBottom:18},children:[r.jsxs("button",{type:"button",onClick:()=>alert(""),style:{...C,width:"100%",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#111827"},children:""}),r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:r.jsx("path",{d:"M10 6L16 12L10 18",fill:"none",stroke:"#c4c4c4",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r.jsx("div",{style:{height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{...C,color:"#9ca3af"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",children:[r.jsx("rect",{x:"4.5",y:"6.5",width:"15",height:"12",rx:"2",stroke:"#ef4444",strokeWidth:"1.4"}),r.jsx("path",{d:"M7 10.5C9 12 10.5 12.6 12 12.6C13.5 12.6 15 12 17 10.5",stroke:"#ef4444",strokeWidth:"1.2",strokeLinecap:"round"})]}),r.jsx("span",{style:{fontSize:16},children:""})]}),r.jsx("div",{})]})]}),r.jsxs("div",{style:{textAlign:"center",marginTop:6,marginBottom:18},children:[r.jsxs("div",{style:{fontSize:54,fontWeight:800,color:"#111827"},children:[" ",m]}),Ge&&r.jsx("div",{style:{marginTop:6,fontSize:12,color:"#b91c1c"},children:Ge})]}),r.jsx("div",{style:{padding:"0 50px",boxSizing:"border-box"},children:r.jsx("button",{type:"button",onClick:()=>{if(!k){d<.01?Tt(" 0.01 "):d>200?Tt(" 200 "):Tt("");return}b()},style:{width:"100%",padding:"12px 0",borderRadius:8,border:"none",backgroundColor:k?"#FA5151":"#fca5a5",color:"#ffffff",fontSize:18,fontWeight:700,cursor:"pointer"},children:""})}),r.jsx("div",{style:{textAlign:"center",marginTop:26,color:"#9ca3af",fontSize:14},children:""})]})})()}),r.jsx("div",{style:{height:18}})]}),Ne&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},onClick:()=>B(!1),children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px 18px 16px",width:"78%",maxWidth:"360px",boxShadow:"0 10px 30px rgba(15, 23, 42, 0.25)"},onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{style:{marginBottom:"10px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#111827",marginBottom:"6px"},children:" API"}),r.jsx("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6},children:" AI  >  > API "})]}),r.jsx("button",{type:"button",onClick:()=>{B(!1),t&&t()},style:{width:"100%",padding:"9px 0",borderRadius:"999px",border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:" API"})]})}),ie&&G&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1050},onClick:()=>he(!1),children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"18px 18px 14px",width:"82%",maxWidth:"380px",boxShadow:"0 10px 30px rgba(15, 23, 42, 0.25)"},onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#111827",marginBottom:"4px",textAlign:"center"},children:""}),r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.7,maxHeight:220,overflowY:"auto",paddingRight:2},children:[r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.name||""})]}),r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.gender==="male"?"":G.gender==="female"?"":G.gender==="other"?" / ":""})]}),G.intro&&r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.intro})]}),G.tags&&r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.tags})]}),G.wechatId&&r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.wechatId})]}),G.phoneNumber&&r.jsxs("div",{style:{marginBottom:4},children:[r.jsx("span",{style:{fontWeight:500},children:""}),r.jsx("span",{children:G.phoneNumber})]}),!G.intro&&!G.tags&&!G.wechatId&&!G.phoneNumber&&r.jsx("div",{style:{marginTop:4,color:"#9ca3af"},children:""})]})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:4},children:[r.jsx("button",{type:"button",onClick:()=>{he(!1),x&&"roleId"in x?Se(x.roleId):Se(null),i("story")},style:{width:"100%",padding:"8px 0",borderRadius:"999px",border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:""}),r.jsx("button",{type:"button",onClick:()=>{he(!1),alert("")},style:{width:"100%",padding:"7px 0",borderRadius:"999px",border:"none",backgroundColor:"transparent",color:"#4b5563",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:""})]})]})}),Ye&&x&&!Nn&&Ye.from!=="self"&&r.jsx("div",{className:"lumi-redpacket-overlay",onClick:()=>{St(null),pn(!1),di(!1)},children:r.jsxs("div",{className:`lumi-redpacket-container ${Nn?"lumi-redpacket-opened":""}`,onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"lumi-redpacket-header",children:[r.jsxs("div",{className:"lumi-redpacket-header-top",children:[r.jsx("div",{className:"lumi-redpacket-avatar",children:Ye.from==="self"?tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn}):x.avatarUrl?r.jsx("img",{src:x.avatarUrl,alt:x.name}):r.jsx("span",{children:x.avatarText})}),r.jsx("div",{className:"lumi-redpacket-sender-name",children:Ye.from==="self"?`${Ct}`:`${x.name}`})]}),!Nn&&r.jsx("div",{className:"lumi-redpacket-note",children:Ye.redPacketNote||""})]}),r.jsx("div",{className:"lumi-redpacket-open-area",children:r.jsx("button",{type:"button",className:`lumi-redpacket-coin ${Cu?"lumi-redpacket-coin-spinning":""}`,onClick:()=>{Cu||(di(!0),window.setTimeout(()=>{pn(!0)},1200))},children:r.jsx("span",{className:"lumi-redpacket-coin-symbol",children:""})})})]})}),Ye&&x&&Nn&&r.jsxs("div",{className:"lumi-redpacket-detail-page",children:[r.jsx("div",{className:"lumi-redpacket-detail-top",children:r.jsxs("div",{className:"lumi-redpacket-detail-nav",children:[r.jsx("button",{type:"button",className:"lumi-redpacket-detail-back",onClick:()=>{St(null),pn(!1),di(!1),Kl(!1),eo(!1)},children:""}),r.jsx("div",{className:"lumi-redpacket-detail-nav-title"}),r.jsx("button",{type:"button",className:"lumi-redpacket-detail-nav-more",onClick:()=>{Kl(!0),eo(!1),Yt.length>0?fi(Yt[0]):fi(new Date().getFullYear())},children:""})]})}),r.jsx("div",{className:"lumi-redpacket-detail-main",children:Ye.from==="self"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lumi-redpacket-detail-sender-row",children:[r.jsx("div",{className:"lumi-redpacket-detail-avatar",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})}),r.jsxs("div",{className:"lumi-redpacket-detail-sender-name",children:[Ct,""]})]}),r.jsx("div",{className:"lumi-redpacket-detail-note-line",children:Ye.redPacketNote||""}),typeof Ye.redPacketAmount=="number"&&r.jsxs("div",{className:"lumi-redpacket-detail-pending-line",children:[" ",Ye.redPacketAmount.toFixed(2)," "]}),r.jsx("div",{className:"lumi-redpacket-detail-pending-footer",children:" 24 "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lumi-redpacket-detail-sender-row",children:[r.jsx("div",{className:"lumi-redpacket-detail-avatar",children:x.avatarUrl?r.jsx("img",{src:x.avatarUrl,alt:x.name}):r.jsx("span",{children:x.avatarText})}),r.jsxs("div",{className:"lumi-redpacket-detail-sender-name",children:[x.name,""]})]}),r.jsx("div",{className:"lumi-redpacket-detail-note-line",children:Ye.redPacketNote||""}),typeof Ye.redPacketAmount=="number"&&r.jsxs("div",{className:"lumi-redpacket-detail-amount-block",children:[r.jsx("span",{className:"lumi-redpacket-detail-amount-value",children:Ye.redPacketAmount.toFixed(2)}),r.jsx("span",{className:"lumi-redpacket-detail-amount-unit",children:""})]}),r.jsx("div",{className:"lumi-redpacket-detail-tip",children:""}),r.jsx("div",{className:"lumi-redpacket-detail-record",children:r.jsxs("div",{className:"lumi-redpacket-detail-record-item",children:[r.jsx("div",{className:"lumi-redpacket-detail-record-avatar",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})}),r.jsxs("div",{className:"lumi-redpacket-detail-record-info",children:[r.jsx("div",{className:"lumi-redpacket-detail-record-name",children:Ct}),r.jsx("div",{className:"lumi-redpacket-detail-record-time",children:Ye.time||""})]}),typeof Ye.redPacketAmount=="number"&&r.jsxs("div",{className:"lumi-redpacket-detail-record-amount",children:[Ye.redPacketAmount.toFixed(2)," "]})]})})]})})]}),Th&&r.jsxs("div",{className:"lumi-redpacket-record-page",children:[r.jsx("div",{className:"lumi-redpacket-record-top",children:r.jsxs("div",{className:"lumi-redpacket-record-nav",children:[r.jsx("button",{type:"button",className:"lumi-redpacket-record-close",onClick:()=>{Kl(!1),eo(!1)},children:""}),r.jsx("div",{className:"lumi-redpacket-record-title",children:""}),r.jsx("button",{type:"button",className:"lumi-redpacket-record-nav-more",onClick:()=>{window.alert("")},children:""})]})}),r.jsxs("div",{className:"lumi-redpacket-record-main",children:[r.jsxs("div",{className:"lumi-redpacket-record-summary",children:[r.jsxs("div",{className:"lumi-redpacket-record-header-row",children:[r.jsxs("div",{className:"lumi-redpacket-record-sender",children:[r.jsx("div",{className:"lumi-redpacket-detail-avatar",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})}),r.jsxs("div",{className:"lumi-redpacket-record-sender-one-line",children:[Ct,"  "]})]}),r.jsxs("div",{className:"lumi-redpacket-record-year-wrapper",children:[r.jsxs("button",{type:"button",className:"lumi-redpacket-record-year-btn",onClick:()=>{!Yt||Yt.length<=1||eo(a=>!a)},children:[Lr??Yt[0]," ",Yt.length>1&&r.jsx("span",{className:"lumi-redpacket-record-year-arrow",children:""})]}),zh&&Yt.length>1&&r.jsx("div",{className:"lumi-redpacket-record-year-dropdown",children:Yt.map(a=>r.jsxs("button",{type:"button",className:"lumi-redpacket-record-year-option",onClick:()=>{fi(a),eo(!1)},children:[a," "]},a))})]})]}),r.jsx("div",{className:"lumi-redpacket-record-summary-amount",children:Wh.toFixed(2)}),r.jsxs("div",{className:"lumi-redpacket-record-summary-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lumi-redpacket-record-summary-number",children:Oh}),r.jsx("div",{children:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"lumi-redpacket-record-summary-number",children:Uh}),r.jsx("div",{children:""})]})]})]}),r.jsx("div",{className:"lumi-redpacket-record-list",children:bu.length===0?r.jsx("div",{className:"lumi-redpacket-record-empty",children:""}):bu.map(a=>{const d=new Date(a.timestamp),m=`${d.getMonth()+1}`.padStart(2,"0"),k=`${d.getDate()}`.padStart(2,"0"),L=`${m}${k}`;return r.jsxs("div",{className:"lumi-redpacket-detail-record-item",style:{paddingLeft:16,paddingRight:16},children:[r.jsx("div",{className:"lumi-redpacket-detail-record-avatar",children:a.roleAvatarUrl?r.jsx("img",{src:a.roleAvatarUrl,alt:a.roleName}):r.jsx("span",{children:a.roleAvatarText})}),r.jsxs("div",{className:"lumi-redpacket-detail-record-info",children:[r.jsx("div",{className:"lumi-redpacket-detail-record-name",children:a.roleName}),r.jsx("div",{className:"lumi-redpacket-detail-record-time",children:L})]}),r.jsxs("div",{className:"lumi-redpacket-detail-record-amount",children:[a.amount.toFixed(2)," "]})]},a.id)})})]})]}),le&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>pe(null),children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"18px 16px 14px",width:"78%",maxWidth:"360px",boxShadow:"0 10px 30px rgba(15, 23, 42, 0.25)"},onClick:a=>a.stopPropagation(),children:[r.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:"#111827",marginBottom:8,textAlign:"center"},children:""}),r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6,textAlign:"center",marginBottom:10},children:[le.roleName," ",r.jsx("br",{}),(()=>{const a=Math.max(0,le.untilTimestamp-ne);if(a<=0)return"";const d=Math.floor(a/1e3),m=Math.floor(d/3600),k=Math.floor(d%3600/60),L=d%60,$=String(m).padStart(2,"0"),I=String(k).padStart(2,"0"),z=String(L).padStart(2,"0");return` ${$}:${I}:${z} `})()]}),r.jsx("button",{type:"button",onClick:()=>pe(null),style:{width:"100%",padding:"8px 0",borderRadius:999,border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:""})]})}),ve&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>ge(null),children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px 18px 16px",width:"78%",maxWidth:"360px",boxShadow:"0 10px 30px rgba(15, 23, 42, 0.25)"},onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{style:{marginBottom:"10px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#111827",marginBottom:"6px"},children:""}),r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6},children:[ve.roleName," "]})]}),r.jsx("div",{style:{fontSize:"12px",color:"#6b7280",lineHeight:1.6,backgroundColor:"#f9fafb",borderRadius:"8px",padding:"8px 10px",marginBottom:"14px"},children:ve.reason}),r.jsx("button",{type:"button",onClick:()=>ge(null),style:{width:"100%",padding:"9px 0",borderRadius:"999px",border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:""})]})})]}):r.jsx("div",{className:"wechat-list",style:{paddingBottom:"110px"},children:rs.map(a=>r.jsxs("button",{type:"button",className:"wechat-conv",onClick:()=>s(a.id),children:[r.jsx("div",{className:"wechat-conv-avatar",children:a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name}):r.jsx("span",{children:a.avatarText})}),r.jsxs("div",{className:"wechat-conv-main",children:[r.jsxs("div",{className:"wechat-conv-top",children:[r.jsx("span",{className:"wechat-conv-name",children:a.name}),r.jsx("span",{className:"wechat-conv-time",children:a.time})]}),r.jsxs("div",{className:"wechat-conv-bottom",children:[r.jsx("span",{className:"wechat-conv-preview",children:a.lastMessage}),a.unread>0&&r.jsx("span",{className:"wechat-conv-unread"})]})]})]},a.id))}):o==="contacts"?ht==="profile"&&tn?(()=>{var D,W;const d=It().find(se=>se.id===tn)??null;if(!d)return r.jsx("div",{className:"wechat-contacts",style:{paddingBottom:"110px"},children:r.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"14px"},children:""})});const k=mn().find(se=>se.roleId===d.id)??null,L=((D=k==null?void 0:k.remark)==null?void 0:D.trim())||"",$=d.wechatNickname||d.name,I=L||$,z=d.wechatId||"",C=((W=d.region)==null?void 0:W.trim())||null,q=d.gender==="male"?Gd:d.gender==="female"?Xd:null;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#ffffff"},children:[r.jsxs("div",{style:{padding:"28px 18px 20px",display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px solid #f3f4f6"},children:[r.jsx("div",{style:{width:"76px",height:"76px",borderRadius:"16px",overflow:"hidden",backgroundColor:"#111827",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"14px",color:"#ffffff",fontSize:"18px",flexShrink:0},children:d.avatarUrl?r.jsx("img",{src:d.avatarUrl,alt:I,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("span",{children:I.charAt(0)})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[r.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I}),q&&r.jsx("img",{src:q,alt:d.gender==="male"?"":"",style:{width:"18px",height:"18px",flexShrink:0}})]}),L&&r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6,marginBottom:2},children:["",$]}),r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6,marginBottom:C?2:0},children:["",z]}),C&&r.jsxs("div",{style:{fontSize:"13px",color:"#4b5563",lineHeight:1.6},children:["",C]})]})]}),r.jsxs("div",{style:{padding:"20px 18px 14px",borderBottom:"1px solid #f3f4f6"},children:[r.jsx("div",{style:{fontSize:"15px",color:"#111827",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontSize:"13px",color:"#9ca3af"},children:""})]}),r.jsxs("div",{style:{padding:"20px 18px 0",borderBottom:"1px solid #f3f4f6"},children:[r.jsx("div",{style:{fontSize:"15px",color:"#111827",marginBottom:"10px"},children:""}),r.jsx("div",{style:{width:"70px",height:"70px",backgroundColor:"#f3f4f6",borderRadius:"6px"}}),r.jsx("div",{style:{height:"10px"}})]}),r.jsxs("div",{style:{padding:"22px 20px 32px",backgroundColor:"#ffffff"},children:[r.jsx("button",{type:"button",onClick:()=>{s(`chat-${d.id}`),i("chat")},style:{width:"100%",padding:"10px 0",borderRadius:"999px",border:"none",backgroundColor:"#111827",color:"#ffffff",fontSize:"15px",fontWeight:500,marginBottom:"10px",cursor:"pointer"},children:""}),r.jsx("button",{type:"button",disabled:!0,style:{width:"100%",padding:"9px 0",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#9ca3af",fontSize:"14px",fontWeight:500},children:""})]})]})})():ht==="settings"&&tn?(()=>{var te;const a=mn(),d=It(),m=a.find(re=>re.roleId===tn)??null,k=d.find(re=>re.id===tn)??null;if(!m||!k)return r.jsx("div",{className:"wechat-contacts",style:{paddingBottom:"110px"},children:r.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"14px"},children:""})});const L=re=>{const Re={...m,...re};Ia(Re),ii(Ce=>Ce+1)},$=()=>{if(window.confirm("")){try{const re=mn().filter(Ce=>Ce.roleId!==tn);window.localStorage.setItem(ku,JSON.stringify(re));const Re=`chat-${tn}`;window.localStorage.removeItem(`${Nu}${Re}`)}catch(re){console.error(":",re)}fn("list"),is(null),s(null)}},I=m.remark??"",z=m.permission,C=!!m.starred,q=!!m.blocked,D=0,W=k.gender==="female"?"":"",se=((te=k.wechatSignature)==null?void 0:te.trim())||"",de=new Date(m.addedAt),Z=`${de.getFullYear()}  ${de.getMonth()+1} `;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#f3f4f6"},children:[r.jsx("div",{style:{marginTop:12}}),r.jsxs("div",{style:{backgroundColor:"#ffffff",borderTop:"1px solid #f3f4f6",borderBottom:"1px solid #f3f4f6"},children:[r.jsxs("button",{type:"button",onClick:()=>{const Re=(window.prompt("",I)??"").trim();L({remark:Re||void 0})},style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsx("span",{style:{fontSize:13,color:"#9ca3af"},children:I||""})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("button",{type:"button",onClick:()=>fn("permission"),style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsx("span",{style:{fontSize:13,color:"#9ca3af"},children:z==="all"?"":""})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:15,color:"#111827"},children:["",W,""]}),r.jsxs("span",{style:{fontSize:13,color:"#9ca3af"},children:[D," "]})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsx("span",{style:{fontSize:13,color:"#9ca3af",maxWidth:"60%",textAlign:"right",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:se})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsx("span",{style:{fontSize:13,color:"#9ca3af"},children:Z})]})]}),r.jsx("div",{style:{marginTop:12}}),r.jsxs("div",{style:{backgroundColor:"#ffffff",borderTop:"1px solid #f3f4f6",borderBottom:"1px solid #f3f4f6"},children:[r.jsxs("button",{type:"button",style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsx("span",{style:{fontSize:13,color:"#9ca3af"},children:""})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsxs("label",{style:{position:"relative",display:"inline-block",width:46,height:26},children:[r.jsx("input",{type:"checkbox",checked:C,onChange:re=>L({starred:re.target.checked}),style:{opacity:0,width:0,height:0}}),r.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:C?"#111827":"#d1d5db",borderRadius:999,transition:"0.2s"}}),r.jsx("span",{style:{position:"absolute",left:C?22:4,top:3,width:20,height:20,backgroundColor:"#ffffff",borderRadius:"50%",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",transition:"0.2s"}})]})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),r.jsxs("label",{style:{position:"relative",display:"inline-block",width:46,height:26},children:[r.jsx("input",{type:"checkbox",checked:q,onChange:re=>L({blocked:re.target.checked}),style:{opacity:0,width:0,height:0}}),r.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:q?"#111827":"#d1d5db",borderRadius:999,transition:"0.2s"}}),r.jsx("span",{style:{position:"absolute",left:q?22:4,top:3,width:20,height:20,backgroundColor:"#ffffff",borderRadius:"50%",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",transition:"0.2s"}})]})]})]}),r.jsx("div",{style:{marginTop:12}}),r.jsx("div",{style:{backgroundColor:"#ffffff",borderTop:"1px solid #f3f4f6",borderBottom:"1px solid #f3f4f6"},children:r.jsx("button",{type:"button",onClick:()=>window.alert(""),style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""})})}),r.jsx("div",{style:{marginTop:32}}),r.jsx("button",{type:"button",onClick:$,style:{margin:"0 0 24px",alignSelf:"center",padding:"10px 24px",borderRadius:999,border:"none",background:"transparent",color:"#ef4444",fontSize:16,cursor:"pointer"},children:""})]})})():ht==="permission"&&tn?(()=>{const a=mn(),d=It(),m=a.find(D=>D.roleId===tn)??null,k=d.find(D=>D.id===tn)??null;if(!m||!k)return r.jsx("div",{className:"wechat-contacts",style:{paddingBottom:"110px"},children:r.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"14px"},children:""})});const L=m.permission,$=!!m.hideMyMoments,I=!!m.hideTheirMoments,z=k.gender==="female"?"":"",C=D=>{const W={...m,...D};Ia(W),ii(se=>se+1)},q=D=>{D!==L&&C(D==="chat-only"?{permission:"chat-only",hideMyMoments:void 0,hideTheirMoments:void 0}:{permission:"all",hideMyMoments:$,hideTheirMoments:I})};return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#f3f4f6"},children:[r.jsx("div",{style:{padding:"12px 18px 4px",fontSize:13,color:"#9ca3af"},children:""}),r.jsxs("div",{style:{backgroundColor:"#ffffff",borderTop:"1px solid #f3f4f6",borderBottom:"1px solid #f3f4f6"},children:[r.jsxs("button",{type:"button",onClick:()=>q("all"),style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),L==="all"&&r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",style:{color:"#111827"},children:r.jsx("polyline",{points:"5 13 10 18 19 7",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("button",{type:"button",onClick:()=>q("chat-only"),style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"transparent",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:15,color:"#111827"},children:""}),L==="chat-only"&&r.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",style:{color:"#111827"},children:r.jsx("polyline",{points:"5 13 10 18 19 7",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),L==="chat-only"&&r.jsx("div",{style:{padding:"10px 18px",fontSize:13,color:"#9ca3af"},children:""}),L==="all"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"12px 18px 4px",fontSize:13,color:"#9ca3af"},children:""}),r.jsxs("div",{style:{backgroundColor:"#ffffff",borderTop:"1px solid #f3f4f6",borderBottom:"1px solid #f3f4f6"},children:[r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:15,color:"#111827"},children:["",z,""]}),r.jsxs("label",{style:{position:"relative",display:"inline-block",width:46,height:26},children:[r.jsx("input",{type:"checkbox",checked:$,onChange:D=>C({hideMyMoments:D.target.checked}),style:{opacity:0,width:0,height:0}}),r.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:$?"#111827":"#d1d5db",borderRadius:999,transition:"0.2s"}}),r.jsx("span",{style:{position:"absolute",left:$?22:4,top:3,width:20,height:20,backgroundColor:"#ffffff",borderRadius:"50%",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",transition:"0.2s"}})]})]}),r.jsx("div",{style:{marginLeft:18,height:1,backgroundColor:"#f3f4f6"}}),r.jsxs("div",{style:{width:"100%",padding:"14px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:15,color:"#111827"},children:["",z]}),r.jsxs("label",{style:{position:"relative",display:"inline-block",width:46,height:26},children:[r.jsx("input",{type:"checkbox",checked:I,onChange:D=>C({hideTheirMoments:D.target.checked}),style:{opacity:0,width:0,height:0}}),r.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:I?"#111827":"#d1d5db",borderRadius:999,transition:"0.2s"}}),r.jsx("span",{style:{position:"absolute",left:I?22:4,top:3,width:20,height:20,backgroundColor:"#ffffff",borderRadius:"50%",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",transition:"0.2s"}})]})]})]})]})]})})():r.jsxs("div",{className:"wechat-contacts",style:{paddingBottom:"110px"},children:[r.jsxs("div",{className:"wechat-contacts-cards",children:[r.jsxs("button",{type:"button",className:"wechat-contacts-card",onClick:()=>{Kn("role"),dn(tr()),Vn(!0)},children:[r.jsx("div",{className:"wechat-contacts-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:[r.jsx("circle",{cx:"9",cy:"9",r:"3",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("path",{d:"M5.5 16C6.3 14.7 7.6 14 9 14C10.4 14 11.7 14.7 12.5 16",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("circle",{cx:"16",cy:"8",r:"1.1",fill:"#111827"}),r.jsx("path",{d:"M16 5.8V10.2",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M13.8 8H18.2",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:"wechat-contacts-card",children:[r.jsx("div",{className:"wechat-contacts-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:[r.jsx("path",{d:"M6 7.5C6 6.39543 6.89543 5.5 8 5.5H16C17.1046 5.5 18 6.39543 18 7.5V12C18 13.1046 17.1046 14 16 14H11L8 16.5V14H8C6.89543 14 6 13.1046 6 12V7.5Z",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"10",cy:"9.5",r:"0.9",fill:"#111827"}),r.jsx("circle",{cx:"14",cy:"9.5",r:"0.9",fill:"#111827"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:"wechat-contacts-card",children:[r.jsx("div",{className:"wechat-contacts-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"36",height:"36",children:[r.jsx("circle",{cx:"12",cy:"11.2",r:"2.6",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("circle",{cx:"7.2",cy:"9",r:"2.1",fill:"none",stroke:"#111827",strokeWidth:"1.3"}),r.jsx("circle",{cx:"16.8",cy:"9",r:"2.1",fill:"none",stroke:"#111827",strokeWidth:"1.3"}),r.jsx("path",{d:"M7.5 16.5C8.5 14.8 10 13.9 12 13.9C14 13.9 15.5 14.8 16.5 16.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M5.2 12.8C5.9 12 6.8 11.6 7.9 11.6",fill:"none",stroke:"#111827",strokeWidth:"1.1",strokeLinecap:"round"}),r.jsx("path",{d:"M16.1 11.6C17.2 11.6 18.1 12 18.8 12.8",fill:"none",stroke:"#111827",strokeWidth:"1.1",strokeLinecap:"round"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:"wechat-contacts-card",children:[r.jsx("div",{className:"wechat-contacts-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"40",height:"40",children:[r.jsx("path",{d:"M6 7C6 6.44772 6.44772 6 7 6H13.5L18 10.5L13.5 15H7C6.44772 15 6 14.5523 6 14V7Z",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"9.2",cy:"10.5",r:"1",fill:"#111827"})]})}),r.jsx("span",{children:""})]})]}),r.jsx("div",{className:"wechat-contacts-list",children:ri.length===0?r.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"14px"},children:'""'}):ri.map(a=>r.jsxs("div",{className:"wechat-contacts-section",children:[r.jsx("div",{className:"wechat-contacts-letter",children:a.letter}),a.contacts.map(({contact:d,role:m})=>{const k=d.remark||m.wechatNickname||m.name;return r.jsxs("button",{type:"button",className:"wechat-contacts-item",onClick:()=>{is(d.roleId),fn("profile")},children:[r.jsx("div",{className:"wechat-contacts-avatar",children:m.avatarUrl?r.jsx("img",{src:m.avatarUrl,alt:k}):r.jsx("span",{children:k.charAt(0)})}),r.jsx("span",{className:"wechat-contacts-name",children:k})]},d.roleId)})]},a.letter))})]}):o==="discover"?jt==="list"?r.jsxs("div",{className:"wechat-discover",style:{paddingBottom:"110px"},children:[r.jsxs("button",{type:"button",className:"wechat-discover-card",onClick:()=>F("moments"),children:[r.jsx("div",{className:"wechat-discover-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"none",stroke:"#111827",strokeWidth:"1.4"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.2",fill:"#111827"}),r.jsx("path",{d:"M12 5.5V4",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M17 7L18.2 5.8",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 12H20",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M17 17L18.2 18.2",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M12 18.5V20",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M7 17L5.8 18.2",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M5.5 12H4",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M7 7L5.8 5.8",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"})]})}),r.jsx("span",{className:"wechat-discover-text",children:""})]}),r.jsxs("button",{type:"button",className:"wechat-discover-card",children:[r.jsx("div",{className:"wechat-discover-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("path",{d:"M7 16.5V11.5C7 8.5 8.8 6 12 6C15.2 6 17 8.5 17 11.5V16.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M5.5 16.5C4.7 16.5 4 15.8 4 15V14C4 13.2 4.7 12.5 5.5 12.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 16.5C19.3 16.5 20 15.8 20 15V14C20 13.2 19.3 12.5 18.5 12.5",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"}),r.jsx("circle",{cx:"10",cy:"17.5",r:"1",fill:"#111827"}),r.jsx("circle",{cx:"14",cy:"17.5",r:"1",fill:"#111827"})]})}),r.jsx("span",{className:"wechat-discover-text",children:""})]})]}):r.jsxs("div",{className:"wechat-moments",children:[r.jsxs("div",{className:"wechat-moments-hero",children:[r.jsx("div",{className:"wechat-moments-bg"}),r.jsx("div",{className:"wechat-moments-hero-name",children:""}),r.jsx("div",{className:"wechat-moments-hero-avatar",children:r.jsx("span",{children:"A"})})]}),r.jsxs("div",{ref:ce,className:"wechat-moments-list",onScroll:cm,children:[r.jsxs("div",{className:"wechat-moment-item",children:[r.jsx("div",{className:"wechat-moment-avatar",children:r.jsx("span",{children:""})}),r.jsxs("div",{className:"wechat-moment-main",children:[r.jsx("div",{className:"wechat-moment-name",children:""}),r.jsx("div",{className:"wechat-moment-text",children:" AI "}),r.jsxs("div",{className:"wechat-moment-image-row",children:[r.jsx("div",{className:"wechat-moment-image"}),r.jsx("div",{className:"wechat-moment-image"}),r.jsx("div",{className:"wechat-moment-image"})]}),r.jsxs("div",{className:"wechat-moment-meta",children:[r.jsx("span",{className:"wechat-moment-time",children:"1 "}),r.jsx("span",{className:"wechat-moment-actions",children:""})]})]})]}),r.jsxs("div",{className:"wechat-moment-item",children:[r.jsx("div",{className:"wechat-moment-avatar",children:r.jsx("span",{children:"B"})}),r.jsxs("div",{className:"wechat-moment-main",children:[r.jsx("div",{className:"wechat-moment-name",children:""}),r.jsx("div",{className:"wechat-moment-text",children:" + "}),r.jsxs("div",{className:"wechat-moment-meta",children:[r.jsx("span",{className:"wechat-moment-time",children:" 21:16"}),r.jsx("span",{className:"wechat-moment-actions",children:""})]})]})]})]})]}):o==="story"?r.jsx("div",{className:"wechat-story",style:{height:"100%",overflow:"auto"},children:r.jsx(u1,{onTitleChange:Pe,onHeaderActionsChange:Ae,onNavigateToAddFriend:()=>{i("contacts"),Vn(!0)},onReadModeChange:c,identityEditRoleId:be,onIdentityEditRoleHandled:()=>Se(null),onExitIdentityFromChat:()=>{Se(null),i("chat"),setTimeout(()=>{try{v()}catch{}},50)}})}):u?S==="profile"?r.jsx("div",{className:"wechat-settings",children:r.jsxs("div",{className:"wechat-settings-body wechat-profile-settings-body",children:[r.jsxs("div",{className:"wechat-profile-section",children:[r.jsxs("button",{type:"button",className:"wechat-profile-row wechat-profile-row-avatar",onClick:()=>$r("avatar"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("div",{className:"wechat-profile-avatar-thumb",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("name"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:f.nickname||""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("gender"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:f.gender==="male"?"":f.gender==="female"?"":""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("region"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:f.region||""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("wechatId"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsx("div",{className:"wechat-profile-value",children:r.jsx("span",{className:"wechat-profile-value-text",children:f.wechatId||"example_id"})})]})]}),r.jsxs("div",{className:"wechat-profile-section",children:[r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("poke"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:f.pokeText||""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("button",{type:"button",className:"wechat-profile-row",onClick:()=>$r("intro"),children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:f.intro||""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]})]}),r.jsx("div",{className:"wechat-profile-section",children:r.jsxs("button",{type:"button",className:"wechat-profile-row",children:[r.jsx("span",{className:"wechat-profile-label",children:""}),r.jsxs("div",{className:"wechat-profile-value",children:[r.jsx("span",{className:"wechat-profile-value-text",children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]})})]})}):S==="storage"?r.jsxs("div",{className:"wechat-settings",children:[r.jsxs("div",{className:"wechat-settings-header",children:[r.jsx("button",{type:"button",className:"wechat-settings-back",onClick:()=>E("list"),children:""}),r.jsx("div",{className:"wechat-settings-title",children:""})]}),r.jsxs("div",{className:"wechat-settings-body",children:[r.jsxs("div",{className:"wechat-settings-section",children:[r.jsxs("div",{style:{padding:"12px 16px",fontSize:13,color:"#6b7280"},children:[""," ",P.reduce((a,d)=>a+d.snapshotCount,0)," ",""]}),P.length===0?r.jsx("div",{style:{padding:"12px 16px",fontSize:14,color:"#9ca3af"},children:""}):P.map(a=>r.jsxs("button",{type:"button",className:"wechat-settings-item",onClick:()=>en(a.chatId),children:[r.jsxs("span",{children:[a.roleName||"",r.jsxs("span",{style:{display:"block",fontSize:12,color:"#6b7280",marginTop:2},children:["",a.snapshotCount,"   ",a.lastUpdatedAt]})]}),r.jsx("span",{style:{fontSize:13,color:"#ef4444"},children:""})]},a.chatId))]}),P.length>0&&r.jsx("div",{className:"wechat-settings-section",children:r.jsx("button",{type:"button",className:"wechat-settings-item",onClick:Pt,children:r.jsx("span",{style:{color:"#b91c1c"},children:""})})})]})]}):S==="notifications"?r.jsxs("div",{className:"wechat-settings",children:[r.jsxs("div",{className:"wechat-settings-header",children:[r.jsx("button",{type:"button",className:"wechat-settings-back",onClick:()=>E("list"),children:""}),r.jsx("div",{className:"wechat-settings-title",children:""})]}),r.jsxs("div",{className:"wechat-settings-body",children:[r.jsx("div",{className:"wechat-settings-section",children:r.jsxs("div",{className:"wechat-settings-item",children:[r.jsx("span",{children:""}),r.jsxs("label",{className:"wechat-friend-request-switch",style:{marginLeft:"auto"},children:[r.jsx("input",{type:"checkbox",checked:Le,disabled:!K||Qe,onChange:async a=>{if(!Qe){Mt(!0),X(null);try{if(a.target.checked){const d=await Jy();fe(d.ok),X(d.message)}else{const d=await Qy();d.ok&&fe(!1),X(d.message)}}finally{Mt(!1)}}}}),r.jsx("span",{className:"wechat-friend-request-switch-slider"})]})]})}),r.jsxs("div",{style:{padding:"12px 16px",fontSize:13,color:"#6b7280"},children:[!K&&r.jsx("div",{style:{marginBottom:8},children:" Web Push Chrome / Edge "}),r.jsx("div",{children:" "}),it&&r.jsx("div",{style:{marginTop:8,fontSize:12,color:"#4b5563"},children:it})]})]})]}):r.jsx("div",{className:"wechat-settings",children:r.jsxs("div",{className:"wechat-settings-body",children:[r.jsxs("div",{className:"wechat-settings-section",children:[r.jsxs("button",{type:"button",className:"wechat-settings-item",onClick:()=>E("profile"),children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]}),r.jsxs("button",{type:"button",className:"wechat-settings-item",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]}),r.jsxs("button",{type:"button",className:"wechat-settings-item",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsx("div",{className:"wechat-settings-section",children:r.jsxs("button",{type:"button",className:"wechat-settings-item",onClick:()=>E("notifications"),children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})}),r.jsxs("div",{className:"wechat-settings-section",children:[r.jsxs("button",{type:"button",className:"wechat-settings-item",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]}),r.jsxs("button",{type:"button",className:"wechat-settings-item",onClick:()=>E("storage"),children:[r.jsx("span",{children:""}),r.jsx("span",{className:"wechat-settings-item-arrow",children:""})]})]}),r.jsxs("div",{className:"wechat-settings-section",children:[r.jsxs("button",{type:"button",className:"wechat-settings-item",children:[r.jsx("span",{children:""}),r.jsxs("label",{className:"wechat-friend-request-switch",style:{marginLeft:"auto"},children:[r.jsx("input",{type:"checkbox",checked:H.autoSummaryEnabled,onChange:a=>V(d=>({...d,autoSummaryEnabled:a.target.checked}))}),r.jsx("span",{className:"wechat-friend-request-switch-slider"})]})]}),H.autoSummaryEnabled&&r.jsx("div",{style:{padding:"0 16px 12px",fontSize:13,color:"#6b7280"},children:r.jsxs("div",{children:["",r.jsx("input",{type:"number",min:1,max:20,value:H.summaryInterval,onChange:a=>{const d=a.target.value;if(d===""){V(L=>({...L,summaryInterval:L.summaryInterval}));return}const m=parseInt(d,10);if(Number.isNaN(m))return;const k=Math.max(1,Math.min(20,m));V(L=>({...L,summaryInterval:k}))},onBlur:a=>{let d=parseInt(a.target.value||"0",10);(Number.isNaN(d)||d<=0)&&(d=1);const m=Math.max(1,Math.min(20,d));V(k=>({...k,summaryInterval:m}))},style:{width:40,margin:"0 6px",padding:"2px 4px",fontSize:13,textAlign:"center"}})," 1 "]})})]})]})}):r.jsxs("div",{className:"wechat-me",style:{paddingBottom:"110px"},children:[r.jsxs("div",{className:"wechat-me-profile",children:[r.jsx("div",{className:"wechat-me-avatar",children:tt?r.jsx("img",{src:tt,alt:Ct}):r.jsx("span",{children:Pn})}),r.jsxs("div",{className:"wechat-me-info",children:[r.jsx("div",{className:"wechat-me-name",children:Ct}),r.jsxs("div",{className:"wechat-me-id",children:["",f.wechatId||"example_id"]})]})]}),r.jsx("div",{className:"wechat-me-section",children:r.jsxs("button",{type:"button",className:"wechat-me-item",children:[r.jsx("div",{className:"wechat-me-item-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",fill:"none",stroke:"#111827",strokeWidth:"1.6"}),r.jsx("path",{d:"M5 10H19",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("circle",{cx:"16",cy:"12.5",r:"0.9",fill:"#111827"})]})}),r.jsx("span",{className:"wechat-me-item-text",children:""})]})}),r.jsxs("div",{className:"wechat-me-section",children:[r.jsxs("button",{type:"button",className:"wechat-me-item",children:[r.jsx("div",{className:"wechat-me-item-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:r.jsx("path",{d:"M8 5H16C16.5523 5 17 5.44772 17 6V18L12 15.5L7 18V6C7 5.44772 7.44772 5 8 5Z",fill:"none",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.jsx("span",{className:"wechat-me-item-text",children:""})]}),r.jsxs("button",{type:"button",className:"wechat-me-item",children:[r.jsx("div",{className:"wechat-me-item-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"#111827",strokeWidth:"1.6"}),r.jsx("circle",{cx:"9.5",cy:"10",r:"0.8",fill:"#111827"}),r.jsx("circle",{cx:"14.5",cy:"10",r:"0.8",fill:"#111827"}),r.jsx("path",{d:"M9.2 14C9.8 14.7 10.8 15.2 12 15.2C13.2 15.2 14.2 14.7 14.8 14",fill:"none",stroke:"#111827",strokeWidth:"1.4",strokeLinecap:"round"})]})}),r.jsx("span",{className:"wechat-me-item-text",children:""})]})]}),r.jsx("div",{className:"wechat-me-section",children:r.jsxs("button",{type:"button",className:"wechat-me-item",onClick:()=>p(!0),children:[r.jsx("div",{className:"wechat-me-item-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"#111827",strokeWidth:"1.3"}),r.jsx("path",{d:"M12 7V5.5",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M12 18.5V17",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M7 12H5.5",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 12H17",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M15.5 8.5L16.6 7.4",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M7.4 16.6L8.5 15.5",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M8.5 8.5L7.4 7.4",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M16.6 16.6L15.5 15.5",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"1.2",fill:"#111827"})]})}),r.jsx("span",{className:"wechat-me-item-text",children:""})]})})]}),o==="me"&&u&&S==="profile"&&N&&r.jsx("div",{className:"wechat-profile-edit-overlay",children:r.jsxs("div",{className:"wechat-profile-edit-panel",children:[r.jsxs("div",{className:"wechat-profile-edit-header",children:[r.jsx("button",{type:"button",className:"wechat-profile-edit-cancel",onClick:()=>{M(null),R("")},children:""}),r.jsx("div",{className:"wechat-profile-edit-title",children:Dh(N)}),N!=="gender"&&r.jsx("button",{type:"button",className:"wechat-profile-edit-done",onClick:Fh,children:""})]}),N==="gender"?r.jsxs("div",{className:"wechat-profile-edit-gender-group",children:[r.jsx("button",{type:"button",className:`wechat-profile-edit-gender-btn ${f.gender==="male"?"active":""}`,onClick:()=>Yl("male"),children:""}),r.jsx("button",{type:"button",className:`wechat-profile-edit-gender-btn ${f.gender==="female"?"active":""}`,onClick:()=>Yl("female"),children:""}),r.jsx("button",{type:"button",className:`wechat-profile-edit-gender-btn ${!f.gender||f.gender==="other"?"active":""}`,onClick:()=>Yl("other"),children:""})]}):r.jsx("div",{className:"wechat-profile-edit-body",children:N==="avatar"?r.jsxs("div",{className:"wechat-profile-edit-avatar",children:[r.jsxs("div",{className:"wechat-profile-edit-avatar-top",children:[r.jsx("div",{className:"wechat-profile-edit-avatar-preview",children:T||tt?r.jsx("img",{src:T||tt,alt:""}):r.jsx("span",{children:Pn})}),r.jsx("div",{className:"wechat-profile-edit-avatar-text",children:" URL"})]}),r.jsxs("div",{className:"wechat-profile-edit-avatar-actions",children:[r.jsx("input",{className:"wechat-profile-edit-input",value:T,onChange:a=>R(a.target.value),placeholder:" URL"}),r.jsxs("label",{className:"wechat-profile-edit-avatar-upload-btn",children:["",r.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:Bh})]}),r.jsx("textarea",{className:"wechat-profile-edit-input wechat-profile-edit-textarea",style:{minHeight:64},value:ee,onChange:a=>w(a.target.value),placeholder:""})]})]}):N==="intro"?r.jsx("textarea",{className:"wechat-profile-edit-input wechat-profile-edit-textarea",value:T,onChange:a=>R(a.target.value),placeholder:""}):r.jsx("input",{className:"wechat-profile-edit-input",value:T,onChange:a=>R(a.target.value),placeholder:""})})]})}),!x&&!Zr&&!(o==="story"&&l)&&!(o==="contacts"&&(ht==="profile"||ht==="settings"||ht==="permission"))&&!(o==="me"&&u)&&r.jsxs("div",{className:"wechat-tabs",children:[r.jsxs("button",{type:"button",className:`wechat-tab ${o==="chat"?"wechat-tab-active":""}`,onClick:()=>no("chat"),children:[r.jsx("div",{className:"wechat-tab-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("path",{d:"M6 8.5C6 7.11929 7.11929 6 8.5 6H15C16.3807 6 17.5 7.11929 17.5 8.5V12C17.5 13.3807 16.3807 14.5 15 14.5H11.2L8.8 16.5V14.5H8.5C7.11929 14.5 6 13.3807 6 12V8.5Z",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"10",cy:"10",r:"0.9",fill:"currentColor"}),r.jsx("circle",{cx:"13.5",cy:"10",r:"0.9",fill:"currentColor"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:`wechat-tab ${o==="contacts"?"wechat-tab-active":""}`,onClick:()=>no("contacts"),children:[r.jsx("div",{className:"wechat-tab-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("rect",{x:"6.5",y:"4.5",width:"11",height:"15",rx:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("circle",{cx:"11",cy:"10",r:"1.7",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),r.jsx("path",{d:"M8.8 14C9.4 13 10.2 12.5 11 12.5C11.8 12.5 12.6 13 13.2 14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M14.2 8.3H16.2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),r.jsx("path",{d:"M14.2 10.6H16.2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),r.jsx("path",{d:"M14.2 12.9H16.2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:`wechat-tab ${o==="discover"?"wechat-tab-active":""}`,onClick:()=>no("discover"),children:[r.jsx("div",{className:"wechat-tab-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"currentColor",strokeWidth:"1.4"}),r.jsx("path",{d:"M10 10L15 9L14 14L9 15L10 10Z",fill:"none",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"0.9",fill:"currentColor"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:"wechat-tab",onClick:()=>no("story"),children:[r.jsx("div",{className:"wechat-tab-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("rect",{x:"6",y:"7",width:"12",height:"9",rx:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("path",{d:"M9 7L10 6H14L15 7",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M9 12H15",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("path",{d:"M9 15H12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}),r.jsx("span",{children:""})]}),r.jsxs("button",{type:"button",className:`wechat-tab ${o==="me"?"wechat-tab-active":""}`,onClick:()=>no("me"),children:[r.jsx("div",{className:"wechat-tab-icon",children:r.jsxs("svg",{viewBox:"0 0 24 24",width:"32",height:"32",children:[r.jsx("circle",{cx:"12",cy:"10",r:"2.6",fill:"none",stroke:"currentColor",strokeWidth:"1.6"}),r.jsx("path",{d:"M7.5 17C8.5 15.3 10.1 14.4 12 14.4C13.9 14.4 15.5 15.3 16.5 17",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"currentColor",strokeWidth:"1.4"})]})}),r.jsx("span",{children:""})]})]}),Hl&&r.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:120,display:"flex",justifyContent:"center",pointerEvents:"none"},children:r.jsxs("div",{style:{backgroundColor:"rgba(17,24,39,0.9)",color:"#f9fafb",padding:"8px 14px",borderRadius:999,fontSize:13,display:"flex",alignItems:"center",gap:8,boxShadow:"0 8px 20px rgba(15,23,42,0.4)",pointerEvents:"auto"},children:[r.jsx("span",{style:{width:14,height:14,borderRadius:"50%",border:"2px solid rgba(249,250,251,0.5)",borderTopColor:"#f9fafb",animation:"wechat-ai-spin 0.9s linear infinite"}}),r.jsx("span",{children:"AI "})]})})]})},$1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M24 26C24 23.7909 25.7909 22 28 22H36C38.2091 22 40 23.7909 40 26V30.5C40 32.7091 38.2091 34.5 36 34.5H33L29.5 37.5C28.6716 38.194 27.5 37.6036 27.5 36.54V34.5H28C25.7909 34.5 24 32.7091 24 30.5V26Z",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"29",cy:"28.5",r:"1.3",fill:"#111827"}),r.jsx("circle",{cx:"35",cy:"28.5",r:"1.3",fill:"#111827"})]}),R1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M23 25H41",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M23 32H41",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M23 39H41",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("circle",{cx:"28",cy:"25",r:"2",fill:"#111827"}),r.jsx("circle",{cx:"36",cy:"32",r:"2",fill:"#111827"}),r.jsx("circle",{cx:"30",cy:"39",r:"2",fill:"#111827"})]}),M1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M32 22C27.5817 22 24 25.5817 24 30C24 34.4183 27.5817 38 32 38C36.4183 38 40 34.4183 40 30C40 25.5817 36.4183 22 32 22Z",fill:"none",stroke:"#111827",strokeWidth:"2"}),r.jsx("path",{d:"M32 22C29.2386 22 27 25.5817 27 30C27 34.4183 29.2386 38 32 38",fill:"none",stroke:"#111827",strokeWidth:"2"}),r.jsx("path",{d:"M24 42H40",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]}),P1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M24 24H40L38.2 38H25.8L24 24Z",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M26 24L27 21.5H37L38 24",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M28 30H33",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M28 34H31",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M35 30L38 34L41 30",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),A1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M23 24L24.5 20.5H39",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M22 26H40L38.5 34.5H23.5L22 26Z",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"25",cy:"38.5",r:"2.2",fill:"#111827"}),r.jsx("circle",{cx:"37",cy:"38.5",r:"2.2",fill:"#111827"})]}),T1=()=>r.jsxs("svg",{viewBox:"0 0 64 64",width:"52",height:"52",children:[r.jsx("path",{d:"M23 36C23 31.5817 27.0294 28 32 28C36.9706 28 41 31.5817 41 36C41 38.7614 38.0899 40.5 32 40.5C25.9101 40.5 23 38.7614 23 36Z",fill:"none",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"32",cy:"35.2",r:"2.3",fill:"#111827"}),r.jsx("path",{d:"M38 24.5C36.5 23.7 34.7 23.7 33.2 24.5",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M41 22C38.8 20.6 36 20.4 33.7 21.4",stroke:"#111827",strokeWidth:"1.6",strokeLinecap:"round",opacity:"0.8"})]}),z1=()=>{const[e,t]=j.useState(null),n=j.useMemo(()=>{const i=new Date,l=p=>p<10?`0${p}`:`${p}`,c=`${l(i.getHours())}:${l(i.getMinutes())}`,u=i.toLocaleDateString("zh-CN",{month:"long",day:"numeric",weekday:"short"});return{time:c,date:u}},[]),s=i=>{i&&t(i)},o=()=>{t(null)};return r.jsx("div",{className:"phone-shell",children:r.jsxs("div",{className:"phone-inner",children:[r.jsxs("div",{className:"desktop",children:[r.jsxs("div",{className:"desktop-top",children:[r.jsx("div",{className:"desktop-time",children:n.time}),r.jsx("div",{className:"desktop-date",children:n.date})]}),r.jsxs("div",{className:"desktop-grid",children:[r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("ai"),children:[r.jsx("div",{className:"app-icon",children:r.jsx($1,{})}),r.jsx("span",{className:"app-label",children:""})]}),r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("weibo"),children:[r.jsx("div",{className:"app-icon",children:r.jsx(T1,{})}),r.jsx("span",{className:"app-label",children:""})]}),r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("waimai"),children:[r.jsx("div",{className:"app-icon",children:r.jsx(P1,{})}),r.jsx("span",{className:"app-label",children:""})]}),r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("taobao"),children:[r.jsx("div",{className:"app-icon",children:r.jsx(A1,{})}),r.jsx("span",{className:"app-label",children:""})]}),r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("api-settings"),children:[r.jsx("div",{className:"app-icon",children:r.jsx(R1,{})}),r.jsx("span",{className:"app-label",children:"API"})]}),r.jsxs("button",{type:"button",className:"app-icon-wrapper",onClick:()=>s("appearance"),children:[r.jsx("div",{className:"app-icon",children:r.jsx(M1,{})}),r.jsx("span",{className:"app-label",children:""})]})]})]}),e&&(e==="ai"?r.jsx("div",{className:"app-window app-window-full",children:r.jsx(L1,{onExit:o,onOpenApiSettings:()=>s("api-settings")})}):r.jsxs("div",{className:"app-window",children:[r.jsxs("div",{className:`app-header ${e==="api-settings"?"app-header-center":""}`,children:[r.jsxs("div",{children:[e==="api-settings"&&r.jsx("button",{type:"button",className:"app-back-left",onClick:o,children:"<"}),r.jsxs("div",{className:"app-title",children:[e==="weibo"&&"",e==="waimai"&&"",e==="taobao"&&"",e==="api-settings"&&"API ",e==="appearance"&&""]}),r.jsx("div",{className:"app-subtitle",children:e==="api-settings"?" AI Key ":""})]}),e!=="api-settings"&&r.jsx("button",{type:"button",className:"app-back",onClick:o,children:""})]}),e==="api-settings"?r.jsx(By,{}):r.jsxs("div",{className:"app-content-placeholder",children:[e==="weibo"&&" ",e==="waimai"&&" ",e==="taobao"&&" ",e==="appearance"&&"  /  /  "]})]}))]})})};La.createRoot(document.getElementById("root")).render(r.jsx(j.StrictMode,{children:r.jsx(z1,{})}));Qr()&&Ky().catch(e=>{console.error("Service Worker :",e)});
